(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();function e0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var em={exports:{}},so={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function t0(){if($v)return so;$v=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(l,c,d){var m=null;if(d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),"key"in c){d={};for(var f in c)f!=="key"&&(d[f]=c[f])}else d=c;return c=d.ref,{$$typeof:i,type:l,key:m,ref:c!==void 0?c:null,props:d}}return so.Fragment=t,so.jsx=n,so.jsxs=n,so}var Qv;function s0(){return Qv||(Qv=1,em.exports=t0()),em.exports}var e=s0(),tm={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function a0(){if(Yv)return qe;Yv=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),S=Symbol.iterator;function A(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,H={};function U(F,de,Te){this.props=F,this.context=de,this.refs=H,this.updater=Te||O}U.prototype.isReactComponent={},U.prototype.setState=function(F,de){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,de,"setState")},U.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function q(){}q.prototype=U.prototype;function Y(F,de,Te){this.props=F,this.context=de,this.refs=H,this.updater=Te||O}var P=Y.prototype=new q;P.constructor=Y,D(P,U.prototype),P.isPureReactComponent=!0;var Q=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function M(F,de,Te,G,B,ue){return Te=ue.ref,{$$typeof:i,type:F,key:de,ref:Te!==void 0?Te:null,props:ue}}function w(F,de){return M(F.type,de,void 0,void 0,void 0,F.props)}function b(F){return typeof F=="object"&&F!==null&&F.$$typeof===i}function E(F){var de={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Te){return de[Te]})}var k=/\/+/g;function V(F,de){return typeof F=="object"&&F!==null&&F.key!=null?E(""+F.key):de.toString(36)}function T(){}function ie(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(T,T):(F.status="pending",F.then(function(de){F.status==="pending"&&(F.status="fulfilled",F.value=de)},function(de){F.status==="pending"&&(F.status="rejected",F.reason=de)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function be(F,de,Te,G,B){var ue=typeof F;(ue==="undefined"||ue==="boolean")&&(F=null);var me=!1;if(F===null)me=!0;else switch(ue){case"bigint":case"string":case"number":me=!0;break;case"object":switch(F.$$typeof){case i:case t:me=!0;break;case j:return me=F._init,be(me(F._payload),de,Te,G,B)}}if(me)return B=B(F),me=G===""?"."+V(F,0):G,Q(B)?(Te="",me!=null&&(Te=me.replace(k,"$&/")+"/"),be(B,de,Te,"",function(ye){return ye})):B!=null&&(b(B)&&(B=w(B,Te+(B.key==null||F&&F.key===B.key?"":(""+B.key).replace(k,"$&/")+"/")+me)),de.push(B)),1;me=0;var we=G===""?".":G+":";if(Q(F))for(var K=0;K<F.length;K++)G=F[K],ue=we+V(G,K),me+=be(G,de,Te,ue,B);else if(K=A(F),typeof K=="function")for(F=K.call(F),K=0;!(G=F.next()).done;)G=G.value,ue=we+V(G,K++),me+=be(G,de,Te,ue,B);else if(ue==="object"){if(typeof F.then=="function")return be(ie(F),de,Te,G,B);throw de=String(F),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return me}function J(F,de,Te){if(F==null)return F;var G=[],B=0;return be(F,G,"","",function(ue){return de.call(Te,ue,B++)}),G}function fe(F){if(F._status===-1){var de=F._result;de=de(),de.then(function(Te){(F._status===0||F._status===-1)&&(F._status=1,F._result=Te)},function(Te){(F._status===0||F._status===-1)&&(F._status=2,F._result=Te)}),F._status===-1&&(F._status=0,F._result=de)}if(F._status===1)return F._result.default;throw F._result}var Ee=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function _e(){}return qe.Children={map:J,forEach:function(F,de,Te){J(F,function(){de.apply(this,arguments)},Te)},count:function(F){var de=0;return J(F,function(){de++}),de},toArray:function(F){return J(F,function(de){return de})||[]},only:function(F){if(!b(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},qe.Component=U,qe.Fragment=n,qe.Profiler=c,qe.PureComponent=Y,qe.StrictMode=l,qe.Suspense=y,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,qe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return se.H.useMemoCache(F)}},qe.cache=function(F){return function(){return F.apply(null,arguments)}},qe.cloneElement=function(F,de,Te){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var G=D({},F.props),B=F.key,ue=void 0;if(de!=null)for(me in de.ref!==void 0&&(ue=void 0),de.key!==void 0&&(B=""+de.key),de)!z.call(de,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&de.ref===void 0||(G[me]=de[me]);var me=arguments.length-2;if(me===1)G.children=Te;else if(1<me){for(var we=Array(me),K=0;K<me;K++)we[K]=arguments[K+2];G.children=we}return M(F.type,B,void 0,void 0,ue,G)},qe.createContext=function(F){return F={$$typeof:m,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:d,_context:F},F},qe.createElement=function(F,de,Te){var G,B={},ue=null;if(de!=null)for(G in de.key!==void 0&&(ue=""+de.key),de)z.call(de,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(B[G]=de[G]);var me=arguments.length-2;if(me===1)B.children=Te;else if(1<me){for(var we=Array(me),K=0;K<me;K++)we[K]=arguments[K+2];B.children=we}if(F&&F.defaultProps)for(G in me=F.defaultProps,me)B[G]===void 0&&(B[G]=me[G]);return M(F,ue,void 0,void 0,null,B)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(F){return{$$typeof:f,render:F}},qe.isValidElement=b,qe.lazy=function(F){return{$$typeof:j,_payload:{_status:-1,_result:F},_init:fe}},qe.memo=function(F,de){return{$$typeof:g,type:F,compare:de===void 0?null:de}},qe.startTransition=function(F){var de=se.T,Te={};se.T=Te;try{var G=F(),B=se.S;B!==null&&B(Te,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(_e,Ee)}catch(ue){Ee(ue)}finally{se.T=de}},qe.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},qe.use=function(F){return se.H.use(F)},qe.useActionState=function(F,de,Te){return se.H.useActionState(F,de,Te)},qe.useCallback=function(F,de){return se.H.useCallback(F,de)},qe.useContext=function(F){return se.H.useContext(F)},qe.useDebugValue=function(){},qe.useDeferredValue=function(F,de){return se.H.useDeferredValue(F,de)},qe.useEffect=function(F,de,Te){var G=se.H;if(typeof Te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return G.useEffect(F,de)},qe.useId=function(){return se.H.useId()},qe.useImperativeHandle=function(F,de,Te){return se.H.useImperativeHandle(F,de,Te)},qe.useInsertionEffect=function(F,de){return se.H.useInsertionEffect(F,de)},qe.useLayoutEffect=function(F,de){return se.H.useLayoutEffect(F,de)},qe.useMemo=function(F,de){return se.H.useMemo(F,de)},qe.useOptimistic=function(F,de){return se.H.useOptimistic(F,de)},qe.useReducer=function(F,de,Te){return se.H.useReducer(F,de,Te)},qe.useRef=function(F){return se.H.useRef(F)},qe.useState=function(F){return se.H.useState(F)},qe.useSyncExternalStore=function(F,de,Te){return se.H.useSyncExternalStore(F,de,Te)},qe.useTransition=function(){return se.H.useTransition()},qe.version="19.1.1",qe}var Kv;function Fm(){return Kv||(Kv=1,tm.exports=a0()),tm.exports}var I=Fm();const qm=e0(I);var sm={exports:{}},ao={},am={exports:{}},nm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function n0(){return Xv||(Xv=1,function(i){function t(J,fe){var Ee=J.length;J.push(fe);e:for(;0<Ee;){var _e=Ee-1>>>1,F=J[_e];if(0<c(F,fe))J[_e]=fe,J[Ee]=F,Ee=_e;else break e}}function n(J){return J.length===0?null:J[0]}function l(J){if(J.length===0)return null;var fe=J[0],Ee=J.pop();if(Ee!==fe){J[0]=Ee;e:for(var _e=0,F=J.length,de=F>>>1;_e<de;){var Te=2*(_e+1)-1,G=J[Te],B=Te+1,ue=J[B];if(0>c(G,Ee))B<F&&0>c(ue,G)?(J[_e]=ue,J[B]=Ee,_e=B):(J[_e]=G,J[Te]=Ee,_e=Te);else if(B<F&&0>c(ue,Ee))J[_e]=ue,J[B]=Ee,_e=B;else break e}}return fe}function c(J,fe){var Ee=J.sortIndex-fe.sortIndex;return Ee!==0?Ee:J.id-fe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var m=Date,f=m.now();i.unstable_now=function(){return m.now()-f}}var y=[],g=[],j=1,S=null,A=3,O=!1,D=!1,H=!1,U=!1,q=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function Q(J){for(var fe=n(g);fe!==null;){if(fe.callback===null)l(g);else if(fe.startTime<=J)l(g),fe.sortIndex=fe.expirationTime,t(y,fe);else break;fe=n(g)}}function se(J){if(H=!1,Q(J),!D)if(n(y)!==null)D=!0,z||(z=!0,V());else{var fe=n(g);fe!==null&&be(se,fe.startTime-J)}}var z=!1,M=-1,w=5,b=-1;function E(){return U?!0:!(i.unstable_now()-b<w)}function k(){if(U=!1,z){var J=i.unstable_now();b=J;var fe=!0;try{e:{D=!1,H&&(H=!1,Y(M),M=-1),O=!0;var Ee=A;try{t:{for(Q(J),S=n(y);S!==null&&!(S.expirationTime>J&&E());){var _e=S.callback;if(typeof _e=="function"){S.callback=null,A=S.priorityLevel;var F=_e(S.expirationTime<=J);if(J=i.unstable_now(),typeof F=="function"){S.callback=F,Q(J),fe=!0;break t}S===n(y)&&l(y),Q(J)}else l(y);S=n(y)}if(S!==null)fe=!0;else{var de=n(g);de!==null&&be(se,de.startTime-J),fe=!1}}break e}finally{S=null,A=Ee,O=!1}fe=void 0}}finally{fe?V():z=!1}}}var V;if(typeof P=="function")V=function(){P(k)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,ie=T.port2;T.port1.onmessage=k,V=function(){ie.postMessage(null)}}else V=function(){q(k,0)};function be(J,fe){M=q(function(){J(i.unstable_now())},fe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(J){switch(A){case 1:case 2:case 3:var fe=3;break;default:fe=A}var Ee=A;A=fe;try{return J()}finally{A=Ee}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(J,fe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ee=A;A=J;try{return fe()}finally{A=Ee}},i.unstable_scheduleCallback=function(J,fe,Ee){var _e=i.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?_e+Ee:_e):Ee=_e,J){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Ee+F,J={id:j++,callback:fe,priorityLevel:J,startTime:Ee,expirationTime:F,sortIndex:-1},Ee>_e?(J.sortIndex=Ee,t(g,J),n(y)===null&&J===n(g)&&(H?(Y(M),M=-1):H=!0,be(se,Ee-_e))):(J.sortIndex=F,t(y,J),D||O||(D=!0,z||(z=!0,V()))),J},i.unstable_shouldYield=E,i.unstable_wrapCallback=function(J){var fe=A;return function(){var Ee=A;A=fe;try{return J.apply(this,arguments)}finally{A=Ee}}}}(nm)),nm}var Wv;function i0(){return Wv||(Wv=1,am.exports=n0()),am.exports}var im={exports:{}},is={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function r0(){if(Zv)return is;Zv=1;var i=Fm();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)g+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(y,g,j){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:S==null?null:""+S,children:y,containerInfo:g,implementation:j}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return is.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,is.createPortal=function(y,g){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return d(y,g,null,j)},is.flushSync=function(y){var g=m.T,j=l.p;try{if(m.T=null,l.p=2,y)return y()}finally{m.T=g,l.p=j,l.d.f()}},is.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(y,g))},is.prefetchDNS=function(y){typeof y=="string"&&l.d.D(y)},is.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var j=g.as,S=f(j,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;j==="style"?l.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:O}):j==="script"&&l.d.X(y,{crossOrigin:S,integrity:A,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},is.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var j=f(g.as,g.crossOrigin);l.d.M(y,{crossOrigin:j,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(y)},is.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var j=g.as,S=f(j,g.crossOrigin);l.d.L(y,j,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},is.preloadModule=function(y,g){if(typeof y=="string")if(g){var j=f(g.as,g.crossOrigin);l.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:j,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(y)},is.requestFormReset=function(y){l.d.r(y)},is.unstable_batchedUpdates=function(y,g){return y(g)},is.useFormState=function(y,g,j){return m.H.useFormState(y,g,j)},is.useFormStatus=function(){return m.H.useHostTransitionStatus()},is.version="19.1.1",is}var Jv;function l0(){if(Jv)return im.exports;Jv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),im.exports=r0(),im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function o0(){if(ey)return ao;ey=1;var i=i0(),t=Fm(),n=l0();function l(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var a=s,r=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(r=a.return),s=a.return;while(s)}return a.tag===3?r:null}function m(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(d(s)!==s)throw Error(l(188))}function y(s){var a=s.alternate;if(!a){if(a=d(s),a===null)throw Error(l(188));return a!==s?null:s}for(var r=s,o=a;;){var h=r.return;if(h===null)break;var p=h.alternate;if(p===null){if(o=h.return,o!==null){r=o;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===r)return f(h),s;if(p===o)return f(h),a;p=p.sibling}throw Error(l(188))}if(r.return!==o.return)r=h,o=p;else{for(var N=!1,_=h.child;_;){if(_===r){N=!0,r=h,o=p;break}if(_===o){N=!0,o=h,r=p;break}_=_.sibling}if(!N){for(_=p.child;_;){if(_===r){N=!0,r=p,o=h;break}if(_===o){N=!0,o=p,r=h;break}_=_.sibling}if(!N)throw Error(l(189))}}if(r.alternate!==o)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var j=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),P=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var T=Symbol.for("react.client.reference");function ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===T?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case U:return"Profiler";case H:return"StrictMode";case se:return"Suspense";case z:return"SuspenseList";case b:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case P:return(s.displayName||"Context")+".Provider";case Y:return(s._context.displayName||"Context")+".Consumer";case Q:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return a=s.displayName||null,a!==null?a:ie(s.type)||"Memo";case w:a=s._payload,s=s._init;try{return ie(s(a))}catch{}}return null}var be=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},_e=[],F=-1;function de(s){return{current:s}}function Te(s){0>F||(s.current=_e[F],_e[F]=null,F--)}function G(s,a){F++,_e[F]=s.current,s.current=a}var B=de(null),ue=de(null),me=de(null),we=de(null);function K(s,a){switch(G(me,a),G(ue,s),G(B,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?jv(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=jv(a),s=Nv(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Te(B),G(B,s)}function ye(){Te(B),Te(ue),Te(me)}function oe(s){s.memoizedState!==null&&G(we,s);var a=B.current,r=Nv(a,s.type);a!==r&&(G(ue,s),G(B,r))}function R(s){ue.current===s&&(Te(B),Te(ue)),we.current===s&&(Te(we),Wl._currentValue=Ee)}var pe=Object.prototype.hasOwnProperty,De=i.unstable_scheduleCallback,Ne=i.unstable_cancelCallback,Se=i.unstable_shouldYield,ee=i.unstable_requestPaint,Re=i.unstable_now,ce=i.unstable_getCurrentPriorityLevel,le=i.unstable_ImmediatePriority,Ve=i.unstable_UserBlockingPriority,nt=i.unstable_NormalPriority,ps=i.unstable_LowPriority,Js=i.unstable_IdlePriority,Hs=i.log,Vi=i.unstable_setDisableYieldValue,vt=null,st=null;function cs(s){if(typeof Hs=="function"&&Vi(s),st&&typeof st.setStrictMode=="function")try{st.setStrictMode(vt,s)}catch{}}var qt=Math.clz32?Math.clz32:Yn,Qn=Math.log,Bi=Math.LN2;function Yn(s){return s>>>=0,s===0?32:31-(Qn(s)/Bi|0)|0}var Kn=256,Xn=4194304;function Gs(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Li(s,a,r){var o=s.pendingLanes;if(o===0)return 0;var h=0,p=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var _=o&134217727;return _!==0?(o=_&~p,o!==0?h=Gs(o):(N&=_,N!==0?h=Gs(N):r||(r=_&~s,r!==0&&(h=Gs(r))))):(_=o&~p,_!==0?h=Gs(_):N!==0?h=Gs(N):r||(r=o&~s,r!==0&&(h=Gs(r)))),h===0?0:a!==0&&a!==h&&(a&p)===0&&(p=h&-h,r=a&-a,p>=r||p===32&&(r&4194048)!==0)?a:h}function Wn(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Wr(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(){var s=Kn;return Kn<<=1,(Kn&4194048)===0&&(Kn=256),s}function Jr(){var s=Xn;return Xn<<=1,(Xn&62914560)===0&&(Xn=4194304),s}function Aa(s){for(var a=[],r=0;31>r;r++)a.push(s);return a}function Ea(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function el(s,a,r,o,h,p){var N=s.pendingLanes;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=r,s.entangledLanes&=r,s.errorRecoveryDisabledLanes&=r,s.shellSuspendCounter=0;var _=s.entanglements,L=s.expirationTimes,te=s.hiddenUpdates;for(r=N&~r;0<r;){var he=31-qt(r),xe=1<<he;_[he]=0,L[he]=-1;var ae=te[he];if(ae!==null)for(te[he]=null,he=0;he<ae.length;he++){var ne=ae[he];ne!==null&&(ne.lane&=-536870913)}r&=~xe}o!==0&&ea(s,o,0),p!==0&&h===0&&s.tag!==0&&(s.suspendedLanes|=p&~(N&~a))}function ea(s,a,r){s.pendingLanes|=a,s.suspendedLanes&=~a;var o=31-qt(a);s.entangledLanes|=a,s.entanglements[o]=s.entanglements[o]|1073741824|r&4194090}function tl(s,a){var r=s.entangledLanes|=a;for(s=s.entanglements;r;){var o=31-qt(r),h=1<<o;h&a|s[o]&a&&(s[o]|=a),r&=~h}}function rn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ui(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ln(){var s=fe.p;return s!==0?s:(s=window.event,s===void 0?32:Uv(s.type))}function Oo(s,a){var r=fe.p;try{return fe.p=s,a()}finally{fe.p=r}}var yt=Math.random().toString(36).slice(2),Vt="__reactFiber$"+yt,wt="__reactProps$"+yt,ws="__reactContainer$"+yt,sl="__reactEvents$"+yt,au="__reactListeners$"+yt,on="__reactHandles$"+yt,Vo="__reactResources$"+yt,Zn="__reactMarker$"+yt;function cn(s){delete s[Vt],delete s[wt],delete s[sl],delete s[au],delete s[on]}function Ca(s){var a=s[Vt];if(a)return a;for(var r=s.parentNode;r;){if(a=r[ws]||r[Vt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(s=Sv(s);s!==null;){if(r=s[Vt])return r;s=Sv(s)}return a}s=r,r=s.parentNode}return null}function ta(s){if(s=s[Vt]||s[ws]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function sa(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(l(33))}function ds(s){var a=s[Vo];return a||(a=s[Vo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function St(s){s[Zn]=!0}var al=new Set,zi={};function $s(s,a){wa(s,a),wa(s+"Capture",a)}function wa(s,a){for(zi[s]=a,s=0;s<a.length;s++)al.add(a[s])}var Bo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lo={},Jn={};function Uo(s){return pe.call(Jn,s)?!0:pe.call(Lo,s)?!1:Bo.test(s)?Jn[s]=!0:(Lo[s]=!0,!1)}function dn(s,a,r){if(Uo(a))if(r===null)s.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+r)}}function aa(s,a,r){if(r===null)s.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+r)}}function Xt(s,a,r,o){if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttributeNS(a,r,""+o)}}var ei,zo;function ka(s){if(ei===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);ei=a&&a[1]||"",zo=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ei+s+zo}var Fi=!1;function qi(s,a){if(!s||Fi)return"";Fi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ne){var ae=ne}Reflect.construct(s,[],xe)}else{try{xe.call()}catch(ne){ae=ne}s.call(xe.prototype)}}else{try{throw Error()}catch(ne){ae=ne}(xe=s())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ne){if(ne&&ae&&typeof ne.stack=="string")return[ne.stack,ae.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=o.DetermineComponentFrameRoot(),N=p[0],_=p[1];if(N&&_){var L=N.split(`
`),te=_.split(`
`);for(h=o=0;o<L.length&&!L[o].includes("DetermineComponentFrameRoot");)o++;for(;h<te.length&&!te[h].includes("DetermineComponentFrameRoot");)h++;if(o===L.length||h===te.length)for(o=L.length-1,h=te.length-1;1<=o&&0<=h&&L[o]!==te[h];)h--;for(;1<=o&&0<=h;o--,h--)if(L[o]!==te[h]){if(o!==1||h!==1)do if(o--,h--,0>h||L[o]!==te[h]){var he=`
`+L[o].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=o&&0<=h);break}}}finally{Fi=!1,Error.prepareStackTrace=r}return(r=s?s.displayName||s.name:"")?ka(r):""}function nl(s){switch(s.tag){case 26:case 27:case 5:return ka(s.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 15:return qi(s.type,!1);case 11:return qi(s.type.render,!1);case 1:return qi(s.type,!0);case 31:return ka("Activity");default:return""}}function Hi(s){try{var a="";do a+=nl(s),s=s.return;while(s);return a}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function us(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function il(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function nu(s){var a=il(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),o=""+s[a];if(!s.hasOwnProperty(a)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,p=r.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return h.call(this)},set:function(N){o=""+N,p.call(this,N)}}),Object.defineProperty(s,a,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(N){o=""+N},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Gi(s){s._valueTracker||(s._valueTracker=nu(s))}function rl(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var r=a.getValue(),o="";return s&&(o=il(s)?s.checked?"true":"false":s.value),s=o,s!==r?(a.setValue(s),!0):!1}function ti(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var iu=/[\n"\\]/g;function kt(s){return s.replace(iu,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function js(s,a,r,o,h,p,N,_){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),a!=null?N==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+us(a)):s.value!==""+us(a)&&(s.value=""+us(a)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),a!=null?un(s,N,us(a)):r!=null?un(s,N,us(r)):o!=null&&s.removeAttribute("value"),h==null&&p!=null&&(s.defaultChecked=!!p),h!=null&&(s.checked=h&&typeof h!="function"&&typeof h!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.name=""+us(_):s.removeAttribute("name")}function si(s,a,r,o,h,p,N,_){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),a!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;r=r!=null?""+us(r):"",a=a!=null?""+us(a):r,_||a===s.value||(s.value=a),s.defaultValue=a}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,s.checked=_?s.checked:!!o,s.defaultChecked=!!o,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N)}function un(s,a,r){a==="number"&&ti(s.ownerDocument)===s||s.defaultValue===""+r||(s.defaultValue=""+r)}function Ra(s,a,r,o){if(s=s.options,a){a={};for(var h=0;h<r.length;h++)a["$"+r[h]]=!0;for(r=0;r<s.length;r++)h=a.hasOwnProperty("$"+s[r].value),s[r].selected!==h&&(s[r].selected=h),h&&o&&(s[r].defaultSelected=!0)}else{for(r=""+us(r),a=null,h=0;h<s.length;h++){if(s[h].value===r){s[h].selected=!0,o&&(s[h].defaultSelected=!0);return}a!==null||s[h].disabled||(a=s[h])}a!==null&&(a.selected=!0)}}function ct(s,a,r){if(a!=null&&(a=""+us(a),a!==s.value&&(s.value=a),r==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=r!=null?""+us(r):""}function ai(s,a,r,o){if(a==null){if(o!=null){if(r!=null)throw Error(l(92));if(be(o)){if(1<o.length)throw Error(l(93));o=o[0]}r=o}r==null&&(r=""),a=r}r=us(a),s.defaultValue=r,o=s.textContent,o===r&&o!==""&&o!==null&&(s.value=o)}function ks(s,a){if(a){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=a;return}}s.textContent=a}var ni=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(s,a,r){var o=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":o?s.setProperty(a,r):typeof r!="number"||r===0||ni.has(a)?a==="float"?s.cssFloat=r:s[a]=(""+r).trim():s[a]=r+"px"}function ll(s,a,r){if(a!=null&&typeof a!="object")throw Error(l(62));if(s=s.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="");for(var h in a)o=a[h],a.hasOwnProperty(h)&&r[h]!==o&&Fo(s,h,o)}else for(var p in a)a.hasOwnProperty(p)&&Fo(s,p,a[p])}function ol(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ru=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $i(s){return lu.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Da=null;function Rs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ia=null,Pa=null;function cl(s){var a=ta(s);if(a&&(s=a.stateNode)){var r=s[wt]||null;e:switch(s=a.stateNode,a.type){case"input":if(js(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+kt(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var o=r[a];if(o!==s&&o.form===s.form){var h=o[wt]||null;if(!h)throw Error(l(90));js(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<r.length;a++)o=r[a],o.form===s.form&&rl(o)}break e;case"textarea":ct(s,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&Ra(s,!!r.multiple,a,!1)}}}var na=!1;function qo(s,a,r){if(na)return s(a,r);na=!0;try{var o=s(a);return o}finally{if(na=!1,(Ia!==null||Pa!==null)&&(Oc(),Ia&&(a=Ia,s=Pa,Pa=Ia=null,cl(a),s)))for(a=0;a<s.length;a++)cl(s[a])}}function ii(s,a){var r=s.stateNode;if(r===null)return null;var o=r[wt]||null;if(o===null)return null;r=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(s=s.type,o=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!o;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(l(231,a,typeof r));return r}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ds=!1;if(Qs)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{Ds=!1}var ia=null,hn=null,Ma=null;function dl(){if(Ma)return Ma;var s,a=hn,r=a.length,o,h="value"in ia?ia.value:ia.textContent,p=h.length;for(s=0;s<r&&a[s]===h[s];s++);var N=r-s;for(o=1;o<=N&&a[r-o]===h[p-o];o++);return Ma=h.slice(s,1<o?1-o:void 0)}function ra(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function la(){return!0}function ul(){return!1}function Ht(s){function a(r,o,h,p,N){this._reactName=r,this._targetInst=h,this.type=o,this.nativeEvent=p,this.target=N,this.currentTarget=null;for(var _ in s)s.hasOwnProperty(_)&&(r=s[_],this[_]=r?r(p):p[_]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?la:ul,this.isPropagationStopped=ul,this}return j(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),a}var it={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qi=Ht(it),li=j({},it,{view:0,detail:0}),Ho=Ht(li),Yi,Ki,oa,oi=j({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ui,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==oa&&(oa&&s.type==="mousemove"?(Yi=s.screenX-oa.screenX,Ki=s.screenY-oa.screenY):Ki=Yi=0,oa=s),Yi)},movementY:function(s){return"movementY"in s?s.movementY:Ki}}),Is=Ht(oi),Go=j({},oi,{dataTransfer:0}),ou=Ht(Go),ci=j({},li,{relatedTarget:0}),Xi=Ht(ci),hl=j({},it,{animationName:0,elapsedTime:0,pseudoElement:0}),Wi=Ht(hl),$o=j({},it,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Zi=Ht($o),cu=j({},it,{data:0}),ml=Ht(cu),di={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pl(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Yo[s])?!!a[s]:!1}function ui(){return pl}var Ko=j({},li,{key:function(s){if(s.key){var a=di[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ra(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Qo[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ui,charCode:function(s){return s.type==="keypress"?ra(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ra(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ji=Ht(Ko),Xo=j({},oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fl=Ht(Xo),Oa=j({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ui}),Wo=Ht(Oa),Zo=j({},it,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jo=Ht(Zo),ec=j({},oi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),er=Ht(ec),hs=j({},it,{newState:0,oldState:0}),tc=Ht(hs),sc=[9,13,27,32],ca=Qs&&"CompositionEvent"in window,u=null;Qs&&"documentMode"in document&&(u=document.documentMode);var v=Qs&&"TextEvent"in window&&!u,x=Qs&&(!ca||u&&8<u&&11>=u),C=" ",W=!1;function re(s,a){switch(s){case"keyup":return sc.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ae(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xe=!1;function Bt(s,a){switch(s){case"compositionend":return Ae(a);case"keypress":return a.which!==32?null:(W=!0,C);case"textInput":return s=a.data,s===C&&W?null:s;default:return null}}function We(s,a){if(Xe)return s==="compositionend"||!ca&&re(s,a)?(s=dl(),Ma=hn=ia=null,Xe=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return x&&a.locale!=="ko"?null:a.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Gt[s.type]:a==="textarea"}function Va(s,a,r,o){Ia?Pa?Pa.push(o):Pa=[o]:Ia=o,a=Fc(a,"onChange"),0<a.length&&(r=new Qi("onChange","change",null,r,o),s.push({event:r,listeners:a}))}var Wt=null,da=null;function gl(s){fv(s,0)}function ac(s){var a=sa(s);if(rl(a))return s}function Mp(s,a){if(s==="change")return a}var Op=!1;if(Qs){var du;if(Qs){var uu="oninput"in document;if(!uu){var Vp=document.createElement("div");Vp.setAttribute("oninput","return;"),uu=typeof Vp.oninput=="function"}du=uu}else du=!1;Op=du&&(!document.documentMode||9<document.documentMode)}function Bp(){Wt&&(Wt.detachEvent("onpropertychange",Lp),da=Wt=null)}function Lp(s){if(s.propertyName==="value"&&ac(da)){var a=[];Va(a,da,s,Rs(s)),qo(gl,a)}}function kN(s,a,r){s==="focusin"?(Bp(),Wt=a,da=r,Wt.attachEvent("onpropertychange",Lp)):s==="focusout"&&Bp()}function RN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ac(da)}function DN(s,a){if(s==="click")return ac(a)}function IN(s,a){if(s==="input"||s==="change")return ac(a)}function PN(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Ns=typeof Object.is=="function"?Object.is:PN;function vl(s,a){if(Ns(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var r=Object.keys(s),o=Object.keys(a);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var h=r[o];if(!pe.call(a,h)||!Ns(s[h],a[h]))return!1}return!0}function Up(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function zp(s,a){var r=Up(s);s=0;for(var o;r;){if(r.nodeType===3){if(o=s+r.textContent.length,s<=a&&o>=a)return{node:r,offset:a-s};s=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Up(r)}}function Fp(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Fp(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function qp(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ti(s.document);a instanceof s.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)s=a.contentWindow;else break;a=ti(s.document)}return a}function hu(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var MN=Qs&&"documentMode"in document&&11>=document.documentMode,tr=null,mu=null,yl=null,pu=!1;function Hp(s,a,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;pu||tr==null||tr!==ti(o)||(o=tr,"selectionStart"in o&&hu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),yl&&vl(yl,o)||(yl=o,o=Fc(mu,"onSelect"),0<o.length&&(a=new Qi("onSelect","select",null,a,r),s.push({event:a,listeners:o}),a.target=tr)))}function hi(s,a){var r={};return r[s.toLowerCase()]=a.toLowerCase(),r["Webkit"+s]="webkit"+a,r["Moz"+s]="moz"+a,r}var sr={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},fu={},Gp={};Qs&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function mi(s){if(fu[s])return fu[s];if(!sr[s])return s;var a=sr[s],r;for(r in a)if(a.hasOwnProperty(r)&&r in Gp)return fu[s]=a[r];return s}var $p=mi("animationend"),Qp=mi("animationiteration"),Yp=mi("animationstart"),ON=mi("transitionrun"),VN=mi("transitionstart"),BN=mi("transitioncancel"),Kp=mi("transitionend"),Xp=new Map,gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gu.push("scrollEnd");function Ys(s,a){Xp.set(s,a),$s(a,[s])}var Wp=new WeakMap;function Ps(s,a){if(typeof s=="object"&&s!==null){var r=Wp.get(s);return r!==void 0?r:(a={value:s,source:a,stack:Hi(a)},Wp.set(s,a),a)}return{value:s,source:a,stack:Hi(a)}}var Ms=[],ar=0,vu=0;function nc(){for(var s=ar,a=vu=ar=0;a<s;){var r=Ms[a];Ms[a++]=null;var o=Ms[a];Ms[a++]=null;var h=Ms[a];Ms[a++]=null;var p=Ms[a];if(Ms[a++]=null,o!==null&&h!==null){var N=o.pending;N===null?h.next=h:(h.next=N.next,N.next=h),o.pending=h}p!==0&&Zp(r,h,p)}}function ic(s,a,r,o){Ms[ar++]=s,Ms[ar++]=a,Ms[ar++]=r,Ms[ar++]=o,vu|=o,s.lanes|=o,s=s.alternate,s!==null&&(s.lanes|=o)}function yu(s,a,r,o){return ic(s,a,r,o),rc(s)}function nr(s,a){return ic(s,null,null,a),rc(s)}function Zp(s,a,r){s.lanes|=r;var o=s.alternate;o!==null&&(o.lanes|=r);for(var h=!1,p=s.return;p!==null;)p.childLanes|=r,o=p.alternate,o!==null&&(o.childLanes|=r),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(h=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,h&&a!==null&&(h=31-qt(r),s=p.hiddenUpdates,o=s[h],o===null?s[h]=[a]:o.push(a),a.lane=r|536870912),p):null}function rc(s){if(50<ql)throw ql=0,_h=null,Error(l(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ir={};function LN(s,a,r,o){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(s,a,r,o){return new LN(s,a,r,o)}function xu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ba(s,a){var r=s.alternate;return r===null?(r=bs(s.tag,a,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=a,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&65011712,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,a=s.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r.refCleanup=s.refCleanup,r}function Jp(s,a){s.flags&=65011714;var r=s.alternate;return r===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,a=r.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function lc(s,a,r,o,h,p){var N=0;if(o=s,typeof s=="function")xu(s)&&(N=1);else if(typeof s=="string")N=zb(s,r,B.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case b:return s=bs(31,r,a,h),s.elementType=b,s.lanes=p,s;case D:return pi(r.children,h,p,a);case H:N=8,h|=24;break;case U:return s=bs(12,r,a,h|2),s.elementType=U,s.lanes=p,s;case se:return s=bs(13,r,a,h),s.elementType=se,s.lanes=p,s;case z:return s=bs(19,r,a,h),s.elementType=z,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case q:case P:N=10;break e;case Y:N=9;break e;case Q:N=11;break e;case M:N=14;break e;case w:N=16,o=null;break e}N=29,r=Error(l(130,s===null?"null":typeof s,"")),o=null}return a=bs(N,r,a,h),a.elementType=s,a.type=o,a.lanes=p,a}function pi(s,a,r,o){return s=bs(7,s,o,a),s.lanes=r,s}function ju(s,a,r){return s=bs(6,s,null,a),s.lanes=r,s}function Nu(s,a,r){return a=bs(4,s.children!==null?s.children:[],s.key,a),a.lanes=r,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var rr=[],lr=0,oc=null,cc=0,Os=[],Vs=0,fi=null,La=1,Ua="";function gi(s,a){rr[lr++]=cc,rr[lr++]=oc,oc=s,cc=a}function ef(s,a,r){Os[Vs++]=La,Os[Vs++]=Ua,Os[Vs++]=fi,fi=s;var o=La;s=Ua;var h=32-qt(o)-1;o&=~(1<<h),r+=1;var p=32-qt(a)+h;if(30<p){var N=h-h%5;p=(o&(1<<N)-1).toString(32),o>>=N,h-=N,La=1<<32-qt(a)+h|r<<h|o,Ua=p+s}else La=1<<p|r<<h|o,Ua=s}function bu(s){s.return!==null&&(gi(s,1),ef(s,1,0))}function Tu(s){for(;s===oc;)oc=rr[--lr],rr[lr]=null,cc=rr[--lr],rr[lr]=null;for(;s===fi;)fi=Os[--Vs],Os[Vs]=null,Ua=Os[--Vs],Os[Vs]=null,La=Os[--Vs],Os[Vs]=null}var ms=null,Tt=null,at=!1,vi=null,ua=!1,_u=Error(l(519));function yi(s){var a=Error(l(418,""));throw Nl(Ps(a,s)),_u}function tf(s){var a=s.stateNode,r=s.type,o=s.memoizedProps;switch(a[Vt]=s,a[wt]=o,r){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(r=0;r<Gl.length;r++)Qe(Gl[r],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),si(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Gi(a);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),ai(a,o.value,o.defaultValue,o.children),Gi(a)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||o.suppressHydrationWarning===!0||xv(a.textContent,r)?(o.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),o.onScroll!=null&&Qe("scroll",a),o.onScrollEnd!=null&&Qe("scrollend",a),o.onClick!=null&&(a.onclick=qc),a=!0):a=!1,a||yi(s)}function sf(s){for(ms=s.return;ms;)switch(ms.tag){case 5:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:ms=ms.return}}function xl(s){if(s!==ms)return!1;if(!at)return sf(s),at=!0,!1;var a=s.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=s.type,r=!(r!=="form"&&r!=="button")||Uh(s.type,s.memoizedProps)),r=!r),r&&Tt&&yi(s),sf(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(r=s.data,r==="/$"){if(a===0){Tt=Xs(s.nextSibling);break e}a--}else r!=="$"&&r!=="$!"&&r!=="$?"||a++;s=s.nextSibling}Tt=null}}else a===27?(a=Tt,Cn(s.type)?(s=Hh,Hh=null,Tt=s):Tt=a):Tt=ms?Xs(s.stateNode.nextSibling):null;return!0}function jl(){Tt=ms=null,at=!1}function af(){var s=vi;return s!==null&&(vs===null?vs=s:vs.push.apply(vs,s),vi=null),s}function Nl(s){vi===null?vi=[s]:vi.push(s)}var Su=de(null),xi=null,za=null;function mn(s,a,r){G(Su,a._currentValue),a._currentValue=r}function Fa(s){s._currentValue=Su.current,Te(Su)}function Au(s,a,r){for(;s!==null;){var o=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),s===r)break;s=s.return}}function Eu(s,a,r,o){var h=s.child;for(h!==null&&(h.return=s);h!==null;){var p=h.dependencies;if(p!==null){var N=h.child;p=p.firstContext;e:for(;p!==null;){var _=p;p=h;for(var L=0;L<a.length;L++)if(_.context===a[L]){p.lanes|=r,_=p.alternate,_!==null&&(_.lanes|=r),Au(p.return,r,s),o||(N=null);break e}p=_.next}}else if(h.tag===18){if(N=h.return,N===null)throw Error(l(341));N.lanes|=r,p=N.alternate,p!==null&&(p.lanes|=r),Au(N,r,s),N=null}else N=h.child;if(N!==null)N.return=h;else for(N=h;N!==null;){if(N===s){N=null;break}if(h=N.sibling,h!==null){h.return=N.return,N=h;break}N=N.return}h=N}}function bl(s,a,r,o){s=null;for(var h=a,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var N=h.alternate;if(N===null)throw Error(l(387));if(N=N.memoizedProps,N!==null){var _=h.type;Ns(h.pendingProps.value,N.value)||(s!==null?s.push(_):s=[_])}}else if(h===we.current){if(N=h.alternate,N===null)throw Error(l(387));N.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(s!==null?s.push(Wl):s=[Wl])}h=h.return}s!==null&&Eu(a,s,r,o),a.flags|=262144}function dc(s){for(s=s.firstContext;s!==null;){if(!Ns(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ji(s){xi=s,za=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ns(s){return nf(xi,s)}function uc(s,a){return xi===null&&ji(s),nf(s,a)}function nf(s,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},za===null){if(s===null)throw Error(l(308));za=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else za=za.next=a;return r}var UN=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(r,o){s.push(o)}};this.abort=function(){a.aborted=!0,s.forEach(function(r){return r()})}},zN=i.unstable_scheduleCallback,FN=i.unstable_NormalPriority,Ut={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cu(){return{controller:new UN,data:new Map,refCount:0}}function Tl(s){s.refCount--,s.refCount===0&&zN(FN,function(){s.controller.abort()})}var _l=null,wu=0,or=0,cr=null;function qN(s,a){if(_l===null){var r=_l=[];wu=0,or=Rh(),cr={status:"pending",value:void 0,then:function(o){r.push(o)}}}return wu++,a.then(rf,rf),a}function rf(){if(--wu===0&&_l!==null){cr!==null&&(cr.status="fulfilled");var s=_l;_l=null,or=0,cr=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function HN(s,a){var r=[],o={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return s.then(function(){o.status="fulfilled",o.value=a;for(var h=0;h<r.length;h++)(0,r[h])(a)},function(h){for(o.status="rejected",o.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),o}var lf=J.S;J.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&qN(s,a),lf!==null&&lf(s,a)};var Ni=de(null);function ku(){var s=Ni.current;return s!==null?s:pt.pooledCache}function hc(s,a){a===null?G(Ni,Ni.current):G(Ni,a.pool)}function of(){var s=ku();return s===null?null:{parent:Ut._currentValue,pool:s}}var Sl=Error(l(460)),cf=Error(l(474)),mc=Error(l(542)),Ru={then:function(){}};function df(s){return s=s.status,s==="fulfilled"||s==="rejected"}function pc(){}function uf(s,a,r){switch(r=s[r],r===void 0?s.push(a):r!==a&&(a.then(pc,pc),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,mf(s),s;default:if(typeof a.status=="string")a.then(pc,pc);else{if(s=pt,s!==null&&100<s.shellSuspendCounter)throw Error(l(482));s=a,s.status="pending",s.then(function(o){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=o}},function(o){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,mf(s),s}throw Al=a,Sl}}var Al=null;function hf(){if(Al===null)throw Error(l(459));var s=Al;return Al=null,s}function mf(s){if(s===Sl||s===mc)throw Error(l(483))}var pn=!1;function Du(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Iu(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function fn(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function gn(s,a,r){var o=s.updateQueue;if(o===null)return null;if(o=o.shared,(lt&2)!==0){var h=o.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),o.pending=a,a=rc(s),Zp(s,null,r),a}return ic(s,o,a,r),rc(s)}function El(s,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var o=a.lanes;o&=s.pendingLanes,r|=o,a.lanes=r,tl(s,r)}}function Pu(s,a){var r=s.updateQueue,o=s.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var h=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var N={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?h=p=N:p=p.next=N,r=r.next}while(r!==null);p===null?h=p=a:p=p.next=a}else h=p=a;r={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:o.shared,callbacks:o.callbacks},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=a:s.next=a,r.lastBaseUpdate=a}var Mu=!1;function Cl(){if(Mu){var s=cr;if(s!==null)throw s}}function wl(s,a,r,o){Mu=!1;var h=s.updateQueue;pn=!1;var p=h.firstBaseUpdate,N=h.lastBaseUpdate,_=h.shared.pending;if(_!==null){h.shared.pending=null;var L=_,te=L.next;L.next=null,N===null?p=te:N.next=te,N=L;var he=s.alternate;he!==null&&(he=he.updateQueue,_=he.lastBaseUpdate,_!==N&&(_===null?he.firstBaseUpdate=te:_.next=te,he.lastBaseUpdate=L))}if(p!==null){var xe=h.baseState;N=0,he=te=L=null,_=p;do{var ae=_.lane&-536870913,ne=ae!==_.lane;if(ne?(Ze&ae)===ae:(o&ae)===ae){ae!==0&&ae===or&&(Mu=!0),he!==null&&(he=he.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Ue=s,Oe=_;ae=a;var ht=r;switch(Oe.tag){case 1:if(Ue=Oe.payload,typeof Ue=="function"){xe=Ue.call(ht,xe,ae);break e}xe=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Oe.payload,ae=typeof Ue=="function"?Ue.call(ht,xe,ae):Ue,ae==null)break e;xe=j({},xe,ae);break e;case 2:pn=!0}}ae=_.callback,ae!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=h.callbacks,ne===null?h.callbacks=[ae]:ne.push(ae))}else ne={lane:ae,tag:_.tag,payload:_.payload,callback:_.callback,next:null},he===null?(te=he=ne,L=xe):he=he.next=ne,N|=ae;if(_=_.next,_===null){if(_=h.shared.pending,_===null)break;ne=_,_=ne.next,ne.next=null,h.lastBaseUpdate=ne,h.shared.pending=null}}while(!0);he===null&&(L=xe),h.baseState=L,h.firstBaseUpdate=te,h.lastBaseUpdate=he,p===null&&(h.shared.lanes=0),_n|=N,s.lanes=N,s.memoizedState=xe}}function pf(s,a){if(typeof s!="function")throw Error(l(191,s));s.call(a)}function ff(s,a){var r=s.callbacks;if(r!==null)for(s.callbacks=null,s=0;s<r.length;s++)pf(r[s],a)}var dr=de(null),fc=de(0);function gf(s,a){s=Ka,G(fc,s),G(dr,a),Ka=s|a.baseLanes}function Ou(){G(fc,Ka),G(dr,dr.current)}function Vu(){Ka=fc.current,Te(dr),Te(fc)}var vn=0,He=null,dt=null,Rt=null,gc=!1,ur=!1,bi=!1,vc=0,kl=0,hr=null,GN=0;function At(){throw Error(l(321))}function Bu(s,a){if(a===null)return!1;for(var r=0;r<a.length&&r<s.length;r++)if(!Ns(s[r],a[r]))return!1;return!0}function Lu(s,a,r,o,h,p){return vn=p,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,J.H=s===null||s.memoizedState===null?Jf:eg,bi=!1,p=r(o,h),bi=!1,ur&&(p=yf(a,r,o,h)),vf(s),p}function vf(s){J.H=Tc;var a=dt!==null&&dt.next!==null;if(vn=0,Rt=dt=He=null,gc=!1,kl=0,hr=null,a)throw Error(l(300));s===null||$t||(s=s.dependencies,s!==null&&dc(s)&&($t=!0))}function yf(s,a,r,o){He=s;var h=0;do{if(ur&&(hr=null),kl=0,ur=!1,25<=h)throw Error(l(301));if(h+=1,Rt=dt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}J.H=ZN,p=a(r,o)}while(ur);return p}function $N(){var s=J.H,a=s.useState()[0];return a=typeof a.then=="function"?Rl(a):a,s=s.useState()[0],(dt!==null?dt.memoizedState:null)!==s&&(He.flags|=1024),a}function Uu(){var s=vc!==0;return vc=0,s}function zu(s,a,r){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~r}function Fu(s){if(gc){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}gc=!1}vn=0,Rt=dt=He=null,ur=!1,kl=vc=0,hr=null}function fs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?He.memoizedState=Rt=s:Rt=Rt.next=s,Rt}function Dt(){if(dt===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=dt.next;var a=Rt===null?He.memoizedState:Rt.next;if(a!==null)Rt=a,dt=s;else{if(s===null)throw He.alternate===null?Error(l(467)):Error(l(310));dt=s,s={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Rt===null?He.memoizedState=Rt=s:Rt=Rt.next=s}return Rt}function qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(s){var a=kl;return kl+=1,hr===null&&(hr=[]),s=uf(hr,s,a),a=He,(Rt===null?a.memoizedState:Rt.next)===null&&(a=a.alternate,J.H=a===null||a.memoizedState===null?Jf:eg),s}function yc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Rl(s);if(s.$$typeof===P)return ns(s)}throw Error(l(438,String(s)))}function Hu(s){var a=null,r=He.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var o=He.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=qu(),He.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(s),o=0;o<s;o++)r[o]=E;return a.index++,r}function qa(s,a){return typeof a=="function"?a(s):a}function xc(s){var a=Dt();return Gu(a,dt,s)}function Gu(s,a,r){var o=s.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=r;var h=s.baseQueue,p=o.pending;if(p!==null){if(h!==null){var N=h.next;h.next=p.next,p.next=N}a.baseQueue=h=p,o.pending=null}if(p=s.baseState,h===null)s.memoizedState=p;else{a=h.next;var _=N=null,L=null,te=a,he=!1;do{var xe=te.lane&-536870913;if(xe!==te.lane?(Ze&xe)===xe:(vn&xe)===xe){var ae=te.revertLane;if(ae===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),xe===or&&(he=!0);else if((vn&ae)===ae){te=te.next,ae===or&&(he=!0);continue}else xe={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},L===null?(_=L=xe,N=p):L=L.next=xe,He.lanes|=ae,_n|=ae;xe=te.action,bi&&r(p,xe),p=te.hasEagerState?te.eagerState:r(p,xe)}else ae={lane:xe,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},L===null?(_=L=ae,N=p):L=L.next=ae,He.lanes|=xe,_n|=xe;te=te.next}while(te!==null&&te!==a);if(L===null?N=p:L.next=_,!Ns(p,s.memoizedState)&&($t=!0,he&&(r=cr,r!==null)))throw r;s.memoizedState=p,s.baseState=N,s.baseQueue=L,o.lastRenderedState=p}return h===null&&(o.lanes=0),[s.memoizedState,o.dispatch]}function $u(s){var a=Dt(),r=a.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=s;var o=r.dispatch,h=r.pending,p=a.memoizedState;if(h!==null){r.pending=null;var N=h=h.next;do p=s(p,N.action),N=N.next;while(N!==h);Ns(p,a.memoizedState)||($t=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),r.lastRenderedState=p}return[p,o]}function xf(s,a,r){var o=He,h=Dt(),p=at;if(p){if(r===void 0)throw Error(l(407));r=r()}else r=a();var N=!Ns((dt||h).memoizedState,r);N&&(h.memoizedState=r,$t=!0),h=h.queue;var _=bf.bind(null,o,h,s);if(Dl(2048,8,_,[s]),h.getSnapshot!==a||N||Rt!==null&&Rt.memoizedState.tag&1){if(o.flags|=2048,mr(9,jc(),Nf.bind(null,o,h,r,a),null),pt===null)throw Error(l(349));p||(vn&124)!==0||jf(o,a,r)}return r}function jf(s,a,r){s.flags|=16384,s={getSnapshot:a,value:r},a=He.updateQueue,a===null?(a=qu(),He.updateQueue=a,a.stores=[s]):(r=a.stores,r===null?a.stores=[s]:r.push(s))}function Nf(s,a,r,o){a.value=r,a.getSnapshot=o,Tf(a)&&_f(s)}function bf(s,a,r){return r(function(){Tf(a)&&_f(s)})}function Tf(s){var a=s.getSnapshot;s=s.value;try{var r=a();return!Ns(s,r)}catch{return!0}}function _f(s){var a=nr(s,2);a!==null&&Es(a,s,2)}function Qu(s){var a=fs();if(typeof s=="function"){var r=s;if(s=r(),bi){cs(!0);try{r()}finally{cs(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:s},a}function Sf(s,a,r,o){return s.baseState=r,Gu(s,dt,typeof o=="function"?o:qa)}function QN(s,a,r,o,h){if(bc(s))throw Error(l(485));if(s=a.action,s!==null){var p={payload:h,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){p.listeners.push(N)}};J.T!==null?r(!0):p.isTransition=!1,o(p),r=a.pending,r===null?(p.next=a.pending=p,Af(a,p)):(p.next=r.next,a.pending=r.next=p)}}function Af(s,a){var r=a.action,o=a.payload,h=s.state;if(a.isTransition){var p=J.T,N={};J.T=N;try{var _=r(h,o),L=J.S;L!==null&&L(N,_),Ef(s,a,_)}catch(te){Yu(s,a,te)}finally{J.T=p}}else try{p=r(h,o),Ef(s,a,p)}catch(te){Yu(s,a,te)}}function Ef(s,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Cf(s,a,o)},function(o){return Yu(s,a,o)}):Cf(s,a,r)}function Cf(s,a,r){a.status="fulfilled",a.value=r,wf(a),s.state=r,a=s.pending,a!==null&&(r=a.next,r===a?s.pending=null:(r=r.next,a.next=r,Af(s,r)))}function Yu(s,a,r){var o=s.pending;if(s.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=r,wf(a),a=a.next;while(a!==o)}s.action=null}function wf(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function kf(s,a){return a}function Rf(s,a){if(at){var r=pt.formState;if(r!==null){e:{var o=He;if(at){if(Tt){t:{for(var h=Tt,p=ua;h.nodeType!==8;){if(!p){h=null;break t}if(h=Xs(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Tt=Xs(h.nextSibling),o=h.data==="F!";break e}}yi(o)}o=!1}o&&(a=r[0])}}return r=fs(),r.memoizedState=r.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kf,lastRenderedState:a},r.queue=o,r=Xf.bind(null,He,o),o.dispatch=r,o=Qu(!1),p=Ju.bind(null,He,!1,o.queue),o=fs(),h={state:a,dispatch:null,action:s,pending:null},o.queue=h,r=QN.bind(null,He,h,p,r),h.dispatch=r,o.memoizedState=s,[a,r,!1]}function Df(s){var a=Dt();return If(a,dt,s)}function If(s,a,r){if(a=Gu(s,a,kf)[0],s=xc(qa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Rl(a)}catch(N){throw N===Sl?mc:N}else o=a;a=Dt();var h=a.queue,p=h.dispatch;return r!==a.memoizedState&&(He.flags|=2048,mr(9,jc(),YN.bind(null,h,r),null)),[o,p,s]}function YN(s,a){s.action=a}function Pf(s){var a=Dt(),r=dt;if(r!==null)return If(a,r,s);Dt(),a=a.memoizedState,r=Dt();var o=r.queue.dispatch;return r.memoizedState=s,[a,o,!1]}function mr(s,a,r,o){return s={tag:s,create:r,deps:o,inst:a,next:null},a=He.updateQueue,a===null&&(a=qu(),He.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=s.next=s:(o=r.next,r.next=s,s.next=o,a.lastEffect=s),s}function jc(){return{destroy:void 0,resource:void 0}}function Mf(){return Dt().memoizedState}function Nc(s,a,r,o){var h=fs();o=o===void 0?null:o,He.flags|=s,h.memoizedState=mr(1|a,jc(),r,o)}function Dl(s,a,r,o){var h=Dt();o=o===void 0?null:o;var p=h.memoizedState.inst;dt!==null&&o!==null&&Bu(o,dt.memoizedState.deps)?h.memoizedState=mr(a,p,r,o):(He.flags|=s,h.memoizedState=mr(1|a,p,r,o))}function Of(s,a){Nc(8390656,8,s,a)}function Vf(s,a){Dl(2048,8,s,a)}function Bf(s,a){return Dl(4,2,s,a)}function Lf(s,a){return Dl(4,4,s,a)}function Uf(s,a){if(typeof a=="function"){s=s();var r=a(s);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function zf(s,a,r){r=r!=null?r.concat([s]):null,Dl(4,4,Uf.bind(null,a,s),r)}function Ku(){}function Ff(s,a){var r=Dt();a=a===void 0?null:a;var o=r.memoizedState;return a!==null&&Bu(a,o[1])?o[0]:(r.memoizedState=[s,a],s)}function qf(s,a){var r=Dt();a=a===void 0?null:a;var o=r.memoizedState;if(a!==null&&Bu(a,o[1]))return o[0];if(o=s(),bi){cs(!0);try{s()}finally{cs(!1)}}return r.memoizedState=[o,a],o}function Xu(s,a,r){return r===void 0||(vn&1073741824)!==0?s.memoizedState=a:(s.memoizedState=r,s=$g(),He.lanes|=s,_n|=s,r)}function Hf(s,a,r,o){return Ns(r,a)?r:dr.current!==null?(s=Xu(s,r,o),Ns(s,a)||($t=!0),s):(vn&42)===0?($t=!0,s.memoizedState=r):(s=$g(),He.lanes|=s,_n|=s,a)}function Gf(s,a,r,o,h){var p=fe.p;fe.p=p!==0&&8>p?p:8;var N=J.T,_={};J.T=_,Ju(s,!1,a,r);try{var L=h(),te=J.S;if(te!==null&&te(_,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var he=HN(L,o);Il(s,a,he,As(s))}else Il(s,a,o,As(s))}catch(xe){Il(s,a,{then:function(){},status:"rejected",reason:xe},As())}finally{fe.p=p,J.T=N}}function KN(){}function Wu(s,a,r,o){if(s.tag!==5)throw Error(l(476));var h=$f(s).queue;Gf(s,h,a,Ee,r===null?KN:function(){return Qf(s),r(o)})}function $f(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:Ee},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:r},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Qf(s){var a=$f(s).next.queue;Il(s,a,{},As())}function Zu(){return ns(Wl)}function Yf(){return Dt().memoizedState}function Kf(){return Dt().memoizedState}function XN(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var r=As();s=fn(r);var o=gn(a,s,r);o!==null&&(Es(o,a,r),El(o,a,r)),a={cache:Cu()},s.payload=a;return}a=a.return}}function WN(s,a,r){var o=As();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},bc(s)?Wf(a,r):(r=yu(s,a,r,o),r!==null&&(Es(r,s,o),Zf(r,a,o)))}function Xf(s,a,r){var o=As();Il(s,a,r,o)}function Il(s,a,r,o){var h={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(bc(s))Wf(a,h);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var N=a.lastRenderedState,_=p(N,r);if(h.hasEagerState=!0,h.eagerState=_,Ns(_,N))return ic(s,a,h,0),pt===null&&nc(),!1}catch{}finally{}if(r=yu(s,a,h,o),r!==null)return Es(r,s,o),Zf(r,a,o),!0}return!1}function Ju(s,a,r,o){if(o={lane:2,revertLane:Rh(),action:o,hasEagerState:!1,eagerState:null,next:null},bc(s)){if(a)throw Error(l(479))}else a=yu(s,r,o,2),a!==null&&Es(a,s,2)}function bc(s){var a=s.alternate;return s===He||a!==null&&a===He}function Wf(s,a){ur=gc=!0;var r=s.pending;r===null?a.next=a:(a.next=r.next,r.next=a),s.pending=a}function Zf(s,a,r){if((r&4194048)!==0){var o=a.lanes;o&=s.pendingLanes,r|=o,a.lanes=r,tl(s,r)}}var Tc={readContext:ns,use:yc,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Jf={readContext:ns,use:yc,useCallback:function(s,a){return fs().memoizedState=[s,a===void 0?null:a],s},useContext:ns,useEffect:Of,useImperativeHandle:function(s,a,r){r=r!=null?r.concat([s]):null,Nc(4194308,4,Uf.bind(null,a,s),r)},useLayoutEffect:function(s,a){return Nc(4194308,4,s,a)},useInsertionEffect:function(s,a){Nc(4,2,s,a)},useMemo:function(s,a){var r=fs();a=a===void 0?null:a;var o=s();if(bi){cs(!0);try{s()}finally{cs(!1)}}return r.memoizedState=[o,a],o},useReducer:function(s,a,r){var o=fs();if(r!==void 0){var h=r(a);if(bi){cs(!0);try{r(a)}finally{cs(!1)}}}else h=a;return o.memoizedState=o.baseState=h,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:h},o.queue=s,s=s.dispatch=WN.bind(null,He,s),[o.memoizedState,s]},useRef:function(s){var a=fs();return s={current:s},a.memoizedState=s},useState:function(s){s=Qu(s);var a=s.queue,r=Xf.bind(null,He,a);return a.dispatch=r,[s.memoizedState,r]},useDebugValue:Ku,useDeferredValue:function(s,a){var r=fs();return Xu(r,s,a)},useTransition:function(){var s=Qu(!1);return s=Gf.bind(null,He,s.queue,!0,!1),fs().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,r){var o=He,h=fs();if(at){if(r===void 0)throw Error(l(407));r=r()}else{if(r=a(),pt===null)throw Error(l(349));(Ze&124)!==0||jf(o,a,r)}h.memoizedState=r;var p={value:r,getSnapshot:a};return h.queue=p,Of(bf.bind(null,o,p,s),[s]),o.flags|=2048,mr(9,jc(),Nf.bind(null,o,p,r,a),null),r},useId:function(){var s=fs(),a=pt.identifierPrefix;if(at){var r=Ua,o=La;r=(o&~(1<<32-qt(o)-1)).toString(32)+r,a=""+a+"R"+r,r=vc++,0<r&&(a+="H"+r.toString(32)),a+=""}else r=GN++,a=""+a+"r"+r.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:Zu,useFormState:Rf,useActionState:Rf,useOptimistic:function(s){var a=fs();a.memoizedState=a.baseState=s;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Ju.bind(null,He,!0,r),r.dispatch=a,[s,a]},useMemoCache:Hu,useCacheRefresh:function(){return fs().memoizedState=XN.bind(null,He)}},eg={readContext:ns,use:yc,useCallback:Ff,useContext:ns,useEffect:Vf,useImperativeHandle:zf,useInsertionEffect:Bf,useLayoutEffect:Lf,useMemo:qf,useReducer:xc,useRef:Mf,useState:function(){return xc(qa)},useDebugValue:Ku,useDeferredValue:function(s,a){var r=Dt();return Hf(r,dt.memoizedState,s,a)},useTransition:function(){var s=xc(qa)[0],a=Dt().memoizedState;return[typeof s=="boolean"?s:Rl(s),a]},useSyncExternalStore:xf,useId:Yf,useHostTransitionStatus:Zu,useFormState:Df,useActionState:Df,useOptimistic:function(s,a){var r=Dt();return Sf(r,dt,s,a)},useMemoCache:Hu,useCacheRefresh:Kf},ZN={readContext:ns,use:yc,useCallback:Ff,useContext:ns,useEffect:Vf,useImperativeHandle:zf,useInsertionEffect:Bf,useLayoutEffect:Lf,useMemo:qf,useReducer:$u,useRef:Mf,useState:function(){return $u(qa)},useDebugValue:Ku,useDeferredValue:function(s,a){var r=Dt();return dt===null?Xu(r,s,a):Hf(r,dt.memoizedState,s,a)},useTransition:function(){var s=$u(qa)[0],a=Dt().memoizedState;return[typeof s=="boolean"?s:Rl(s),a]},useSyncExternalStore:xf,useId:Yf,useHostTransitionStatus:Zu,useFormState:Pf,useActionState:Pf,useOptimistic:function(s,a){var r=Dt();return dt!==null?Sf(r,dt,s,a):(r.baseState=s,[s,r.queue.dispatch])},useMemoCache:Hu,useCacheRefresh:Kf},pr=null,Pl=0;function _c(s){var a=Pl;return Pl+=1,pr===null&&(pr=[]),uf(pr,s,a)}function Ml(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Sc(s,a){throw a.$$typeof===S?Error(l(525)):(s=Object.prototype.toString.call(a),Error(l(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function tg(s){var a=s._init;return a(s._payload)}function sg(s){function a(X,$){if(s){var Z=X.deletions;Z===null?(X.deletions=[$],X.flags|=16):Z.push($)}}function r(X,$){if(!s)return null;for(;$!==null;)a(X,$),$=$.sibling;return null}function o(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function h(X,$){return X=Ba(X,$),X.index=0,X.sibling=null,X}function p(X,$,Z){return X.index=Z,s?(Z=X.alternate,Z!==null?(Z=Z.index,Z<$?(X.flags|=67108866,$):Z):(X.flags|=67108866,$)):(X.flags|=1048576,$)}function N(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function _(X,$,Z,ge){return $===null||$.tag!==6?($=ju(Z,X.mode,ge),$.return=X,$):($=h($,Z),$.return=X,$)}function L(X,$,Z,ge){var Ie=Z.type;return Ie===D?he(X,$,Z.props.children,ge,Z.key):$!==null&&($.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===w&&tg(Ie)===$.type)?($=h($,Z.props),Ml($,Z),$.return=X,$):($=lc(Z.type,Z.key,Z.props,null,X.mode,ge),Ml($,Z),$.return=X,$)}function te(X,$,Z,ge){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=Nu(Z,X.mode,ge),$.return=X,$):($=h($,Z.children||[]),$.return=X,$)}function he(X,$,Z,ge,Ie){return $===null||$.tag!==7?($=pi(Z,X.mode,ge,Ie),$.return=X,$):($=h($,Z),$.return=X,$)}function xe(X,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=ju(""+$,X.mode,Z),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return Z=lc($.type,$.key,$.props,null,X.mode,Z),Ml(Z,$),Z.return=X,Z;case O:return $=Nu($,X.mode,Z),$.return=X,$;case w:var ge=$._init;return $=ge($._payload),xe(X,$,Z)}if(be($)||V($))return $=pi($,X.mode,Z,null),$.return=X,$;if(typeof $.then=="function")return xe(X,_c($),Z);if($.$$typeof===P)return xe(X,uc(X,$),Z);Sc(X,$)}return null}function ae(X,$,Z,ge){var Ie=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ie!==null?null:_(X,$,""+Z,ge);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===Ie?L(X,$,Z,ge):null;case O:return Z.key===Ie?te(X,$,Z,ge):null;case w:return Ie=Z._init,Z=Ie(Z._payload),ae(X,$,Z,ge)}if(be(Z)||V(Z))return Ie!==null?null:he(X,$,Z,ge,null);if(typeof Z.then=="function")return ae(X,$,_c(Z),ge);if(Z.$$typeof===P)return ae(X,$,uc(X,Z),ge);Sc(X,Z)}return null}function ne(X,$,Z,ge,Ie){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return X=X.get(Z)||null,_($,X,""+ge,Ie);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case A:return X=X.get(ge.key===null?Z:ge.key)||null,L($,X,ge,Ie);case O:return X=X.get(ge.key===null?Z:ge.key)||null,te($,X,ge,Ie);case w:var Ge=ge._init;return ge=Ge(ge._payload),ne(X,$,Z,ge,Ie)}if(be(ge)||V(ge))return X=X.get(Z)||null,he($,X,ge,Ie,null);if(typeof ge.then=="function")return ne(X,$,Z,_c(ge),Ie);if(ge.$$typeof===P)return ne(X,$,Z,uc($,ge),Ie);Sc($,ge)}return null}function Ue(X,$,Z,ge){for(var Ie=null,Ge=null,Pe=$,Be=$=0,Yt=null;Pe!==null&&Be<Z.length;Be++){Pe.index>Be?(Yt=Pe,Pe=null):Yt=Pe.sibling;var tt=ae(X,Pe,Z[Be],ge);if(tt===null){Pe===null&&(Pe=Yt);break}s&&Pe&&tt.alternate===null&&a(X,Pe),$=p(tt,$,Be),Ge===null?Ie=tt:Ge.sibling=tt,Ge=tt,Pe=Yt}if(Be===Z.length)return r(X,Pe),at&&gi(X,Be),Ie;if(Pe===null){for(;Be<Z.length;Be++)Pe=xe(X,Z[Be],ge),Pe!==null&&($=p(Pe,$,Be),Ge===null?Ie=Pe:Ge.sibling=Pe,Ge=Pe);return at&&gi(X,Be),Ie}for(Pe=o(Pe);Be<Z.length;Be++)Yt=ne(Pe,X,Be,Z[Be],ge),Yt!==null&&(s&&Yt.alternate!==null&&Pe.delete(Yt.key===null?Be:Yt.key),$=p(Yt,$,Be),Ge===null?Ie=Yt:Ge.sibling=Yt,Ge=Yt);return s&&Pe.forEach(function(In){return a(X,In)}),at&&gi(X,Be),Ie}function Oe(X,$,Z,ge){if(Z==null)throw Error(l(151));for(var Ie=null,Ge=null,Pe=$,Be=$=0,Yt=null,tt=Z.next();Pe!==null&&!tt.done;Be++,tt=Z.next()){Pe.index>Be?(Yt=Pe,Pe=null):Yt=Pe.sibling;var In=ae(X,Pe,tt.value,ge);if(In===null){Pe===null&&(Pe=Yt);break}s&&Pe&&In.alternate===null&&a(X,Pe),$=p(In,$,Be),Ge===null?Ie=In:Ge.sibling=In,Ge=In,Pe=Yt}if(tt.done)return r(X,Pe),at&&gi(X,Be),Ie;if(Pe===null){for(;!tt.done;Be++,tt=Z.next())tt=xe(X,tt.value,ge),tt!==null&&($=p(tt,$,Be),Ge===null?Ie=tt:Ge.sibling=tt,Ge=tt);return at&&gi(X,Be),Ie}for(Pe=o(Pe);!tt.done;Be++,tt=Z.next())tt=ne(Pe,X,Be,tt.value,ge),tt!==null&&(s&&tt.alternate!==null&&Pe.delete(tt.key===null?Be:tt.key),$=p(tt,$,Be),Ge===null?Ie=tt:Ge.sibling=tt,Ge=tt);return s&&Pe.forEach(function(Jb){return a(X,Jb)}),at&&gi(X,Be),Ie}function ht(X,$,Z,ge){if(typeof Z=="object"&&Z!==null&&Z.type===D&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var Ie=Z.key;$!==null;){if($.key===Ie){if(Ie=Z.type,Ie===D){if($.tag===7){r(X,$.sibling),ge=h($,Z.props.children),ge.return=X,X=ge;break e}}else if($.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===w&&tg(Ie)===$.type){r(X,$.sibling),ge=h($,Z.props),Ml(ge,Z),ge.return=X,X=ge;break e}r(X,$);break}else a(X,$);$=$.sibling}Z.type===D?(ge=pi(Z.props.children,X.mode,ge,Z.key),ge.return=X,X=ge):(ge=lc(Z.type,Z.key,Z.props,null,X.mode,ge),Ml(ge,Z),ge.return=X,X=ge)}return N(X);case O:e:{for(Ie=Z.key;$!==null;){if($.key===Ie)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){r(X,$.sibling),ge=h($,Z.children||[]),ge.return=X,X=ge;break e}else{r(X,$);break}else a(X,$);$=$.sibling}ge=Nu(Z,X.mode,ge),ge.return=X,X=ge}return N(X);case w:return Ie=Z._init,Z=Ie(Z._payload),ht(X,$,Z,ge)}if(be(Z))return Ue(X,$,Z,ge);if(V(Z)){if(Ie=V(Z),typeof Ie!="function")throw Error(l(150));return Z=Ie.call(Z),Oe(X,$,Z,ge)}if(typeof Z.then=="function")return ht(X,$,_c(Z),ge);if(Z.$$typeof===P)return ht(X,$,uc(X,Z),ge);Sc(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(r(X,$.sibling),ge=h($,Z),ge.return=X,X=ge):(r(X,$),ge=ju(Z,X.mode,ge),ge.return=X,X=ge),N(X)):r(X,$)}return function(X,$,Z,ge){try{Pl=0;var Ie=ht(X,$,Z,ge);return pr=null,Ie}catch(Pe){if(Pe===Sl||Pe===mc)throw Pe;var Ge=bs(29,Pe,null,X.mode);return Ge.lanes=ge,Ge.return=X,Ge}finally{}}}var fr=sg(!0),ag=sg(!1),Bs=de(null),ha=null;function yn(s){var a=s.alternate;G(zt,zt.current&1),G(Bs,s),ha===null&&(a===null||dr.current!==null||a.memoizedState!==null)&&(ha=s)}function ng(s){if(s.tag===22){if(G(zt,zt.current),G(Bs,s),ha===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(ha=s)}}else xn()}function xn(){G(zt,zt.current),G(Bs,Bs.current)}function Ha(s){Te(Bs),ha===s&&(ha=null),Te(zt)}var zt=de(0);function Ac(s){for(var a=s;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||qh(r)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function eh(s,a,r,o){a=s.memoizedState,r=r(o,a),r=r==null?a:j({},a,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var th={enqueueSetState:function(s,a,r){s=s._reactInternals;var o=As(),h=fn(o);h.payload=a,r!=null&&(h.callback=r),a=gn(s,h,o),a!==null&&(Es(a,s,o),El(a,s,o))},enqueueReplaceState:function(s,a,r){s=s._reactInternals;var o=As(),h=fn(o);h.tag=1,h.payload=a,r!=null&&(h.callback=r),a=gn(s,h,o),a!==null&&(Es(a,s,o),El(a,s,o))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var r=As(),o=fn(r);o.tag=2,a!=null&&(o.callback=a),a=gn(s,o,r),a!==null&&(Es(a,s,r),El(a,s,r))}};function ig(s,a,r,o,h,p,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(o,p,N):a.prototype&&a.prototype.isPureReactComponent?!vl(r,o)||!vl(h,p):!0}function rg(s,a,r,o){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,o),a.state!==s&&th.enqueueReplaceState(a,a.state,null)}function Ti(s,a){var r=a;if("ref"in a){r={};for(var o in a)o!=="ref"&&(r[o]=a[o])}if(s=s.defaultProps){r===a&&(r=j({},r));for(var h in s)r[h]===void 0&&(r[h]=s[h])}return r}var Ec=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function lg(s){Ec(s)}function og(s){console.error(s)}function cg(s){Ec(s)}function Cc(s,a){try{var r=s.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function dg(s,a,r){try{var o=s.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function sh(s,a,r){return r=fn(r),r.tag=3,r.payload={element:null},r.callback=function(){Cc(s,a)},r}function ug(s){return s=fn(s),s.tag=3,s}function hg(s,a,r,o){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;s.payload=function(){return h(p)},s.callback=function(){dg(a,r,o)}}var N=r.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){dg(a,r,o),typeof h!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var _=o.stack;this.componentDidCatch(o.value,{componentStack:_!==null?_:""})})}function JN(s,a,r,o,h){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=r.alternate,a!==null&&bl(a,r,h,!0),r=Bs.current,r!==null){switch(r.tag){case 13:return ha===null?Ah():r.alternate===null&&_t===0&&(_t=3),r.flags&=-257,r.flags|=65536,r.lanes=h,o===Ru?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([o]):a.add(o),Ch(s,o,h)),!1;case 22:return r.flags|=65536,o===Ru?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([o]):r.add(o)),Ch(s,o,h)),!1}throw Error(l(435,r.tag))}return Ch(s,o,h),Ah(),!1}if(at)return a=Bs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,o!==_u&&(s=Error(l(422),{cause:o}),Nl(Ps(s,r)))):(o!==_u&&(a=Error(l(423),{cause:o}),Nl(Ps(a,r))),s=s.current.alternate,s.flags|=65536,h&=-h,s.lanes|=h,o=Ps(o,r),h=sh(s.stateNode,o,h),Pu(s,h),_t!==4&&(_t=2)),!1;var p=Error(l(520),{cause:o});if(p=Ps(p,r),Fl===null?Fl=[p]:Fl.push(p),_t!==4&&(_t=2),a===null)return!0;o=Ps(o,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,s=h&-h,r.lanes|=s,s=sh(r.stateNode,o,s),Pu(r,s),!1;case 1:if(a=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Sn===null||!Sn.has(p))))return r.flags|=65536,h&=-h,r.lanes|=h,h=ug(h),hg(h,s,r,o),Pu(r,h),!1}r=r.return}while(r!==null);return!1}var mg=Error(l(461)),$t=!1;function Zt(s,a,r,o){a.child=s===null?ag(a,null,r,o):fr(a,s.child,r,o)}function pg(s,a,r,o,h){r=r.render;var p=a.ref;if("ref"in o){var N={};for(var _ in o)_!=="ref"&&(N[_]=o[_])}else N=o;return ji(a),o=Lu(s,a,r,N,p,h),_=Uu(),s!==null&&!$t?(zu(s,a,h),Ga(s,a,h)):(at&&_&&bu(a),a.flags|=1,Zt(s,a,o,h),a.child)}function fg(s,a,r,o,h){if(s===null){var p=r.type;return typeof p=="function"&&!xu(p)&&p.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=p,gg(s,a,p,o,h)):(s=lc(r.type,null,o,a,a.mode,h),s.ref=a.ref,s.return=a,a.child=s)}if(p=s.child,!dh(s,h)){var N=p.memoizedProps;if(r=r.compare,r=r!==null?r:vl,r(N,o)&&s.ref===a.ref)return Ga(s,a,h)}return a.flags|=1,s=Ba(p,o),s.ref=a.ref,s.return=a,a.child=s}function gg(s,a,r,o,h){if(s!==null){var p=s.memoizedProps;if(vl(p,o)&&s.ref===a.ref)if($t=!1,a.pendingProps=o=p,dh(s,h))(s.flags&131072)!==0&&($t=!0);else return a.lanes=s.lanes,Ga(s,a,h)}return ah(s,a,r,o,h)}function vg(s,a,r){var o=a.pendingProps,h=o.children,p=s!==null?s.memoizedState:null;if(o.mode==="hidden"){if((a.flags&128)!==0){if(o=p!==null?p.baseLanes|r:r,s!==null){for(h=a.child=s.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;a.childLanes=p&~o}else a.childLanes=0,a.child=null;return yg(s,a,o,r)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&hc(a,p!==null?p.cachePool:null),p!==null?gf(a,p):Ou(),ng(a);else return a.lanes=a.childLanes=536870912,yg(s,a,p!==null?p.baseLanes|r:r,r)}else p!==null?(hc(a,p.cachePool),gf(a,p),xn(),a.memoizedState=null):(s!==null&&hc(a,null),Ou(),xn());return Zt(s,a,h,r),a.child}function yg(s,a,r,o){var h=ku();return h=h===null?null:{parent:Ut._currentValue,pool:h},a.memoizedState={baseLanes:r,cachePool:h},s!==null&&hc(a,null),Ou(),ng(a),s!==null&&bl(s,a,o,!0),null}function wc(s,a){var r=a.ref;if(r===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(s===null||s.ref!==r)&&(a.flags|=4194816)}}function ah(s,a,r,o,h){return ji(a),r=Lu(s,a,r,o,void 0,h),o=Uu(),s!==null&&!$t?(zu(s,a,h),Ga(s,a,h)):(at&&o&&bu(a),a.flags|=1,Zt(s,a,r,h),a.child)}function xg(s,a,r,o,h,p){return ji(a),a.updateQueue=null,r=yf(a,o,r,h),vf(s),o=Uu(),s!==null&&!$t?(zu(s,a,p),Ga(s,a,p)):(at&&o&&bu(a),a.flags|=1,Zt(s,a,r,p),a.child)}function jg(s,a,r,o,h){if(ji(a),a.stateNode===null){var p=ir,N=r.contextType;typeof N=="object"&&N!==null&&(p=ns(N)),p=new r(o,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=th,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=o,p.state=a.memoizedState,p.refs={},Du(a),N=r.contextType,p.context=typeof N=="object"&&N!==null?ns(N):ir,p.state=a.memoizedState,N=r.getDerivedStateFromProps,typeof N=="function"&&(eh(a,r,N,o),p.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(N=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),N!==p.state&&th.enqueueReplaceState(p,p.state,null),wl(a,o,p,h),Cl(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(s===null){p=a.stateNode;var _=a.memoizedProps,L=Ti(r,_);p.props=L;var te=p.context,he=r.contextType;N=ir,typeof he=="object"&&he!==null&&(N=ns(he));var xe=r.getDerivedStateFromProps;he=typeof xe=="function"||typeof p.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,he||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_||te!==N)&&rg(a,p,o,N),pn=!1;var ae=a.memoizedState;p.state=ae,wl(a,o,p,h),Cl(),te=a.memoizedState,_||ae!==te||pn?(typeof xe=="function"&&(eh(a,r,xe,o),te=a.memoizedState),(L=pn||ig(a,r,L,o,ae,te,N))?(he||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=te),p.props=o,p.state=te,p.context=N,o=L):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{p=a.stateNode,Iu(s,a),N=a.memoizedProps,he=Ti(r,N),p.props=he,xe=a.pendingProps,ae=p.context,te=r.contextType,L=ir,typeof te=="object"&&te!==null&&(L=ns(te)),_=r.getDerivedStateFromProps,(te=typeof _=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(N!==xe||ae!==L)&&rg(a,p,o,L),pn=!1,ae=a.memoizedState,p.state=ae,wl(a,o,p,h),Cl();var ne=a.memoizedState;N!==xe||ae!==ne||pn||s!==null&&s.dependencies!==null&&dc(s.dependencies)?(typeof _=="function"&&(eh(a,r,_,o),ne=a.memoizedState),(he=pn||ig(a,r,he,o,ae,ne,L)||s!==null&&s.dependencies!==null&&dc(s.dependencies))?(te||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,ne,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,ne,L)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||N===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=ne),p.props=o,p.state=ne,p.context=L,o=he):(typeof p.componentDidUpdate!="function"||N===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),o=!1)}return p=o,wc(s,a),o=(a.flags&128)!==0,p||o?(p=a.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,s!==null&&o?(a.child=fr(a,s.child,null,h),a.child=fr(a,null,r,h)):Zt(s,a,r,h),a.memoizedState=p.state,s=a.child):s=Ga(s,a,h),s}function Ng(s,a,r,o){return jl(),a.flags|=256,Zt(s,a,r,o),a.child}var nh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ih(s){return{baseLanes:s,cachePool:of()}}function rh(s,a,r){return s=s!==null?s.childLanes&~r:0,a&&(s|=Ls),s}function bg(s,a,r){var o=a.pendingProps,h=!1,p=(a.flags&128)!==0,N;if((N=p)||(N=s!==null&&s.memoizedState===null?!1:(zt.current&2)!==0),N&&(h=!0,a.flags&=-129),N=(a.flags&32)!==0,a.flags&=-33,s===null){if(at){if(h?yn(a):xn(),at){var _=Tt,L;if(L=_){e:{for(L=_,_=ua;L.nodeType!==8;){if(!_){_=null;break e}if(L=Xs(L.nextSibling),L===null){_=null;break e}}_=L}_!==null?(a.memoizedState={dehydrated:_,treeContext:fi!==null?{id:La,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},L=bs(18,null,null,0),L.stateNode=_,L.return=a,a.child=L,ms=a,Tt=null,L=!0):L=!1}L||yi(a)}if(_=a.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return qh(_)?a.lanes=32:a.lanes=536870912,null;Ha(a)}return _=o.children,o=o.fallback,h?(xn(),h=a.mode,_=kc({mode:"hidden",children:_},h),o=pi(o,h,r,null),_.return=a,o.return=a,_.sibling=o,a.child=_,h=a.child,h.memoizedState=ih(r),h.childLanes=rh(s,N,r),a.memoizedState=nh,o):(yn(a),lh(a,_))}if(L=s.memoizedState,L!==null&&(_=L.dehydrated,_!==null)){if(p)a.flags&256?(yn(a),a.flags&=-257,a=oh(s,a,r)):a.memoizedState!==null?(xn(),a.child=s.child,a.flags|=128,a=null):(xn(),h=o.fallback,_=a.mode,o=kc({mode:"visible",children:o.children},_),h=pi(h,_,r,null),h.flags|=2,o.return=a,h.return=a,o.sibling=h,a.child=o,fr(a,s.child,null,r),o=a.child,o.memoizedState=ih(r),o.childLanes=rh(s,N,r),a.memoizedState=nh,a=h);else if(yn(a),qh(_)){if(N=_.nextSibling&&_.nextSibling.dataset,N)var te=N.dgst;N=te,o=Error(l(419)),o.stack="",o.digest=N,Nl({value:o,source:null,stack:null}),a=oh(s,a,r)}else if($t||bl(s,a,r,!1),N=(r&s.childLanes)!==0,$t||N){if(N=pt,N!==null&&(o=r&-r,o=(o&42)!==0?1:rn(o),o=(o&(N.suspendedLanes|r))!==0?0:o,o!==0&&o!==L.retryLane))throw L.retryLane=o,nr(s,o),Es(N,s,o),mg;_.data==="$?"||Ah(),a=oh(s,a,r)}else _.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=L.treeContext,Tt=Xs(_.nextSibling),ms=a,at=!0,vi=null,ua=!1,s!==null&&(Os[Vs++]=La,Os[Vs++]=Ua,Os[Vs++]=fi,La=s.id,Ua=s.overflow,fi=a),a=lh(a,o.children),a.flags|=4096);return a}return h?(xn(),h=o.fallback,_=a.mode,L=s.child,te=L.sibling,o=Ba(L,{mode:"hidden",children:o.children}),o.subtreeFlags=L.subtreeFlags&65011712,te!==null?h=Ba(te,h):(h=pi(h,_,r,null),h.flags|=2),h.return=a,o.return=a,o.sibling=h,a.child=o,o=h,h=a.child,_=s.child.memoizedState,_===null?_=ih(r):(L=_.cachePool,L!==null?(te=Ut._currentValue,L=L.parent!==te?{parent:te,pool:te}:L):L=of(),_={baseLanes:_.baseLanes|r,cachePool:L}),h.memoizedState=_,h.childLanes=rh(s,N,r),a.memoizedState=nh,o):(yn(a),r=s.child,s=r.sibling,r=Ba(r,{mode:"visible",children:o.children}),r.return=a,r.sibling=null,s!==null&&(N=a.deletions,N===null?(a.deletions=[s],a.flags|=16):N.push(s)),a.child=r,a.memoizedState=null,r)}function lh(s,a){return a=kc({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function kc(s,a){return s=bs(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function oh(s,a,r){return fr(a,s.child,null,r),s=lh(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Tg(s,a,r){s.lanes|=a;var o=s.alternate;o!==null&&(o.lanes|=a),Au(s.return,a,r)}function ch(s,a,r,o,h){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:h}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=r,p.tailMode=h)}function _g(s,a,r){var o=a.pendingProps,h=o.revealOrder,p=o.tail;if(Zt(s,a,o.children,r),o=zt.current,(o&2)!==0)o=o&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Tg(s,r,a);else if(s.tag===19)Tg(s,r,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o&=1}switch(G(zt,o),h){case"forwards":for(r=a.child,h=null;r!==null;)s=r.alternate,s!==null&&Ac(s)===null&&(h=r),r=r.sibling;r=h,r===null?(h=a.child,a.child=null):(h=r.sibling,r.sibling=null),ch(a,!1,h,r,p);break;case"backwards":for(r=null,h=a.child,a.child=null;h!==null;){if(s=h.alternate,s!==null&&Ac(s)===null){a.child=h;break}s=h.sibling,h.sibling=r,r=h,h=s}ch(a,!0,r,null,p);break;case"together":ch(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ga(s,a,r){if(s!==null&&(a.dependencies=s.dependencies),_n|=a.lanes,(r&a.childLanes)===0)if(s!==null){if(bl(s,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(l(153));if(a.child!==null){for(s=a.child,r=Ba(s,s.pendingProps),a.child=r,r.return=a;s.sibling!==null;)s=s.sibling,r=r.sibling=Ba(s,s.pendingProps),r.return=a;r.sibling=null}return a.child}function dh(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&dc(s)))}function eb(s,a,r){switch(a.tag){case 3:K(a,a.stateNode.containerInfo),mn(a,Ut,s.memoizedState.cache),jl();break;case 27:case 5:oe(a);break;case 4:K(a,a.stateNode.containerInfo);break;case 10:mn(a,a.type,a.memoizedProps.value);break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(yn(a),a.flags|=128,null):(r&a.child.childLanes)!==0?bg(s,a,r):(yn(a),s=Ga(s,a,r),s!==null?s.sibling:null);yn(a);break;case 19:var h=(s.flags&128)!==0;if(o=(r&a.childLanes)!==0,o||(bl(s,a,r,!1),o=(r&a.childLanes)!==0),h){if(o)return _g(s,a,r);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),G(zt,zt.current),o)break;return null;case 22:case 23:return a.lanes=0,vg(s,a,r);case 24:mn(a,Ut,s.memoizedState.cache)}return Ga(s,a,r)}function Sg(s,a,r){if(s!==null)if(s.memoizedProps!==a.pendingProps)$t=!0;else{if(!dh(s,r)&&(a.flags&128)===0)return $t=!1,eb(s,a,r);$t=(s.flags&131072)!==0}else $t=!1,at&&(a.flags&1048576)!==0&&ef(a,cc,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var o=a.elementType,h=o._init;if(o=h(o._payload),a.type=o,typeof o=="function")xu(o)?(s=Ti(o,s),a.tag=1,a=jg(null,a,o,s,r)):(a.tag=0,a=ah(null,a,o,s,r));else{if(o!=null){if(h=o.$$typeof,h===Q){a.tag=11,a=pg(null,a,o,s,r);break e}else if(h===M){a.tag=14,a=fg(null,a,o,s,r);break e}}throw a=ie(o)||o,Error(l(306,a,""))}}return a;case 0:return ah(s,a,a.type,a.pendingProps,r);case 1:return o=a.type,h=Ti(o,a.pendingProps),jg(s,a,o,h,r);case 3:e:{if(K(a,a.stateNode.containerInfo),s===null)throw Error(l(387));o=a.pendingProps;var p=a.memoizedState;h=p.element,Iu(s,a),wl(a,o,null,r);var N=a.memoizedState;if(o=N.cache,mn(a,Ut,o),o!==p.cache&&Eu(a,[Ut],r,!0),Cl(),o=N.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:N.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Ng(s,a,o,r);break e}else if(o!==h){h=Ps(Error(l(424)),a),Nl(h),a=Ng(s,a,o,r);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Tt=Xs(s.firstChild),ms=a,at=!0,vi=null,ua=!0,r=ag(a,null,o,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(jl(),o===h){a=Ga(s,a,r);break e}Zt(s,a,o,r)}a=a.child}return a;case 26:return wc(s,a),s===null?(r=wv(a.type,null,a.pendingProps,null))?a.memoizedState=r:at||(r=a.type,s=a.pendingProps,o=Hc(me.current).createElement(r),o[Vt]=a,o[wt]=s,es(o,r,s),St(o),a.stateNode=o):a.memoizedState=wv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return oe(a),s===null&&at&&(o=a.stateNode=Av(a.type,a.pendingProps,me.current),ms=a,ua=!0,h=Tt,Cn(a.type)?(Hh=h,Tt=Xs(o.firstChild)):Tt=h),Zt(s,a,a.pendingProps.children,r),wc(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&at&&((h=o=Tt)&&(o=Cb(o,a.type,a.pendingProps,ua),o!==null?(a.stateNode=o,ms=a,Tt=Xs(o.firstChild),ua=!1,h=!0):h=!1),h||yi(a)),oe(a),h=a.type,p=a.pendingProps,N=s!==null?s.memoizedProps:null,o=p.children,Uh(h,p)?o=null:N!==null&&Uh(h,N)&&(a.flags|=32),a.memoizedState!==null&&(h=Lu(s,a,$N,null,null,r),Wl._currentValue=h),wc(s,a),Zt(s,a,o,r),a.child;case 6:return s===null&&at&&((s=r=Tt)&&(r=wb(r,a.pendingProps,ua),r!==null?(a.stateNode=r,ms=a,Tt=null,s=!0):s=!1),s||yi(a)),null;case 13:return bg(s,a,r);case 4:return K(a,a.stateNode.containerInfo),o=a.pendingProps,s===null?a.child=fr(a,null,o,r):Zt(s,a,o,r),a.child;case 11:return pg(s,a,a.type,a.pendingProps,r);case 7:return Zt(s,a,a.pendingProps,r),a.child;case 8:return Zt(s,a,a.pendingProps.children,r),a.child;case 12:return Zt(s,a,a.pendingProps.children,r),a.child;case 10:return o=a.pendingProps,mn(a,a.type,o.value),Zt(s,a,o.children,r),a.child;case 9:return h=a.type._context,o=a.pendingProps.children,ji(a),h=ns(h),o=o(h),a.flags|=1,Zt(s,a,o,r),a.child;case 14:return fg(s,a,a.type,a.pendingProps,r);case 15:return gg(s,a,a.type,a.pendingProps,r);case 19:return _g(s,a,r);case 31:return o=a.pendingProps,r=a.mode,o={mode:o.mode,children:o.children},s===null?(r=kc(o,r),r.ref=a.ref,a.child=r,r.return=a,a=r):(r=Ba(s.child,o),r.ref=a.ref,a.child=r,r.return=a,a=r),a;case 22:return vg(s,a,r);case 24:return ji(a),o=ns(Ut),s===null?(h=ku(),h===null&&(h=pt,p=Cu(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=r),h=p),a.memoizedState={parent:o,cache:h},Du(a),mn(a,Ut,h)):((s.lanes&r)!==0&&(Iu(s,a),wl(a,null,null,r),Cl()),h=s.memoizedState,p=a.memoizedState,h.parent!==o?(h={parent:o,cache:o},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),mn(a,Ut,o)):(o=p.cache,mn(a,Ut,o),o!==h.cache&&Eu(a,[Ut],r,!0))),Zt(s,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function $a(s){s.flags|=4}function Ag(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Pv(a)){if(a=Bs.current,a!==null&&((Ze&4194048)===Ze?ha!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||a!==ha))throw Al=Ru,cf;s.flags|=8192}}function Rc(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Jr():536870912,s.lanes|=a,xr|=a)}function Ol(s,a){if(!at)switch(s.tailMode){case"hidden":a=s.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:o.sibling=null}}function jt(s){var a=s.alternate!==null&&s.alternate.child===s.child,r=0,o=0;if(a)for(var h=s.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=s,h=h.sibling;else for(h=s.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=s,h=h.sibling;return s.subtreeFlags|=o,s.childLanes=r,a}function tb(s,a,r){var o=a.pendingProps;switch(Tu(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(a),null;case 1:return jt(a),null;case 3:return r=a.stateNode,o=null,s!==null&&(o=s.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Fa(Ut),ye(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(xl(a)?$a(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,af())),jt(a),null;case 26:return r=a.memoizedState,s===null?($a(a),r!==null?(jt(a),Ag(a,r)):(jt(a),a.flags&=-16777217)):r?r!==s.memoizedState?($a(a),jt(a),Ag(a,r)):(jt(a),a.flags&=-16777217):(s.memoizedProps!==o&&$a(a),jt(a),a.flags&=-16777217),null;case 27:R(a),r=me.current;var h=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==o&&$a(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return jt(a),null}s=B.current,xl(a)?tf(a):(s=Av(h,o,r),a.stateNode=s,$a(a))}return jt(a),null;case 5:if(R(a),r=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==o&&$a(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return jt(a),null}if(s=B.current,xl(a))tf(a);else{switch(h=Hc(me.current),s){case 1:s=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=h.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?s.multiple=!0:o.size&&(s.size=o.size);break;default:s=typeof o.is=="string"?h.createElement(r,{is:o.is}):h.createElement(r)}}s[Vt]=a,s[wt]=o;e:for(h=a.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break e;for(;h.sibling===null;){if(h.return===null||h.return===a)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a.stateNode=s;e:switch(es(s,r,o),r){case"button":case"input":case"select":case"textarea":s=!!o.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&$a(a)}}return jt(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==o&&$a(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(l(166));if(s=me.current,xl(a)){if(s=a.stateNode,r=a.memoizedProps,o=null,h=ms,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}s[Vt]=a,s=!!(s.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||xv(s.nodeValue,r)),s||yi(a)}else s=Hc(s).createTextNode(o),s[Vt]=a,a.stateNode=s}return jt(a),null;case 13:if(o=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(h=xl(a),o!==null&&o.dehydrated!==null){if(s===null){if(!h)throw Error(l(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));h[Vt]=a}else jl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jt(a),h=!1}else h=af(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(Ha(a),a):(Ha(a),null)}if(Ha(a),(a.flags&128)!==0)return a.lanes=r,a;if(r=o!==null,s=s!==null&&s.memoizedState!==null,r){o=a.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var p=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==h&&(o.flags|=2048)}return r!==s&&r&&(a.child.flags|=8192),Rc(a,a.updateQueue),jt(a),null;case 4:return ye(),s===null&&Mh(a.stateNode.containerInfo),jt(a),null;case 10:return Fa(a.type),jt(a),null;case 19:if(Te(zt),h=a.memoizedState,h===null)return jt(a),null;if(o=(a.flags&128)!==0,p=h.rendering,p===null)if(o)Ol(h,!1);else{if(_t!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(p=Ac(s),p!==null){for(a.flags|=128,Ol(h,!1),s=p.updateQueue,a.updateQueue=s,Rc(a,s),a.subtreeFlags=0,s=r,r=a.child;r!==null;)Jp(r,s),r=r.sibling;return G(zt,zt.current&1|2),a.child}s=s.sibling}h.tail!==null&&Re()>Pc&&(a.flags|=128,o=!0,Ol(h,!1),a.lanes=4194304)}else{if(!o)if(s=Ac(p),s!==null){if(a.flags|=128,o=!0,s=s.updateQueue,a.updateQueue=s,Rc(a,s),Ol(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!at)return jt(a),null}else 2*Re()-h.renderingStartTime>Pc&&r!==536870912&&(a.flags|=128,o=!0,Ol(h,!1),a.lanes=4194304);h.isBackwards?(p.sibling=a.child,a.child=p):(s=h.last,s!==null?s.sibling=p:a.child=p,h.last=p)}return h.tail!==null?(a=h.tail,h.rendering=a,h.tail=a.sibling,h.renderingStartTime=Re(),a.sibling=null,s=zt.current,G(zt,o?s&1|2:s&1),a):(jt(a),null);case 22:case 23:return Ha(a),Vu(),o=a.memoizedState!==null,s!==null?s.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(r&536870912)!==0&&(a.flags&128)===0&&(jt(a),a.subtreeFlags&6&&(a.flags|=8192)):jt(a),r=a.updateQueue,r!==null&&Rc(a,r.retryQueue),r=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==r&&(a.flags|=2048),s!==null&&Te(Ni),null;case 24:return r=null,s!==null&&(r=s.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Fa(Ut),jt(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function sb(s,a){switch(Tu(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Fa(Ut),ye(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return R(a),null;case 13:if(Ha(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(l(340));jl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Te(zt),null;case 4:return ye(),null;case 10:return Fa(a.type),null;case 22:case 23:return Ha(a),Vu(),s!==null&&Te(Ni),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Fa(Ut),null;case 25:return null;default:return null}}function Eg(s,a){switch(Tu(a),a.tag){case 3:Fa(Ut),ye();break;case 26:case 27:case 5:R(a);break;case 4:ye();break;case 13:Ha(a);break;case 19:Te(zt);break;case 10:Fa(a.type);break;case 22:case 23:Ha(a),Vu(),s!==null&&Te(Ni);break;case 24:Fa(Ut)}}function Vl(s,a){try{var r=a.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var h=o.next;r=h;do{if((r.tag&s)===s){o=void 0;var p=r.create,N=r.inst;o=p(),N.destroy=o}r=r.next}while(r!==h)}}catch(_){mt(a,a.return,_)}}function jn(s,a,r){try{var o=a.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var p=h.next;o=p;do{if((o.tag&s)===s){var N=o.inst,_=N.destroy;if(_!==void 0){N.destroy=void 0,h=a;var L=r,te=_;try{te()}catch(he){mt(h,L,he)}}}o=o.next}while(o!==p)}}catch(he){mt(a,a.return,he)}}function Cg(s){var a=s.updateQueue;if(a!==null){var r=s.stateNode;try{ff(a,r)}catch(o){mt(s,s.return,o)}}}function wg(s,a,r){r.props=Ti(s.type,s.memoizedProps),r.state=s.memoizedState;try{r.componentWillUnmount()}catch(o){mt(s,a,o)}}function Bl(s,a){try{var r=s.ref;if(r!==null){switch(s.tag){case 26:case 27:case 5:var o=s.stateNode;break;case 30:o=s.stateNode;break;default:o=s.stateNode}typeof r=="function"?s.refCleanup=r(o):r.current=o}}catch(h){mt(s,a,h)}}function ma(s,a){var r=s.ref,o=s.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(h){mt(s,a,h)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){mt(s,a,h)}else r.current=null}function kg(s){var a=s.type,r=s.memoizedProps,o=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(h){mt(s,s.return,h)}}function uh(s,a,r){try{var o=s.stateNode;Tb(o,s.type,r,a),o[wt]=a}catch(h){mt(s,s.return,h)}}function Rg(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Cn(s.type)||s.tag===4}function hh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Rg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Cn(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function mh(s,a,r){var o=s.tag;if(o===5||o===6)s=s.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(s,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(s),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=qc));else if(o!==4&&(o===27&&Cn(s.type)&&(r=s.stateNode,a=null),s=s.child,s!==null))for(mh(s,a,r),s=s.sibling;s!==null;)mh(s,a,r),s=s.sibling}function Dc(s,a,r){var o=s.tag;if(o===5||o===6)s=s.stateNode,a?r.insertBefore(s,a):r.appendChild(s);else if(o!==4&&(o===27&&Cn(s.type)&&(r=s.stateNode),s=s.child,s!==null))for(Dc(s,a,r),s=s.sibling;s!==null;)Dc(s,a,r),s=s.sibling}function Dg(s){var a=s.stateNode,r=s.memoizedProps;try{for(var o=s.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);es(a,o,r),a[Vt]=s,a[wt]=r}catch(p){mt(s,s.return,p)}}var Qa=!1,Et=!1,ph=!1,Ig=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function ab(s,a){if(s=s.containerInfo,Bh=Xc,s=qp(s),hu(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var h=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var N=0,_=-1,L=-1,te=0,he=0,xe=s,ae=null;t:for(;;){for(var ne;xe!==r||h!==0&&xe.nodeType!==3||(_=N+h),xe!==p||o!==0&&xe.nodeType!==3||(L=N+o),xe.nodeType===3&&(N+=xe.nodeValue.length),(ne=xe.firstChild)!==null;)ae=xe,xe=ne;for(;;){if(xe===s)break t;if(ae===r&&++te===h&&(_=N),ae===p&&++he===o&&(L=N),(ne=xe.nextSibling)!==null)break;xe=ae,ae=xe.parentNode}xe=ne}r=_===-1||L===-1?null:{start:_,end:L}}else r=null}r=r||{start:0,end:0}}else r=null;for(Lh={focusedElem:s,selectionRange:r},Xc=!1,Qt=a;Qt!==null;)if(a=Qt,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Qt=s;else for(;Qt!==null;){switch(a=Qt,p=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,r=a,h=p.memoizedProps,p=p.memoizedState,o=r.stateNode;try{var Ue=Ti(r.type,h,r.elementType===r.type);s=o.getSnapshotBeforeUpdate(Ue,p),o.__reactInternalSnapshotBeforeUpdate=s}catch(Oe){mt(r,r.return,Oe)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,r=s.nodeType,r===9)Fh(s);else if(r===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Fh(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(l(163))}if(s=a.sibling,s!==null){s.return=a.return,Qt=s;break}Qt=a.return}}function Pg(s,a,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Nn(s,r),o&4&&Vl(5,r);break;case 1:if(Nn(s,r),o&4)if(s=r.stateNode,a===null)try{s.componentDidMount()}catch(N){mt(r,r.return,N)}else{var h=Ti(r.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(h,a,s.__reactInternalSnapshotBeforeUpdate)}catch(N){mt(r,r.return,N)}}o&64&&Cg(r),o&512&&Bl(r,r.return);break;case 3:if(Nn(s,r),o&64&&(s=r.updateQueue,s!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{ff(s,a)}catch(N){mt(r,r.return,N)}}break;case 27:a===null&&o&4&&Dg(r);case 26:case 5:Nn(s,r),a===null&&o&4&&kg(r),o&512&&Bl(r,r.return);break;case 12:Nn(s,r);break;case 13:Nn(s,r),o&4&&Vg(s,r),o&64&&(s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(r=hb.bind(null,r),kb(s,r))));break;case 22:if(o=r.memoizedState!==null||Qa,!o){a=a!==null&&a.memoizedState!==null||Et,h=Qa;var p=Et;Qa=o,(Et=a)&&!p?bn(s,r,(r.subtreeFlags&8772)!==0):Nn(s,r),Qa=h,Et=p}break;case 30:break;default:Nn(s,r)}}function Mg(s){var a=s.alternate;a!==null&&(s.alternate=null,Mg(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&cn(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var xt=null,gs=!1;function Ya(s,a,r){for(r=r.child;r!==null;)Og(s,a,r),r=r.sibling}function Og(s,a,r){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(vt,r)}catch{}switch(r.tag){case 26:Et||ma(r,a),Ya(s,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Et||ma(r,a);var o=xt,h=gs;Cn(r.type)&&(xt=r.stateNode,gs=!1),Ya(s,a,r),Ql(r.stateNode),xt=o,gs=h;break;case 5:Et||ma(r,a);case 6:if(o=xt,h=gs,xt=null,Ya(s,a,r),xt=o,gs=h,xt!==null)if(gs)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(r.stateNode)}catch(p){mt(r,a,p)}else try{xt.removeChild(r.stateNode)}catch(p){mt(r,a,p)}break;case 18:xt!==null&&(gs?(s=xt,_v(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.stateNode),to(s)):_v(xt,r.stateNode));break;case 4:o=xt,h=gs,xt=r.stateNode.containerInfo,gs=!0,Ya(s,a,r),xt=o,gs=h;break;case 0:case 11:case 14:case 15:Et||jn(2,r,a),Et||jn(4,r,a),Ya(s,a,r);break;case 1:Et||(ma(r,a),o=r.stateNode,typeof o.componentWillUnmount=="function"&&wg(r,a,o)),Ya(s,a,r);break;case 21:Ya(s,a,r);break;case 22:Et=(o=Et)||r.memoizedState!==null,Ya(s,a,r),Et=o;break;default:Ya(s,a,r)}}function Vg(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{to(s)}catch(r){mt(a,a.return,r)}}function nb(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Ig),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Ig),a;default:throw Error(l(435,s.tag))}}function fh(s,a){var r=nb(s);a.forEach(function(o){var h=mb.bind(null,s,o);r.has(o)||(r.add(o),o.then(h,h))})}function Ts(s,a){var r=a.deletions;if(r!==null)for(var o=0;o<r.length;o++){var h=r[o],p=s,N=a,_=N;e:for(;_!==null;){switch(_.tag){case 27:if(Cn(_.type)){xt=_.stateNode,gs=!1;break e}break;case 5:xt=_.stateNode,gs=!1;break e;case 3:case 4:xt=_.stateNode.containerInfo,gs=!0;break e}_=_.return}if(xt===null)throw Error(l(160));Og(p,N,h),xt=null,gs=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Bg(a,s),a=a.sibling}var Ks=null;function Bg(s,a){var r=s.alternate,o=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ts(a,s),_s(s),o&4&&(jn(3,s,s.return),Vl(3,s),jn(5,s,s.return));break;case 1:Ts(a,s),_s(s),o&512&&(Et||r===null||ma(r,r.return)),o&64&&Qa&&(s=s.updateQueue,s!==null&&(o=s.callbacks,o!==null&&(r=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var h=Ks;if(Ts(a,s),_s(s),o&512&&(Et||r===null||ma(r,r.return)),o&4){var p=r!==null?r.memoizedState:null;if(o=s.memoizedState,r===null)if(o===null)if(s.stateNode===null){e:{o=s.type,r=s.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Zn]||p[Vt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(o),h.head.insertBefore(p,h.querySelector("head > title"))),es(p,o,r),p[Vt]=s,St(p),o=p;break e;case"link":var N=Dv("link","href",h).get(o+(r.href||""));if(N){for(var _=0;_<N.length;_++)if(p=N[_],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){N.splice(_,1);break t}}p=h.createElement(o),es(p,o,r),h.head.appendChild(p);break;case"meta":if(N=Dv("meta","content",h).get(o+(r.content||""))){for(_=0;_<N.length;_++)if(p=N[_],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){N.splice(_,1);break t}}p=h.createElement(o),es(p,o,r),h.head.appendChild(p);break;default:throw Error(l(468,o))}p[Vt]=s,St(p),o=p}s.stateNode=o}else Iv(h,s.type,s.stateNode);else s.stateNode=Rv(h,o,s.memoizedProps);else p!==o?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,o===null?Iv(h,s.type,s.stateNode):Rv(h,o,s.memoizedProps)):o===null&&s.stateNode!==null&&uh(s,s.memoizedProps,r.memoizedProps)}break;case 27:Ts(a,s),_s(s),o&512&&(Et||r===null||ma(r,r.return)),r!==null&&o&4&&uh(s,s.memoizedProps,r.memoizedProps);break;case 5:if(Ts(a,s),_s(s),o&512&&(Et||r===null||ma(r,r.return)),s.flags&32){h=s.stateNode;try{ks(h,"")}catch(ne){mt(s,s.return,ne)}}o&4&&s.stateNode!=null&&(h=s.memoizedProps,uh(s,h,r!==null?r.memoizedProps:h)),o&1024&&(ph=!0);break;case 6:if(Ts(a,s),_s(s),o&4){if(s.stateNode===null)throw Error(l(162));o=s.memoizedProps,r=s.stateNode;try{r.nodeValue=o}catch(ne){mt(s,s.return,ne)}}break;case 3:if(Qc=null,h=Ks,Ks=Gc(a.containerInfo),Ts(a,s),Ks=h,_s(s),o&4&&r!==null&&r.memoizedState.isDehydrated)try{to(a.containerInfo)}catch(ne){mt(s,s.return,ne)}ph&&(ph=!1,Lg(s));break;case 4:o=Ks,Ks=Gc(s.stateNode.containerInfo),Ts(a,s),_s(s),Ks=o;break;case 12:Ts(a,s),_s(s);break;case 13:Ts(a,s),_s(s),s.child.flags&8192&&s.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Nh=Re()),o&4&&(o=s.updateQueue,o!==null&&(s.updateQueue=null,fh(s,o)));break;case 22:h=s.memoizedState!==null;var L=r!==null&&r.memoizedState!==null,te=Qa,he=Et;if(Qa=te||h,Et=he||L,Ts(a,s),Et=he,Qa=te,_s(s),o&8192)e:for(a=s.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(r===null||L||Qa||Et||_i(s)),r=null,a=s;;){if(a.tag===5||a.tag===26){if(r===null){L=r=a;try{if(p=L.stateNode,h)N=p.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{_=L.stateNode;var xe=L.memoizedProps.style,ae=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;_.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(ne){mt(L,L.return,ne)}}}else if(a.tag===6){if(r===null){L=a;try{L.stateNode.nodeValue=h?"":L.memoizedProps}catch(ne){mt(L,L.return,ne)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=s.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,fh(s,r))));break;case 19:Ts(a,s),_s(s),o&4&&(o=s.updateQueue,o!==null&&(s.updateQueue=null,fh(s,o)));break;case 30:break;case 21:break;default:Ts(a,s),_s(s)}}function _s(s){var a=s.flags;if(a&2){try{for(var r,o=s.return;o!==null;){if(Rg(o)){r=o;break}o=o.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var h=r.stateNode,p=hh(s);Dc(s,p,h);break;case 5:var N=r.stateNode;r.flags&32&&(ks(N,""),r.flags&=-33);var _=hh(s);Dc(s,_,N);break;case 3:case 4:var L=r.stateNode.containerInfo,te=hh(s);mh(s,te,L);break;default:throw Error(l(161))}}catch(he){mt(s,s.return,he)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Lg(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Lg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Nn(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Pg(s,a.alternate,a),a=a.sibling}function _i(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:jn(4,a,a.return),_i(a);break;case 1:ma(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&wg(a,a.return,r),_i(a);break;case 27:Ql(a.stateNode);case 26:case 5:ma(a,a.return),_i(a);break;case 22:a.memoizedState===null&&_i(a);break;case 30:_i(a);break;default:_i(a)}s=s.sibling}}function bn(s,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,h=s,p=a,N=p.flags;switch(p.tag){case 0:case 11:case 15:bn(h,p,r),Vl(4,p);break;case 1:if(bn(h,p,r),o=p,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(te){mt(o,o.return,te)}if(o=p,h=o.updateQueue,h!==null){var _=o.stateNode;try{var L=h.shared.hiddenCallbacks;if(L!==null)for(h.shared.hiddenCallbacks=null,h=0;h<L.length;h++)pf(L[h],_)}catch(te){mt(o,o.return,te)}}r&&N&64&&Cg(p),Bl(p,p.return);break;case 27:Dg(p);case 26:case 5:bn(h,p,r),r&&o===null&&N&4&&kg(p),Bl(p,p.return);break;case 12:bn(h,p,r);break;case 13:bn(h,p,r),r&&N&4&&Vg(h,p);break;case 22:p.memoizedState===null&&bn(h,p,r),Bl(p,p.return);break;case 30:break;default:bn(h,p,r)}a=a.sibling}}function gh(s,a){var r=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==r&&(s!=null&&s.refCount++,r!=null&&Tl(r))}function vh(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Tl(s))}function pa(s,a,r,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ug(s,a,r,o),a=a.sibling}function Ug(s,a,r,o){var h=a.flags;switch(a.tag){case 0:case 11:case 15:pa(s,a,r,o),h&2048&&Vl(9,a);break;case 1:pa(s,a,r,o);break;case 3:pa(s,a,r,o),h&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Tl(s)));break;case 12:if(h&2048){pa(s,a,r,o),s=a.stateNode;try{var p=a.memoizedProps,N=p.id,_=p.onPostCommit;typeof _=="function"&&_(N,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(L){mt(a,a.return,L)}}else pa(s,a,r,o);break;case 13:pa(s,a,r,o);break;case 23:break;case 22:p=a.stateNode,N=a.alternate,a.memoizedState!==null?p._visibility&2?pa(s,a,r,o):Ll(s,a):p._visibility&2?pa(s,a,r,o):(p._visibility|=2,gr(s,a,r,o,(a.subtreeFlags&10256)!==0)),h&2048&&gh(N,a);break;case 24:pa(s,a,r,o),h&2048&&vh(a.alternate,a);break;default:pa(s,a,r,o)}}function gr(s,a,r,o,h){for(h=h&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=s,N=a,_=r,L=o,te=N.flags;switch(N.tag){case 0:case 11:case 15:gr(p,N,_,L,h),Vl(8,N);break;case 23:break;case 22:var he=N.stateNode;N.memoizedState!==null?he._visibility&2?gr(p,N,_,L,h):Ll(p,N):(he._visibility|=2,gr(p,N,_,L,h)),h&&te&2048&&gh(N.alternate,N);break;case 24:gr(p,N,_,L,h),h&&te&2048&&vh(N.alternate,N);break;default:gr(p,N,_,L,h)}a=a.sibling}}function Ll(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=s,o=a,h=o.flags;switch(o.tag){case 22:Ll(r,o),h&2048&&gh(o.alternate,o);break;case 24:Ll(r,o),h&2048&&vh(o.alternate,o);break;default:Ll(r,o)}a=a.sibling}}var Ul=8192;function vr(s){if(s.subtreeFlags&Ul)for(s=s.child;s!==null;)zg(s),s=s.sibling}function zg(s){switch(s.tag){case 26:vr(s),s.flags&Ul&&s.memoizedState!==null&&qb(Ks,s.memoizedState,s.memoizedProps);break;case 5:vr(s);break;case 3:case 4:var a=Ks;Ks=Gc(s.stateNode.containerInfo),vr(s),Ks=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Ul,Ul=16777216,vr(s),Ul=a):vr(s));break;default:vr(s)}}function Fg(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function zl(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var o=a[r];Qt=o,Hg(o,s)}Fg(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qg(s),s=s.sibling}function qg(s){switch(s.tag){case 0:case 11:case 15:zl(s),s.flags&2048&&jn(9,s,s.return);break;case 3:zl(s);break;case 12:zl(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Ic(s)):zl(s);break;default:zl(s)}}function Ic(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var o=a[r];Qt=o,Hg(o,s)}Fg(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:jn(8,a,a.return),Ic(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Ic(a));break;default:Ic(a)}s=s.sibling}}function Hg(s,a){for(;Qt!==null;){var r=Qt;switch(r.tag){case 0:case 11:case 15:jn(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Tl(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Qt=o;else e:for(r=s;Qt!==null;){o=Qt;var h=o.sibling,p=o.return;if(Mg(o),o===r){Qt=null;break e}if(h!==null){h.return=p,Qt=h;break e}Qt=p}}}var ib={getCacheForType:function(s){var a=ns(Ut),r=a.data.get(s);return r===void 0&&(r=s(),a.data.set(s,r)),r}},rb=typeof WeakMap=="function"?WeakMap:Map,lt=0,pt=null,$e=null,Ze=0,ot=0,Ss=null,Tn=!1,yr=!1,yh=!1,Ka=0,_t=0,_n=0,Si=0,xh=0,Ls=0,xr=0,Fl=null,vs=null,jh=!1,Nh=0,Pc=1/0,Mc=null,Sn=null,Jt=0,An=null,jr=null,Nr=0,bh=0,Th=null,Gg=null,ql=0,_h=null;function As(){if((lt&2)!==0&&Ze!==0)return Ze&-Ze;if(J.T!==null){var s=or;return s!==0?s:Rh()}return ln()}function $g(){Ls===0&&(Ls=(Ze&536870912)===0||at?Zr():536870912);var s=Bs.current;return s!==null&&(s.flags|=32),Ls}function Es(s,a,r){(s===pt&&(ot===2||ot===9)||s.cancelPendingCommit!==null)&&(br(s,0),En(s,Ze,Ls,!1)),Ea(s,r),((lt&2)===0||s!==pt)&&(s===pt&&((lt&2)===0&&(Si|=r),_t===4&&En(s,Ze,Ls,!1)),fa(s))}function Qg(s,a,r){if((lt&6)!==0)throw Error(l(327));var o=!r&&(a&124)===0&&(a&s.expiredLanes)===0||Wn(s,a),h=o?cb(s,a):Eh(s,a,!0),p=o;do{if(h===0){yr&&!o&&En(s,a,0,!1);break}else{if(r=s.current.alternate,p&&!lb(r)){h=Eh(s,a,!1),p=!1;continue}if(h===2){if(p=a,s.errorRecoveryDisabledLanes&p)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){a=N;e:{var _=s;h=Fl;var L=_.current.memoizedState.isDehydrated;if(L&&(br(_,N).flags|=256),N=Eh(_,N,!1),N!==2){if(yh&&!L){_.errorRecoveryDisabledLanes|=p,Si|=p,h=4;break e}p=vs,vs=h,p!==null&&(vs===null?vs=p:vs.push.apply(vs,p))}h=N}if(p=!1,h!==2)continue}}if(h===1){br(s,0),En(s,a,0,!0);break}e:{switch(o=s,p=h,p){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:En(o,a,Ls,!Tn);break e;case 2:vs=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(h=Nh+300-Re(),10<h)){if(En(o,a,Ls,!Tn),Li(o,0,!0)!==0)break e;o.timeoutHandle=bv(Yg.bind(null,o,r,vs,Mc,jh,a,Ls,Si,xr,Tn,p,2,-0,0),h);break e}Yg(o,r,vs,Mc,jh,a,Ls,Si,xr,Tn,p,0,-0,0)}}break}while(!0);fa(s)}function Yg(s,a,r,o,h,p,N,_,L,te,he,xe,ae,ne){if(s.timeoutHandle=-1,xe=a.subtreeFlags,(xe&8192||(xe&16785408)===16785408)&&(Xl={stylesheets:null,count:0,unsuspend:Fb},zg(a),xe=Hb(),xe!==null)){s.cancelPendingCommit=xe(tv.bind(null,s,a,p,r,o,h,N,_,L,he,1,ae,ne)),En(s,p,N,!te);return}tv(s,a,p,r,o,h,N,_,L)}function lb(s){for(var a=s;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var h=r[o],p=h.getSnapshot;h=h.value;try{if(!Ns(p(),h))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function En(s,a,r,o){a&=~xh,a&=~Si,s.suspendedLanes|=a,s.pingedLanes&=~a,o&&(s.warmLanes|=a),o=s.expirationTimes;for(var h=a;0<h;){var p=31-qt(h),N=1<<p;o[p]=-1,h&=~N}r!==0&&ea(s,r,a)}function Oc(){return(lt&6)===0?(Hl(0),!1):!0}function Sh(){if($e!==null){if(ot===0)var s=$e.return;else s=$e,za=xi=null,Fu(s),pr=null,Pl=0,s=$e;for(;s!==null;)Eg(s.alternate,s),s=s.return;$e=null}}function br(s,a){var r=s.timeoutHandle;r!==-1&&(s.timeoutHandle=-1,Sb(r)),r=s.cancelPendingCommit,r!==null&&(s.cancelPendingCommit=null,r()),Sh(),pt=s,$e=r=Ba(s.current,null),Ze=a,ot=0,Ss=null,Tn=!1,yr=Wn(s,a),yh=!1,xr=Ls=xh=Si=_n=_t=0,vs=Fl=null,jh=!1,(a&8)!==0&&(a|=a&32);var o=s.entangledLanes;if(o!==0)for(s=s.entanglements,o&=a;0<o;){var h=31-qt(o),p=1<<h;a|=s[h],o&=~p}return Ka=a,nc(),r}function Kg(s,a){He=null,J.H=Tc,a===Sl||a===mc?(a=hf(),ot=3):a===cf?(a=hf(),ot=4):ot=a===mg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ss=a,$e===null&&(_t=1,Cc(s,Ps(a,s.current)))}function Xg(){var s=J.H;return J.H=Tc,s===null?Tc:s}function Wg(){var s=J.A;return J.A=ib,s}function Ah(){_t=4,Tn||(Ze&4194048)!==Ze&&Bs.current!==null||(yr=!0),(_n&134217727)===0&&(Si&134217727)===0||pt===null||En(pt,Ze,Ls,!1)}function Eh(s,a,r){var o=lt;lt|=2;var h=Xg(),p=Wg();(pt!==s||Ze!==a)&&(Mc=null,br(s,a)),a=!1;var N=_t;e:do try{if(ot!==0&&$e!==null){var _=$e,L=Ss;switch(ot){case 8:Sh(),N=6;break e;case 3:case 2:case 9:case 6:Bs.current===null&&(a=!0);var te=ot;if(ot=0,Ss=null,Tr(s,_,L,te),r&&yr){N=0;break e}break;default:te=ot,ot=0,Ss=null,Tr(s,_,L,te)}}ob(),N=_t;break}catch(he){Kg(s,he)}while(!0);return a&&s.shellSuspendCounter++,za=xi=null,lt=o,J.H=h,J.A=p,$e===null&&(pt=null,Ze=0,nc()),N}function ob(){for(;$e!==null;)Zg($e)}function cb(s,a){var r=lt;lt|=2;var o=Xg(),h=Wg();pt!==s||Ze!==a?(Mc=null,Pc=Re()+500,br(s,a)):yr=Wn(s,a);e:do try{if(ot!==0&&$e!==null){a=$e;var p=Ss;t:switch(ot){case 1:ot=0,Ss=null,Tr(s,a,p,1);break;case 2:case 9:if(df(p)){ot=0,Ss=null,Jg(a);break}a=function(){ot!==2&&ot!==9||pt!==s||(ot=7),fa(s)},p.then(a,a);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:df(p)?(ot=0,Ss=null,Jg(a)):(ot=0,Ss=null,Tr(s,a,p,7));break;case 5:var N=null;switch($e.tag){case 26:N=$e.memoizedState;case 5:case 27:var _=$e;if(!N||Pv(N)){ot=0,Ss=null;var L=_.sibling;if(L!==null)$e=L;else{var te=_.return;te!==null?($e=te,Vc(te)):$e=null}break t}}ot=0,Ss=null,Tr(s,a,p,5);break;case 6:ot=0,Ss=null,Tr(s,a,p,6);break;case 8:Sh(),_t=6;break e;default:throw Error(l(462))}}db();break}catch(he){Kg(s,he)}while(!0);return za=xi=null,J.H=o,J.A=h,lt=r,$e!==null?0:(pt=null,Ze=0,nc(),_t)}function db(){for(;$e!==null&&!Se();)Zg($e)}function Zg(s){var a=Sg(s.alternate,s,Ka);s.memoizedProps=s.pendingProps,a===null?Vc(s):$e=a}function Jg(s){var a=s,r=a.alternate;switch(a.tag){case 15:case 0:a=xg(r,a,a.pendingProps,a.type,void 0,Ze);break;case 11:a=xg(r,a,a.pendingProps,a.type.render,a.ref,Ze);break;case 5:Fu(a);default:Eg(r,a),a=$e=Jp(a,Ka),a=Sg(r,a,Ka)}s.memoizedProps=s.pendingProps,a===null?Vc(s):$e=a}function Tr(s,a,r,o){za=xi=null,Fu(a),pr=null,Pl=0;var h=a.return;try{if(JN(s,h,a,r,Ze)){_t=1,Cc(s,Ps(r,s.current)),$e=null;return}}catch(p){if(h!==null)throw $e=h,p;_t=1,Cc(s,Ps(r,s.current)),$e=null;return}a.flags&32768?(at||o===1?s=!0:yr||(Ze&536870912)!==0?s=!1:(Tn=s=!0,(o===2||o===9||o===3||o===6)&&(o=Bs.current,o!==null&&o.tag===13&&(o.flags|=16384))),ev(a,s)):Vc(a)}function Vc(s){var a=s;do{if((a.flags&32768)!==0){ev(a,Tn);return}s=a.return;var r=tb(a.alternate,a,Ka);if(r!==null){$e=r;return}if(a=a.sibling,a!==null){$e=a;return}$e=a=s}while(a!==null);_t===0&&(_t=5)}function ev(s,a){do{var r=sb(s.alternate,s);if(r!==null){r.flags&=32767,$e=r;return}if(r=s.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(s=s.sibling,s!==null)){$e=s;return}$e=s=r}while(s!==null);_t=6,$e=null}function tv(s,a,r,o,h,p,N,_,L){s.cancelPendingCommit=null;do Bc();while(Jt!==0);if((lt&6)!==0)throw Error(l(327));if(a!==null){if(a===s.current)throw Error(l(177));if(p=a.lanes|a.childLanes,p|=vu,el(s,r,p,N,_,L),s===pt&&($e=pt=null,Ze=0),jr=a,An=s,Nr=r,bh=p,Th=h,Gg=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,pb(nt,function(){return rv(),null})):(s.callbackNode=null,s.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=J.T,J.T=null,h=fe.p,fe.p=2,N=lt,lt|=4;try{ab(s,a,r)}finally{lt=N,fe.p=h,J.T=o}}Jt=1,sv(),av(),nv()}}function sv(){if(Jt===1){Jt=0;var s=An,a=jr,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=J.T,J.T=null;var o=fe.p;fe.p=2;var h=lt;lt|=4;try{Bg(a,s);var p=Lh,N=qp(s.containerInfo),_=p.focusedElem,L=p.selectionRange;if(N!==_&&_&&_.ownerDocument&&Fp(_.ownerDocument.documentElement,_)){if(L!==null&&hu(_)){var te=L.start,he=L.end;if(he===void 0&&(he=te),"selectionStart"in _)_.selectionStart=te,_.selectionEnd=Math.min(he,_.value.length);else{var xe=_.ownerDocument||document,ae=xe&&xe.defaultView||window;if(ae.getSelection){var ne=ae.getSelection(),Ue=_.textContent.length,Oe=Math.min(L.start,Ue),ht=L.end===void 0?Oe:Math.min(L.end,Ue);!ne.extend&&Oe>ht&&(N=ht,ht=Oe,Oe=N);var X=zp(_,Oe),$=zp(_,ht);if(X&&$&&(ne.rangeCount!==1||ne.anchorNode!==X.node||ne.anchorOffset!==X.offset||ne.focusNode!==$.node||ne.focusOffset!==$.offset)){var Z=xe.createRange();Z.setStart(X.node,X.offset),ne.removeAllRanges(),Oe>ht?(ne.addRange(Z),ne.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),ne.addRange(Z))}}}}for(xe=[],ne=_;ne=ne.parentNode;)ne.nodeType===1&&xe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<xe.length;_++){var ge=xe[_];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Xc=!!Bh,Lh=Bh=null}finally{lt=h,fe.p=o,J.T=r}}s.current=a,Jt=2}}function av(){if(Jt===2){Jt=0;var s=An,a=jr,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=J.T,J.T=null;var o=fe.p;fe.p=2;var h=lt;lt|=4;try{Pg(s,a.alternate,a)}finally{lt=h,fe.p=o,J.T=r}}Jt=3}}function nv(){if(Jt===4||Jt===3){Jt=0,ee();var s=An,a=jr,r=Nr,o=Gg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Jt=5:(Jt=0,jr=An=null,iv(s,s.pendingLanes));var h=s.pendingLanes;if(h===0&&(Sn=null),Ui(r),a=a.stateNode,st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(vt,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=J.T,h=fe.p,fe.p=2,J.T=null;try{for(var p=s.onRecoverableError,N=0;N<o.length;N++){var _=o[N];p(_.value,{componentStack:_.stack})}}finally{J.T=a,fe.p=h}}(Nr&3)!==0&&Bc(),fa(s),h=s.pendingLanes,(r&4194090)!==0&&(h&42)!==0?s===_h?ql++:(ql=0,_h=s):ql=0,Hl(0)}}function iv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Tl(a)))}function Bc(s){return sv(),av(),nv(),rv()}function rv(){if(Jt!==5)return!1;var s=An,a=bh;bh=0;var r=Ui(Nr),o=J.T,h=fe.p;try{fe.p=32>r?32:r,J.T=null,r=Th,Th=null;var p=An,N=Nr;if(Jt=0,jr=An=null,Nr=0,(lt&6)!==0)throw Error(l(331));var _=lt;if(lt|=4,qg(p.current),Ug(p,p.current,N,r),lt=_,Hl(0,!1),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(vt,p)}catch{}return!0}finally{fe.p=h,J.T=o,iv(s,a)}}function lv(s,a,r){a=Ps(r,a),a=sh(s.stateNode,a,2),s=gn(s,a,2),s!==null&&(Ea(s,2),fa(s))}function mt(s,a,r){if(s.tag===3)lv(s,s,r);else for(;a!==null;){if(a.tag===3){lv(a,s,r);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Sn===null||!Sn.has(o))){s=Ps(r,s),r=ug(2),o=gn(a,r,2),o!==null&&(hg(r,o,a,s),Ea(o,2),fa(o));break}}a=a.return}}function Ch(s,a,r){var o=s.pingCache;if(o===null){o=s.pingCache=new rb;var h=new Set;o.set(a,h)}else h=o.get(a),h===void 0&&(h=new Set,o.set(a,h));h.has(r)||(yh=!0,h.add(r),s=ub.bind(null,s,a,r),a.then(s,s))}function ub(s,a,r){var o=s.pingCache;o!==null&&o.delete(a),s.pingedLanes|=s.suspendedLanes&r,s.warmLanes&=~r,pt===s&&(Ze&r)===r&&(_t===4||_t===3&&(Ze&62914560)===Ze&&300>Re()-Nh?(lt&2)===0&&br(s,0):xh|=r,xr===Ze&&(xr=0)),fa(s)}function ov(s,a){a===0&&(a=Jr()),s=nr(s,a),s!==null&&(Ea(s,a),fa(s))}function hb(s){var a=s.memoizedState,r=0;a!==null&&(r=a.retryLane),ov(s,r)}function mb(s,a){var r=0;switch(s.tag){case 13:var o=s.stateNode,h=s.memoizedState;h!==null&&(r=h.retryLane);break;case 19:o=s.stateNode;break;case 22:o=s.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(a),ov(s,r)}function pb(s,a){return De(s,a)}var Lc=null,_r=null,wh=!1,Uc=!1,kh=!1,Ai=0;function fa(s){s!==_r&&s.next===null&&(_r===null?Lc=_r=s:_r=_r.next=s),Uc=!0,wh||(wh=!0,gb())}function Hl(s,a){if(!kh&&Uc){kh=!0;do for(var r=!1,o=Lc;o!==null;){if(s!==0){var h=o.pendingLanes;if(h===0)var p=0;else{var N=o.suspendedLanes,_=o.pingedLanes;p=(1<<31-qt(42|s)+1)-1,p&=h&~(N&~_),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,hv(o,p))}else p=Ze,p=Li(o,o===pt?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(p&3)===0||Wn(o,p)||(r=!0,hv(o,p));o=o.next}while(r);kh=!1}}function fb(){cv()}function cv(){Uc=wh=!1;var s=0;Ai!==0&&(_b()&&(s=Ai),Ai=0);for(var a=Re(),r=null,o=Lc;o!==null;){var h=o.next,p=dv(o,a);p===0?(o.next=null,r===null?Lc=h:r.next=h,h===null&&(_r=r)):(r=o,(s!==0||(p&3)!==0)&&(Uc=!0)),o=h}Hl(s)}function dv(s,a){for(var r=s.suspendedLanes,o=s.pingedLanes,h=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var N=31-qt(p),_=1<<N,L=h[N];L===-1?((_&r)===0||(_&o)!==0)&&(h[N]=Wr(_,a)):L<=a&&(s.expiredLanes|=_),p&=~_}if(a=pt,r=Ze,r=Li(s,s===a?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),o=s.callbackNode,r===0||s===a&&(ot===2||ot===9)||s.cancelPendingCommit!==null)return o!==null&&o!==null&&Ne(o),s.callbackNode=null,s.callbackPriority=0;if((r&3)===0||Wn(s,r)){if(a=r&-r,a===s.callbackPriority)return a;switch(o!==null&&Ne(o),Ui(r)){case 2:case 8:r=Ve;break;case 32:r=nt;break;case 268435456:r=Js;break;default:r=nt}return o=uv.bind(null,s),r=De(r,o),s.callbackPriority=a,s.callbackNode=r,a}return o!==null&&o!==null&&Ne(o),s.callbackPriority=2,s.callbackNode=null,2}function uv(s,a){if(Jt!==0&&Jt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var r=s.callbackNode;if(Bc()&&s.callbackNode!==r)return null;var o=Ze;return o=Li(s,s===pt?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),o===0?null:(Qg(s,o,a),dv(s,Re()),s.callbackNode!=null&&s.callbackNode===r?uv.bind(null,s):null)}function hv(s,a){if(Bc())return null;Qg(s,a,!0)}function gb(){Ab(function(){(lt&6)!==0?De(le,fb):cv()})}function Rh(){return Ai===0&&(Ai=Zr()),Ai}function mv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:$i(""+s)}function pv(s,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,s.id&&r.setAttribute("form",s.id),a.parentNode.insertBefore(r,a),s=new FormData(s),r.parentNode.removeChild(r),s}function vb(s,a,r,o,h){if(a==="submit"&&r&&r.stateNode===h){var p=mv((h[wt]||null).action),N=o.submitter;N&&(a=(a=N[wt]||null)?mv(a.formAction):N.getAttribute("formAction"),a!==null&&(p=a,N=null));var _=new Qi("action","action",null,o,h);s.push({event:_,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ai!==0){var L=N?pv(h,N):new FormData(h);Wu(r,{pending:!0,data:L,method:h.method,action:p},null,L)}}else typeof p=="function"&&(_.preventDefault(),L=N?pv(h,N):new FormData(h),Wu(r,{pending:!0,data:L,method:h.method,action:p},p,L))},currentTarget:h}]})}}for(var Dh=0;Dh<gu.length;Dh++){var Ih=gu[Dh],yb=Ih.toLowerCase(),xb=Ih[0].toUpperCase()+Ih.slice(1);Ys(yb,"on"+xb)}Ys($p,"onAnimationEnd"),Ys(Qp,"onAnimationIteration"),Ys(Yp,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(ON,"onTransitionRun"),Ys(VN,"onTransitionStart"),Ys(BN,"onTransitionCancel"),Ys(Kp,"onTransitionEnd"),wa("onMouseEnter",["mouseout","mouseover"]),wa("onMouseLeave",["mouseout","mouseover"]),wa("onPointerEnter",["pointerout","pointerover"]),wa("onPointerLeave",["pointerout","pointerover"]),$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$s("onBeforeInput",["compositionend","keypress","textInput","paste"]),$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function fv(s,a){a=(a&4)!==0;for(var r=0;r<s.length;r++){var o=s[r],h=o.event;o=o.listeners;e:{var p=void 0;if(a)for(var N=o.length-1;0<=N;N--){var _=o[N],L=_.instance,te=_.currentTarget;if(_=_.listener,L!==p&&h.isPropagationStopped())break e;p=_,h.currentTarget=te;try{p(h)}catch(he){Ec(he)}h.currentTarget=null,p=L}else for(N=0;N<o.length;N++){if(_=o[N],L=_.instance,te=_.currentTarget,_=_.listener,L!==p&&h.isPropagationStopped())break e;p=_,h.currentTarget=te;try{p(h)}catch(he){Ec(he)}h.currentTarget=null,p=L}}}}function Qe(s,a){var r=a[sl];r===void 0&&(r=a[sl]=new Set);var o=s+"__bubble";r.has(o)||(gv(a,s,2,!1),r.add(o))}function Ph(s,a,r){var o=0;a&&(o|=4),gv(r,s,o,a)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Mh(s){if(!s[zc]){s[zc]=!0,al.forEach(function(r){r!=="selectionchange"&&(jb.has(r)||Ph(r,!1,s),Ph(r,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[zc]||(a[zc]=!0,Ph("selectionchange",!1,a))}}function gv(s,a,r,o){switch(Uv(a)){case 2:var h=Qb;break;case 8:h=Yb;break;default:h=Kh}r=h.bind(null,a,r,s),h=void 0,!Ds||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),o?h!==void 0?s.addEventListener(a,r,{capture:!0,passive:h}):s.addEventListener(a,r,!0):h!==void 0?s.addEventListener(a,r,{passive:h}):s.addEventListener(a,r,!1)}function Oh(s,a,r,o,h){var p=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var N=o.tag;if(N===3||N===4){var _=o.stateNode.containerInfo;if(_===h)break;if(N===4)for(N=o.return;N!==null;){var L=N.tag;if((L===3||L===4)&&N.stateNode.containerInfo===h)return;N=N.return}for(;_!==null;){if(N=Ca(_),N===null)return;if(L=N.tag,L===5||L===6||L===26||L===27){o=p=N;continue e}_=_.parentNode}}o=o.return}qo(function(){var te=p,he=Rs(r),xe=[];e:{var ae=Xp.get(s);if(ae!==void 0){var ne=Qi,Ue=s;switch(s){case"keypress":if(ra(r)===0)break e;case"keydown":case"keyup":ne=Ji;break;case"focusin":Ue="focus",ne=Xi;break;case"focusout":Ue="blur",ne=Xi;break;case"beforeblur":case"afterblur":ne=Xi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Is;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Wo;break;case $p:case Qp:case Yp:ne=Wi;break;case Kp:ne=Jo;break;case"scroll":case"scrollend":ne=Ho;break;case"wheel":ne=er;break;case"copy":case"cut":case"paste":ne=Zi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=fl;break;case"toggle":case"beforetoggle":ne=tc}var Oe=(a&4)!==0,ht=!Oe&&(s==="scroll"||s==="scrollend"),X=Oe?ae!==null?ae+"Capture":null:ae;Oe=[];for(var $=te,Z;$!==null;){var ge=$;if(Z=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||Z===null||X===null||(ge=ii($,X),ge!=null&&Oe.push($l($,ge,Z))),ht)break;$=$.return}0<Oe.length&&(ae=new ne(ae,Ue,null,r,he),xe.push({event:ae,listeners:Oe}))}}if((a&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",ae&&r!==Da&&(Ue=r.relatedTarget||r.fromElement)&&(Ca(Ue)||Ue[ws]))break e;if((ne||ae)&&(ae=he.window===he?he:(ae=he.ownerDocument)?ae.defaultView||ae.parentWindow:window,ne?(Ue=r.relatedTarget||r.toElement,ne=te,Ue=Ue?Ca(Ue):null,Ue!==null&&(ht=d(Ue),Oe=Ue.tag,Ue!==ht||Oe!==5&&Oe!==27&&Oe!==6)&&(Ue=null)):(ne=null,Ue=te),ne!==Ue)){if(Oe=Is,ge="onMouseLeave",X="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=fl,ge="onPointerLeave",X="onPointerEnter",$="pointer"),ht=ne==null?ae:sa(ne),Z=Ue==null?ae:sa(Ue),ae=new Oe(ge,$+"leave",ne,r,he),ae.target=ht,ae.relatedTarget=Z,ge=null,Ca(he)===te&&(Oe=new Oe(X,$+"enter",Ue,r,he),Oe.target=Z,Oe.relatedTarget=ht,ge=Oe),ht=ge,ne&&Ue)t:{for(Oe=ne,X=Ue,$=0,Z=Oe;Z;Z=Sr(Z))$++;for(Z=0,ge=X;ge;ge=Sr(ge))Z++;for(;0<$-Z;)Oe=Sr(Oe),$--;for(;0<Z-$;)X=Sr(X),Z--;for(;$--;){if(Oe===X||X!==null&&Oe===X.alternate)break t;Oe=Sr(Oe),X=Sr(X)}Oe=null}else Oe=null;ne!==null&&vv(xe,ae,ne,Oe,!1),Ue!==null&&ht!==null&&vv(xe,ht,Ue,Oe,!0)}}e:{if(ae=te?sa(te):window,ne=ae.nodeName&&ae.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ae.type==="file")var Ie=Mp;else if(Lt(ae))if(Op)Ie=IN;else{Ie=RN;var Ge=kN}else ne=ae.nodeName,!ne||ne.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?te&&ol(te.elementType)&&(Ie=Mp):Ie=DN;if(Ie&&(Ie=Ie(s,te))){Va(xe,Ie,r,he);break e}Ge&&Ge(s,ae,te),s==="focusout"&&te&&ae.type==="number"&&te.memoizedProps.value!=null&&un(ae,"number",ae.value)}switch(Ge=te?sa(te):window,s){case"focusin":(Lt(Ge)||Ge.contentEditable==="true")&&(tr=Ge,mu=te,yl=null);break;case"focusout":yl=mu=tr=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,Hp(xe,r,he);break;case"selectionchange":if(MN)break;case"keydown":case"keyup":Hp(xe,r,he)}var Pe;if(ca)e:{switch(s){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Xe?re(s,r)&&(Be="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(Be="onCompositionStart");Be&&(x&&r.locale!=="ko"&&(Xe||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Xe&&(Pe=dl()):(ia=he,hn="value"in ia?ia.value:ia.textContent,Xe=!0)),Ge=Fc(te,Be),0<Ge.length&&(Be=new ml(Be,s,null,r,he),xe.push({event:Be,listeners:Ge}),Pe?Be.data=Pe:(Pe=Ae(r),Pe!==null&&(Be.data=Pe)))),(Pe=v?Bt(s,r):We(s,r))&&(Be=Fc(te,"onBeforeInput"),0<Be.length&&(Ge=new ml("onBeforeInput","beforeinput",null,r,he),xe.push({event:Ge,listeners:Be}),Ge.data=Pe)),vb(xe,s,te,r,he)}fv(xe,a)})}function $l(s,a,r){return{instance:s,listener:a,currentTarget:r}}function Fc(s,a){for(var r=a+"Capture",o=[];s!==null;){var h=s,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=ii(s,r),h!=null&&o.unshift($l(s,h,p)),h=ii(s,a),h!=null&&o.push($l(s,h,p))),s.tag===3)return o;s=s.return}return[]}function Sr(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vv(s,a,r,o,h){for(var p=a._reactName,N=[];r!==null&&r!==o;){var _=r,L=_.alternate,te=_.stateNode;if(_=_.tag,L!==null&&L===o)break;_!==5&&_!==26&&_!==27||te===null||(L=te,h?(te=ii(r,p),te!=null&&N.unshift($l(r,te,L))):h||(te=ii(r,p),te!=null&&N.push($l(r,te,L)))),r=r.return}N.length!==0&&s.push({event:a,listeners:N})}var Nb=/\r\n?/g,bb=/\u0000|\uFFFD/g;function yv(s){return(typeof s=="string"?s:""+s).replace(Nb,`
`).replace(bb,"")}function xv(s,a){return a=yv(a),yv(s)===a}function qc(){}function ut(s,a,r,o,h,p){switch(r){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||ks(s,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&ks(s,""+o);break;case"className":aa(s,"class",o);break;case"tabIndex":aa(s,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":aa(s,r,o);break;case"style":ll(s,o,p);break;case"data":if(a!=="object"){aa(s,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||r!=="href")){s.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){s.removeAttribute(r);break}o=$i(""+o),s.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){s.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(a!=="input"&&ut(s,a,"name",h.name,h,null),ut(s,a,"formEncType",h.formEncType,h,null),ut(s,a,"formMethod",h.formMethod,h,null),ut(s,a,"formTarget",h.formTarget,h,null)):(ut(s,a,"encType",h.encType,h,null),ut(s,a,"method",h.method,h,null),ut(s,a,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){s.removeAttribute(r);break}o=$i(""+o),s.setAttribute(r,o);break;case"onClick":o!=null&&(s.onclick=qc);break;case"onScroll":o!=null&&Qe("scroll",s);break;case"onScrollEnd":o!=null&&Qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(l(60));s.innerHTML=r}}break;case"multiple":s.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":s.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){s.removeAttribute("xlink:href");break}r=$i(""+o),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?s.setAttribute(r,""+o):s.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?s.setAttribute(r,""):s.removeAttribute(r);break;case"capture":case"download":o===!0?s.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?s.setAttribute(r,o):s.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?s.setAttribute(r,o):s.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?s.removeAttribute(r):s.setAttribute(r,o);break;case"popover":Qe("beforetoggle",s),Qe("toggle",s),dn(s,"popover",o);break;case"xlinkActuate":Xt(s,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Xt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Xt(s,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Xt(s,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Xt(s,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Xt(s,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Xt(s,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Xt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Xt(s,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":dn(s,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=ru.get(r)||r,dn(s,r,o))}}function Vh(s,a,r,o,h,p){switch(r){case"style":ll(s,o,p);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(l(60));s.innerHTML=r}}break;case"children":typeof o=="string"?ks(s,o):(typeof o=="number"||typeof o=="bigint")&&ks(s,""+o);break;case"onScroll":o!=null&&Qe("scroll",s);break;case"onScrollEnd":o!=null&&Qe("scrollend",s);break;case"onClick":o!=null&&(s.onclick=qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zi.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),a=r.slice(2,h?r.length-7:void 0),p=s[wt]||null,p=p!=null?p[r]:null,typeof p=="function"&&s.removeEventListener(a,p,h),typeof o=="function")){typeof p!="function"&&p!==null&&(r in s?s[r]=null:s.hasAttribute(r)&&s.removeAttribute(r)),s.addEventListener(a,o,h);break e}r in s?s[r]=o:o===!0?s.setAttribute(r,""):dn(s,r,o)}}}function es(s,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",s),Qe("load",s);var o=!1,h=!1,p;for(p in r)if(r.hasOwnProperty(p)){var N=r[p];if(N!=null)switch(p){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:ut(s,a,p,N,r,null)}}h&&ut(s,a,"srcSet",r.srcSet,r,null),o&&ut(s,a,"src",r.src,r,null);return;case"input":Qe("invalid",s);var _=p=N=h=null,L=null,te=null;for(o in r)if(r.hasOwnProperty(o)){var he=r[o];if(he!=null)switch(o){case"name":h=he;break;case"type":N=he;break;case"checked":L=he;break;case"defaultChecked":te=he;break;case"value":p=he;break;case"defaultValue":_=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(l(137,a));break;default:ut(s,a,o,he,r,null)}}si(s,p,_,L,te,N,h,!1),Gi(s);return;case"select":Qe("invalid",s),o=N=p=null;for(h in r)if(r.hasOwnProperty(h)&&(_=r[h],_!=null))switch(h){case"value":p=_;break;case"defaultValue":N=_;break;case"multiple":o=_;default:ut(s,a,h,_,r,null)}a=p,r=N,s.multiple=!!o,a!=null?Ra(s,!!o,a,!1):r!=null&&Ra(s,!!o,r,!0);return;case"textarea":Qe("invalid",s),p=h=o=null;for(N in r)if(r.hasOwnProperty(N)&&(_=r[N],_!=null))switch(N){case"value":o=_;break;case"defaultValue":h=_;break;case"children":p=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:ut(s,a,N,_,r,null)}ai(s,o,h,p),Gi(s);return;case"option":for(L in r)if(r.hasOwnProperty(L)&&(o=r[L],o!=null))switch(L){case"selected":s.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ut(s,a,L,o,r,null)}return;case"dialog":Qe("beforetoggle",s),Qe("toggle",s),Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":Qe("load",s);break;case"video":case"audio":for(o=0;o<Gl.length;o++)Qe(Gl[o],s);break;case"image":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"embed":case"source":case"link":Qe("error",s),Qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in r)if(r.hasOwnProperty(te)&&(o=r[te],o!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:ut(s,a,te,o,r,null)}return;default:if(ol(a)){for(he in r)r.hasOwnProperty(he)&&(o=r[he],o!==void 0&&Vh(s,a,he,o,r,void 0));return}}for(_ in r)r.hasOwnProperty(_)&&(o=r[_],o!=null&&ut(s,a,_,o,r,null))}function Tb(s,a,r,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,N=null,_=null,L=null,te=null,he=null;for(ne in r){var xe=r[ne];if(r.hasOwnProperty(ne)&&xe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":L=xe;default:o.hasOwnProperty(ne)||ut(s,a,ne,null,o,xe)}}for(var ae in o){var ne=o[ae];if(xe=r[ae],o.hasOwnProperty(ae)&&(ne!=null||xe!=null))switch(ae){case"type":p=ne;break;case"name":h=ne;break;case"checked":te=ne;break;case"defaultChecked":he=ne;break;case"value":N=ne;break;case"defaultValue":_=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(l(137,a));break;default:ne!==xe&&ut(s,a,ae,ne,o,xe)}}js(s,N,_,L,te,he,p,h);return;case"select":ne=N=_=ae=null;for(p in r)if(L=r[p],r.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":ne=L;default:o.hasOwnProperty(p)||ut(s,a,p,null,o,L)}for(h in o)if(p=o[h],L=r[h],o.hasOwnProperty(h)&&(p!=null||L!=null))switch(h){case"value":ae=p;break;case"defaultValue":_=p;break;case"multiple":N=p;default:p!==L&&ut(s,a,h,p,o,L)}a=_,r=N,o=ne,ae!=null?Ra(s,!!r,ae,!1):!!o!=!!r&&(a!=null?Ra(s,!!r,a,!0):Ra(s,!!r,r?[]:"",!1));return;case"textarea":ne=ae=null;for(_ in r)if(h=r[_],r.hasOwnProperty(_)&&h!=null&&!o.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:ut(s,a,_,null,o,h)}for(N in o)if(h=o[N],p=r[N],o.hasOwnProperty(N)&&(h!=null||p!=null))switch(N){case"value":ae=h;break;case"defaultValue":ne=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(l(91));break;default:h!==p&&ut(s,a,N,h,o,p)}ct(s,ae,ne);return;case"option":for(var Ue in r)if(ae=r[Ue],r.hasOwnProperty(Ue)&&ae!=null&&!o.hasOwnProperty(Ue))switch(Ue){case"selected":s.selected=!1;break;default:ut(s,a,Ue,null,o,ae)}for(L in o)if(ae=o[L],ne=r[L],o.hasOwnProperty(L)&&ae!==ne&&(ae!=null||ne!=null))switch(L){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:ut(s,a,L,ae,o,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in r)ae=r[Oe],r.hasOwnProperty(Oe)&&ae!=null&&!o.hasOwnProperty(Oe)&&ut(s,a,Oe,null,o,ae);for(te in o)if(ae=o[te],ne=r[te],o.hasOwnProperty(te)&&ae!==ne&&(ae!=null||ne!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(l(137,a));break;default:ut(s,a,te,ae,o,ne)}return;default:if(ol(a)){for(var ht in r)ae=r[ht],r.hasOwnProperty(ht)&&ae!==void 0&&!o.hasOwnProperty(ht)&&Vh(s,a,ht,void 0,o,ae);for(he in o)ae=o[he],ne=r[he],!o.hasOwnProperty(he)||ae===ne||ae===void 0&&ne===void 0||Vh(s,a,he,ae,o,ne);return}}for(var X in r)ae=r[X],r.hasOwnProperty(X)&&ae!=null&&!o.hasOwnProperty(X)&&ut(s,a,X,null,o,ae);for(xe in o)ae=o[xe],ne=r[xe],!o.hasOwnProperty(xe)||ae===ne||ae==null&&ne==null||ut(s,a,xe,ae,o,ne)}var Bh=null,Lh=null;function Hc(s){return s.nodeType===9?s:s.ownerDocument}function jv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nv(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Uh(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var zh=null;function _b(){var s=window.event;return s&&s.type==="popstate"?s===zh?!1:(zh=s,!0):(zh=null,!1)}var bv=typeof setTimeout=="function"?setTimeout:void 0,Sb=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,Ab=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(s){return Tv.resolve(null).then(s).catch(Eb)}:bv;function Eb(s){setTimeout(function(){throw s})}function Cn(s){return s==="head"}function _v(s,a){var r=a,o=0,h=0;do{var p=r.nextSibling;if(s.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"){if(0<o&&8>o){r=o;var N=s.ownerDocument;if(r&1&&Ql(N.documentElement),r&2&&Ql(N.body),r&4)for(r=N.head,Ql(r),N=r.firstChild;N;){var _=N.nextSibling,L=N.nodeName;N[Zn]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&N.rel.toLowerCase()==="stylesheet"||r.removeChild(N),N=_}}if(h===0){s.removeChild(p),to(a);return}h--}else r==="$"||r==="$?"||r==="$!"?h++:o=r.charCodeAt(0)-48;else o=0;r=p}while(r);to(a)}function Fh(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Fh(r),cn(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}s.removeChild(r)}}function Cb(s,a,r,o){for(;s.nodeType===1;){var h=r;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(o){if(!s[Zn])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==h.rel||s.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||s.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||s.getAttribute("title")!==(h.title==null?null:h.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(h.src==null?null:h.src)||s.getAttribute("type")!==(h.type==null?null:h.type)||s.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=Xs(s.nextSibling),s===null)break}return null}function wb(s,a,r){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Xs(s.nextSibling),s===null))return null;return s}function qh(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function kb(s,a){var r=s.ownerDocument;if(s.data!=="$?"||r.readyState==="complete")a();else{var o=function(){a(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),s._reactRetry=o}}function Xs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Hh=null;function Sv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(a===0)return s;a--}else r==="/$"&&a++}s=s.previousSibling}return null}function Av(s,a,r){switch(a=Hc(r),s){case"html":if(s=a.documentElement,!s)throw Error(l(452));return s;case"head":if(s=a.head,!s)throw Error(l(453));return s;case"body":if(s=a.body,!s)throw Error(l(454));return s;default:throw Error(l(451))}}function Ql(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);cn(s)}var Us=new Map,Ev=new Set;function Gc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Xa=fe.d;fe.d={f:Rb,r:Db,D:Ib,C:Pb,L:Mb,m:Ob,X:Bb,S:Vb,M:Lb};function Rb(){var s=Xa.f(),a=Oc();return s||a}function Db(s){var a=ta(s);a!==null&&a.tag===5&&a.type==="form"?Qf(a):Xa.r(s)}var Ar=typeof document>"u"?null:document;function Cv(s,a,r){var o=Ar;if(o&&typeof a=="string"&&a){var h=kt(a);h='link[rel="'+s+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),Ev.has(h)||(Ev.add(h),s={rel:s,crossOrigin:r,href:a},o.querySelector(h)===null&&(a=o.createElement("link"),es(a,"link",s),St(a),o.head.appendChild(a)))}}function Ib(s){Xa.D(s),Cv("dns-prefetch",s,null)}function Pb(s,a){Xa.C(s,a),Cv("preconnect",s,a)}function Mb(s,a,r){Xa.L(s,a,r);var o=Ar;if(o&&s&&a){var h='link[rel="preload"][as="'+kt(a)+'"]';a==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+kt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+kt(r.imageSizes)+'"]')):h+='[href="'+kt(s)+'"]';var p=h;switch(a){case"style":p=Er(s);break;case"script":p=Cr(s)}Us.has(p)||(s=j({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:s,as:a},r),Us.set(p,s),o.querySelector(h)!==null||a==="style"&&o.querySelector(Yl(p))||a==="script"&&o.querySelector(Kl(p))||(a=o.createElement("link"),es(a,"link",s),St(a),o.head.appendChild(a)))}}function Ob(s,a){Xa.m(s,a);var r=Ar;if(r&&s){var o=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+kt(o)+'"][href="'+kt(s)+'"]',p=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Cr(s)}if(!Us.has(p)&&(s=j({rel:"modulepreload",href:s},a),Us.set(p,s),r.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Kl(p)))return}o=r.createElement("link"),es(o,"link",s),St(o),r.head.appendChild(o)}}}function Vb(s,a,r){Xa.S(s,a,r);var o=Ar;if(o&&s){var h=ds(o).hoistableStyles,p=Er(s);a=a||"default";var N=h.get(p);if(!N){var _={loading:0,preload:null};if(N=o.querySelector(Yl(p)))_.loading=5;else{s=j({rel:"stylesheet",href:s,"data-precedence":a},r),(r=Us.get(p))&&Gh(s,r);var L=N=o.createElement("link");St(L),es(L,"link",s),L._p=new Promise(function(te,he){L.onload=te,L.onerror=he}),L.addEventListener("load",function(){_.loading|=1}),L.addEventListener("error",function(){_.loading|=2}),_.loading|=4,$c(N,a,o)}N={type:"stylesheet",instance:N,count:1,state:_},h.set(p,N)}}}function Bb(s,a){Xa.X(s,a);var r=Ar;if(r&&s){var o=ds(r).hoistableScripts,h=Cr(s),p=o.get(h);p||(p=r.querySelector(Kl(h)),p||(s=j({src:s,async:!0},a),(a=Us.get(h))&&$h(s,a),p=r.createElement("script"),St(p),es(p,"link",s),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(h,p))}}function Lb(s,a){Xa.M(s,a);var r=Ar;if(r&&s){var o=ds(r).hoistableScripts,h=Cr(s),p=o.get(h);p||(p=r.querySelector(Kl(h)),p||(s=j({src:s,async:!0,type:"module"},a),(a=Us.get(h))&&$h(s,a),p=r.createElement("script"),St(p),es(p,"link",s),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(h,p))}}function wv(s,a,r,o){var h=(h=me.current)?Gc(h):null;if(!h)throw Error(l(446));switch(s){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=Er(r.href),r=ds(h).hoistableStyles,o=r.get(a),o||(o={type:"style",instance:null,count:0,state:null},r.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){s=Er(r.href);var p=ds(h).hoistableStyles,N=p.get(s);if(N||(h=h.ownerDocument||h,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,N),(p=h.querySelector(Yl(s)))&&!p._p&&(N.instance=p,N.state.loading=5),Us.has(s)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Us.set(s,r),p||Ub(h,s,r,N.state))),a&&o===null)throw Error(l(528,""));return N}if(a&&o!==null)throw Error(l(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Cr(r),r=ds(h).hoistableScripts,o=r.get(a),o||(o={type:"script",instance:null,count:0,state:null},r.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,s))}}function Er(s){return'href="'+kt(s)+'"'}function Yl(s){return'link[rel="stylesheet"]['+s+"]"}function kv(s){return j({},s,{"data-precedence":s.precedence,precedence:null})}function Ub(s,a,r,o){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=s.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),es(a,"link",r),St(a),s.head.appendChild(a))}function Cr(s){return'[src="'+kt(s)+'"]'}function Kl(s){return"script[async]"+s}function Rv(s,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var o=s.querySelector('style[data-href~="'+kt(r.href)+'"]');if(o)return a.instance=o,St(o),o;var h=j({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(s.ownerDocument||s).createElement("style"),St(o),es(o,"style",h),$c(o,r.precedence,s),a.instance=o;case"stylesheet":h=Er(r.href);var p=s.querySelector(Yl(h));if(p)return a.state.loading|=4,a.instance=p,St(p),p;o=kv(r),(h=Us.get(h))&&Gh(o,h),p=(s.ownerDocument||s).createElement("link"),St(p);var N=p;return N._p=new Promise(function(_,L){N.onload=_,N.onerror=L}),es(p,"link",o),a.state.loading|=4,$c(p,r.precedence,s),a.instance=p;case"script":return p=Cr(r.src),(h=s.querySelector(Kl(p)))?(a.instance=h,St(h),h):(o=r,(h=Us.get(p))&&(o=j({},r),$h(o,h)),s=s.ownerDocument||s,h=s.createElement("script"),St(h),es(h,"link",o),s.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(l(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,$c(o,r.precedence,s));return a.instance}function $c(s,a,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,p=h,N=0;N<o.length;N++){var _=o[N];if(_.dataset.precedence===a)p=_;else if(p!==h)break}p?p.parentNode.insertBefore(s,p.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(s,a.firstChild))}function Gh(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function $h(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Qc=null;function Dv(s,a,r){if(Qc===null){var o=new Map,h=Qc=new Map;h.set(r,o)}else h=Qc,o=h.get(r),o||(o=new Map,h.set(r,o));if(o.has(s))return o;for(o.set(s,null),r=r.getElementsByTagName(s),h=0;h<r.length;h++){var p=r[h];if(!(p[Zn]||p[Vt]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var N=p.getAttribute(a)||"";N=s+N;var _=o.get(N);_?_.push(p):o.set(N,[p])}}return o}function Iv(s,a,r){s=s.ownerDocument||s,s.head.insertBefore(r,a==="title"?s.querySelector("head > title"):null)}function zb(s,a,r){if(r===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Pv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Xl=null;function Fb(){}function qb(s,a,r){if(Xl===null)throw Error(l(475));var o=Xl;if(a.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Er(r.href),p=s.querySelector(Yl(h));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=Yc.bind(o),s.then(o,o)),a.state.loading|=4,a.instance=p,St(p);return}p=s.ownerDocument||s,r=kv(r),(h=Us.get(h))&&Gh(r,h),p=p.createElement("link"),St(p);var N=p;N._p=new Promise(function(_,L){N.onload=_,N.onerror=L}),es(p,"link",r),a.instance=p}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(o.count++,a=Yc.bind(o),s.addEventListener("load",a),s.addEventListener("error",a))}}function Hb(){if(Xl===null)throw Error(l(475));var s=Xl;return s.stylesheets&&s.count===0&&Qh(s,s.stylesheets),0<s.count?function(a){var r=setTimeout(function(){if(s.stylesheets&&Qh(s,s.stylesheets),s.unsuspend){var o=s.unsuspend;s.unsuspend=null,o()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(r)}}:null}function Yc(){if(this.count--,this.count===0){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Kc=null;function Qh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Kc=new Map,a.forEach(Gb,s),Kc=null,Yc.call(s))}function Gb(s,a){if(!(a.state.loading&4)){var r=Kc.get(s);if(r)var o=r.get(null);else{r=new Map,Kc.set(s,r);for(var h=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var N=h[p];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(r.set(N.dataset.precedence,N),o=N)}o&&r.set(null,o)}h=a.instance,N=h.getAttribute("data-precedence"),p=r.get(N)||o,p===o&&r.set(null,h),r.set(N,h),this.count++,o=Yc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),p?p.parentNode.insertBefore(h,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(h,s.firstChild)),a.state.loading|=4}}var Wl={$$typeof:P,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function $b(s,a,r,o,h,p,N,_){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Aa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Aa(0),this.hiddenUpdates=Aa(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Mv(s,a,r,o,h,p,N,_,L,te,he,xe){return s=new $b(s,a,r,N,_,L,te,xe),a=1,p===!0&&(a|=24),p=bs(3,null,null,a),s.current=p,p.stateNode=s,a=Cu(),a.refCount++,s.pooledCache=a,a.refCount++,p.memoizedState={element:o,isDehydrated:r,cache:a},Du(p),s}function Ov(s){return s?(s=ir,s):ir}function Vv(s,a,r,o,h,p){h=Ov(h),o.context===null?o.context=h:o.pendingContext=h,o=fn(a),o.payload={element:r},p=p===void 0?null:p,p!==null&&(o.callback=p),r=gn(s,o,a),r!==null&&(Es(r,s,a),El(r,s,a))}function Bv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<a?r:a}}function Yh(s,a){Bv(s,a),(s=s.alternate)&&Bv(s,a)}function Lv(s){if(s.tag===13){var a=nr(s,67108864);a!==null&&Es(a,s,67108864),Yh(s,67108864)}}var Xc=!0;function Qb(s,a,r,o){var h=J.T;J.T=null;var p=fe.p;try{fe.p=2,Kh(s,a,r,o)}finally{fe.p=p,J.T=h}}function Yb(s,a,r,o){var h=J.T;J.T=null;var p=fe.p;try{fe.p=8,Kh(s,a,r,o)}finally{fe.p=p,J.T=h}}function Kh(s,a,r,o){if(Xc){var h=Xh(o);if(h===null)Oh(s,a,o,Wc,r),zv(s,o);else if(Xb(h,s,a,r,o))o.stopPropagation();else if(zv(s,o),a&4&&-1<Kb.indexOf(s)){for(;h!==null;){var p=ta(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var N=Gs(p.pendingLanes);if(N!==0){var _=p;for(_.pendingLanes|=2,_.entangledLanes|=2;N;){var L=1<<31-qt(N);_.entanglements[1]|=L,N&=~L}fa(p),(lt&6)===0&&(Pc=Re()+500,Hl(0))}}break;case 13:_=nr(p,2),_!==null&&Es(_,p,2),Oc(),Yh(p,2)}if(p=Xh(o),p===null&&Oh(s,a,o,Wc,r),p===h)break;h=p}h!==null&&o.stopPropagation()}else Oh(s,a,o,null,r)}}function Xh(s){return s=Rs(s),Wh(s)}var Wc=null;function Wh(s){if(Wc=null,s=Ca(s),s!==null){var a=d(s);if(a===null)s=null;else{var r=a.tag;if(r===13){if(s=m(a),s!==null)return s;s=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Wc=s,null}function Uv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case le:return 2;case Ve:return 8;case nt:case ps:return 32;case Js:return 268435456;default:return 32}default:return 32}}var Zh=!1,wn=null,kn=null,Rn=null,Zl=new Map,Jl=new Map,Dn=[],Kb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zv(s,a){switch(s){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":kn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Zl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(a.pointerId)}}function eo(s,a,r,o,h,p){return s===null||s.nativeEvent!==p?(s={blockedOn:a,domEventName:r,eventSystemFlags:o,nativeEvent:p,targetContainers:[h]},a!==null&&(a=ta(a),a!==null&&Lv(a)),s):(s.eventSystemFlags|=o,a=s.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),s)}function Xb(s,a,r,o,h){switch(a){case"focusin":return wn=eo(wn,s,a,r,o,h),!0;case"dragenter":return kn=eo(kn,s,a,r,o,h),!0;case"mouseover":return Rn=eo(Rn,s,a,r,o,h),!0;case"pointerover":var p=h.pointerId;return Zl.set(p,eo(Zl.get(p)||null,s,a,r,o,h)),!0;case"gotpointercapture":return p=h.pointerId,Jl.set(p,eo(Jl.get(p)||null,s,a,r,o,h)),!0}return!1}function Fv(s){var a=Ca(s.target);if(a!==null){var r=d(a);if(r!==null){if(a=r.tag,a===13){if(a=m(r),a!==null){s.blockedOn=a,Oo(s.priority,function(){if(r.tag===13){var o=As();o=rn(o);var h=nr(r,o);h!==null&&Es(h,r,o),Yh(r,o)}});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Zc(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var r=Xh(s.nativeEvent);if(r===null){r=s.nativeEvent;var o=new r.constructor(r.type,r);Da=o,r.target.dispatchEvent(o),Da=null}else return a=ta(r),a!==null&&Lv(a),s.blockedOn=r,!1;a.shift()}return!0}function qv(s,a,r){Zc(s)&&r.delete(a)}function Wb(){Zh=!1,wn!==null&&Zc(wn)&&(wn=null),kn!==null&&Zc(kn)&&(kn=null),Rn!==null&&Zc(Rn)&&(Rn=null),Zl.forEach(qv),Jl.forEach(qv)}function Jc(s,a){s.blockedOn===a&&(s.blockedOn=null,Zh||(Zh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Wb)))}var ed=null;function Hv(s){ed!==s&&(ed=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ed===s&&(ed=null);for(var a=0;a<s.length;a+=3){var r=s[a],o=s[a+1],h=s[a+2];if(typeof o!="function"){if(Wh(o||r)===null)continue;break}var p=ta(r);p!==null&&(s.splice(a,3),a-=3,Wu(p,{pending:!0,data:h,method:r.method,action:o},o,h))}}))}function to(s){function a(L){return Jc(L,s)}wn!==null&&Jc(wn,s),kn!==null&&Jc(kn,s),Rn!==null&&Jc(Rn,s),Zl.forEach(a),Jl.forEach(a);for(var r=0;r<Dn.length;r++){var o=Dn[r];o.blockedOn===s&&(o.blockedOn=null)}for(;0<Dn.length&&(r=Dn[0],r.blockedOn===null);)Fv(r),r.blockedOn===null&&Dn.shift();if(r=(s.ownerDocument||s).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var h=r[o],p=r[o+1],N=h[wt]||null;if(typeof p=="function")N||Hv(r);else if(N){var _=null;if(p&&p.hasAttribute("formAction")){if(h=p,N=p[wt]||null)_=N.formAction;else if(Wh(h)!==null)continue}else _=N.action;typeof _=="function"?r[o+1]=_:(r.splice(o,3),o-=3),Hv(r)}}}function Jh(s){this._internalRoot=s}td.prototype.render=Jh.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(l(409));var r=a.current,o=As();Vv(r,o,s,a,null,null)},td.prototype.unmount=Jh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Vv(s.current,2,null,s,null,null),Oc(),a[ws]=null}};function td(s){this._internalRoot=s}td.prototype.unstable_scheduleHydration=function(s){if(s){var a=ln();s={blockedOn:null,target:s,priority:a};for(var r=0;r<Dn.length&&a!==0&&a<Dn[r].priority;r++);Dn.splice(r,0,s),r===0&&Fv(s)}};var Gv=t.version;if(Gv!=="19.1.1")throw Error(l(527,Gv,"19.1.1"));fe.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(l(188)):(s=Object.keys(s).join(","),Error(l(268,s)));return s=y(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var Zb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{vt=sd.inject(Zb),st=sd}catch{}}return ao.createRoot=function(s,a){if(!c(s))throw Error(l(299));var r=!1,o="",h=lg,p=og,N=cg,_=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(_=a.unstable_transitionCallbacks)),a=Mv(s,1,!1,null,null,r,o,h,p,N,_,null),s[ws]=a.current,Mh(s),new Jh(a)},ao.hydrateRoot=function(s,a,r){if(!c(s))throw Error(l(299));var o=!1,h="",p=lg,N=og,_=cg,L=null,te=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(N=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(L=r.unstable_transitionCallbacks),r.formState!==void 0&&(te=r.formState)),a=Mv(s,1,!0,a,r??null,o,h,p,N,_,L,te),a.context=Ov(null),r=a.current,o=As(),o=rn(o),h=fn(o),h.callback=null,gn(r,h,o),r=o,a.current.lanes=r,Ea(a,r),fa(a),s[ws]=a.current,Mh(s),new td(a)},ao.version="19.1.1",ao}var ty;function c0(){if(ty)return sm.exports;ty=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),sm.exports=o0(),sm.exports}var d0=c0();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sy="popstate";function u0(i={}){function t(l,c){let{pathname:d,search:m,hash:f}=l.location;return vm("",{pathname:d,search:m,hash:f},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(l,c){return typeof c=="string"?c:go(c)}return m0(t,n,null,i)}function Nt(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function ba(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function h0(){return Math.random().toString(36).substring(2,10)}function ay(i,t){return{usr:i.state,key:i.key,idx:t}}function vm(i,t,n=null,l){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?Fr(t):t,state:n,key:t&&t.key||l||h0()}}function go({pathname:i="/",search:t="",hash:n=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Fr(i){let t={};if(i){let n=i.indexOf("#");n>=0&&(t.hash=i.substring(n),i=i.substring(0,n));let l=i.indexOf("?");l>=0&&(t.search=i.substring(l),i=i.substring(0,l)),i&&(t.pathname=i)}return t}function m0(i,t,n,l={}){let{window:c=document.defaultView,v5Compat:d=!1}=l,m=c.history,f="POP",y=null,g=j();g==null&&(g=0,m.replaceState({...m.state,idx:g},""));function j(){return(m.state||{idx:null}).idx}function S(){f="POP";let U=j(),q=U==null?null:U-g;g=U,y&&y({action:f,location:H.location,delta:q})}function A(U,q){f="PUSH";let Y=vm(H.location,U,q);g=j()+1;let P=ay(Y,g),Q=H.createHref(Y);try{m.pushState(P,"",Q)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;c.location.assign(Q)}d&&y&&y({action:f,location:H.location,delta:1})}function O(U,q){f="REPLACE";let Y=vm(H.location,U,q);g=j();let P=ay(Y,g),Q=H.createHref(Y);m.replaceState(P,"",Q),d&&y&&y({action:f,location:H.location,delta:0})}function D(U){return p0(U)}let H={get action(){return f},get location(){return i(c,m)},listen(U){if(y)throw new Error("A history only accepts one active listener");return c.addEventListener(sy,S),y=U,()=>{c.removeEventListener(sy,S),y=null}},createHref(U){return t(c,U)},createURL:D,encodeLocation(U){let q=D(U);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:A,replace:O,go(U){return m.go(U)}};return H}function p0(i,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nt(n,"No window.location.(origin|href) available to create URL");let l=typeof i=="string"?i:go(i);return l=l.replace(/ $/,"%20"),!t&&l.startsWith("//")&&(l=n+l),new URL(l,n)}function _x(i,t,n="/"){return f0(i,t,n,!1)}function f0(i,t,n,l){let c=typeof t=="string"?Fr(t):t,d=Ja(c.pathname||"/",n);if(d==null)return null;let m=Sx(i);g0(m);let f=null;for(let y=0;f==null&&y<m.length;++y){let g=E0(d);f=S0(m[y],g,l)}return f}function Sx(i,t=[],n=[],l=""){let c=(d,m,f)=>{let y={relativePath:f===void 0?d.path||"":f,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};y.relativePath.startsWith("/")&&(Nt(y.relativePath.startsWith(l),`Absolute route path "${y.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(l.length));let g=Wa([l,y.relativePath]),j=n.concat(y);d.children&&d.children.length>0&&(Nt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Sx(d.children,t,j,g)),!(d.path==null&&!d.index)&&t.push({path:g,score:T0(g,d.index),routesMeta:j})};return i.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let f of Ax(d.path))c(d,m,f)}),t}function Ax(i){let t=i.split("/");if(t.length===0)return[];let[n,...l]=t,c=n.endsWith("?"),d=n.replace(/\?$/,"");if(l.length===0)return c?[d,""]:[d];let m=Ax(l.join("/")),f=[];return f.push(...m.map(y=>y===""?d:[d,y].join("/"))),c&&f.push(...m),f.map(y=>i.startsWith("/")&&y===""?"/":y)}function g0(i){i.sort((t,n)=>t.score!==n.score?n.score-t.score:_0(t.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}var v0=/^:[\w-]+$/,y0=3,x0=2,j0=1,N0=10,b0=-2,ny=i=>i==="*";function T0(i,t){let n=i.split("/"),l=n.length;return n.some(ny)&&(l+=b0),t&&(l+=x0),n.filter(c=>!ny(c)).reduce((c,d)=>c+(v0.test(d)?y0:d===""?j0:N0),l)}function _0(i,t){return i.length===t.length&&i.slice(0,-1).every((l,c)=>l===t[c])?i[i.length-1]-t[t.length-1]:0}function S0(i,t,n=!1){let{routesMeta:l}=i,c={},d="/",m=[];for(let f=0;f<l.length;++f){let y=l[f],g=f===l.length-1,j=d==="/"?t:t.slice(d.length)||"/",S=Nd({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},j),A=y.route;if(!S&&g&&n&&!l[l.length-1].route.index&&(S=Nd({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},j)),!S)return null;Object.assign(c,S.params),m.push({params:c,pathname:Wa([d,S.pathname]),pathnameBase:R0(Wa([d,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(d=Wa([d,S.pathnameBase]))}return m}function Nd(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,l]=A0(i.path,i.caseSensitive,i.end),c=t.match(n);if(!c)return null;let d=c[0],m=d.replace(/(.)\/+$/,"$1"),f=c.slice(1);return{params:l.reduce((g,{paramName:j,isOptional:S},A)=>{if(j==="*"){let D=f[A]||"";m=d.slice(0,d.length-D.length).replace(/(.)\/+$/,"$1")}const O=f[A];return S&&!O?g[j]=void 0:g[j]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:m,pattern:i}}function A0(i,t=!1,n=!0){ba(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let l=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,f,y)=>(l.push({paramName:f,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(l.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),l]}function E0(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ba(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Ja(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,l=i.charAt(n);return l&&l!=="/"?null:i.slice(n)||"/"}function C0(i,t="/"){let{pathname:n,search:l="",hash:c=""}=typeof i=="string"?Fr(i):i;return{pathname:n?n.startsWith("/")?n:w0(n,t):t,search:D0(l),hash:I0(c)}}function w0(i,t){let n=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function rm(i,t,n,l){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k0(i){return i.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ex(i){let t=k0(i);return t.map((n,l)=>l===t.length-1?n.pathname:n.pathnameBase)}function Cx(i,t,n,l=!1){let c;typeof i=="string"?c=Fr(i):(c={...i},Nt(!c.pathname||!c.pathname.includes("?"),rm("?","pathname","search",c)),Nt(!c.pathname||!c.pathname.includes("#"),rm("#","pathname","hash",c)),Nt(!c.search||!c.search.includes("#"),rm("#","search","hash",c)));let d=i===""||c.pathname==="",m=d?"/":c.pathname,f;if(m==null)f=n;else{let S=t.length-1;if(!l&&m.startsWith("..")){let A=m.split("/");for(;A[0]==="..";)A.shift(),S-=1;c.pathname=A.join("/")}f=S>=0?t[S]:"/"}let y=C0(c,f),g=m&&m!=="/"&&m.endsWith("/"),j=(d||m===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(g||j)&&(y.pathname+="/"),y}var Wa=i=>i.join("/").replace(/\/\/+/g,"/"),R0=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),D0=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,I0=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function P0(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var wx=["POST","PUT","PATCH","DELETE"];new Set(wx);var M0=["GET",...wx];new Set(M0);var qr=I.createContext(null);qr.displayName="DataRouter";var Vd=I.createContext(null);Vd.displayName="DataRouterState";I.createContext(!1);var kx=I.createContext({isTransitioning:!1});kx.displayName="ViewTransition";var O0=I.createContext(new Map);O0.displayName="Fetchers";var V0=I.createContext(null);V0.displayName="Await";var _a=I.createContext(null);_a.displayName="Navigation";var Eo=I.createContext(null);Eo.displayName="Location";var Sa=I.createContext({outlet:null,matches:[],isDataRoute:!1});Sa.displayName="Route";var Hm=I.createContext(null);Hm.displayName="RouteError";function B0(i,{relative:t}={}){Nt(Co(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:l}=I.useContext(_a),{hash:c,pathname:d,search:m}=wo(i,{relative:t}),f=d;return n!=="/"&&(f=d==="/"?n:Wa([n,d])),l.createHref({pathname:f,search:m,hash:c})}function Co(){return I.useContext(Eo)!=null}function Ii(){return Nt(Co(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Eo).location}var Rx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dx(i){I.useContext(_a).static||I.useLayoutEffect(i)}function Ix(){let{isDataRoute:i}=I.useContext(Sa);return i?J0():L0()}function L0(){Nt(Co(),"useNavigate() may be used only in the context of a <Router> component.");let i=I.useContext(qr),{basename:t,navigator:n}=I.useContext(_a),{matches:l}=I.useContext(Sa),{pathname:c}=Ii(),d=JSON.stringify(Ex(l)),m=I.useRef(!1);return Dx(()=>{m.current=!0}),I.useCallback((y,g={})=>{if(ba(m.current,Rx),!m.current)return;if(typeof y=="number"){n.go(y);return}let j=Cx(y,JSON.parse(d),c,g.relative==="path");i==null&&t!=="/"&&(j.pathname=j.pathname==="/"?t:Wa([t,j.pathname])),(g.replace?n.replace:n.push)(j,g.state,g)},[t,n,d,c,i])}var U0=I.createContext(null);function z0(i){let t=I.useContext(Sa).outlet;return t&&I.createElement(U0.Provider,{value:i},t)}function wo(i,{relative:t}={}){let{matches:n}=I.useContext(Sa),{pathname:l}=Ii(),c=JSON.stringify(Ex(n));return I.useMemo(()=>Cx(i,JSON.parse(c),l,t==="path"),[i,c,l,t])}function F0(i,t){return Px(i,t)}function Px(i,t,n,l){Nt(Co(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=I.useContext(_a),{matches:d}=I.useContext(Sa),m=d[d.length-1],f=m?m.params:{},y=m?m.pathname:"/",g=m?m.pathnameBase:"/",j=m&&m.route;{let q=j&&j.path||"";Mx(y,!j||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let S=Ii(),A;if(t){let q=typeof t=="string"?Fr(t):t;Nt(g==="/"||q.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${q.pathname}" was given in the \`location\` prop.`),A=q}else A=S;let O=A.pathname||"/",D=O;if(g!=="/"){let q=g.replace(/^\//,"").split("/");D="/"+O.replace(/^\//,"").split("/").slice(q.length).join("/")}let H=_x(i,{pathname:D});ba(j||H!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ba(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=Q0(H&&H.map(q=>Object.assign({},q,{params:Object.assign({},f,q.params),pathname:Wa([g,c.encodeLocation?c.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:Wa([g,c.encodeLocation?c.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),d,n,l);return t&&U?I.createElement(Eo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},U):U}function q0(){let i=Z0(),t=P0(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,l="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:l},d={padding:"2px 4px",backgroundColor:l},m=null;return console.error("Error handled by React Router default ErrorBoundary:",i),m=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:d},"ErrorBoundary")," or"," ",I.createElement("code",{style:d},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:c},n):null,m)}var H0=I.createElement(q0,null),G0=class extends I.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error!==void 0?I.createElement(Sa.Provider,{value:this.props.routeContext},I.createElement(Hm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $0({routeContext:i,match:t,children:n}){let l=I.useContext(qr);return l&&l.static&&l.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(Sa.Provider,{value:i},n)}function Q0(i,t=[],n=null,l=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,d=n?.errors;if(d!=null){let y=c.findIndex(g=>g.route.id&&d?.[g.route.id]!==void 0);Nt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let m=!1,f=-1;if(n)for(let y=0;y<c.length;y++){let g=c[y];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=y),g.route.id){let{loaderData:j,errors:S}=n,A=g.route.loader&&!j.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||A){m=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((y,g,j)=>{let S,A=!1,O=null,D=null;n&&(S=d&&g.route.id?d[g.route.id]:void 0,O=g.route.errorElement||H0,m&&(f<0&&j===0?(Mx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,D=null):f===j&&(A=!0,D=g.route.hydrateFallbackElement||null)));let H=t.concat(c.slice(0,j+1)),U=()=>{let q;return S?q=O:A?q=D:g.route.Component?q=I.createElement(g.route.Component,null):g.route.element?q=g.route.element:q=y,I.createElement($0,{match:g,routeContext:{outlet:y,matches:H,isDataRoute:n!=null},children:q})};return n&&(g.route.ErrorBoundary||g.route.errorElement||j===0)?I.createElement(G0,{location:n.location,revalidation:n.revalidation,component:O,error:S,children:U(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):U()},null)}function Gm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Y0(i){let t=I.useContext(qr);return Nt(t,Gm(i)),t}function K0(i){let t=I.useContext(Vd);return Nt(t,Gm(i)),t}function X0(i){let t=I.useContext(Sa);return Nt(t,Gm(i)),t}function $m(i){let t=X0(i),n=t.matches[t.matches.length-1];return Nt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function W0(){return $m("useRouteId")}function Z0(){let i=I.useContext(Hm),t=K0("useRouteError"),n=$m("useRouteError");return i!==void 0?i:t.errors?.[n]}function J0(){let{router:i}=Y0("useNavigate"),t=$m("useNavigate"),n=I.useRef(!1);return Dx(()=>{n.current=!0}),I.useCallback(async(c,d={})=>{ba(n.current,Rx),n.current&&(typeof c=="number"?i.navigate(c):await i.navigate(c,{fromRouteId:t,...d}))},[i,t])}var iy={};function Mx(i,t,n){!t&&!iy[i]&&(iy[i]=!0,ba(!1,n))}I.memo(eT);function eT({routes:i,future:t,state:n}){return Px(i,void 0,n,t)}function tT(i){return z0(i.context)}function zs(i){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sT({basename:i="/",children:t=null,location:n,navigationType:l="POP",navigator:c,static:d=!1}){Nt(!Co(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),f=I.useMemo(()=>({basename:m,navigator:c,static:d,future:{}}),[m,c,d]);typeof n=="string"&&(n=Fr(n));let{pathname:y="/",search:g="",hash:j="",state:S=null,key:A="default"}=n,O=I.useMemo(()=>{let D=Ja(y,m);return D==null?null:{location:{pathname:D,search:g,hash:j,state:S,key:A},navigationType:l}},[m,y,g,j,S,A,l]);return ba(O!=null,`<Router basename="${m}"> is not able to match the URL "${y}${g}${j}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:I.createElement(_a.Provider,{value:f},I.createElement(Eo.Provider,{children:t,value:O}))}function aT({children:i,location:t}){return F0(ym(i),t)}function ym(i,t=[]){let n=[];return I.Children.forEach(i,(l,c)=>{if(!I.isValidElement(l))return;let d=[...t,c];if(l.type===I.Fragment){n.push.apply(n,ym(l.props.children,d));return}Nt(l.type===zs,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!l.props.index||!l.props.children,"An index route cannot have child routes.");let m={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(m.children=ym(l.props.children,d)),n.push(m)}),n}var hd="get",md="application/x-www-form-urlencoded";function Bd(i){return i!=null&&typeof i.tagName=="string"}function nT(i){return Bd(i)&&i.tagName.toLowerCase()==="button"}function iT(i){return Bd(i)&&i.tagName.toLowerCase()==="form"}function rT(i){return Bd(i)&&i.tagName.toLowerCase()==="input"}function lT(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function oT(i,t){return i.button===0&&(!t||t==="_self")&&!lT(i)}var ad=null;function cT(){if(ad===null)try{new FormData(document.createElement("form"),0),ad=!1}catch{ad=!0}return ad}var dT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lm(i){return i!=null&&!dT.has(i)?(ba(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${md}"`),null):i}function uT(i,t){let n,l,c,d,m;if(iT(i)){let f=i.getAttribute("action");l=f?Ja(f,t):null,n=i.getAttribute("method")||hd,c=lm(i.getAttribute("enctype"))||md,d=new FormData(i)}else if(nT(i)||rT(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=i.getAttribute("formaction")||f.getAttribute("action");if(l=y?Ja(y,t):null,n=i.getAttribute("formmethod")||f.getAttribute("method")||hd,c=lm(i.getAttribute("formenctype"))||lm(f.getAttribute("enctype"))||md,d=new FormData(f,i),!cT()){let{name:g,type:j,value:S}=i;if(j==="image"){let A=g?`${g}.`:"";d.append(`${A}x`,"0"),d.append(`${A}y`,"0")}else g&&d.append(g,S)}}else{if(Bd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hd,l=null,c=md,m=i}return d&&c==="text/plain"&&(m=d,d=void 0),{action:l,method:n.toLowerCase(),encType:c,formData:d,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qm(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function hT(i,t,n){let l=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return l.pathname==="/"?l.pathname=`_root.${n}`:t&&Ja(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${n}`,l}async function mT(i,t){if(i.id in t)return t[i.id];try{let n=await import(i.module);return t[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function fT(i,t,n){let l=await Promise.all(i.map(async c=>{let d=t.routes[c.route.id];if(d){let m=await mT(d,n);return m.links?m.links():[]}return[]}));return xT(l.flat(1).filter(pT).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function ry(i,t,n,l,c,d){let m=(y,g)=>n[g]?y.route.id!==n[g].route.id:!0,f=(y,g)=>n[g].pathname!==y.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==y.params["*"];return d==="assets"?t.filter((y,g)=>m(y,g)||f(y,g)):d==="data"?t.filter((y,g)=>{let j=l.routes[y.route.id];if(!j||!j.hasLoader)return!1;if(m(y,g)||f(y,g))return!0;if(y.route.shouldRevalidate){let S=y.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function gT(i,t,{includeHydrateFallback:n}={}){return vT(i.map(l=>{let c=t.routes[l.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),n&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function vT(i){return[...new Set(i)]}function yT(i){let t={},n=Object.keys(i).sort();for(let l of n)t[l]=i[l];return t}function xT(i,t){let n=new Set;return new Set(t),i.reduce((l,c)=>{let d=JSON.stringify(yT(c));return n.has(d)||(n.add(d),l.push({key:d,link:c})),l},[])}function Ox(){let i=I.useContext(qr);return Qm(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function jT(){let i=I.useContext(Vd);return Qm(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ym=I.createContext(void 0);Ym.displayName="FrameworkContext";function Vx(){let i=I.useContext(Ym);return Qm(i,"You must render this element inside a <HydratedRouter> element"),i}function NT(i,t){let n=I.useContext(Ym),[l,c]=I.useState(!1),[d,m]=I.useState(!1),{onFocus:f,onBlur:y,onMouseEnter:g,onMouseLeave:j,onTouchStart:S}=t,A=I.useRef(null);I.useEffect(()=>{if(i==="render"&&m(!0),i==="viewport"){let H=q=>{q.forEach(Y=>{m(Y.isIntersecting)})},U=new IntersectionObserver(H,{threshold:.5});return A.current&&U.observe(A.current),()=>{U.disconnect()}}},[i]),I.useEffect(()=>{if(l){let H=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(H)}}},[l]);let O=()=>{c(!0)},D=()=>{c(!1),m(!1)};return n?i!=="intent"?[d,A,{}]:[d,A,{onFocus:no(f,O),onBlur:no(y,D),onMouseEnter:no(g,O),onMouseLeave:no(j,D),onTouchStart:no(S,O)}]:[!1,A,{}]}function no(i,t){return n=>{i&&i(n),n.defaultPrevented||t(n)}}function bT({page:i,...t}){let{router:n}=Ox(),l=I.useMemo(()=>_x(n.routes,i,n.basename),[n.routes,i,n.basename]);return l?I.createElement(_T,{page:i,matches:l,...t}):null}function TT(i){let{manifest:t,routeModules:n}=Vx(),[l,c]=I.useState([]);return I.useEffect(()=>{let d=!1;return fT(i,t,n).then(m=>{d||c(m)}),()=>{d=!0}},[i,t,n]),l}function _T({page:i,matches:t,...n}){let l=Ii(),{manifest:c,routeModules:d}=Vx(),{basename:m}=Ox(),{loaderData:f,matches:y}=jT(),g=I.useMemo(()=>ry(i,t,y,c,l,"data"),[i,t,y,c,l]),j=I.useMemo(()=>ry(i,t,y,c,l,"assets"),[i,t,y,c,l]),S=I.useMemo(()=>{if(i===l.pathname+l.search+l.hash)return[];let D=new Set,H=!1;if(t.forEach(q=>{let Y=c.routes[q.route.id];!Y||!Y.hasLoader||(!g.some(P=>P.route.id===q.route.id)&&q.route.id in f&&d[q.route.id]?.shouldRevalidate||Y.hasClientLoader?H=!0:D.add(q.route.id))}),D.size===0)return[];let U=hT(i,m,"data");return H&&D.size>0&&U.searchParams.set("_routes",t.filter(q=>D.has(q.route.id)).map(q=>q.route.id).join(",")),[U.pathname+U.search]},[m,f,l,c,g,t,i,d]),A=I.useMemo(()=>gT(j,c),[j,c]),O=TT(j);return I.createElement(I.Fragment,null,S.map(D=>I.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),A.map(D=>I.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),O.map(({key:D,link:H})=>I.createElement("link",{key:D,...H})))}function ST(...i){return t=>{i.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Bx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bx&&(window.__reactRouterVersion="7.7.1")}catch{}function AT({basename:i,children:t,window:n}){let l=I.useRef();l.current==null&&(l.current=u0({window:n,v5Compat:!0}));let c=l.current,[d,m]=I.useState({action:c.action,location:c.location}),f=I.useCallback(y=>{I.startTransition(()=>m(y))},[m]);return I.useLayoutEffect(()=>c.listen(f),[c,f]),I.createElement(sT,{basename:i,children:t,location:d.location,navigationType:d.action,navigator:c})}var Lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Km=I.forwardRef(function({onClick:t,discover:n="render",prefetch:l="none",relative:c,reloadDocument:d,replace:m,state:f,target:y,to:g,preventScrollReset:j,viewTransition:S,...A},O){let{basename:D}=I.useContext(_a),H=typeof g=="string"&&Lx.test(g),U,q=!1;if(typeof g=="string"&&H&&(U=g,Bx))try{let b=new URL(window.location.href),E=g.startsWith("//")?new URL(b.protocol+g):new URL(g),k=Ja(E.pathname,D);E.origin===b.origin&&k!=null?g=k+E.search+E.hash:q=!0}catch{ba(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=B0(g,{relative:c}),[P,Q,se]=NT(l,A),z=wT(g,{replace:m,state:f,target:y,preventScrollReset:j,relative:c,viewTransition:S});function M(b){t&&t(b),b.defaultPrevented||z(b)}let w=I.createElement("a",{...A,...se,href:U||Y,onClick:q||d?t:M,ref:ST(O,Q),target:y,"data-discover":!H&&n==="render"?"true":void 0});return P&&!H?I.createElement(I.Fragment,null,w,I.createElement(bT,{page:Y})):w});Km.displayName="Link";var Fs=I.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:l="",end:c=!1,style:d,to:m,viewTransition:f,children:y,...g},j){let S=wo(m,{relative:g.relative}),A=Ii(),O=I.useContext(Vd),{navigator:D,basename:H}=I.useContext(_a),U=O!=null&&PT(S)&&f===!0,q=D.encodeLocation?D.encodeLocation(S).pathname:S.pathname,Y=A.pathname,P=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),P=P?P.toLowerCase():null,q=q.toLowerCase()),P&&H&&(P=Ja(P,H)||P);const Q=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let se=Y===q||!c&&Y.startsWith(q)&&Y.charAt(Q)==="/",z=P!=null&&(P===q||!c&&P.startsWith(q)&&P.charAt(q.length)==="/"),M={isActive:se,isPending:z,isTransitioning:U},w=se?t:void 0,b;typeof l=="function"?b=l(M):b=[l,se?"active":null,z?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let E=typeof d=="function"?d(M):d;return I.createElement(Km,{...g,"aria-current":w,className:b,ref:j,style:E,to:m,viewTransition:f},typeof y=="function"?y(M):y)});Fs.displayName="NavLink";var ET=I.forwardRef(({discover:i="render",fetcherKey:t,navigate:n,reloadDocument:l,replace:c,state:d,method:m=hd,action:f,onSubmit:y,relative:g,preventScrollReset:j,viewTransition:S,...A},O)=>{let D=DT(),H=IT(f,{relative:g}),U=m.toLowerCase()==="get"?"get":"post",q=typeof f=="string"&&Lx.test(f),Y=P=>{if(y&&y(P),P.defaultPrevented)return;P.preventDefault();let Q=P.nativeEvent.submitter,se=Q?.getAttribute("formmethod")||m;D(Q||P.currentTarget,{fetcherKey:t,method:se,navigate:n,replace:c,state:d,relative:g,preventScrollReset:j,viewTransition:S})};return I.createElement("form",{ref:O,method:U,action:H,onSubmit:l?y:Y,...A,"data-discover":!q&&i==="render"?"true":void 0})});ET.displayName="Form";function CT(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ux(i){let t=I.useContext(qr);return Nt(t,CT(i)),t}function wT(i,{target:t,replace:n,state:l,preventScrollReset:c,relative:d,viewTransition:m}={}){let f=Ix(),y=Ii(),g=wo(i,{relative:d});return I.useCallback(j=>{if(oT(j,t)){j.preventDefault();let S=n!==void 0?n:go(y)===go(g);f(i,{replace:S,state:l,preventScrollReset:c,relative:d,viewTransition:m})}},[y,f,g,n,l,t,i,c,d,m])}var kT=0,RT=()=>`__${String(++kT)}__`;function DT(){let{router:i}=Ux("useSubmit"),{basename:t}=I.useContext(_a),n=W0();return I.useCallback(async(l,c={})=>{let{action:d,method:m,encType:f,formData:y,body:g}=uT(l,t);if(c.navigate===!1){let j=c.fetcherKey||RT();await i.fetch(j,n,c.action||d,{preventScrollReset:c.preventScrollReset,formData:y,body:g,formMethod:c.method||m,formEncType:c.encType||f,flushSync:c.flushSync})}else await i.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:y,body:g,formMethod:c.method||m,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,t,n])}function IT(i,{relative:t}={}){let{basename:n}=I.useContext(_a),l=I.useContext(Sa);Nt(l,"useFormAction must be used inside a RouteContext");let[c]=l.matches.slice(-1),d={...wo(i||".",{relative:t})},m=Ii();if(i==null){d.search=m.search;let f=new URLSearchParams(d.search),y=f.getAll("index");if(y.some(j=>j==="")){f.delete("index"),y.filter(S=>S).forEach(S=>f.append("index",S));let j=f.toString();d.search=j?`?${j}`:""}}return(!i||i===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:Wa([n,d.pathname])),go(d)}function PT(i,{relative:t}={}){let n=I.useContext(kx);Nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Ux("useViewTransitionState"),c=wo(i,{relative:t});if(!n.isTransitioning)return!1;let d=Ja(n.currentLocation.pathname,l)||n.currentLocation.pathname,m=Ja(n.nextLocation.pathname,l)||n.nextLocation.pathname;return Nd(c.pathname,m)!=null||Nd(c.pathname,d)!=null}function MT({metric:i,selectedTimeframe:t,onTimeframeChange:n}){const c=(j=>{const A={"1D":24,"1W":7,"1M":30,"3M":90,"1Y":12,Max:24}[j]||30,O=parseInt(i.value.replace(/[,]/g,""))||1e3;return Array.from({length:A},(D,H)=>{const U=(Math.random()-.5)*.3,q=i.trendType==="positive"?.02:i.trendType==="negative"?-.02:0,Y=O*(1+q*H+U);return{index:H,value:Math.max(0,Y),label:j==="1D"?`${H}:00`:j==="1W"?`Day ${H+1}`:j==="1M"?`Day ${H+1}`:j==="3M"?`Week ${Math.floor(H/7)+1}`:`Month ${H+1}`}})})(t),d=Math.max(...c.map(j=>j.value)),m=Math.min(...c.map(j=>j.value)),f=d-m,y=j=>{const D=460/(j.length-1);return j.map((H,U)=>{const q=20+U*D,Y=180-(H.value-m)/f*160;return`${U===0?"M":"L"} ${q} ${Y}`}).join(" ")},g=["1D","1W","1M","3M","1Y","Max"];return e.jsxs("div",{className:"metric-chart-container",children:[e.jsxs("div",{className:"chart-header",children:[e.jsxs("h3",{children:["Historical Data - ",t]}),e.jsx("div",{className:"timeframe-controls",children:g.map(j=>e.jsx("button",{className:`timeframe-btn ${t===j?"active":""}`,onClick:()=>n(j),children:j},j))})]}),e.jsxs("div",{className:"chart-area",children:[e.jsxs("svg",{viewBox:"0 0 500 200",className:"line-chart",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"50",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 50 0 L 0 0 0 40",fill:"none",stroke:"#e2e8f0",strokeWidth:"0.5"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),e.jsx("path",{d:y(c),fill:"none",stroke:i.trendType==="positive"?"#10b981":i.trendType==="negative"?"#ef4444":"#6b7280",strokeWidth:"2",className:"chart-line"}),c.map((j,S)=>{const A=20+S*(460/(c.length-1)),O=180-(j.value-m)/f*160;return e.jsx("circle",{cx:A,cy:O,r:"3",fill:i.trendType==="positive"?"#10b981":i.trendType==="negative"?"#ef4444":"#6b7280",className:"data-point"},S)}),e.jsx("text",{x:"10",y:"25",fontSize:"10",fill:"#6b7280",textAnchor:"end",children:i.value.includes("")?`${Math.round(d).toLocaleString()}`:Math.round(d).toLocaleString()}),e.jsx("text",{x:"10",y:"185",fontSize:"10",fill:"#6b7280",textAnchor:"end",children:i.value.includes("")?`${Math.round(m).toLocaleString()}`:Math.round(m).toLocaleString()})]}),e.jsxs("div",{className:"chart-stats",children:[e.jsxs("div",{className:"chart-stat",children:[e.jsx("span",{className:"stat-label",children:"Current"}),e.jsx("span",{className:"stat-value",children:i.value})]}),e.jsxs("div",{className:"chart-stat",children:[e.jsxs("span",{className:"stat-label",children:["High (",t,")"]}),e.jsx("span",{className:"stat-value",children:i.value.includes("")?`${Math.round(d).toLocaleString()}`:Math.round(d).toLocaleString()})]}),e.jsxs("div",{className:"chart-stat",children:[e.jsxs("span",{className:"stat-label",children:["Low (",t,")"]}),e.jsx("span",{className:"stat-value",children:i.value.includes("")?`${Math.round(m).toLocaleString()}`:Math.round(m).toLocaleString()})]}),e.jsxs("div",{className:"chart-stat",children:[e.jsx("span",{className:"stat-label",children:"Change"}),e.jsx("span",{className:`stat-value trend-${i.trendType}`,children:i.trend})]})]})]})]})}function OT(){const i=Ix(),[t,n]=I.useState(!1),[l,c]=I.useState(null),[d,m]=I.useState(!1),[f,y]=I.useState("1M"),[g,j]=I.useState([{id:"bookings",label:"Bookings",value:"1,245",subtitle:"This Week",trend:"+12%",trendType:"positive",icon:""},{id:"support",label:"Support Issues",value:"98",subtitle:"Open Cases",trend:"-4%",trendType:"negative",icon:""},{id:"loyalty",label:"Loyalty Redemptions",value:"8,210",subtitle:"Value Redeemed",trend:"--",trendType:"neutral",icon:""},{id:"revenue",label:"Revenue Generated",value:"93,440",subtitle:"MoM",trend:"+9%",trendType:"positive",icon:""}]),S=[{id:"bookings",label:"Bookings",value:"1,245",subtitle:"This Week",trend:"+12%",trendType:"positive",icon:""},{id:"support",label:"Support Issues",value:"98",subtitle:"Open Cases",trend:"-4%",trendType:"negative",icon:""},{id:"loyalty",label:"Loyalty Redemptions",value:"8,210",subtitle:"Value Redeemed",trend:"--",trendType:"neutral",icon:""},{id:"revenue",label:"Revenue Generated",value:"93,440",subtitle:"MoM",trend:"+9%",trendType:"positive",icon:""},{id:"cac",label:"Customer Acquisition Cost",value:"45",subtitle:"Per Customer",trend:"-8%",trendType:"positive",icon:""},{id:"conversion",label:"Conversion Rate",value:"3.2%",subtitle:"Visitors to Booking",trend:"+15%",trendType:"positive",icon:""},{id:"avg_booking",label:"Average Booking Value",value:"890",subtitle:"Per Transaction",trend:"+6%",trendType:"positive",icon:""},{id:"churn",label:"Churn Rate",value:"2.1%",subtitle:"Monthly",trend:"-12%",trendType:"positive",icon:""}],A=U=>{c(U),n(!0),y("1M")},O=()=>{n(!1),c(null),m(!1),y("1M")},D=U=>{const q=S.find(Y=>Y.id===U);if(q&&!g.find(Y=>Y.id===U)){const Y=[...g];Y[3]=q,j(Y)}},H=()=>{i("/analytics")};return e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs("section",{className:"dashboard-section metrics-section",children:[e.jsxs("div",{className:"metrics-header",children:[e.jsx("h2",{className:"section-title",children:"Key Metrics Snapshot"}),e.jsxs("div",{className:"metrics-actions",children:[e.jsx("button",{className:"edit-metrics-btn",onClick:()=>m(!d),children:d?"Done":"Edit Metrics"}),e.jsx("button",{className:"view-all-btn",onClick:H,children:"View All"})]})]}),e.jsx("div",{className:"metrics-grid",children:g.map((U,q)=>e.jsxs("div",{className:"metric-card",onClick:()=>A(U),children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("span",{className:"metric-label",children:U.label}),e.jsx("span",{className:`trend-${U.trendType}`,children:U.trend})]}),e.jsx("div",{className:"metric-value",children:U.value}),e.jsx("div",{className:"metric-subtitle",children:U.subtitle}),e.jsx("div",{className:"mini-chart",children:U.icon}),d&&e.jsx("div",{className:"metric-edit-overlay",children:e.jsx("select",{className:"metric-selector",value:U.id,onChange:Y=>D(Y.target.value),onClick:Y=>Y.stopPropagation(),children:S.map(Y=>e.jsx("option",{value:Y.id,children:Y.label},Y.id))})})]},U.id))})]}),e.jsxs("section",{className:"dashboard-section feed-section",children:[e.jsx("h2",{className:"section-title",children:"Live Operational Feed"}),e.jsxs("div",{className:"activity-feed",children:[e.jsxs("div",{className:"feed-item",children:[e.jsx("div",{className:"feed-icon booking",children:""}),e.jsxs("div",{className:"feed-content",children:[e.jsx("div",{className:"feed-title",children:"New booking created"}),e.jsx("div",{className:"feed-subtitle",children:"LHR  JFK  Business Class  2,340"}),e.jsx("div",{className:"feed-time",children:"2 min ago"})]})]}),e.jsxs("div",{className:"feed-item",children:[e.jsx("div",{className:"feed-icon support",children:""}),e.jsxs("div",{className:"feed-content",children:[e.jsx("div",{className:"feed-title",children:"Support ticket resolved"}),e.jsx("div",{className:"feed-subtitle",children:"Flight change request #TK-4891"}),e.jsx("div",{className:"feed-time",children:"5 min ago"})]})]}),e.jsxs("div",{className:"feed-item",children:[e.jsx("div",{className:"feed-icon reward",children:""}),e.jsxs("div",{className:"feed-content",children:[e.jsx("div",{className:"feed-title",children:"Reward redeemed"}),e.jsx("div",{className:"feed-subtitle",children:"Gold member  Airport lounge access"}),e.jsx("div",{className:"feed-time",children:"8 min ago"})]})]}),e.jsxs("div",{className:"feed-item",children:[e.jsx("div",{className:"feed-icon vip",children:""}),e.jsxs("div",{className:"feed-content",children:[e.jsx("div",{className:"feed-title",children:"VIP check-in flagged"}),e.jsx("div",{className:"feed-subtitle",children:"Platinum member arriving CDG"}),e.jsx("div",{className:"feed-time",children:"12 min ago"})]})]}),e.jsxs("div",{className:"feed-item",children:[e.jsx("div",{className:"feed-icon danger",children:""}),e.jsxs("div",{className:"feed-content",children:[e.jsx("div",{className:"feed-title",children:"Danger zone alert"}),e.jsx("div",{className:"feed-subtitle",children:"Weather delay affecting 12 flights"}),e.jsx("div",{className:"feed-time",children:"15 min ago"})]})]})]})]}),e.jsxs("section",{className:"dashboard-section action-section",children:[e.jsx("h2",{className:"section-title",children:"Action Center"}),e.jsxs("div",{className:"action-cards",children:[e.jsxs("div",{className:"action-card urgent",children:[e.jsxs("div",{className:"action-header",children:[e.jsx("span",{className:"action-count",children:"12"}),e.jsx("span",{className:"action-tag",children:"Urgent"})]}),e.jsx("div",{className:"action-title",children:"Flight Changes Required"}),e.jsx("div",{className:"action-subtitle",children:"Weather delays affecting multiple routes"}),e.jsx("button",{className:"action-btn",children:"Resolve Now"})]}),e.jsxs("div",{className:"action-card warning",children:[e.jsxs("div",{className:"action-header",children:[e.jsx("span",{className:"action-count",children:"8"}),e.jsx("span",{className:"action-tag",children:"Review"})]}),e.jsx("div",{className:"action-title",children:"Support Tickets"}),e.jsx("div",{className:"action-subtitle",children:"High priority customer issues"}),e.jsx("button",{className:"action-btn",children:"Review"})]}),e.jsxs("div",{className:"action-card info",children:[e.jsxs("div",{className:"action-header",children:[e.jsx("span",{className:"action-count",children:"24"}),e.jsx("span",{className:"action-tag",children:"Pending"})]}),e.jsx("div",{className:"action-title",children:"Reward Approvals"}),e.jsx("div",{className:"action-subtitle",children:"Loyalty program redemptions"}),e.jsx("button",{className:"action-btn",children:"Process"})]})]})]}),e.jsxs("section",{className:"dashboard-section revenue-section",children:[e.jsx("h2",{className:"section-title",children:"Revenue Optimisation"}),e.jsxs("div",{className:"revenue-content",children:[e.jsxs("div",{className:"revenue-chart",children:[e.jsxs("div",{className:"chart-bar",children:[e.jsx("div",{className:"bar-label",children:"Flight Bookings"}),e.jsxs("div",{className:"bar-container",children:[e.jsx("div",{className:"bar-fill",style:{width:"85%"}}),e.jsx("span",{className:"bar-value",children:"45,230"})]})]}),e.jsxs("div",{className:"chart-bar",children:[e.jsx("div",{className:"bar-label",children:"Hotel Stays"}),e.jsxs("div",{className:"bar-container",children:[e.jsx("div",{className:"bar-fill",style:{width:"72%"}}),e.jsx("span",{className:"bar-value",children:"28,450"})]})]}),e.jsxs("div",{className:"chart-bar",children:[e.jsx("div",{className:"bar-label",children:"Lounge Access"}),e.jsxs("div",{className:"bar-container",children:[e.jsx("div",{className:"bar-fill",style:{width:"45%"}}),e.jsx("span",{className:"bar-value",children:"12,890"})]})]}),e.jsxs("div",{className:"chart-bar",children:[e.jsx("div",{className:"bar-label",children:"Premium Services"}),e.jsxs("div",{className:"bar-container",children:[e.jsx("div",{className:"bar-fill",style:{width:"38%"}}),e.jsx("span",{className:"bar-value",children:"6,870"})]})]})]}),e.jsxs("div",{className:"revenue-summary",children:[e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-title",children:"Total Revenue"}),e.jsx("div",{className:"summary-value",children:"93,440"}),e.jsx("div",{className:"summary-trend positive",children:"+9% vs last month"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-title",children:"Average Order Value"}),e.jsx("div",{className:"summary-value",children:"890"}),e.jsx("div",{className:"summary-trend positive",children:"+6% vs last month"})]})]})]})]}),e.jsxs("section",{className:"dashboard-section ai-section",children:[e.jsx("h2",{className:"section-title",children:"AI Assistant Suggestions"}),e.jsxs("div",{className:"ai-suggestions",children:[e.jsxs("div",{className:"ai-suggestion",children:[e.jsx("div",{className:"suggestion-icon",children:""}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("div",{className:"suggestion-title",children:"Revenue Opportunity Detected"}),e.jsx("div",{className:"suggestion-text",children:"Based on recent booking patterns, consider promoting premium lounge access to business travelers departing from LHR Terminal 5."})]})]}),e.jsxs("div",{className:"ai-suggestion",children:[e.jsx("div",{className:"suggestion-icon",children:""}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("div",{className:"suggestion-title",children:"Customer Segment Alert"}),e.jsx("div",{className:"suggestion-text",children:"Gold members are 23% more likely to book premium services. Consider targeted marketing campaigns."})]})]}),e.jsxs("div",{className:"ai-suggestion",children:[e.jsx("div",{className:"suggestion-icon",children:""}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("div",{className:"suggestion-title",children:"Operational Efficiency"}),e.jsx("div",{className:"suggestion-text",children:"Support ticket resolution time has improved by 15%. Consider expanding the automated response system."})]})]})]})]}),e.jsxs("section",{className:"dashboard-section map-section",children:[e.jsx("h2",{className:"section-title",children:"Global Activity Map"}),e.jsxs("div",{className:"map-controls",children:[e.jsx("button",{className:"map-toggle active",children:"Heat Map"}),e.jsx("button",{className:"map-toggle",children:"Activity Pins"}),e.jsx("button",{className:"map-toggle",children:"Risk Zones"})]}),e.jsx("div",{className:"map-container",children:e.jsx("div",{className:"world-map-placeholder",children:e.jsx("div",{className:"map-overlay",children:e.jsxs("div",{className:"map-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color high"}),e.jsx("span",{children:"High Activity"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color medium"}),e.jsx("span",{children:"Medium Activity"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color low"}),e.jsx("span",{children:"Low Activity"})]})]})})})})]}),e.jsxs("section",{className:"dashboard-section marketing-section",children:[e.jsx("h2",{className:"section-title",children:"Marketing Performance"}),e.jsxs("div",{className:"marketing-content",children:[e.jsxs("div",{className:"campaign-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-title",children:"Email CTR"}),e.jsx("div",{className:"stat-value",children:"4.2%"}),e.jsx("div",{className:"stat-change positive",children:"+0.8%"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-title",children:"SMS Open Rate"}),e.jsx("div",{className:"stat-value",children:"89%"}),e.jsx("div",{className:"stat-change positive",children:"+2.1%"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-title",children:"Push Notifications"}),e.jsx("div",{className:"stat-value",children:"56%"}),e.jsx("div",{className:"stat-change negative",children:"-1.3%"})]})]}),e.jsx("div",{className:"upcoming-campaigns",children:e.jsxs("div",{className:"campaign-card",children:[e.jsx("div",{className:"campaign-title",children:"Summer Sale Campaign"}),e.jsx("div",{className:"campaign-schedule",children:"Scheduled: Tomorrow 9:00 AM"}),e.jsx("div",{className:"campaign-audience",children:"Target: 12,450 Gold members"}),e.jsx("button",{className:"campaign-btn",children:"Edit Campaign"})]})})]})]}),t&&l&&e.jsx("div",{className:"modal-overlay",onClick:O,children:e.jsxs("div",{className:"modal-content modal-large",onClick:U=>U.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:[l.label," - Detailed Analysis"]}),e.jsx("button",{className:"modal-close",onClick:O,children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"metric-detail-stats",children:[e.jsxs("div",{className:"detail-stat",children:[e.jsx("div",{className:"detail-label",children:"Current Value"}),e.jsx("div",{className:"detail-value",children:l.value})]}),e.jsxs("div",{className:"detail-stat",children:[e.jsx("div",{className:"detail-label",children:"Trend"}),e.jsx("div",{className:`detail-trend trend-${l.trendType}`,children:l.trend})]}),e.jsxs("div",{className:"detail-stat",children:[e.jsx("div",{className:"detail-label",children:"Period"}),e.jsx("div",{className:"detail-value",children:l.subtitle})]})]}),e.jsx("div",{className:"metric-chart-area",children:e.jsxs("div",{className:"chart-header-with-insights",children:[e.jsx(MT,{metric:l,selectedTimeframe:f,onTimeframeChange:y}),e.jsxs("div",{className:"insights-icon-container",children:[e.jsx("div",{className:"insights-icon",title:"Hover for insights",children:""}),e.jsxs("div",{className:"insights-tooltip",children:[e.jsx("h4",{children:"Key Insights"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Peak performance observed during weekends and holiday periods"}),e.jsx("li",{children:"Seasonal variations indicate opportunity for targeted campaigns in Q4"}),e.jsx("li",{children:"Geographic analysis shows strong performance in UK and EU markets"}),e.jsx("li",{children:"Mobile conversion rates are 23% higher than desktop"}),e.jsx("li",{children:"Customer segment analysis reveals premium travelers drive 67% of revenue"})]})]})]})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:H,children:"View in Analytics"}),e.jsx("button",{className:"modal-btn primary",onClick:O,children:"Close"})]})]})})]})}function VT(){return e.jsxs("div",{className:"analytics-page",children:[e.jsx("h1",{className:"page-title",children:"Analytics & Insights"}),e.jsx("p",{className:"page-subtitle",children:"Comprehensive view of all metrics and performance indicators"}),e.jsxs("div",{className:"analytics-grid",children:[e.jsxs("section",{className:"analytics-section",children:[e.jsx("h2",{className:"section-title",children:"Available Metrics"}),e.jsxs("div",{className:"metrics-library",children:[e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Bookings"}),e.jsx("div",{className:"metric-desc",children:"Total bookings per period"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Revenue Generated"}),e.jsx("div",{className:"metric-desc",children:"Total revenue across all channels"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Support Issues"}),e.jsx("div",{className:"metric-desc",children:"Open support tickets and resolution rate"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Loyalty Redemptions"}),e.jsx("div",{className:"metric-desc",children:"Points/miles redeemed value"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Customer Acquisition Cost"}),e.jsx("div",{className:"metric-desc",children:"Average cost to acquire new customer"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Conversion Rate"}),e.jsx("div",{className:"metric-desc",children:"Visitors to booking conversion"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Average Booking Value"}),e.jsx("div",{className:"metric-desc",children:"Mean transaction value"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Churn Rate"}),e.jsx("div",{className:"metric-desc",children:"Customer retention metrics"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Net Promoter Score"}),e.jsx("div",{className:"metric-desc",children:"Customer satisfaction rating"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]}),e.jsxs("div",{className:"metric-option",children:[e.jsx("div",{className:"metric-name",children:"Active Users"}),e.jsx("div",{className:"metric-desc",children:"Daily/monthly active user count"}),e.jsx("button",{className:"add-metric-btn",children:"Add to Dashboard"})]})]})]}),e.jsxs("section",{className:"analytics-section",children:[e.jsx("h2",{className:"section-title",children:"Detailed Performance Charts"}),e.jsxs("div",{className:"charts-grid",children:[e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Revenue Trends (Last 12 Months)"}),e.jsx("div",{className:"chart-placeholder",children:" Revenue trending upward with seasonal variations"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Booking Volume by Channel"}),e.jsx("div",{className:"chart-placeholder",children:" Direct: 45%, Mobile: 35%, Partner: 20%"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Customer Segments"}),e.jsx("div",{className:"chart-placeholder",children:" Gold: 40%, Silver: 35%, Bronze: 25%"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Geographic Distribution"}),e.jsx("div",{className:"chart-placeholder",children:" UK: 45%, EU: 30%, US: 15%, Asia: 10%"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Service Type Performance"}),e.jsx("div",{className:"chart-placeholder",children:" Flights: 60%, Hotels: 25%, Services: 15%"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Seasonal Patterns"}),e.jsx("div",{className:"chart-placeholder",children:" Q4 peak, Q1 dip, summer recovery"})]})]})]})]})]})}function BT(){const[i,t]=I.useState(null),[n,l]=I.useState(!1),[c,d]=I.useState("all"),[m,f]=I.useState("all"),[y,g]=I.useState("all"),[j,S]=I.useState(""),[A,O]=I.useState(""),[D,H]=I.useState("all"),[U,q]=I.useState("all"),[Y,P]=I.useState(""),[Q,se]=I.useState(!1),[z,M]=I.useState({}),[w,b]=I.useState({}),E=G=>{M(B=>({...B,[G]:!B[G]}))},k=G=>{b(B=>({...B,[G]:!B[G]}))},V=[{id:"BK-FL-001",tripId:"TRIP-001",customerName:"Sarah Johnson",rewardProgram:"Gold Member",bookingType:"Flight",flightType:"Round Trip",airline:"British Airways",departureDate:"2024-03-15",returnDate:"2024-03-22",origin:"JFK",destination:"LHR",passengers:1,bookingReference:"ABC123456",totalPrice:"2,190.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-15",customer:{email:"sarah.johnson@email.com",phone:"+44 7700 900123",loyaltyTier:"Gold Member",loyaltyNumber:"BA123456789"},payment:{method:"Credit Card",last4:"1234",amount:"2,190.00",pointsUsed:"0"}},{id:"BK-HT-001",tripId:"TRIP-001",customerName:"Sarah Johnson",rewardProgram:"Gold Member",bookingType:"Hotel",hotelName:"The Plaza Hotel",checkIn:"2024-03-15",checkOut:"2024-03-22",nights:7,roomType:"Deluxe Room",guests:1,bookingReference:"PLZ-2024-001",totalPrice:"2,800.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-15",customer:{email:"sarah.johnson@email.com",phone:"+44 7700 900123",loyaltyTier:"Gold Member",loyaltyNumber:"BA123456789"},payment:{method:"Credit Card",last4:"1234",amount:"2,800.00",pointsUsed:"0"}},{id:"BK-AT-001",tripId:"TRIP-001",customerName:"Sarah Johnson",rewardProgram:"Gold Member",bookingType:"Airport Transfer",transferType:"Private Car",pickupLocation:"London City Centre",dropoffLocation:"Heathrow Terminal 5",transferDate:"2024-03-15",transferTime:"06:00",vehicleType:"Luxury Sedan",bookingReference:"LHR-AT-001",totalPrice:"0.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-15",customer:{email:"sarah.johnson@email.com",phone:"+44 7700 900123",loyaltyTier:"Gold Member",loyaltyNumber:"BA123456789"},payment:{method:"Entitlement",entitlementsUsed:"1"}},{id:"BK-AL-001",tripId:"TRIP-001",customerName:"Sarah Johnson",rewardProgram:"Gold Member",bookingType:"Airport Lounge",loungeName:"No.1 Traveller Lounge",airport:"Heathrow Terminal 5",accessDate:"2024-03-15",duration:"3 hours",guests:1,bookingReference:"LHR-LG-001",totalPrice:"0.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-15",customer:{email:"sarah.johnson@email.com",phone:"+44 7700 900123",loyaltyTier:"Gold Member",loyaltyNumber:"BA123456789"},payment:{method:"Entitlement",entitlementsUsed:"1"}},{id:"BK-ES-001",tripId:"TRIP-001",customerName:"Sarah Johnson",rewardProgram:"Gold Member",bookingType:"eSIM",destination:"United States",dataAllowance:"10GB",validity:"14 days",networkProvider:"AT&T",bookingReference:"ESIM-US-001",totalPrice:"25.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-15",customer:{email:"sarah.johnson@email.com",phone:"+44 7700 900123",loyaltyTier:"Gold Member",loyaltyNumber:"BA123456789"},payment:{method:"Credit Card",last4:"1234",amount:"25.00",pointsUsed:"0"}},{id:"BK-FL-002",tripId:"TRIP-002",customerName:"Sarah Johnson",rewardProgram:"Silver Member",bookingType:"Flight",flightType:"Round Trip",airline:"Emirates",departureDate:"2024-03-20",returnDate:"2024-03-27",origin:"LHR",destination:"DXB",passengers:2,bookingReference:"EK789012",totalPrice:"1,850.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-10",customer:{email:"sarah.johnson@email.com",phone:"+44 7700 900456",loyaltyTier:"Silver Member",loyaltyNumber:"BA987654321"},payment:{method:"Credit Card",last4:"5678",amount:"1,850.00",pointsUsed:"0"}},{id:"BK-HT-002",tripId:"TRIP-002",customerName:"Sarah Johnson",rewardProgram:"Silver Member",bookingType:"Hotel",hotelName:"Burj Al Arab",checkIn:"2024-03-21",checkOut:"2024-03-27",nights:6,roomType:"Deluxe Suite",guests:2,bookingReference:"BURJ-2024-002",totalPrice:"4,200.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-10",customer:{email:"sarah.johnson@email.com",phone:"+44 7700 900456",loyaltyTier:"Silver Member",loyaltyNumber:"BA987654321"},payment:{method:"Credit Card",last4:"5678",amount:"4,200.00",pointsUsed:"0"}},{id:"BK-FT-001",tripId:"TRIP-002",customerName:"Sarah Johnson",rewardProgram:"Silver Member",bookingType:"Fast Track",airport:"Heathrow Terminal 3",serviceDate:"2024-03-20",serviceType:"Security Fast Track",bookingReference:"LHR-FT-001",totalPrice:"25.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-10",customer:{email:"sarah.johnson@email.com",phone:"+44 7700 900456",loyaltyTier:"Silver Member",loyaltyNumber:"BA987654321"},payment:{method:"Credit Card",last4:"5678",amount:"25.00",pointsUsed:"0"}},{id:"BK-FL-003",tripId:"TRIP-003",customerName:"Michael Brown",rewardProgram:"Platinum Member",bookingType:"Flight",flightType:"Round Trip",airline:"Virgin Atlantic",departureDate:"2024-04-10",returnDate:"2024-04-15",origin:"JFK",destination:"LHR",passengers:1,bookingReference:"VS456789",totalPrice:"1,650.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-03-01",customer:{email:"michael.brown@email.com",phone:"+44 7700 900789",loyaltyTier:"Platinum Member",loyaltyNumber:"BA456789123"},payment:{method:"Credit Card",last4:"9012",amount:"1,650.00",pointsUsed:"0"}},{id:"BK-HT-003",tripId:"TRIP-003",customerName:"Michael Brown",rewardProgram:"Platinum Member",bookingType:"Hotel",hotelName:"The Ritz London",checkIn:"2024-04-11",checkOut:"2024-04-15",nights:4,roomType:"Executive Suite",guests:1,bookingReference:"RITZ-2024-003",totalPrice:"3,200.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-03-01",customer:{email:"michael.brown@email.com",phone:"+44 7700 900789",loyaltyTier:"Platinum Member",loyaltyNumber:"BA456789123"},payment:{method:"Credit Card",last4:"9012",amount:"3,200.00",pointsUsed:"0"}},{id:"BK-TK-001",tripId:"TRIP-003",customerName:"Michael Brown",rewardProgram:"Platinum Member",bookingType:"Event Ticket",eventName:"Premier League Match: Arsenal vs Chelsea",eventDate:"2024-04-13",venue:"Emirates Stadium",tickets:1,seatCategory:"Premium",bookingReference:"ARS-CHE-001",totalPrice:"150.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-03-01",customer:{email:"michael.brown@email.com",phone:"+44 7700 900789",loyaltyTier:"Platinum Member",loyaltyNumber:"BA456789123"},payment:{method:"Credit Card",last4:"9012",amount:"150.00",pointsUsed:"0"}},{id:"BK-ES-002",tripId:"TRIP-ES-002",customerName:"Emma Wilson",rewardProgram:"Gold Member",bookingType:"eSIM",destination:"Japan",dataAllowance:"15GB",validity:"21 days",networkProvider:"NTT Docomo",bookingReference:"ESIM-JP-002",totalPrice:"35.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-02-20",customer:{email:"emma.wilson@email.com",phone:"+44 7700 901234",loyaltyTier:"Gold Member",loyaltyNumber:"BA789123456"},payment:{method:"Credit Card",last4:"3456",amount:"35.00",pointsUsed:"0"}},{id:"BK-HW-001",tripId:"TRIP-HW-001",customerName:"David Lee",rewardProgram:"Silver Member",bookingType:"Health & Wellness",serviceName:"Spa Treatment Package",serviceDate:"2024-04-05",location:"The Dorchester Spa",duration:"3 hours",bookingReference:"DOR-SPA-001",totalPrice:"280.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-03-05",customer:{email:"david.lee@email.com",phone:"+44 7700 901567",loyaltyTier:"Silver Member",loyaltyNumber:"BA321654987"},payment:{method:"Credit Card",last4:"7890",amount:"280.00",pointsUsed:"0"}},{id:"BK-FL-004",tripId:"TRIP-004",customerName:"Lisa Chen",rewardProgram:"Platinum Member",bookingType:"Flight",flightType:"One Way",airline:"Qatar Airways",departureDate:"2024-05-15",returnDate:null,origin:"LHR",destination:"DOH",passengers:1,bookingReference:"QR-LHR-DOH-001",totalPrice:"1,200.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-04-01",customer:{email:"lisa.chen@email.com",phone:"+44 7700 901890",loyaltyTier:"Platinum Member",loyaltyNumber:"BA147258369"},payment:{method:"Credit Card",last4:"1111",amount:"1,200.00",pointsUsed:"0"}},{id:"BK-HT-004",tripId:"TRIP-005",customerName:"Robert Taylor",rewardProgram:"Gold Member",bookingType:"Hotel",hotelName:"The Savoy",checkIn:"2024-06-10",checkOut:"2024-06-12",nights:2,roomType:"River View Room",guests:1,bookingReference:"SVY-2024-004",totalPrice:"1,800.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-04-15",customer:{email:"robert.taylor@email.com",phone:"+44 7700 902123",loyaltyTier:"Gold Member",loyaltyNumber:"BA963852741"},payment:{method:"Credit Card",last4:"2222",amount:"1,800.00",pointsUsed:"0"}},{id:"BK-TK-002",tripId:"TRIP-006",customerName:"Sophie Martinez",rewardProgram:"Silver Member",bookingType:"Event Ticket",eventName:"Wimbledon Tennis Championships",eventDate:"2024-07-08",venue:"All England Lawn Tennis Club",tickets:2,seatCategory:"Centre Court",bookingReference:"WIM-2024-001",totalPrice:"600.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-04-20",customer:{email:"sophie.martinez@email.com",phone:"+44 7700 902456",loyaltyTier:"Silver Member",loyaltyNumber:"BA852963741"},payment:{method:"Credit Card",last4:"3333",amount:"600.00",pointsUsed:"0"}},{id:"BK-FT-002",tripId:"TRIP-FT-002",customerName:"Alex Rodriguez",rewardProgram:"Bronze Member",bookingType:"Fast Track",airport:"Gatwick North",serviceDate:"2024-05-20",serviceType:"Immigration Fast Track",bookingReference:"LGW-FT-002",totalPrice:"30.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-04-25",customer:{email:"alex.rodriguez@email.com",phone:"+44 7700 902789",loyaltyTier:"Bronze Member",loyaltyNumber:"BA741852963"},payment:{method:"Credit Card",last4:"4444",amount:"30.00",pointsUsed:"0"}},{id:"BK-AL-002",tripId:"TRIP-AL-002",customerName:"Jennifer Davis",rewardProgram:"Gold Member",bookingType:"Airport Lounge",loungeName:"Aspire Lounge",airport:"Stansted",accessDate:"2024-06-05",duration:"4 hours",guests:1,bookingReference:"STN-LG-002",totalPrice:"40.00",pointsUsed:"0",status:"Confirmed",bookingDate:"2024-05-01",customer:{email:"jennifer.davis@email.com",phone:"+44 7700 903012",loyaltyTier:"Gold Member",loyaltyNumber:"BA369258147"},payment:{method:"Credit Card",last4:"5555",amount:"40.00",pointsUsed:"0"}},{id:"BK-FL-005",tripId:"TRIP-007",customerName:"Thomas Anderson",rewardProgram:"Platinum Member",bookingType:"Flight",flightType:"Round Trip",airline:"American Airlines",departureDate:"2024-06-15",returnDate:"2024-06-22",origin:"LHR",destination:"LAX",passengers:2,bookingReference:"AA-LAX-001",totalPrice:"2,500.00",pointsUsed:"0",status:"Failed",bookingDate:"2024-05-01",customer:{email:"thomas.anderson@email.com",phone:"+44 7700 903345",loyaltyTier:"Platinum Member",loyaltyNumber:"BA147369258"},payment:{method:"Credit Card",last4:"6666",amount:"2,500.00",pointsUsed:"0"}},{id:"BK-HT-005",tripId:"TRIP-007",customerName:"Thomas Anderson",rewardProgram:"Platinum Member",bookingType:"Hotel",hotelName:"The Beverly Hills Hotel",checkIn:"2024-06-15",checkOut:"2024-06-22",nights:7,roomType:"Bungalow Suite",guests:2,bookingReference:"BHH-2024-001",totalPrice:"4,200.00",pointsUsed:"0",status:"Pending action",bookingDate:"2024-05-01",customer:{email:"thomas.anderson@email.com",phone:"+44 7700 903345",loyaltyTier:"Platinum Member",loyaltyNumber:"BA147369258"},payment:{method:"Credit Card",last4:"6666",amount:"4,200.00",pointsUsed:"0"}},{id:"BK-TK-003",tripId:"TRIP-TK-003",customerName:"Maria Garcia",rewardProgram:"Silver Member",bookingType:"Event Ticket",eventName:"Taylor Swift Concert",eventDate:"2024-08-10",venue:"Wembley Stadium",tickets:1,seatCategory:"VIP",bookingReference:"TS-WEM-001",totalPrice:"350.00",pointsUsed:"0",status:"Failed",bookingDate:"2024-05-10",customer:{email:"maria.garcia@email.com",phone:"+44 7700 903678",loyaltyTier:"Silver Member",loyaltyNumber:"BA258147369"},payment:{method:"Credit Card",last4:"7777",amount:"350.00",pointsUsed:"0"}},{id:"BK-ES-003",tripId:"TRIP-ES-003",customerName:"James Wilson",rewardProgram:"Gold Member",bookingType:"eSIM",destination:"Italy",dataAllowance:"25GB",validity:"30 days",networkProvider:"TIM",bookingReference:"ESIM-IT-001",totalPrice:"45.00",pointsUsed:"0",status:"Pending action",bookingDate:"2024-05-15",customer:{email:"james.wilson@email.com",phone:"+44 7700 904011",loyaltyTier:"Gold Member",loyaltyNumber:"BA369258147"},payment:{method:"Credit Card",last4:"8888",amount:"45.00",pointsUsed:"0"}}],T=G=>{const B={};return G.forEach(ue=>{const me=ue.tripId||`TRIP-${ue.id}`;B[me]||(B[me]={tripId:me,bookings:[],totalBookings:0,totalValue:0,customerName:ue.customerName,tripStatus:"Confirmed",isSingleBooking:!1,tripType:"trip"}),B[me].bookings.push(ue),B[me].totalBookings+=1,B[me].totalValue+=parseFloat(ue.totalPrice.replace("","").replace(",","")),(ue.status==="Failed"||ue.status==="Pending action")&&(B[me].tripStatus=ue.status)}),Object.values(B).forEach(ue=>{ue.totalBookings===1&&(ue.isSingleBooking=!0)}),Object.values(B)},ie=T(V),be=V.filter(G=>{if(c!=="all"&&G.bookingType.toLowerCase()!==c.toLowerCase()||m!=="all"&&G.rewardProgram.toLowerCase()!==m.toLowerCase()||y!=="all"&&G.status.toLowerCase()!==y.toLowerCase()||j&&new Date(G.bookingDate)<new Date(j)||A&&new Date(G.bookingDate)>new Date(A)||D==="with_points"&&G.pointsUsed==="0"||D==="no_points"&&G.pointsUsed!=="0"||U==="multi_trips"&&ie.find(B=>B.tripId===(G.tripId||`TRIP-${G.id}`))?.isSingleBooking||U==="single_trips"&&!ie.find(B=>B.tripId===(G.tripId||`TRIP-${G.id}`))?.isSingleBooking)return!1;if(Y){const B=Y.toLowerCase(),ue=G.tripId||`TRIP-${G.id}`;return G.customerName.toLowerCase().includes(B)||G.bookingReference.toLowerCase().includes(B)||G.id.toLowerCase().includes(B)||ue.toLowerCase().includes(B)}return!0}),J=T(be),fe=G=>{t(G),l(!0)},Ee=()=>{l(!1),t(null)},_e=()=>{d("all"),f("all"),g("all"),S(""),O(""),H("all"),q("all"),P("")},F=G=>{switch(G.toLowerCase()){case"confirmed":return"status-confirmed";case"pending action":return"status-pending";case"failed":return"status-failed";case"completed":return"status-completed";default:return"status-confirmed"}},de=G=>{switch(G.toLowerCase()){case"flight":return"";case"hotel":return"";case"event ticket":return"";case"esim":return"";case"health & wellness":return"";case"fast track":return"";case"airport lounge":return"";case"airport dining":return"";case"airport transfer":return"";default:return""}},Te=[c!=="all",m!=="all",y!=="all",j||A,D!=="all",U!=="all",Y].filter(Boolean).length;return e.jsxs("div",{className:"bookings-container",children:[e.jsxs("div",{className:"bookings-filters-header",children:[e.jsx("div",{className:"filters-left",children:e.jsxs("button",{className:`filters-toggle ${Q?"active":""}`,onClick:()=>se(!Q),children:[e.jsx("span",{className:"filter-icon",children:""}),e.jsx("span",{className:"filter-text",children:"Filters"}),Te>0&&e.jsx("span",{className:"filter-badge",children:Te})]})}),e.jsx("div",{className:"filters-right",children:Te>0&&e.jsx("button",{className:"clear-filters-btn",onClick:_e,children:"Clear All"})})]}),Q&&e.jsx("div",{className:"filters-panel",children:e.jsxs("div",{className:"filters-grid",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Booking Type"}),e.jsxs("select",{value:c,onChange:G=>d(G.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"flight",children:" Flights"}),e.jsx("option",{value:"hotel",children:" Hotels"}),e.jsx("option",{value:"event ticket",children:" Event Tickets"}),e.jsx("option",{value:"esim",children:" eSIM"}),e.jsx("option",{value:"health & wellness",children:" Health & Wellness"}),e.jsx("option",{value:"fast track",children:" Fast Track"}),e.jsx("option",{value:"airport lounge",children:" Airport Lounge"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Reward Program"}),e.jsxs("select",{value:m,onChange:G=>f(G.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Programs"}),e.jsx("option",{value:"platinum member",children:" Platinum Member"}),e.jsx("option",{value:"gold member",children:" Gold Member"}),e.jsx("option",{value:"silver member",children:" Silver Member"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Status"}),e.jsxs("select",{value:y,onChange:G=>g(G.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"pending action",children:"Pending action"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Booking Date Range"}),e.jsxs("div",{className:"date-range",children:[e.jsx("input",{type:"date",value:j,onChange:G=>S(G.target.value),className:"modern-date-input",placeholder:"From"}),e.jsx("span",{className:"date-separator",children:"to"}),e.jsx("input",{type:"date",value:A,onChange:G=>O(G.target.value),className:"modern-date-input",placeholder:"To"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Points Usage"}),e.jsxs("select",{value:D,onChange:G=>H(G.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Bookings"}),e.jsx("option",{value:"with_points",children:"Used Points"}),e.jsx("option",{value:"no_points",children:"No Points Used"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Trip Grouping"}),e.jsxs("select",{value:U,onChange:G=>q(G.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Trips"}),e.jsx("option",{value:"multi_trips",children:"Multi-Booking Trips"}),e.jsx("option",{value:"single_trips",children:"Single-Booking Trips"})]})]})]})}),e.jsx("div",{className:"bookings-table-container",children:e.jsxs("table",{className:"bookings-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Trip ID"}),e.jsx("th",{children:"Booking ID"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Reward Program"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Service Date"}),e.jsx("th",{children:"Total Price"}),e.jsx("th",{children:"Cash Paid"}),e.jsx("th",{children:"Points Used"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Details"})]})}),e.jsx("tbody",{children:J.map(G=>e.jsxs(qm.Fragment,{children:[e.jsx("tr",{className:"trip-header-row",children:e.jsx("td",{colSpan:"11",className:"trip-header",children:e.jsxs("div",{className:"trip-header-content",children:[e.jsxs("div",{className:"trip-info",children:[e.jsx("button",{className:"trip-toggle-btn",onClick:()=>k(G.tripId),title:w[G.tripId]?"Expand trip":"Collapse trip",children:e.jsx("span",{className:`trip-toggle-icon ${w[G.tripId]?"collapsed":""}`,children:""})}),e.jsx("span",{className:"trip-icon",children:""}),e.jsx("span",{className:"trip-id",children:G.tripId}),e.jsx("span",{className:"trip-customer",children:G.customerName}),e.jsxs("span",{className:"trip-summary",children:[G.totalBookings," booking",G.totalBookings>1?"s":"","  Total: ",G.totalValue.toLocaleString()]})]}),e.jsx("div",{className:"trip-status",children:e.jsx("span",{className:`trip-status-badge ${F(G.tripStatus)}`,children:G.tripStatus})})]})})}),w[G.tripId]&&e.jsxs("tr",{className:"trip-collapsed-row",children:[e.jsxs("td",{className:"flag-cell",children:[G.tripStatus==="Failed"&&e.jsx("span",{className:"flag-icon",title:"Trip has failed bookings",children:""}),G.tripStatus==="Pending action"&&e.jsx("span",{className:"flag-icon",title:"Trip has pending bookings",children:""})]}),e.jsx("td",{className:"trip-id-cell",children:e.jsx("span",{className:"trip-indicator",children:""})}),e.jsxs("td",{className:"booking-id",children:[e.jsx("span",{className:"id-text",children:G.tripId}),e.jsx("span",{className:"ref-text",children:"Trip Summary"})]}),e.jsx("td",{className:"customer-name",children:G.customerName}),e.jsx("td",{className:"reward-program",children:G.bookings[0]?.rewardProgram||""}),e.jsxs("td",{className:"booking-type",children:[e.jsx("span",{className:"type-icon",children:""}),e.jsxs("span",{className:"type-text",children:["Trip (",G.totalBookings," bookings)"]})]}),e.jsx("td",{className:"booking-date",children:G.bookings[0]?.departureDate||G.bookings[0]?.checkIn||G.bookings[0]?.eventDate||"Multiple"}),e.jsxs("td",{className:"total-price",children:["",G.totalValue.toLocaleString()]}),e.jsxs("td",{className:"cash-paid",children:["",G.bookings.reduce((B,ue)=>{const me=ue.payment.method==="Points"?0:ue.payment.method==="Points + Cash"?parseFloat(ue.payment.cash.replace("","").replace(",","")):parseFloat(ue.totalPrice.replace("","").replace(",",""));return B+me},0).toLocaleString()]}),e.jsx("td",{className:"points-used",children:G.bookings.reduce((B,ue)=>B+parseInt(ue.pointsUsed.replace(",","")||"0"),0).toLocaleString()}),e.jsx("td",{className:"booking-status",children:e.jsx("span",{className:`status-badge ${F(G.tripStatus)}`,children:G.tripStatus})}),e.jsx("td",{className:"booking-actions",children:e.jsx("button",{className:"view-details-btn",onClick:()=>k(G.tripId),children:"Expand Trip"})})]}),!w[G.tripId]&&G.bookings.map((B,ue)=>e.jsxs("tr",{className:"booking-row trip-booking",children:[e.jsxs("td",{className:"flag-cell",children:[B.status==="Failed"&&e.jsx("span",{className:"flag-icon",title:"Booking failed - requires immediate attention",children:""}),B.status==="Pending action"&&e.jsx("span",{className:"flag-icon",title:"Action required - booking needs attention",children:""})]}),e.jsx("td",{className:"trip-id-cell",children:e.jsx("span",{className:"trip-indicator",children:""})}),e.jsxs("td",{className:"booking-id",children:[e.jsx("span",{className:"id-text",children:B.id}),e.jsx("span",{className:"ref-text",children:B.bookingReference})]}),e.jsx("td",{className:"customer-name",children:B.customerName}),e.jsx("td",{className:"reward-program",children:B.rewardProgram}),e.jsxs("td",{className:"booking-type",children:[e.jsx("span",{className:"type-icon",children:de(B.bookingType)}),e.jsx("span",{className:"type-text",children:B.bookingType})]}),e.jsxs("td",{className:"booking-date",children:[B.bookingType==="Flight"&&B.departureDate,B.bookingType==="Hotel"&&B.checkIn,B.bookingType==="Event Ticket"&&B.eventDate,B.bookingType==="eSIM"&&"Active",B.bookingType==="Health & Wellness"&&B.serviceDate,B.bookingType==="Fast Track"&&B.serviceDate,B.bookingType==="Airport Lounge"&&B.accessDate]}),e.jsx("td",{className:"total-price",children:B.totalPrice}),e.jsx("td",{className:"cash-paid",children:B.payment.method==="Points"?"-":B.payment.method==="Points + Cash"?B.payment.cash:B.totalPrice}),e.jsx("td",{className:"points-used",children:B.pointsUsed==="0"?"-":B.pointsUsed}),e.jsx("td",{className:"booking-status",children:e.jsx("span",{className:`status-badge ${F(B.status)}`,children:B.status})}),e.jsx("td",{className:"booking-actions",children:e.jsx("button",{className:"view-details-btn",onClick:()=>fe(B),children:"View Details"})})]},B.id))]},G.tripId))})]})}),n&&i&&e.jsx("div",{className:"modal-overlay",style:{zIndex:9999},onClick:Ee,children:e.jsxs("div",{className:"modal-content modal-large",onClick:G=>G.stopPropagation(),children:[e.jsx("div",{className:"modal-header",children:e.jsxs("div",{className:"modal-header-content",children:[e.jsxs("div",{className:"modal-title-section",children:[e.jsxs("div",{className:"booking-type-badge",children:[e.jsx("span",{className:"type-icon",children:de(i.bookingType)}),e.jsx("span",{className:"type-text",children:i.bookingType})]}),e.jsx("h2",{children:i.id}),e.jsxs("div",{className:"booking-status-row",children:[e.jsx("span",{className:`status-badge ${F(i.status)}`,children:i.status}),i.status==="Failed"&&e.jsx("span",{className:"flag-icon",title:"Booking failed - requires immediate attention",children:""}),i.status==="Pending action"&&e.jsx("span",{className:"flag-icon",title:"Action required - booking needs attention",children:""})]})]}),e.jsx("button",{className:"modal-close",onClick:Ee,children:""})]})}),e.jsx("div",{className:"modal-body",children:i.bookingType==="Flight"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Airline Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Airline"}),e.jsx("span",{className:"detail-value",children:i.airline})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cabin Class"}),e.jsx("span",{className:"detail-value",children:"Economy"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Fare Class"}),e.jsx("span",{className:"detail-value",children:"Y"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Fare Family"}),e.jsx("span",{className:"detail-value",children:"Standard"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Ticket Issued"}),e.jsx("span",{className:"detail-value",children:"Yes"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Bags Included"}),e.jsx("span",{className:"detail-value",children:"1 x 23kg"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Bags Purchased"}),e.jsx("span",{className:"detail-value",children:"1 x 23kg"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Seat Selection Included"}),e.jsx("span",{className:"detail-value",children:"No"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Seat Purchased"}),e.jsx("span",{className:"detail-value",children:"Yes"})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:[e.jsxs("div",{className:"flight-itinerary",children:[e.jsxs("div",{className:"flight-route",children:[e.jsxs("div",{className:"route-header",children:[e.jsx("span",{className:"route-label",children:"Outbound"}),e.jsx("span",{className:"route-date",children:i.departureDate})]}),e.jsx("div",{className:"flight-details",children:e.jsxs("div",{className:"flight-segment",children:[e.jsxs("div",{className:"airport-info",children:[e.jsx("div",{className:"airport-code",children:i.origin}),e.jsx("div",{className:"airport-name",children:"New York JFK"})]}),e.jsxs("div",{className:"flight-info",children:[e.jsx("div",{className:"flight-number",children:"BA 203"}),e.jsxs("div",{className:"flight-times",children:[e.jsx("span",{className:"departure-time",children:"10:30"}),e.jsx("span",{className:"flight-duration",children:"7h 30m"}),e.jsx("span",{className:"arrival-time",children:"13:00"})]})]}),e.jsxs("div",{className:"airport-info",children:[e.jsx("div",{className:"airport-code",children:i.destination}),e.jsx("div",{className:"airport-name",children:"London Heathrow"})]})]})})]}),i.flightType==="Round Trip"&&e.jsxs("div",{className:"flight-route",children:[e.jsxs("div",{className:"route-header",children:[e.jsx("span",{className:"route-label",children:"Inbound"}),e.jsx("span",{className:"route-date",children:i.returnDate})]}),e.jsx("div",{className:"flight-details",children:e.jsxs("div",{className:"flight-segment",children:[e.jsxs("div",{className:"airport-info",children:[e.jsx("div",{className:"airport-code",children:i.destination}),e.jsx("div",{className:"airport-name",children:"London Heathrow"})]}),e.jsxs("div",{className:"flight-info",children:[e.jsx("div",{className:"flight-number",children:"BA 204"}),e.jsxs("div",{className:"flight-times",children:[e.jsx("span",{className:"departure-time",children:"15:30"}),e.jsx("span",{className:"flight-duration",children:"7h 30m"}),e.jsx("span",{className:"arrival-time",children:"04:00"})]})]}),e.jsxs("div",{className:"airport-info",children:[e.jsx("div",{className:"airport-code",children:i.origin}),e.jsx("div",{className:"airport-name",children:"New York JFK"})]})]})})]})]}),e.jsxs("div",{className:"passenger-info",children:[e.jsx("h4",{children:"Passengers"}),e.jsx("div",{className:"passenger-list",children:e.jsxs("div",{className:"passenger-item",children:[e.jsx("span",{className:"passenger-name",children:"Ms. Sarah Johnson"}),e.jsx("span",{className:"passenger-type",children:"Adult"})]})})]})]})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:i.payment.method})]}),i.payment.method==="Credit Card"&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Card Last 4"}),e.jsxs("span",{className:"detail-value",children:["**** ",i.payment.last4]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base Fare"}),e.jsx("span",{className:"detail-value",children:"1,800.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"540.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"-150.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Ancillaries"}),e.jsx("span",{className:"detail-value",children:e.jsxs("div",{className:"ancillaries-list",children:[e.jsx("span",{className:"ancillary-item",title:"Seat Selection - Premium Economy Seat",children:" 75.00"}),e.jsx("span",{className:"ancillary-item",title:"Extra Baggage - 1 x 23kg",children:" 75.00"})]})})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[i.payment.method==="Credit Card"&&e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Credit Card Payment"}),e.jsx("span",{className:"breakdown-value",children:i.totalPrice})]}),i.payment.method==="Points + Cash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:i.payment.pointsUsed})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:i.payment.cash})]})]}),i.payment.method==="Points"&&e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:i.payment.pointsUsed})]})]})]})]})]})]})]}):i.bookingType==="Hotel"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Hotel Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Chain Name"}),e.jsx("span",{className:"detail-value",children:"The Ritz London"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Property Type"}),e.jsx("span",{className:"detail-value",children:"Luxury Hotel"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Star Rating"}),e.jsx("span",{className:"detail-value",children:""})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Property Phone"}),e.jsx("span",{className:"detail-value",children:"+44 20 7493 8181"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Property Email"}),e.jsx("span",{className:"detail-value",children:"reservations@theritzlondon.com"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Policy"}),e.jsx("span",{className:"detail-value",children:"Free cancellation until 24h before check-in"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Cost"}),e.jsx("span",{className:"detail-value",children:"0.00"})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:e.jsxs("div",{className:"hotel-itinerary",children:[e.jsxs("div",{className:"hotel-stay",children:[e.jsxs("div",{className:"stay-header",children:[e.jsx("span",{className:"stay-label",children:"Hotel Stay"}),e.jsxs("span",{className:"stay-nights",children:[i.nights," nights"]})]}),e.jsx("div",{className:"stay-details",children:e.jsxs("div",{className:"stay-segment",children:[e.jsxs("div",{className:"check-info",children:[e.jsx("div",{className:"check-label",children:"Check-in"}),e.jsx("div",{className:"check-date",children:i.checkIn}),e.jsx("div",{className:"check-time",children:"15:00"})]}),e.jsxs("div",{className:"stay-info",children:[e.jsx("div",{className:"room-name",children:i.roomType}),e.jsx("div",{className:"hotel-name",children:i.hotelName}),e.jsx("div",{className:"hotel-address",children:"150 Piccadilly, St. James's, London W1J 9BR, UK"}),e.jsx("div",{className:"breakfast-info",children:"Breakfast Included"})]}),e.jsxs("div",{className:"check-info",children:[e.jsx("div",{className:"check-label",children:"Check-out"}),e.jsx("div",{className:"check-date",children:i.checkOut}),e.jsx("div",{className:"check-time",children:"11:00"})]})]})})]}),e.jsxs("div",{className:"guest-info",children:[e.jsx("h4",{children:"Guests"}),e.jsxs("div",{className:"guest-list",children:[e.jsxs("div",{className:"guest-item",children:[e.jsx("span",{className:"guest-name",children:"Mr. Emma Johnson"}),e.jsx("span",{className:"guest-type",children:"Primary Guest"})]}),e.jsxs("div",{className:"guest-item",children:[e.jsx("span",{className:"guest-name",children:"Mrs. Emma Johnson"}),e.jsx("span",{className:"guest-type",children:"Additional Guest"})]})]})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:i.payment.method})]}),i.payment.method==="Credit Card"&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Card Last 4"}),e.jsxs("span",{className:"detail-value",children:["**** ",i.payment.last4]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base Rate"}),e.jsx("span",{className:"detail-value",children:"2,800.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"700.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"-200.00"})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[i.payment.method==="Credit Card"&&e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Credit Card Payment"}),e.jsx("span",{className:"breakdown-value",children:i.totalPrice})]}),i.payment.method==="Points + Cash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:i.payment.pointsUsed})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:i.payment.cash})]})]}),i.payment.method==="Points"&&e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:i.payment.pointsUsed})]})]})]})]})]})]})]}):i.bookingType==="Event Ticket"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Event Ticket Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Event Type"}),e.jsx("span",{className:"detail-value",children:"Sports"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Event Country"}),e.jsx("span",{className:"detail-value",children:"United Kingdom"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Event City"}),e.jsx("span",{className:"detail-value",children:"London"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Event Provider Name"}),e.jsx("span",{className:"detail-value",children:"UEFA"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Event Phone"}),e.jsx("span",{className:"detail-value",children:"+44 20 7386 9000"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Event Email"}),e.jsx("span",{className:"detail-value",children:"tickets@uefa.com"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Policy"}),e.jsx("span",{className:"detail-value",children:"Non-refundable"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Cost"}),e.jsx("span",{className:"detail-value",children:"Full amount"})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:e.jsxs("div",{className:"event-itinerary",children:[e.jsxs("div",{className:"event-details",children:[e.jsxs("div",{className:"event-header",children:[e.jsx("span",{className:"event-label",children:"Event Details"}),e.jsx("span",{className:"event-category",children:i.seatCategory})]}),e.jsx("div",{className:"event-content",children:e.jsxs("div",{className:"event-segment",children:[e.jsxs("div",{className:"event-info",children:[e.jsx("div",{className:"event-name",children:i.eventName}),e.jsx("div",{className:"event-venue",children:i.venue}),e.jsx("div",{className:"event-address",children:"Wembley Way, London HA9 0WS, UK"}),e.jsx("div",{className:"event-duration",children:"Duration: 3 hours"})]}),e.jsxs("div",{className:"event-timing",children:[e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Event Start"}),e.jsx("div",{className:"timing-date",children:i.eventDate}),e.jsx("div",{className:"timing-time",children:"20:00"})]}),e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Event End"}),e.jsx("div",{className:"timing-date",children:i.eventDate}),e.jsx("div",{className:"timing-time",children:"23:00"})]})]})]})})]}),e.jsxs("div",{className:"attendee-info",children:[e.jsx("h4",{children:"Attendees"}),e.jsxs("div",{className:"attendee-list",children:[e.jsxs("div",{className:"attendee-item",children:[e.jsx("span",{className:"attendee-name",children:"Mr. David Wilson"}),e.jsx("span",{className:"attendee-type",children:"Primary Attendee"})]}),e.jsxs("div",{className:"attendee-item",children:[e.jsx("span",{className:"attendee-name",children:"Mrs. Sarah Wilson"}),e.jsx("span",{className:"attendee-type",children:"Additional Attendee"})]}),e.jsxs("div",{className:"attendee-item",children:[e.jsx("span",{className:"attendee-name",children:"Mr. James Wilson"}),e.jsx("span",{className:"attendee-type",children:"Additional Attendee"})]}),e.jsxs("div",{className:"attendee-item",children:[e.jsx("span",{className:"attendee-name",children:"Mrs. Lisa Wilson"}),e.jsx("span",{className:"attendee-type",children:"Additional Attendee"})]})]})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:i.payment.method})]}),i.payment.method==="Credit Card"&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Card Last 4"}),e.jsxs("span",{className:"detail-value",children:["**** ",i.payment.last4]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base Ticket Price"}),e.jsx("span",{className:"detail-value",children:"1,000.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"200.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"-0.00"})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[i.payment.method==="Credit Card"&&e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Credit Card Payment"}),e.jsx("span",{className:"breakdown-value",children:i.totalPrice})]}),i.payment.method==="Points + Cash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:i.payment.pointsUsed})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:i.payment.cash})]})]}),i.payment.method==="Points"&&e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:i.payment.pointsUsed})]})]})]})]})]})]})]}):i.bookingType==="eSIM"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"eSIM Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"eSIM Provider"}),e.jsx("span",{className:"detail-value",children:i.networkProvider})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"eSIM Phone"}),e.jsx("span",{className:"detail-value",children:"+44 20 7946 0958"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"eSIM Email"}),e.jsx("span",{className:"detail-value",children:"support@esimprovider.com"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Policy"}),e.jsx("span",{className:"detail-value",children:"Non-refundable once activated"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"eSIM Count"}),e.jsx("span",{className:"detail-value",children:"1"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Cost"}),e.jsx("span",{className:"detail-value",children:"Full amount if activated"})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:e.jsxs("div",{className:"esim-itinerary",children:[e.jsxs("div",{className:"esim-details",children:[e.jsxs("div",{className:"esim-header",children:[e.jsx("span",{className:"esim-label",children:"eSIM Details"}),e.jsx("span",{className:"esim-status",children:"Active"})]}),e.jsx("div",{className:"esim-content",children:e.jsxs("div",{className:"esim-segment",children:[e.jsxs("div",{className:"esim-info",children:[e.jsxs("div",{className:"esim-destination",children:[" ",i.destination]}),e.jsx("div",{className:"esim-provider",children:i.networkProvider}),e.jsx("div",{className:"esim-data",children:i.dataAllowance}),e.jsxs("div",{className:"esim-validity",children:["Valid for ",i.validity]})]}),e.jsxs("div",{className:"esim-timing",children:[e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Start Date"}),e.jsx("div",{className:"timing-date",children:"2024-02-01"}),e.jsx("div",{className:"timing-time",children:"00:00"})]}),e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"End Date"}),e.jsx("div",{className:"timing-date",children:"2024-03-02"}),e.jsx("div",{className:"timing-time",children:"23:59"})]})]})]})})]}),e.jsxs("div",{className:"esim-features",children:[e.jsx("h4",{children:"eSIM Features"}),e.jsxs("div",{className:"features-list",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"4G/5G Coverage"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Country-wide Coverage"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Instant Activation"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Local Phone Number"})]})]})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:i.payment.method})]}),i.payment.method==="Credit Card"&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Card Last 4"}),e.jsxs("span",{className:"detail-value",children:["**** ",i.payment.last4]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base eSIM Price"}),e.jsx("span",{className:"detail-value",children:"35.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"10.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"-0.00"})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[i.payment.method==="Credit Card"&&e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Credit Card Payment"}),e.jsx("span",{className:"breakdown-value",children:i.totalPrice})]}),i.payment.method==="Points + Cash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:i.payment.pointsUsed})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:i.payment.cash})]})]}),i.payment.method==="Points"&&e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:i.payment.pointsUsed})]})]})]})]})]})]})]}):i.bookingType==="Health & Wellness"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"H&W Provider"}),e.jsx("span",{className:"detail-value",children:i.location})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"H&W Phone"}),e.jsx("span",{className:"detail-value",children:"+44 20 7629 8888"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"H&W Email"}),e.jsx("span",{className:"detail-value",children:"spa@thedorchester.com"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Policy"}),e.jsx("span",{className:"detail-value",children:"Free cancellation until 24h before service"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Service Count"}),e.jsx("span",{className:"detail-value",children:"1"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Cost"}),e.jsx("span",{className:"detail-value",children:"0.00"})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:e.jsxs("div",{className:"wellness-itinerary",children:[e.jsxs("div",{className:"wellness-details",children:[e.jsxs("div",{className:"wellness-header",children:[e.jsx("span",{className:"wellness-label",children:"Service Details"}),e.jsx("span",{className:"wellness-category",children:"Spa Treatment"})]}),e.jsx("div",{className:"wellness-content",children:e.jsxs("div",{className:"wellness-segment",children:[e.jsxs("div",{className:"wellness-info",children:[e.jsx("div",{className:"service-name",children:i.serviceName}),e.jsx("div",{className:"service-location",children:i.location}),e.jsx("div",{className:"service-address",children:"53 Park Lane, Mayfair, London W1K 1QA, UK"}),e.jsxs("div",{className:"service-duration",children:["Duration: ",i.duration]})]}),e.jsxs("div",{className:"wellness-timing",children:[e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Service Start"}),e.jsx("div",{className:"timing-date",children:i.serviceDate}),e.jsx("div",{className:"timing-time",children:"14:00"})]}),e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Service End"}),e.jsx("div",{className:"timing-date",children:i.serviceDate}),e.jsx("div",{className:"timing-time",children:"17:00"})]})]})]})})]}),e.jsxs("div",{className:"wellness-features",children:[e.jsx("h4",{children:"Service Features"}),e.jsxs("div",{className:"features-list",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Luxury Spa Facilities"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Professional Therapists"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Premium Products"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Refreshments Included"})]})]})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:"Entitlement"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base Service Price"}),e.jsx("span",{className:"detail-value",children:"250.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"30.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"-0.00"})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Entitlement Used"}),e.jsx("span",{className:"breakdown-value",children:"1"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:"0"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:"0.00"})]})]})]})]})]})]})]}):i.bookingType==="Fast Track"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Pre-Book"}),e.jsx("span",{className:"detail-value",children:"Yes"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Fast Track Provider"}),e.jsx("span",{className:"detail-value",children:"Airport Fast Track Services"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Fast Track Phone"}),e.jsx("span",{className:"detail-value",children:"+44 20 7946 0958"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Fast Track Email"}),e.jsx("span",{className:"detail-value",children:"fasttrack@airportservices.com"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Policy"}),e.jsx("span",{className:"detail-value",children:"Free cancellation until 2h before service"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Fast Track Count"}),e.jsx("span",{className:"detail-value",children:"1"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Cost"}),e.jsx("span",{className:"detail-value",children:"0.00"})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:e.jsxs("div",{className:"fasttrack-itinerary",children:[e.jsxs("div",{className:"fasttrack-details",children:[e.jsxs("div",{className:"fasttrack-header",children:[e.jsx("span",{className:"fasttrack-label",children:"Fast Track Details"}),e.jsx("span",{className:"fasttrack-category",children:i.serviceType})]}),e.jsx("div",{className:"fasttrack-content",children:e.jsxs("div",{className:"fasttrack-segment",children:[e.jsxs("div",{className:"fasttrack-info",children:[e.jsx("div",{className:"airport-name",children:i.airport}),e.jsx("div",{className:"terminal-info",children:"Terminal 5"}),e.jsx("div",{className:"location-info",children:"Security Fast Track Lane"}),e.jsxs("div",{className:"fasttrack-date",children:["Date: ",i.serviceDate]}),e.jsx("div",{className:"fasttrack-hours",children:"Hours: 05:00 - 23:00"}),e.jsxs("div",{className:"service-duration",children:["Duration: ",i.duration]})]}),e.jsxs("div",{className:"fasttrack-timing",children:[e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Service Start"}),e.jsx("div",{className:"timing-date",children:i.serviceDate}),e.jsx("div",{className:"timing-time",children:"10:30"})]}),e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Service End"}),e.jsx("div",{className:"timing-date",children:i.serviceDate}),e.jsx("div",{className:"timing-time",children:"10:45"})]})]})]})})]}),e.jsxs("div",{className:"fasttrack-features",children:[e.jsx("h4",{children:"Fast Track Features"}),e.jsxs("div",{className:"features-list",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Dedicated Fast Track Lane"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Priority Processing"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Digital Pass"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Security Compliant"})]})]})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:"Entitlement"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base Fast Track Price"}),e.jsx("span",{className:"detail-value",children:"20.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"5.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"-0.00"})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Entitlement Used"}),e.jsx("span",{className:"breakdown-value",children:"1"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:"0"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:"0.00"})]})]})]})]})]})]})]}):i.bookingType==="Airport Lounge"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Pre-Book"}),e.jsx("span",{className:"detail-value",children:"Yes"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Lounge Provider"}),e.jsx("span",{className:"detail-value",children:"Priority Pass"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Lounge Phone"}),e.jsx("span",{className:"detail-value",children:"+44 20 7946 0958"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Lounge Email"}),e.jsx("span",{className:"detail-value",children:"lounge@prioritypass.com"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Policy"}),e.jsx("span",{className:"detail-value",children:"Free cancellation until 2h before access"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Guest Count"}),e.jsx("span",{className:"detail-value",children:i.guests})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Cost"}),e.jsx("span",{className:"detail-value",children:"0.00"})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:e.jsxs("div",{className:"lounge-itinerary",children:[e.jsxs("div",{className:"lounge-details",children:[e.jsxs("div",{className:"lounge-header",children:[e.jsx("span",{className:"lounge-label",children:"Lounge Details"}),e.jsx("span",{className:"lounge-category",children:"Premium Lounge"})]}),e.jsx("div",{className:"lounge-content",children:e.jsxs("div",{className:"lounge-segment",children:[e.jsxs("div",{className:"lounge-info",children:[e.jsx("div",{className:"airport-name",children:i.airport}),e.jsx("div",{className:"terminal-info",children:"Terminal 5"}),e.jsx("div",{className:"lounge-name",children:i.loungeName}),e.jsx("div",{className:"lounge-location",children:"Location: After Security, Level 2"}),e.jsx("div",{className:"lounge-directions",children:"Directions: Take escalator to Level 2, turn right after duty-free"}),e.jsxs("div",{className:"lounge-date",children:["Date: ",i.accessDate]}),e.jsx("div",{className:"lounge-hours",children:"Hours: 06:00 - 22:00"}),e.jsxs("div",{className:"lounge-duration",children:["Duration: ",i.duration]})]}),e.jsxs("div",{className:"lounge-timing",children:[e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Access Start"}),e.jsx("div",{className:"timing-date",children:i.accessDate}),e.jsx("div",{className:"timing-time",children:"14:00"})]}),e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Access End"}),e.jsx("div",{className:"timing-date",children:i.accessDate}),e.jsx("div",{className:"timing-time",children:"17:00"})]})]})]})})]}),e.jsxs("div",{className:"lounge-features",children:[e.jsx("h4",{children:"Lounge Features"}),e.jsxs("div",{className:"features-list",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Complimentary Food & Beverages"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Comfortable Seating"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Charging Stations"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Shower Facilities"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"Free Wi-Fi"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsx("span",{className:"feature-name",children:"TV & Entertainment"})]})]})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:"Entitlement"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base Lounge Price"}),e.jsx("span",{className:"detail-value",children:"35.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"5.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"-0.00"})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Entitlement Used"}),e.jsx("span",{className:"breakdown-value",children:"1"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:"0"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:"0.00"})]})]})]})]})]})]})]}):i.bookingType==="Airport Dining"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Restaurant Provider"}),e.jsx("span",{className:"detail-value",children:"DragonPass Dining"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Restaurant Phone"}),e.jsx("span",{className:"detail-value",children:"+44 20 7946 0958"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Restaurant Email"}),e.jsx("span",{className:"detail-value",children:"dining@dragonpass.com"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Policy"}),e.jsx("span",{className:"detail-value",children:"Free cancellation until 2h before dining"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Cost"}),e.jsx("span",{className:"detail-value",children:"0.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Status"}),e.jsx("span",{className:`detail-value status-badge ${F(i.status)}`,children:i.status})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:e.jsx("div",{className:"dining-itinerary",children:e.jsxs("div",{className:"dining-details",children:[e.jsxs("div",{className:"dining-header",children:[e.jsx("span",{className:"dining-label",children:"Dining Details"}),e.jsx("span",{className:"dining-category",children:i.cuisine})]}),e.jsx("div",{className:"dining-content",children:e.jsxs("div",{className:"dining-segment",children:[e.jsxs("div",{className:"dining-info",children:[e.jsx("div",{className:"restaurant-name",children:i.restaurantName}),e.jsx("div",{className:"airport-location",children:i.airport}),e.jsx("div",{className:"dining-directions",children:"Directions: After Security, Level 2, turn left after duty-free shops"}),e.jsxs("div",{className:"dining-date",children:["Date: ",i.diningDate]}),e.jsxs("div",{className:"dining-time",children:["Time: ",i.diningTime]}),e.jsx("div",{className:"dining-hours",children:"Opening Hours: 06:00 - 22:00"}),e.jsxs("div",{className:"dining-guests",children:["Guests: ",i.guests]}),e.jsx("div",{className:"dining-duration",children:"Duration: 2 hours"})]}),e.jsxs("div",{className:"dining-timing",children:[e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Dining Start"}),e.jsx("div",{className:"timing-date",children:i.diningDate}),e.jsx("div",{className:"timing-time",children:i.diningTime})]}),e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Dining End"}),e.jsx("div",{className:"timing-date",children:i.diningDate}),e.jsx("div",{className:"timing-time",children:"20:30"})]})]})]})})]})})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:"Entitlement"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base Fare"}),e.jsx("span",{className:"detail-value",children:"0.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"0.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"0.00"})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Entitlement Used"}),e.jsx("span",{className:"breakdown-value",children:"1"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:"0"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:"0.00"})]})]})]})]})]})]})]}):i.bookingType==="Airport Transfer"?e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("booking"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Booking Information"})]}),e.jsx("span",{className:`collapse-icon ${z.booking?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.booking?"collapsed":""}`,id:"booking-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Reference"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Transfer Provider"}),e.jsx("span",{className:"detail-value",children:"DragonPass Transfers"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Transfer Phone"}),e.jsx("span",{className:"detail-value",children:"+44 20 7946 0958"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Transfer Email"}),e.jsx("span",{className:"detail-value",children:"transfers@dragonpass.com"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Policy"}),e.jsx("span",{className:"detail-value",children:"Free cancellation until 2h before transfer"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cancellation Cost"}),e.jsx("span",{className:"detail-value",children:"0.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Status"}),e.jsx("span",{className:`detail-value status-badge ${F(i.status)}`,children:i.status})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("itinerary"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Itinerary"})]}),e.jsx("span",{className:`collapse-icon ${z.itinerary?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.itinerary?"collapsed":""}`,id:"itinerary-content",children:e.jsx("div",{className:"transfer-itinerary",children:e.jsxs("div",{className:"transfer-details",children:[e.jsxs("div",{className:"transfer-header",children:[e.jsx("span",{className:"transfer-label",children:"Transfer Details"}),e.jsx("span",{className:"transfer-category",children:i.transferType})]}),e.jsx("div",{className:"transfer-content",children:e.jsxs("div",{className:"transfer-segment",children:[e.jsxs("div",{className:"transfer-info",children:[e.jsxs("div",{className:"pickup-location",children:["Pickup: ",i.pickupLocation]}),e.jsxs("div",{className:"dropoff-location",children:["Dropoff: ",i.dropoffLocation]}),e.jsxs("div",{className:"vehicle-type",children:["Vehicle: ",i.vehicleType]}),e.jsxs("div",{className:"transfer-date",children:["Date: ",i.transferDate]}),e.jsxs("div",{className:"transfer-time",children:["Time: ",i.transferTime]}),e.jsx("div",{className:"transfer-duration",children:"Duration: 45 minutes"})]}),e.jsxs("div",{className:"transfer-timing",children:[e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Pickup Time"}),e.jsx("div",{className:"timing-date",children:i.transferDate}),e.jsx("div",{className:"timing-time",children:i.transferTime})]}),e.jsxs("div",{className:"timing-info",children:[e.jsx("div",{className:"timing-label",children:"Estimated Arrival"}),e.jsx("div",{className:"timing-date",children:i.transferDate}),e.jsx("div",{className:"timing-time",children:"06:45"})]})]})]})})]})})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("customer"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Customer Information"})]}),e.jsx("span",{className:`collapse-icon ${z.customer?"collapsed":""}`,children:""})]}),e.jsx("div",{className:`section-content ${z.customer?"collapsed":""}`,id:"customer-content",children:e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Reward Program Number"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})})]}),e.jsxs("div",{className:"detail-section collapsible",children:[e.jsxs("div",{className:"section-header",onClick:()=>E("payment"),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h3",{children:"Payment Information"})]}),e.jsx("span",{className:`collapse-icon ${z.payment?"collapsed":""}`,children:""})]}),e.jsxs("div",{className:`section-content ${z.payment?"collapsed":""}`,id:"payment-content",children:[e.jsx("div",{className:"payment-summary",children:e.jsxs("div",{className:"payment-total",children:[e.jsx("span",{className:"total-label",children:"Total Amount"}),e.jsx("span",{className:"total-amount",children:i.totalPrice})]})}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method"}),e.jsx("span",{className:"detail-value",children:"Entitlement"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Base Fare"}),e.jsx("span",{className:"detail-value",children:"0.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Taxes & Fees"}),e.jsx("span",{className:"detail-value",children:"0.00"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Discount Applied"}),e.jsx("span",{className:"detail-value",children:"0.00"})]}),e.jsxs("div",{className:"payment-breakdown",children:[e.jsx("h4",{children:"Payment Method Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Entitlement Used"}),e.jsx("span",{className:"breakdown-value",children:"1"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Points Used"}),e.jsx("span",{className:"breakdown-value",children:"0"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Cash Payment"}),e.jsx("span",{className:"breakdown-value",children:"0.00"})]})]})]})]})]})]})]}):e.jsxs("div",{className:"booking-detail-sections",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"Booking Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking ID:"}),e.jsx("span",{className:"detail-value",children:i.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Reference:"}),e.jsx("span",{className:"detail-value",children:i.bookingReference})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booking Date:"}),e.jsx("span",{className:"detail-value",children:i.bookingDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Status:"}),e.jsx("span",{className:`detail-value status-badge ${F(i.status)}`,children:i.status})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"Customer Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Name:"}),e.jsx("span",{className:"detail-value",children:i.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email:"}),e.jsx("span",{className:"detail-value",children:i.customer.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Phone:"}),e.jsx("span",{className:"detail-value",children:i.customer.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Loyalty Tier:"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyTier})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Loyalty Number:"}),e.jsx("span",{className:"detail-value",children:i.customer.loyaltyNumber})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"Service Details"}),e.jsx("div",{className:"detail-grid"})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"Payment Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method:"}),e.jsx("span",{className:"detail-value",children:i.payment.method})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Total Price:"}),e.jsx("span",{className:"detail-value",children:i.totalPrice})]}),i.payment.method==="Credit Card"&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Card Last 4:"}),e.jsxs("span",{className:"detail-value",children:["**** ",i.payment.last4]})]}),i.payment.method==="Points + Cash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Cash Amount:"}),e.jsx("span",{className:"detail-value",children:i.payment.cash})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Points Used:"}),e.jsx("span",{className:"detail-value",children:i.payment.pointsUsed})]})]}),i.payment.method==="Points"&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Points Used:"}),e.jsx("span",{className:"detail-value",children:i.payment.pointsUsed})]})]})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn secondary",onClick:Ee,children:"Close"})})]})})]})}function LT(){return e.jsxs("div",{className:"booking-actions-page",children:[e.jsxs("div",{className:"actions-header",children:[e.jsx("h1",{children:"Booking Actions"}),e.jsx("p",{children:"Manage specific booking actions and resolutions"})]}),e.jsx("div",{className:"actions-content",children:e.jsxs("div",{className:"actions-placeholder",children:[e.jsx("div",{className:"placeholder-icon",children:""}),e.jsx("h2",{children:"Booking Actions Management"}),e.jsx("p",{children:"This section will contain the detailed booking actions and management interface."}),e.jsxs("div",{className:"coming-soon",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Coming Soon"})]})]})})]})}function UT(){const[i,t]=I.useState("overview"),[n,l]=I.useState(null),[c,d]=I.useState(null),[m,f]=I.useState({priority:"all",assignedTo:"all",bucket:"all"}),[y,g]=I.useState([{id:"BK-FL-001",bucketId:"urgent-disruptions",title:"Flight Cancelled - BA203",description:"British Airways flight cancelled due to weather",priority:"high",status:"backlog",assignedTo:null,createdAt:new Date(Date.now()-7200*1e3),customer:"Sarah Johnson",bookingType:"Flight",urgency:"immediate"},{id:"BK-AL-002",bucketId:"service-recovery",title:"Lounge Access Denied",description:"Customer denied entry to Priority Pass lounge",priority:"high",status:"assigned",assignedTo:"John Smith",createdAt:new Date(Date.now()-3600*1e3),customer:"Emma Wilson",bookingType:"Airport Lounge",urgency:"immediate"},{id:"BK-AM-003",bucketId:"booking-amendments",title:"Name Change Request",description:"Customer needs name correction on booking",priority:"medium",status:"in-progress",assignedTo:"Mike Chen",createdAt:new Date(Date.now()-14400*1e3),customer:"David Brown",bookingType:"Flight",urgency:"today"},{id:"BK-CR-004",bucketId:"cancellations-refunds",title:"Refund Request",description:"Customer requesting refund for cancelled hotel",priority:"medium",status:"review",assignedTo:"Lisa Park",createdAt:new Date(Date.now()-360*60*1e3),customer:"Maria Garcia",bookingType:"Hotel",urgency:"today"},{id:"BK-VIP-005",bucketId:"vip-concierge",title:"VIP Booking - Premium Service",description:"High-value customer needs special handling",priority:"high",status:"backlog",assignedTo:null,createdAt:new Date(Date.now()-1800*1e3),customer:"VIP Customer",bookingType:"Flight",urgency:"immediate"},{id:"BK-UP-006",bucketId:"upsell-crosssell",title:"Upsell Opportunity - Hotel",description:"Flight-only booking, suggest hotel upgrade",priority:"low",status:"backlog",assignedTo:null,createdAt:new Date(Date.now()-480*60*1e3),customer:"Alex Turner",bookingType:"Flight",urgency:"this-week"}]),j=[{id:"john",name:"John Smith",avatar:"JS",active:3},{id:"mike",name:"Mike Chen",avatar:"MC",active:2},{id:"lisa",name:"Lisa Park",avatar:"LP",active:1},{id:"tom",name:"Tom Wilson",avatar:"TW",active:0}],S={"urgent-disruptions":{name:"Urgent Disruptions",icon:"",color:"#dc2626"},"booking-amendments":{name:"Booking Amendments",icon:"",color:"#f59e0b"},"cancellations-refunds":{name:"Cancellations & Refunds",icon:"",color:"#10b981"},"missing-broken-data":{name:"Missing or Broken Data",icon:"",color:"#3b82f6"},"upsell-crosssell":{name:"Upsell & Cross-Sell",icon:"",color:"#8b5cf6"},"vip-concierge":{name:"VIP & Concierge",icon:"",color:"#f97316"},"service-recovery":{name:"Service Recovery",icon:"",color:"#dc2626"}},A=[{id:"backlog",title:"Backlog",color:"#6b7280"},{id:"assigned",title:"Assigned",color:"#3b82f6"},{id:"in-progress",title:"In Progress",color:"#f59e0b"},{id:"review",title:"Review",color:"#8b5cf6"},{id:"complete",title:"Complete",color:"#10b981"}],O=b=>{switch(b){case"high":return"#dc2626";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},D=b=>{switch(b){case"high":return"High";case"medium":return"Medium";case"low":return"Low";default:return"Unknown"}},H=b=>{const k=new Date-b,V=Math.floor(k/(1e3*60)),T=Math.floor(k/(1e3*60*60)),ie=Math.floor(k/(1e3*60*60*24));return V<60?`${V}m ago`:T<24?`${T}h ago`:`${ie}d ago`},U=(b,E)=>{b.dataTransfer.setData("text/plain",E),b.dataTransfer.effectAllowed="move"},q=b=>{b.preventDefault(),b.dataTransfer.dropEffect="move",b.currentTarget.classList.add("drag-over")},Y=b=>{b.currentTarget.classList.remove("drag-over")},P=(b,E)=>{b.preventDefault(),b.currentTarget.classList.remove("drag-over");const k=b.dataTransfer.getData("text/plain");console.log(`Dropping item ${k} into ${E}`),g(V=>V.map(T=>T.id===k?{...T,status:E}:T))},Q=(b,E)=>{const k=j.find(T=>T.id===E),V=E==="unassigned"?null:k?k.name:E;g(T=>T.map(ie=>ie.id===b?{...ie,assignedTo:V}:ie))},se=(b,E)=>{f(k=>({...k,[b]:E}))},z=()=>{f({priority:"all",assignedTo:"all",bucket:"all"})},M=y.filter(b=>!(m.priority!=="all"&&b.priority!==m.priority||m.assignedTo!=="all"&&b.assignedTo!==m.assignedTo||m.bucket!=="all"&&b.bucketId!==m.bucket)),w=()=>{t("overview"),l(null)};return i==="actions"?e.jsxs("div",{className:"booking-action-center",children:[e.jsx("div",{className:"action-center-header",children:e.jsxs("div",{className:"header-content",children:[e.jsx("button",{className:"back-btn",onClick:w,children:" Back to Action Center"}),e.jsx("h1",{children:"Urgent Disruptions"}),e.jsx("p",{children:"Manage 12 items requiring attention"})]})}),e.jsx(LT,{})]}):e.jsxs("div",{className:"booking-action-center",children:[e.jsxs("div",{className:"kanban-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Priority:"}),e.jsxs("select",{value:m.priority,onChange:b=>se("priority",b.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Assigned To:"}),e.jsxs("select",{value:m.assignedTo,onChange:b=>se("assignedTo",b.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Agents"}),e.jsx("option",{value:"unassigned",children:"Unassigned"}),j.map(b=>e.jsx("option",{value:b.name,children:b.name},b.id))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Category:"}),e.jsxs("select",{value:m.bucket,onChange:b=>se("bucket",b.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Categories"}),Object.entries(S).map(([b,E])=>e.jsx("option",{value:b,children:E.name},b))]})]}),e.jsx("button",{className:"clear-filters-btn",onClick:z,children:"Clear Filters"})]}),e.jsx("div",{className:"kanban-container",children:e.jsxs("div",{className:"kanban-board",children:[e.jsxs("div",{className:"kanban-header",children:[e.jsx("h2",{children:"Workflow Board"}),e.jsx("div",{className:"agent-overview",children:j.map(b=>e.jsxs("div",{className:"agent-badge",children:[e.jsx("span",{className:"agent-avatar",children:b.avatar}),e.jsx("span",{className:"agent-name",children:b.name}),e.jsx("span",{className:"agent-count",children:b.active})]},b.id))})]}),e.jsx("div",{className:"kanban-columns",children:A.map(b=>e.jsxs("div",{className:"kanban-column",children:[e.jsxs("div",{className:"column-header",style:{borderLeftColor:b.color},children:[e.jsx("h3",{children:b.title}),e.jsx("span",{className:"column-count",children:M.filter(E=>E.status===b.id).length})]}),e.jsx("div",{className:"column-content",onDragOver:q,onDragLeave:Y,onDrop:E=>P(E,b.id),children:M.filter(E=>E.status===b.id).map(E=>e.jsxs("div",{className:"kanban-card",draggable:!0,onDragStart:k=>U(k,E.id),onClick:()=>d(E),children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{className:"card-id",children:E.id}),e.jsx("div",{className:"card-priority",style:{backgroundColor:O(E.priority)},children:D(E.priority)})]}),e.jsx("div",{className:"card-title",children:E.title}),e.jsx("div",{className:"card-description",children:E.description}),e.jsxs("div",{className:"card-footer",children:[e.jsx("div",{className:"card-customer",children:E.customer}),e.jsx("div",{className:"card-time",children:H(E.createdAt)})]}),e.jsx("div",{className:"card-bucket",children:e.jsxs("span",{className:"bucket-label",style:{backgroundColor:S[E.bucketId]?.color},children:[S[E.bucketId]?.icon," ",S[E.bucketId]?.name]})}),E.assignedTo&&e.jsxs("div",{className:"card-assigned",children:[e.jsx("span",{className:"assigned-avatar",children:j.find(k=>k.name===E.assignedTo)?.avatar||"AG"}),e.jsx("span",{className:"assigned-name",children:E.assignedTo})]}),!E.assignedTo&&e.jsx("div",{className:"card-actions",children:e.jsxs("select",{className:"modern-select",onChange:k=>Q(E.id,k.target.value),onClick:k=>k.stopPropagation(),children:[e.jsx("option",{value:"",children:"Assign to..."}),j.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})})]},E.id))})]},b.id))})]})}),c&&e.jsx("div",{className:"modal-overlay",onClick:()=>d(null),children:e.jsxs("div",{className:"modal-content item-detail-modal",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:c.title}),e.jsx("button",{className:"modal-close",onClick:()=>d(null),children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"item-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Booking ID:"}),e.jsx("span",{className:"detail-value",children:c.id})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Customer:"}),e.jsx("span",{className:"detail-value",children:c.customer})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Priority:"}),e.jsx("span",{className:"detail-value",children:e.jsx("span",{className:"priority-badge",style:{backgroundColor:O(c.priority)},children:D(c.priority)})})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Status:"}),e.jsx("span",{className:"detail-value",children:c.status})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Created:"}),e.jsx("span",{className:"detail-value",children:H(c.createdAt)})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Description:"}),e.jsx("span",{className:"detail-value",children:c.description})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:()=>d(null),children:"Close"}),e.jsx("button",{className:"modal-btn primary",children:"Take Action"})]})]})})]})}function zT(){const[i,t]=I.useState("bookings");return e.jsxs("div",{className:"booking-management-page",children:[e.jsx("h1",{className:"page-title",children:"Booking Management"}),e.jsx("p",{className:"page-subtitle",children:"Manage all customer bookings and handle urgent booking actions"}),e.jsxs("div",{className:"booking-tabs",children:[e.jsx("button",{className:`tab-btn ${i==="bookings"?"active":""}`,onClick:()=>t("bookings"),children:" Bookings"}),e.jsx("button",{className:`tab-btn ${i==="action-center"?"active":""}`,onClick:()=>t("action-center"),children:" Action Center"})]}),e.jsxs("div",{className:"tab-content",children:[i==="bookings"&&e.jsx(BT,{}),i==="action-center"&&e.jsx(UT,{})]})]})}const FT=()=>{};var ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=function(i){const t=[];let n=0;for(let l=0;l<i.length;l++){let c=i.charCodeAt(l);c<128?t[n++]=c:c<2048?(t[n++]=c>>6|192,t[n++]=c&63|128):(c&64512)===55296&&l+1<i.length&&(i.charCodeAt(l+1)&64512)===56320?(c=65536+((c&1023)<<10)+(i.charCodeAt(++l)&1023),t[n++]=c>>18|240,t[n++]=c>>12&63|128,t[n++]=c>>6&63|128,t[n++]=c&63|128):(t[n++]=c>>12|224,t[n++]=c>>6&63|128,t[n++]=c&63|128)}return t},qT=function(i){const t=[];let n=0,l=0;for(;n<i.length;){const c=i[n++];if(c<128)t[l++]=String.fromCharCode(c);else if(c>191&&c<224){const d=i[n++];t[l++]=String.fromCharCode((c&31)<<6|d&63)}else if(c>239&&c<365){const d=i[n++],m=i[n++],f=i[n++],y=((c&7)<<18|(d&63)<<12|(m&63)<<6|f&63)-65536;t[l++]=String.fromCharCode(55296+(y>>10)),t[l++]=String.fromCharCode(56320+(y&1023))}else{const d=i[n++],m=i[n++];t[l++]=String.fromCharCode((c&15)<<12|(d&63)<<6|m&63)}}return t.join("")},Fx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,l=[];for(let c=0;c<i.length;c+=3){const d=i[c],m=c+1<i.length,f=m?i[c+1]:0,y=c+2<i.length,g=y?i[c+2]:0,j=d>>2,S=(d&3)<<4|f>>4;let A=(f&15)<<2|g>>6,O=g&63;y||(O=64,m||(A=64)),l.push(n[j],n[S],n[A],n[O])}return l.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(zx(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):qT(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,l=[];for(let c=0;c<i.length;){const d=n[i.charAt(c++)],f=c<i.length?n[i.charAt(c)]:0;++c;const g=c<i.length?n[i.charAt(c)]:64;++c;const S=c<i.length?n[i.charAt(c)]:64;if(++c,d==null||f==null||g==null||S==null)throw new HT;const A=d<<2|f>>4;if(l.push(A),g!==64){const O=f<<4&240|g>>2;if(l.push(O),S!==64){const D=g<<6&192|S;l.push(D)}}}return l},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class HT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GT=function(i){const t=zx(i);return Fx.encodeByteArray(t,!0)},bd=function(i){return GT(i).replace(/\./g,"")},$T=function(i){try{return Fx.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=()=>QT().__FIREBASE_DEFAULTS__,KT=()=>{if(typeof process>"u"||typeof ly>"u")return;const i=ly.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},XT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&$T(i[1]);return t&&JSON.parse(t)},Xm=()=>{try{return FT()||YT()||KT()||XT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},WT=i=>Xm()?.emulatorHosts?.[i],ZT=i=>{const t=WT(i);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const l=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),l]:[t.substring(0,n),l]},qx=()=>Xm()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,l)=>{n?this.reject(n):this.resolve(l),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},l=t||"demo-project",c=i.iat||0,d=i.sub||i.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${l}`,aud:l,iat:c,exp:c+3600,auth_time:c,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...i};return[bd(JSON.stringify(n)),bd(JSON.stringify(m)),""].join(".")}const uo={};function s_(){const i={prod:[],emulator:[]};for(const t of Object.keys(uo))uo[t]?i.emulator.push(t):i.prod.push(t);return i}function a_(i){let t=document.getElementById(i),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),n=!0),{created:n,element:t}}let oy=!1;function n_(i,t){if(typeof window>"u"||typeof document>"u"||!Wm(window.location.host)||uo[i]===t||uo[i]||oy)return;uo[i]=t;function n(A){return`__firebase__banner__${A}`}const l="__firebase__banner",d=s_().prod.length>0;function m(){const A=document.getElementById(l);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,O){A.setAttribute("width","24"),A.setAttribute("id",O),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{oy=!0,m()},A}function j(A,O){A.setAttribute("id",O),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=a_(l),O=n("text"),D=document.getElementById(O)||document.createElement("span"),H=n("learnmore"),U=document.getElementById(H)||document.createElement("a"),q=n("preprendIcon"),Y=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const P=A.element;f(P),j(U,H);const Q=g();y(Y,q),P.append(Y,D,U,Q),document.body.appendChild(P)}d?(D.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r_(){const i=Xm()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l_(){return!r_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o_(){try{return typeof indexedDB=="object"}catch{return!1}}function c_(){return new Promise((i,t)=>{try{let n=!0;const l="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(l);c.onsuccess=()=>{c.result.close(),n||self.indexedDB.deleteDatabase(l),i(!0)},c.onupgradeneeded=()=>{n=!1},c.onerror=()=>{t(c.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="FirebaseError";class Hr extends Error{constructor(t,n,l){super(n),this.code=t,this.customData=l,this.name=d_,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hx.prototype.create)}}class Hx{constructor(t,n,l){this.service=t,this.serviceName=n,this.errors=l}create(t,...n){const l=n[0]||{},c=`${this.service}/${t}`,d=this.errors[t],m=d?u_(d,l):"Error",f=`${this.serviceName}: ${m} (${c}).`;return new Hr(c,f,l)}}function u_(i,t){return i.replace(h_,(n,l)=>{const c=t[l];return c!=null?String(c):`<${l}?>`})}const h_=/\{\$([^}]+)}/g;function Td(i,t){if(i===t)return!0;const n=Object.keys(i),l=Object.keys(t);for(const c of n){if(!l.includes(c))return!1;const d=i[c],m=t[c];if(cy(d)&&cy(m)){if(!Td(d,m))return!1}else if(d!==m)return!1}for(const c of l)if(!n.includes(c))return!1;return!0}function cy(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(i){return i&&i._delegate?i._delegate:i}class vo{constructor(t,n,l){this.name=t,this.instanceFactory=n,this.type=l,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const l=new JT;if(this.instancesDeferred.set(n,l),this.isInitialized(n)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:n});c&&l.resolve(c)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),l=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(f_(t))try{this.getOrInitializeService({instanceIdentifier:Ci})}catch{}for(const[n,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:c});l.resolve(d)}catch{}}}}clearInstance(t=Ci){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ci){return this.instances.has(t)}getOptions(t=Ci){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,l=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(l))throw Error(`${this.name}(${l}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:l,options:n});for(const[d,m]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(d);l===f&&m.resolve(c)}return c}onInit(t,n){const l=this.normalizeInstanceIdentifier(n),c=this.onInitCallbacks.get(l)??new Set;c.add(t),this.onInitCallbacks.set(l,c);const d=this.instances.get(l);return d&&t(d,l),()=>{c.delete(t)}}invokeOnInitCallbacks(t,n){const l=this.onInitCallbacks.get(n);if(l)for(const c of l)try{c(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let l=this.instances.get(t);if(!l&&this.component&&(l=this.component.instanceFactory(this.container,{instanceIdentifier:p_(t),options:n}),this.instances.set(t,l),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(l,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,l)}catch{}return l||null}normalizeInstanceIdentifier(t=Ci){return this.component?this.component.multipleInstances?t:Ci:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p_(i){return i===Ci?void 0:i}function f_(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new m_(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(et||(et={}));const v_={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},y_=et.INFO,x_={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},j_=(i,t,...n)=>{if(t<i.logLevel)return;const l=new Date().toISOString(),c=x_[t];if(c)console[c](`[${l}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Gx{constructor(t){this.name=t,this._logLevel=y_,this._logHandler=j_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?v_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...t),this._logHandler(this,et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...t),this._logHandler(this,et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,et.INFO,...t),this._logHandler(this,et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,et.WARN,...t),this._logHandler(this,et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...t),this._logHandler(this,et.ERROR,...t)}}const N_=(i,t)=>t.some(n=>i instanceof n);let dy,uy;function b_(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T_(){return uy||(uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $x=new WeakMap,xm=new WeakMap,Qx=new WeakMap,om=new WeakMap,Zm=new WeakMap;function __(i){const t=new Promise((n,l)=>{const c=()=>{i.removeEventListener("success",d),i.removeEventListener("error",m)},d=()=>{n(Mn(i.result)),c()},m=()=>{l(i.error),c()};i.addEventListener("success",d),i.addEventListener("error",m)});return t.then(n=>{n instanceof IDBCursor&&$x.set(n,i)}).catch(()=>{}),Zm.set(t,i),t}function S_(i){if(xm.has(i))return;const t=new Promise((n,l)=>{const c=()=>{i.removeEventListener("complete",d),i.removeEventListener("error",m),i.removeEventListener("abort",m)},d=()=>{n(),c()},m=()=>{l(i.error||new DOMException("AbortError","AbortError")),c()};i.addEventListener("complete",d),i.addEventListener("error",m),i.addEventListener("abort",m)});xm.set(i,t)}let jm={get(i,t,n){if(i instanceof IDBTransaction){if(t==="done")return xm.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Qx.get(i);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(i[t])},set(i,t,n){return i[t]=n,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function A_(i){jm=i(jm)}function E_(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const l=i.call(cm(this),t,...n);return Qx.set(l,t.sort?t.sort():[t]),Mn(l)}:T_().includes(i)?function(...t){return i.apply(cm(this),t),Mn($x.get(this))}:function(...t){return Mn(i.apply(cm(this),t))}}function C_(i){return typeof i=="function"?E_(i):(i instanceof IDBTransaction&&S_(i),N_(i,b_())?new Proxy(i,jm):i)}function Mn(i){if(i instanceof IDBRequest)return __(i);if(om.has(i))return om.get(i);const t=C_(i);return t!==i&&(om.set(i,t),Zm.set(t,i)),t}const cm=i=>Zm.get(i);function w_(i,t,{blocked:n,upgrade:l,blocking:c,terminated:d}={}){const m=indexedDB.open(i,t),f=Mn(m);return l&&m.addEventListener("upgradeneeded",y=>{l(Mn(m.result),y.oldVersion,y.newVersion,Mn(m.transaction),y)}),n&&m.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),f.then(y=>{d&&y.addEventListener("close",()=>d()),c&&y.addEventListener("versionchange",g=>c(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const k_=["get","getKey","getAll","getAllKeys","count"],R_=["put","add","delete","clear"],dm=new Map;function hy(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(dm.get(t))return dm.get(t);const n=t.replace(/FromIndex$/,""),l=t!==n,c=R_.includes(n);if(!(n in(l?IDBIndex:IDBObjectStore).prototype)||!(c||k_.includes(n)))return;const d=async function(m,...f){const y=this.transaction(m,c?"readwrite":"readonly");let g=y.store;return l&&(g=g.index(f.shift())),(await Promise.all([g[n](...f),c&&y.done]))[0]};return dm.set(t,d),d}A_(i=>({...i,get:(t,n,l)=>hy(t,n)||i.get(t,n,l),has:(t,n)=>!!hy(t,n)||i.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(I_(n)){const l=n.getImmediate();return`${l.library}/${l.version}`}else return null}).filter(n=>n).join(" ")}}function I_(i){return i.getComponent()?.type==="VERSION"}const Nm="@firebase/app",my="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new Gx("@firebase/app"),P_="@firebase/app-compat",M_="@firebase/analytics-compat",O_="@firebase/analytics",V_="@firebase/app-check-compat",B_="@firebase/app-check",L_="@firebase/auth",U_="@firebase/auth-compat",z_="@firebase/database",F_="@firebase/data-connect",q_="@firebase/database-compat",H_="@firebase/functions",G_="@firebase/functions-compat",$_="@firebase/installations",Q_="@firebase/installations-compat",Y_="@firebase/messaging",K_="@firebase/messaging-compat",X_="@firebase/performance",W_="@firebase/performance-compat",Z_="@firebase/remote-config",J_="@firebase/remote-config-compat",eS="@firebase/storage",tS="@firebase/storage-compat",sS="@firebase/firestore",aS="@firebase/ai",nS="@firebase/firestore-compat",iS="firebase",rS="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="[DEFAULT]",lS={[Nm]:"fire-core",[P_]:"fire-core-compat",[O_]:"fire-analytics",[M_]:"fire-analytics-compat",[B_]:"fire-app-check",[V_]:"fire-app-check-compat",[L_]:"fire-auth",[U_]:"fire-auth-compat",[z_]:"fire-rtdb",[F_]:"fire-data-connect",[q_]:"fire-rtdb-compat",[H_]:"fire-fn",[G_]:"fire-fn-compat",[$_]:"fire-iid",[Q_]:"fire-iid-compat",[Y_]:"fire-fcm",[K_]:"fire-fcm-compat",[X_]:"fire-perf",[W_]:"fire-perf-compat",[Z_]:"fire-rc",[J_]:"fire-rc-compat",[eS]:"fire-gcs",[tS]:"fire-gcs-compat",[sS]:"fire-fst",[nS]:"fire-fst-compat",[aS]:"fire-vertex","fire-js":"fire-js",[iS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,oS=new Map,Tm=new Map;function py(i,t){try{i.container.addComponent(t)}catch(n){tn.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,n)}}function Sd(i){const t=i.name;if(Tm.has(t))return tn.debug(`There were multiple attempts to register component ${t}.`),!1;Tm.set(t,i);for(const n of _d.values())py(n,i);for(const n of oS.values())py(n,i);return!0}function cS(i,t){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(t)}function dS(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},On=new Hx("app","Firebase",uS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(t,n,l){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=l,this.container.addComponent(new vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=rS;function Yx(i,t={}){let n=i;typeof t!="object"&&(t={name:t});const l={name:bm,automaticDataCollectionEnabled:!0,...t},c=l.name;if(typeof c!="string"||!c)throw On.create("bad-app-name",{appName:String(c)});if(n||(n=qx()),!n)throw On.create("no-options");const d=_d.get(c);if(d){if(Td(n,d.options)&&Td(l,d.config))return d;throw On.create("duplicate-app",{appName:c})}const m=new g_(c);for(const y of Tm.values())m.addComponent(y);const f=new hS(n,l,m);return _d.set(c,f),f}function pS(i=bm){const t=_d.get(i);if(!t&&i===bm&&qx())return Yx();if(!t)throw On.create("no-app",{appName:i});return t}function Ir(i,t,n){let l=lS[i]??i;n&&(l+=`-${n}`);const c=l.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const m=[`Unable to register library "${l}" with version "${t}":`];c&&m.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),tn.warn(m.join(" "));return}Sd(new vo(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebase-heartbeat-database",gS=1,yo="firebase-heartbeat-store";let um=null;function Kx(){return um||(um=w_(fS,gS,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(yo)}catch(n){console.warn(n)}}}}).catch(i=>{throw On.create("idb-open",{originalErrorMessage:i.message})})),um}async function vS(i){try{const n=(await Kx()).transaction(yo),l=await n.objectStore(yo).get(Xx(i));return await n.done,l}catch(t){if(t instanceof Hr)tn.warn(t.message);else{const n=On.create("idb-get",{originalErrorMessage:t?.message});tn.warn(n.message)}}}async function fy(i,t){try{const l=(await Kx()).transaction(yo,"readwrite");await l.objectStore(yo).put(t,Xx(i)),await l.done}catch(n){if(n instanceof Hr)tn.warn(n.message);else{const l=On.create("idb-set",{originalErrorMessage:n?.message});tn.warn(l.message)}}}function Xx(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=1024,xS=30;class jS{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bS(n),this._heartbeatsCachePromise=this._storage.read().then(l=>(this._heartbeatsCache=l,l))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=gy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:n}),this._heartbeatsCache.heartbeats.length>xS){const c=TS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){tn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gy(),{heartbeatsToSend:n,unsentEntries:l}=NS(this._heartbeatsCache.heartbeats),c=bd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return tn.warn(t),""}}}function gy(){return new Date().toISOString().substring(0,10)}function NS(i,t=yS){const n=[];let l=i.slice();for(const c of i){const d=n.find(m=>m.agent===c.agent);if(d){if(d.dates.push(c.date),vy(n)>t){d.dates.pop();break}}else if(n.push({agent:c.agent,dates:[c.date]}),vy(n)>t){n.pop();break}l=l.slice(1)}return{heartbeatsToSend:n,unsentEntries:l}}class bS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o_()?c_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vS(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const l=await this.read();return fy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const l=await this.read();return fy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function vy(i){return bd(JSON.stringify({version:2,heartbeats:i})).length}function TS(i){if(i.length===0)return-1;let t=0,n=i[0].date;for(let l=1;l<i.length;l++)i[l].date<n&&(n=i[l].date,t=l);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(i){Sd(new vo("platform-logger",t=>new D_(t),"PRIVATE")),Sd(new vo("heartbeat",t=>new jS(t),"PRIVATE")),Ir(Nm,my,i),Ir(Nm,my,"esm2020"),Ir("fire-js","")}_S("");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vn,Wx;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,w){function b(){}b.prototype=w.prototype,M.D=w.prototype,M.prototype=new b,M.prototype.constructor=M,M.C=function(E,k,V){for(var T=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)T[ie-2]=arguments[ie];return w.prototype[k].apply(E,T)}}function n(){this.blockSize=-1}function l(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(l,n),l.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(M,w,b){b||(b=0);var E=Array(16);if(typeof w=="string")for(var k=0;16>k;++k)E[k]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(k=0;16>k;++k)E[k]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=M.g[0],b=M.g[1],k=M.g[2];var V=M.g[3],T=w+(V^b&(k^V))+E[0]+3614090360&4294967295;w=b+(T<<7&4294967295|T>>>25),T=V+(k^w&(b^k))+E[1]+3905402710&4294967295,V=w+(T<<12&4294967295|T>>>20),T=k+(b^V&(w^b))+E[2]+606105819&4294967295,k=V+(T<<17&4294967295|T>>>15),T=b+(w^k&(V^w))+E[3]+3250441966&4294967295,b=k+(T<<22&4294967295|T>>>10),T=w+(V^b&(k^V))+E[4]+4118548399&4294967295,w=b+(T<<7&4294967295|T>>>25),T=V+(k^w&(b^k))+E[5]+1200080426&4294967295,V=w+(T<<12&4294967295|T>>>20),T=k+(b^V&(w^b))+E[6]+2821735955&4294967295,k=V+(T<<17&4294967295|T>>>15),T=b+(w^k&(V^w))+E[7]+4249261313&4294967295,b=k+(T<<22&4294967295|T>>>10),T=w+(V^b&(k^V))+E[8]+1770035416&4294967295,w=b+(T<<7&4294967295|T>>>25),T=V+(k^w&(b^k))+E[9]+2336552879&4294967295,V=w+(T<<12&4294967295|T>>>20),T=k+(b^V&(w^b))+E[10]+4294925233&4294967295,k=V+(T<<17&4294967295|T>>>15),T=b+(w^k&(V^w))+E[11]+2304563134&4294967295,b=k+(T<<22&4294967295|T>>>10),T=w+(V^b&(k^V))+E[12]+1804603682&4294967295,w=b+(T<<7&4294967295|T>>>25),T=V+(k^w&(b^k))+E[13]+4254626195&4294967295,V=w+(T<<12&4294967295|T>>>20),T=k+(b^V&(w^b))+E[14]+2792965006&4294967295,k=V+(T<<17&4294967295|T>>>15),T=b+(w^k&(V^w))+E[15]+1236535329&4294967295,b=k+(T<<22&4294967295|T>>>10),T=w+(k^V&(b^k))+E[1]+4129170786&4294967295,w=b+(T<<5&4294967295|T>>>27),T=V+(b^k&(w^b))+E[6]+3225465664&4294967295,V=w+(T<<9&4294967295|T>>>23),T=k+(w^b&(V^w))+E[11]+643717713&4294967295,k=V+(T<<14&4294967295|T>>>18),T=b+(V^w&(k^V))+E[0]+3921069994&4294967295,b=k+(T<<20&4294967295|T>>>12),T=w+(k^V&(b^k))+E[5]+3593408605&4294967295,w=b+(T<<5&4294967295|T>>>27),T=V+(b^k&(w^b))+E[10]+38016083&4294967295,V=w+(T<<9&4294967295|T>>>23),T=k+(w^b&(V^w))+E[15]+3634488961&4294967295,k=V+(T<<14&4294967295|T>>>18),T=b+(V^w&(k^V))+E[4]+3889429448&4294967295,b=k+(T<<20&4294967295|T>>>12),T=w+(k^V&(b^k))+E[9]+568446438&4294967295,w=b+(T<<5&4294967295|T>>>27),T=V+(b^k&(w^b))+E[14]+3275163606&4294967295,V=w+(T<<9&4294967295|T>>>23),T=k+(w^b&(V^w))+E[3]+4107603335&4294967295,k=V+(T<<14&4294967295|T>>>18),T=b+(V^w&(k^V))+E[8]+1163531501&4294967295,b=k+(T<<20&4294967295|T>>>12),T=w+(k^V&(b^k))+E[13]+2850285829&4294967295,w=b+(T<<5&4294967295|T>>>27),T=V+(b^k&(w^b))+E[2]+4243563512&4294967295,V=w+(T<<9&4294967295|T>>>23),T=k+(w^b&(V^w))+E[7]+1735328473&4294967295,k=V+(T<<14&4294967295|T>>>18),T=b+(V^w&(k^V))+E[12]+2368359562&4294967295,b=k+(T<<20&4294967295|T>>>12),T=w+(b^k^V)+E[5]+4294588738&4294967295,w=b+(T<<4&4294967295|T>>>28),T=V+(w^b^k)+E[8]+2272392833&4294967295,V=w+(T<<11&4294967295|T>>>21),T=k+(V^w^b)+E[11]+1839030562&4294967295,k=V+(T<<16&4294967295|T>>>16),T=b+(k^V^w)+E[14]+4259657740&4294967295,b=k+(T<<23&4294967295|T>>>9),T=w+(b^k^V)+E[1]+2763975236&4294967295,w=b+(T<<4&4294967295|T>>>28),T=V+(w^b^k)+E[4]+1272893353&4294967295,V=w+(T<<11&4294967295|T>>>21),T=k+(V^w^b)+E[7]+4139469664&4294967295,k=V+(T<<16&4294967295|T>>>16),T=b+(k^V^w)+E[10]+3200236656&4294967295,b=k+(T<<23&4294967295|T>>>9),T=w+(b^k^V)+E[13]+681279174&4294967295,w=b+(T<<4&4294967295|T>>>28),T=V+(w^b^k)+E[0]+3936430074&4294967295,V=w+(T<<11&4294967295|T>>>21),T=k+(V^w^b)+E[3]+3572445317&4294967295,k=V+(T<<16&4294967295|T>>>16),T=b+(k^V^w)+E[6]+76029189&4294967295,b=k+(T<<23&4294967295|T>>>9),T=w+(b^k^V)+E[9]+3654602809&4294967295,w=b+(T<<4&4294967295|T>>>28),T=V+(w^b^k)+E[12]+3873151461&4294967295,V=w+(T<<11&4294967295|T>>>21),T=k+(V^w^b)+E[15]+530742520&4294967295,k=V+(T<<16&4294967295|T>>>16),T=b+(k^V^w)+E[2]+3299628645&4294967295,b=k+(T<<23&4294967295|T>>>9),T=w+(k^(b|~V))+E[0]+4096336452&4294967295,w=b+(T<<6&4294967295|T>>>26),T=V+(b^(w|~k))+E[7]+1126891415&4294967295,V=w+(T<<10&4294967295|T>>>22),T=k+(w^(V|~b))+E[14]+2878612391&4294967295,k=V+(T<<15&4294967295|T>>>17),T=b+(V^(k|~w))+E[5]+4237533241&4294967295,b=k+(T<<21&4294967295|T>>>11),T=w+(k^(b|~V))+E[12]+1700485571&4294967295,w=b+(T<<6&4294967295|T>>>26),T=V+(b^(w|~k))+E[3]+2399980690&4294967295,V=w+(T<<10&4294967295|T>>>22),T=k+(w^(V|~b))+E[10]+4293915773&4294967295,k=V+(T<<15&4294967295|T>>>17),T=b+(V^(k|~w))+E[1]+2240044497&4294967295,b=k+(T<<21&4294967295|T>>>11),T=w+(k^(b|~V))+E[8]+1873313359&4294967295,w=b+(T<<6&4294967295|T>>>26),T=V+(b^(w|~k))+E[15]+4264355552&4294967295,V=w+(T<<10&4294967295|T>>>22),T=k+(w^(V|~b))+E[6]+2734768916&4294967295,k=V+(T<<15&4294967295|T>>>17),T=b+(V^(k|~w))+E[13]+1309151649&4294967295,b=k+(T<<21&4294967295|T>>>11),T=w+(k^(b|~V))+E[4]+4149444226&4294967295,w=b+(T<<6&4294967295|T>>>26),T=V+(b^(w|~k))+E[11]+3174756917&4294967295,V=w+(T<<10&4294967295|T>>>22),T=k+(w^(V|~b))+E[2]+718787259&4294967295,k=V+(T<<15&4294967295|T>>>17),T=b+(V^(k|~w))+E[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(k+(T<<21&4294967295|T>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+V&4294967295}l.prototype.u=function(M,w){w===void 0&&(w=M.length);for(var b=w-this.blockSize,E=this.B,k=this.h,V=0;V<w;){if(k==0)for(;V<=b;)c(this,M,V),V+=this.blockSize;if(typeof M=="string"){for(;V<w;)if(E[k++]=M.charCodeAt(V++),k==this.blockSize){c(this,E),k=0;break}}else for(;V<w;)if(E[k++]=M[V++],k==this.blockSize){c(this,E),k=0;break}}this.h=k,this.o+=w},l.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;var b=8*this.o;for(w=M.length-8;w<M.length;++w)M[w]=b&255,b/=256;for(this.u(M),M=Array(16),w=b=0;4>w;++w)for(var E=0;32>E;E+=8)M[b++]=this.g[w]>>>E&255;return M};function d(M,w){var b=f;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=w(M)}function m(M,w){this.h=w;for(var b=[],E=!0,k=M.length-1;0<=k;k--){var V=M[k]|0;E&&V==w||(b[k]=V,E=!1)}this.g=b}var f={};function y(M){return-128<=M&&128>M?d(M,function(w){return new m([w|0],0>w?-1:0)}):new m([M|0],0>M?-1:0)}function g(M){if(isNaN(M)||!isFinite(M))return S;if(0>M)return U(g(-M));for(var w=[],b=1,E=0;M>=b;E++)w[E]=M/b|0,b*=4294967296;return new m(w,0)}function j(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return U(j(M.substring(1),w));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=g(Math.pow(w,8)),E=S,k=0;k<M.length;k+=8){var V=Math.min(8,M.length-k),T=parseInt(M.substring(k,k+V),w);8>V?(V=g(Math.pow(w,V)),E=E.j(V).add(g(T))):(E=E.j(b),E=E.add(g(T)))}return E}var S=y(0),A=y(1),O=y(16777216);i=m.prototype,i.m=function(){if(H(this))return-U(this).m();for(var M=0,w=1,b=0;b<this.g.length;b++){var E=this.i(b);M+=(0<=E?E:4294967296+E)*w,w*=4294967296}return M},i.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D(this))return"0";if(H(this))return"-"+U(this).toString(M);for(var w=g(Math.pow(M,6)),b=this,E="";;){var k=Q(b,w).g;b=q(b,k.j(w));var V=((0<b.g.length?b.g[0]:b.h)>>>0).toString(M);if(b=k,D(b))return V+E;for(;6>V.length;)V="0"+V;E=V+E}},i.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function D(M){if(M.h!=0)return!1;for(var w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function H(M){return M.h==-1}i.l=function(M){return M=q(this,M),H(M)?-1:D(M)?0:1};function U(M){for(var w=M.g.length,b=[],E=0;E<w;E++)b[E]=~M.g[E];return new m(b,~M.h).add(A)}i.abs=function(){return H(this)?U(this):this},i.add=function(M){for(var w=Math.max(this.g.length,M.g.length),b=[],E=0,k=0;k<=w;k++){var V=E+(this.i(k)&65535)+(M.i(k)&65535),T=(V>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);E=T>>>16,V&=65535,T&=65535,b[k]=T<<16|V}return new m(b,b[b.length-1]&-2147483648?-1:0)};function q(M,w){return M.add(U(w))}i.j=function(M){if(D(this)||D(M))return S;if(H(this))return H(M)?U(this).j(U(M)):U(U(this).j(M));if(H(M))return U(this.j(U(M)));if(0>this.l(O)&&0>M.l(O))return g(this.m()*M.m());for(var w=this.g.length+M.g.length,b=[],E=0;E<2*w;E++)b[E]=0;for(E=0;E<this.g.length;E++)for(var k=0;k<M.g.length;k++){var V=this.i(E)>>>16,T=this.i(E)&65535,ie=M.i(k)>>>16,be=M.i(k)&65535;b[2*E+2*k]+=T*be,Y(b,2*E+2*k),b[2*E+2*k+1]+=V*be,Y(b,2*E+2*k+1),b[2*E+2*k+1]+=T*ie,Y(b,2*E+2*k+1),b[2*E+2*k+2]+=V*ie,Y(b,2*E+2*k+2)}for(E=0;E<w;E++)b[E]=b[2*E+1]<<16|b[2*E];for(E=w;E<2*w;E++)b[E]=0;return new m(b,0)};function Y(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function P(M,w){this.g=M,this.h=w}function Q(M,w){if(D(w))throw Error("division by zero");if(D(M))return new P(S,S);if(H(M))return w=Q(U(M),w),new P(U(w.g),U(w.h));if(H(w))return w=Q(M,U(w)),new P(U(w.g),w.h);if(30<M.g.length){if(H(M)||H(w))throw Error("slowDivide_ only works with positive integers.");for(var b=A,E=w;0>=E.l(M);)b=se(b),E=se(E);var k=z(b,1),V=z(E,1);for(E=z(E,2),b=z(b,2);!D(E);){var T=V.add(E);0>=T.l(M)&&(k=k.add(b),V=T),E=z(E,1),b=z(b,1)}return w=q(M,k.j(w)),new P(k,w)}for(k=S;0<=M.l(w);){for(b=Math.max(1,Math.floor(M.m()/w.m())),E=Math.ceil(Math.log(b)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),V=g(b),T=V.j(w);H(T)||0<T.l(M);)b-=E,V=g(b),T=V.j(w);D(V)&&(V=A),k=k.add(V),M=q(M,T)}return new P(k,M)}i.A=function(M){return Q(this,M).h},i.and=function(M){for(var w=Math.max(this.g.length,M.g.length),b=[],E=0;E<w;E++)b[E]=this.i(E)&M.i(E);return new m(b,this.h&M.h)},i.or=function(M){for(var w=Math.max(this.g.length,M.g.length),b=[],E=0;E<w;E++)b[E]=this.i(E)|M.i(E);return new m(b,this.h|M.h)},i.xor=function(M){for(var w=Math.max(this.g.length,M.g.length),b=[],E=0;E<w;E++)b[E]=this.i(E)^M.i(E);return new m(b,this.h^M.h)};function se(M){for(var w=M.g.length+1,b=[],E=0;E<w;E++)b[E]=M.i(E)<<1|M.i(E-1)>>>31;return new m(b,M.h)}function z(M,w){var b=w>>5;w%=32;for(var E=M.g.length-b,k=[],V=0;V<E;V++)k[V]=0<w?M.i(V+b)>>>w|M.i(V+b+1)<<32-w:M.i(V+b);return new m(k,M.h)}l.prototype.digest=l.prototype.v,l.prototype.reset=l.prototype.s,l.prototype.update=l.prototype.u,Wx=l,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=g,m.fromString=j,Vn=m}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zx,ro,Jx,pd,_m,ej,tj,sj;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,x){return u==Array.prototype||u==Object.prototype||(u[v]=x.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nd=="object"&&nd];for(var v=0;v<u.length;++v){var x=u[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var l=n(this);function c(u,v){if(v)e:{var x=l;u=u.split(".");for(var C=0;C<u.length-1;C++){var W=u[C];if(!(W in x))break e;x=x[W]}u=u[u.length-1],C=x[u],v=v(C),v!=C&&v!=null&&t(x,u,{configurable:!0,writable:!0,value:v})}}function d(u,v){u instanceof String&&(u+="");var x=0,C=!1,W={next:function(){if(!C&&x<u.length){var re=x++;return{value:v(re,u[re]),done:!1}}return C=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}c("Array.prototype.values",function(u){return u||function(){return d(this,function(v,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var m=m||{},f=this||self;function y(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function g(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function j(u,v,x){return u.call.apply(u.bind,arguments)}function S(u,v,x){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,C),u.apply(v,W)}}return function(){return u.apply(v,arguments)}}function A(u,v,x){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?j:S,A.apply(null,arguments)}function O(u,v){var x=Array.prototype.slice.call(arguments,1);return function(){var C=x.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function D(u,v){function x(){}x.prototype=v.prototype,u.aa=v.prototype,u.prototype=new x,u.prototype.constructor=u,u.Qb=function(C,W,re){for(var Ae=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)Ae[Xe-2]=arguments[Xe];return v.prototype[W].apply(C,Ae)}}function H(u){const v=u.length;if(0<v){const x=Array(v);for(let C=0;C<v;C++)x[C]=u[C];return x}return[]}function U(u,v){for(let x=1;x<arguments.length;x++){const C=arguments[x];if(y(C)){const W=u.length||0,re=C.length||0;u.length=W+re;for(let Ae=0;Ae<re;Ae++)u[W+Ae]=C[Ae]}else u.push(C)}}class q{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Y(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var se=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function z(u,v,x){for(const C in u)v.call(x,u[C],C,u)}function M(u,v){for(const x in u)v.call(void 0,u[x],x,u)}function w(u){const v={};for(const x in u)v[x]=u[x];return v}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,v){let x,C;for(let W=1;W<arguments.length;W++){C=arguments[W];for(x in C)u[x]=C[x];for(let re=0;re<b.length;re++)x=b[re],Object.prototype.hasOwnProperty.call(C,x)&&(u[x]=C[x])}}function k(u){var v=1;u=u.split(":");const x=[];for(;0<v&&u.length;)x.push(u.shift()),v--;return u.length&&x.push(u.join(":")),x}function V(u){f.setTimeout(()=>{throw u},0)}function T(){var u=_e;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class ie{constructor(){this.h=this.g=null}add(v,x){const C=be.get();C.set(v,x),this.h?this.h.next=C:this.g=C,this.h=C}}var be=new q(()=>new J,u=>u.reset());class J{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,Ee=!1,_e=new ie,F=()=>{const u=f.Promise.resolve(void 0);fe=()=>{u.then(de)}};var de=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(x){V(x)}var v=be;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}Ee=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};f.addEventListener("test",x,v),f.removeEventListener("test",x,v)}catch{}return u}();function ue(u,v){if(G.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var x=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(se){e:{try{Q(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else x=="mouseover"?v=u.fromElement:x=="mouseout"&&(v=u.toElement);this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ue.aa.h.call(this)}}D(ue,G);var me={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),K=0;function ye(u,v,x,C,W){this.listener=u,this.proxy=null,this.src=v,this.type=x,this.capture=!!C,this.ha=W,this.key=++K,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function R(u){this.src=u,this.g={},this.h=0}R.prototype.add=function(u,v,x,C,W){var re=u.toString();u=this.g[re],u||(u=this.g[re]=[],this.h++);var Ae=De(u,v,C,W);return-1<Ae?(v=u[Ae],x||(v.fa=!1)):(v=new ye(v,this.src,re,!!C,W),v.fa=x,u.push(v)),v};function pe(u,v){var x=v.type;if(x in u.g){var C=u.g[x],W=Array.prototype.indexOf.call(C,v,void 0),re;(re=0<=W)&&Array.prototype.splice.call(C,W,1),re&&(oe(v),u.g[x].length==0&&(delete u.g[x],u.h--))}}function De(u,v,x,C){for(var W=0;W<u.length;++W){var re=u[W];if(!re.da&&re.listener==v&&re.capture==!!x&&re.ha==C)return W}return-1}var Ne="closure_lm_"+(1e6*Math.random()|0),Se={};function ee(u,v,x,C,W){if(Array.isArray(v)){for(var re=0;re<v.length;re++)ee(u,v[re],x,C,W);return null}return x=Vi(x),u&&u[we]?u.K(v,x,g(C)?!!C.capture:!1,W):Re(u,v,x,!1,C,W)}function Re(u,v,x,C,W,re){if(!v)throw Error("Invalid event type");var Ae=g(W)?!!W.capture:!!W,Xe=Js(u);if(Xe||(u[Ne]=Xe=new R(u)),x=Xe.add(v,x,C,Ae,re),x.proxy)return x;if(C=ce(),x.proxy=C,C.src=u,C.listener=x,u.addEventListener)B||(W=Ae),W===void 0&&(W=!1),u.addEventListener(v.toString(),C,W);else if(u.attachEvent)u.attachEvent(nt(v.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ce(){function u(x){return v.call(u.src,u.listener,x)}const v=ps;return u}function le(u,v,x,C,W){if(Array.isArray(v))for(var re=0;re<v.length;re++)le(u,v[re],x,C,W);else C=g(C)?!!C.capture:!!C,x=Vi(x),u&&u[we]?(u=u.i,v=String(v).toString(),v in u.g&&(re=u.g[v],x=De(re,x,C,W),-1<x&&(oe(re[x]),Array.prototype.splice.call(re,x,1),re.length==0&&(delete u.g[v],u.h--)))):u&&(u=Js(u))&&(v=u.g[v.toString()],u=-1,v&&(u=De(v,x,C,W)),(x=-1<u?v[u]:null)&&Ve(x))}function Ve(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[we])pe(v.i,u);else{var x=u.type,C=u.proxy;v.removeEventListener?v.removeEventListener(x,C,u.capture):v.detachEvent?v.detachEvent(nt(x),C):v.addListener&&v.removeListener&&v.removeListener(C),(x=Js(v))?(pe(x,u),x.h==0&&(x.src=null,v[Ne]=null)):oe(u)}}}function nt(u){return u in Se?Se[u]:Se[u]="on"+u}function ps(u,v){if(u.da)u=!0;else{v=new ue(v,this);var x=u.listener,C=u.ha||u.src;u.fa&&Ve(u),u=x.call(C,v)}return u}function Js(u){return u=u[Ne],u instanceof R?u:null}var Hs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vi(u){return typeof u=="function"?u:(u[Hs]||(u[Hs]=function(v){return u.handleEvent(v)}),u[Hs])}function vt(){Te.call(this),this.i=new R(this),this.M=this,this.F=null}D(vt,Te),vt.prototype[we]=!0,vt.prototype.removeEventListener=function(u,v,x,C){le(this,u,v,x,C)};function st(u,v){var x,C=u.F;if(C)for(x=[];C;C=C.F)x.push(C);if(u=u.M,C=v.type||v,typeof v=="string")v=new G(v,u);else if(v instanceof G)v.target=v.target||u;else{var W=v;v=new G(C,u),E(v,W)}if(W=!0,x)for(var re=x.length-1;0<=re;re--){var Ae=v.g=x[re];W=cs(Ae,C,!0,v)&&W}if(Ae=v.g=u,W=cs(Ae,C,!0,v)&&W,W=cs(Ae,C,!1,v)&&W,x)for(re=0;re<x.length;re++)Ae=v.g=x[re],W=cs(Ae,C,!1,v)&&W}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var x=u.g[v],C=0;C<x.length;C++)oe(x[C]);delete u.g[v],u.h--}}this.F=null},vt.prototype.K=function(u,v,x,C){return this.i.add(String(u),v,!1,x,C)},vt.prototype.L=function(u,v,x,C){return this.i.add(String(u),v,!0,x,C)};function cs(u,v,x,C){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,re=0;re<v.length;++re){var Ae=v[re];if(Ae&&!Ae.da&&Ae.capture==x){var Xe=Ae.listener,Bt=Ae.ha||Ae.src;Ae.fa&&pe(u.i,Ae),W=Xe.call(Bt,C)!==!1&&W}}return W&&!C.defaultPrevented}function qt(u,v,x){if(typeof u=="function")x&&(u=A(u,x));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:f.setTimeout(u,v||0)}function Qn(u){u.g=qt(()=>{u.g=null,u.i&&(u.i=!1,Qn(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class Bi extends Te{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Qn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(u){Te.call(this),this.h=u,this.g={}}D(Yn,Te);var Kn=[];function Xn(u){z(u.g,function(v,x){this.g.hasOwnProperty(x)&&Ve(v)},u),u.g={}}Yn.prototype.N=function(){Yn.aa.N.call(this),Xn(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gs=f.JSON.stringify,Li=f.JSON.parse,Wn=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Wr(){}Wr.prototype.h=null;function Zr(u){return u.h||(u.h=u.i())}function Jr(){}var Aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ea(){G.call(this,"d")}D(Ea,G);function el(){G.call(this,"c")}D(el,G);var ea={},tl=null;function rn(){return tl=tl||new vt}ea.La="serverreachability";function Ui(u){G.call(this,ea.La,u)}D(Ui,G);function ln(u){const v=rn();st(v,new Ui(v))}ea.STAT_EVENT="statevent";function Oo(u,v){G.call(this,ea.STAT_EVENT,u),this.stat=v}D(Oo,G);function yt(u){const v=rn();st(v,new Oo(v,u))}ea.Ma="timingevent";function Vt(u,v){G.call(this,ea.Ma,u),this.size=v}D(Vt,G);function wt(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},v)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function sl(u,v,x,C,W,re){u.info(function(){if(u.g)if(re)for(var Ae="",Xe=re.split("&"),Bt=0;Bt<Xe.length;Bt++){var We=Xe[Bt].split("=");if(1<We.length){var Gt=We[0];We=We[1];var Lt=Gt.split("_");Ae=2<=Lt.length&&Lt[1]=="type"?Ae+(Gt+"="+We+"&"):Ae+(Gt+"=redacted&")}}else Ae=null;else Ae=re;return"XMLHTTP REQ ("+C+") [attempt "+W+"]: "+v+`
`+x+`
`+Ae})}function au(u,v,x,C,W,re,Ae){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+W+"]: "+v+`
`+x+`
`+re+" "+Ae})}function on(u,v,x,C){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Zn(u,x)+(C?" "+C:"")})}function Vo(u,v){u.info(function(){return"TIMEOUT: "+v})}ws.prototype.info=function(){};function Zn(u,v){if(!u.g)return v;if(!v)return null;try{var x=JSON.parse(v);if(x){for(u=0;u<x.length;u++)if(Array.isArray(x[u])){var C=x[u];if(!(2>C.length)){var W=C[1];if(Array.isArray(W)&&!(1>W.length)){var re=W[0];if(re!="noop"&&re!="stop"&&re!="close")for(var Ae=1;Ae<W.length;Ae++)W[Ae]=""}}}}return Gs(x)}catch{return v}}var cn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ca={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ta;function sa(){}D(sa,Wr),sa.prototype.g=function(){return new XMLHttpRequest},sa.prototype.i=function(){return{}},ta=new sa;function ds(u,v,x,C){this.j=u,this.i=v,this.l=x,this.R=C||1,this.U=new Yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var al={},zi={};function $s(u,v,x){u.L=1,u.v=ai(js(v)),u.m=x,u.P=!0,wa(u,null)}function wa(u,v){u.F=Date.now(),Jn(u),u.A=js(u.v);var x=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),cl(x.i,"t",C),u.C=0,x=u.j.J,u.h=new St,u.g=Jo(u.j,x?v:null,!u.m),0<u.O&&(u.M=new Bi(A(u.Y,u,u.g),u.O)),v=u.U,x=u.g,C=u.ca;var W="readystatechange";Array.isArray(W)||(W&&(Kn[0]=W.toString()),W=Kn);for(var re=0;re<W.length;re++){var Ae=ee(x,W[re],C||v.handleEvent,!1,v.h||v);if(!Ae)break;v.g[Ae.key]=Ae}v=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),ln(),sl(u.i,u.u,u.A,u.l,u.R,u.m)}ds.prototype.ca=function(u){u=u.target;const v=this.M;v&&Is(u)==3?v.j():this.Y(u)},ds.prototype.Y=function(u){try{if(u==this.g)e:{const Lt=Is(this.g);var v=this.g.Ba();const Va=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Go(this.g)))){this.J||Lt!=4||v==7||(v==8||0>=Va?ln(3):ln(2)),dn(this);var x=this.g.Z();this.X=x;t:if(Bo(this)){var C=Go(this.g);u="";var W=C.length,re=Is(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xt(this),aa(this);var Ae="";break t}this.h.i=new f.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,u+=this.h.i.decode(C[v],{stream:!(re&&v==W-1)});C.length=0,this.h.g+=u,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=x==200,au(this.i,this.u,this.A,this.l,this.R,Lt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Bt=this.g;if((Xe=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Xe)){var We=Xe;break t}}We=null}if(x=We)on(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ei(this,x);else{this.o=!1,this.s=3,yt(12),Xt(this),aa(this);break e}}if(this.P){x=!0;let Wt;for(;!this.J&&this.C<Ae.length;)if(Wt=Lo(this,Ae),Wt==zi){Lt==4&&(this.s=4,yt(14),x=!1),on(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==al){this.s=4,yt(15),on(this.i,this.l,Ae,"[Invalid Chunk]"),x=!1;break}else on(this.i,this.l,Wt,null),ei(this,Wt);if(Bo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||Ae.length!=0||this.h.h||(this.s=1,yt(16),x=!1),this.o=this.o&&x,!x)on(this.i,this.l,Ae,"[Invalid Chunked Response]"),Xt(this),aa(this);else if(0<Ae.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),ui(Gt),Gt.M=!0,yt(11))}}else on(this.i,this.l,Ae,null),ei(this,Ae);Lt==4&&Xt(this),this.o&&!this.J&&(Lt==4?Xo(this.j,this):(this.o=!1,Jn(this)))}else ou(this.g),x==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Xt(this),aa(this)}}}catch{}finally{}};function Bo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Lo(u,v){var x=u.C,C=v.indexOf(`
`,x);return C==-1?zi:(x=Number(v.substring(x,C)),isNaN(x)?al:(C+=1,C+x>v.length?zi:(v=v.slice(C,C+x),u.C=C+x,v)))}ds.prototype.cancel=function(){this.J=!0,Xt(this)};function Jn(u){u.S=Date.now()+u.I,Uo(u,u.I)}function Uo(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=wt(A(u.ba,u),v)}function dn(u){u.B&&(f.clearTimeout(u.B),u.B=null)}ds.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Vo(this.i,this.A),this.L!=2&&(ln(),yt(17)),Xt(this),this.s=2,aa(this)):Uo(this,this.S-u)};function aa(u){u.j.G==0||u.J||Xo(u.j,u)}function Xt(u){dn(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,Xn(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function ei(u,v){try{var x=u.j;if(x.G!=0&&(x.g==u||nl(x.h,u))){if(!u.K&&nl(x.h,u)&&x.G==3){try{var C=x.Da.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var W=C;if(W[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<u.F)Ji(x),Wi(x);else break e;pl(x),yt(18)}}else x.za=W[1],0<x.za-x.T&&37500>W[2]&&x.F&&x.v==0&&!x.C&&(x.C=wt(A(x.Za,x),6e3));if(1>=qi(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Oa(x,11)}else if((u.K||x.g==u)&&Ji(x),!Y(v))for(W=x.Da.g.parse(v),v=0;v<W.length;v++){let We=W[v];if(x.T=We[0],We=We[1],x.G==2)if(We[0]=="c"){x.K=We[1],x.ia=We[2];const Gt=We[3];Gt!=null&&(x.la=Gt,x.j.info("VER="+x.la));const Lt=We[4];Lt!=null&&(x.Aa=Lt,x.j.info("SVER="+x.Aa));const Va=We[5];Va!=null&&typeof Va=="number"&&0<Va&&(C=1.5*Va,x.L=C,x.j.info("backChannelRequestTimeoutMs_="+C)),C=x;const Wt=u.g;if(Wt){const da=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var re=C.h;re.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Hi(re,re.h),re.h=null))}if(C.D){const gl=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(C.ya=gl,ct(C.I,C.D,gl))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-u.F,x.j.info("Handshake RTT: "+x.R+"ms")),C=x;var Ae=u;if(C.qa=Zo(C,C.J?C.ia:null,C.W),Ae.K){us(C.h,Ae);var Xe=Ae,Bt=C.L;Bt&&(Xe.I=Bt),Xe.B&&(dn(Xe),Jn(Xe)),C.g=Ae}else Yo(C);0<x.i.length&&Zi(x)}else We[0]!="stop"&&We[0]!="close"||Oa(x,7);else x.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Oa(x,7):hl(x):We[0]!="noop"&&x.l&&x.l.ta(We),x.v=0)}}ln(4)}catch{}}var zo=class{constructor(u,v){this.g=u,this.map=v}};function ka(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qi(u){return u.h?1:u.g?u.g.size:0}function nl(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function Hi(u,v){u.g?u.g.add(v):u.h=v}function us(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}ka.prototype.cancel=function(){if(this.i=il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function il(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const x of u.g.values())v=v.concat(x.D);return v}return H(u.i)}function nu(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var v=[],x=u.length,C=0;C<x;C++)v.push(u[C]);return v}v=[],x=0;for(C in u)v[x++]=u[C];return v}function Gi(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var v=[];u=u.length;for(var x=0;x<u;x++)v.push(x);return v}v=[],x=0;for(const C in u)v[x++]=C;return v}}}function rl(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var x=Gi(u),C=nu(u),W=C.length,re=0;re<W;re++)v.call(void 0,C[re],x&&x[re],u)}var ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iu(u,v){if(u){u=u.split("&");for(var x=0;x<u.length;x++){var C=u[x].indexOf("="),W=null;if(0<=C){var re=u[x].substring(0,C);W=u[x].substring(C+1)}else re=u[x];v(re,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function kt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof kt){this.h=u.h,si(this,u.j),this.o=u.o,this.g=u.g,un(this,u.s),this.l=u.l;var v=u.i,x=new Da;x.i=v.i,v.g&&(x.g=new Map(v.g),x.h=v.h),Ra(this,x),this.m=u.m}else u&&(v=String(u).match(ti))?(this.h=!1,si(this,v[1]||"",!0),this.o=ks(v[2]||""),this.g=ks(v[3]||"",!0),un(this,v[4]),this.l=ks(v[5]||"",!0),Ra(this,v[6]||"",!0),this.m=ks(v[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}kt.prototype.toString=function(){var u=[],v=this.j;v&&u.push(ni(v,ll,!0),":");var x=this.g;return(x||v=="file")&&(u.push("//"),(v=this.o)&&u.push(ni(v,ll,!0),"@"),u.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&u.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(ni(x,x.charAt(0)=="/"?ru:ol,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",ni(x,$i)),u.join("")};function js(u){return new kt(u)}function si(u,v,x){u.j=x?ks(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function un(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function Ra(u,v,x){v instanceof Da?(u.i=v,qo(u.i,u.h)):(x||(v=ni(v,lu)),u.i=new Da(v,u.h))}function ct(u,v,x){u.i.set(v,x)}function ai(u){return ct(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ks(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ni(u,v,x){return typeof u=="string"?(u=encodeURI(u).replace(v,Fo),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ll=/[#\/\?@]/g,ol=/[#\?:]/g,ru=/[#\?]/g,lu=/[#\?@]/g,$i=/#/g;function Da(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Rs(u){u.g||(u.g=new Map,u.h=0,u.i&&iu(u.i,function(v,x){u.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}i=Da.prototype,i.add=function(u,v){Rs(this),this.i=null,u=na(this,u);var x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(v),this.h+=1,this};function Ia(u,v){Rs(u),v=na(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function Pa(u,v){return Rs(u),v=na(u,v),u.g.has(v)}i.forEach=function(u,v){Rs(this),this.g.forEach(function(x,C){x.forEach(function(W){u.call(v,W,C,this)},this)},this)},i.na=function(){Rs(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),x=[];for(let C=0;C<v.length;C++){const W=u[C];for(let re=0;re<W.length;re++)x.push(v[C])}return x},i.V=function(u){Rs(this);let v=[];if(typeof u=="string")Pa(this,u)&&(v=v.concat(this.g.get(na(this,u))));else{u=Array.from(this.g.values());for(let x=0;x<u.length;x++)v=v.concat(u[x])}return v},i.set=function(u,v){return Rs(this),this.i=null,u=na(this,u),Pa(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},i.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function cl(u,v,x){Ia(u,v),0<x.length&&(u.i=null,u.g.set(na(u,v),H(x)),u.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var x=0;x<v.length;x++){var C=v[x];const re=encodeURIComponent(String(C)),Ae=this.V(C);for(C=0;C<Ae.length;C++){var W=re;Ae[C]!==""&&(W+="="+encodeURIComponent(String(Ae[C]))),u.push(W)}}return this.i=u.join("&")};function na(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function qo(u,v){v&&!u.j&&(Rs(u),u.i=null,u.g.forEach(function(x,C){var W=C.toLowerCase();C!=W&&(Ia(this,C),cl(this,W,x))},u)),u.j=v}function ii(u,v){const x=new ws;if(f.Image){const C=new Image;C.onload=O(Ds,x,"TestLoadImage: loaded",!0,v,C),C.onerror=O(Ds,x,"TestLoadImage: error",!1,v,C),C.onabort=O(Ds,x,"TestLoadImage: abort",!1,v,C),C.ontimeout=O(Ds,x,"TestLoadImage: timeout",!1,v,C),f.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else v(!1)}function Qs(u,v){const x=new ws,C=new AbortController,W=setTimeout(()=>{C.abort(),Ds(x,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:C.signal}).then(re=>{clearTimeout(W),re.ok?Ds(x,"TestPingServer: ok",!0,v):Ds(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),Ds(x,"TestPingServer: error",!1,v)})}function Ds(u,v,x,C,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),C(x)}catch{}}function ri(){this.g=new Wn}function ia(u,v,x){const C=x||"";try{rl(u,function(W,re){let Ae=W;g(W)&&(Ae=Gs(W)),v.push(C+re+"="+encodeURIComponent(Ae))})}catch(W){throw v.push(C+"type="+encodeURIComponent("_badmap")),W}}function hn(u){this.l=u.Ub||null,this.j=u.eb||!1}D(hn,Wr),hn.prototype.g=function(){return new Ma(this.l,this.j)},hn.prototype.i=function(u){return function(){return u}}({});function Ma(u,v){vt.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ma,vt),i=Ma.prototype,i.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,la(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||f).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function dl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?ra(this):la(this),this.readyState==3&&dl(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,ra(this))},i.Qa=function(u){this.g&&(this.response=u,ra(this))},i.ga=function(){this.g&&ra(this)};function ra(u){u.readyState=4,u.l=null,u.j=null,u.v=null,la(u)}i.setRequestHeader=function(u,v){this.u.append(u,v)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=v.next();return u.join(`\r
`)};function la(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ul(u){let v="";return z(u,function(x,C){v+=C,v+=":",v+=x,v+=`\r
`}),v}function Ht(u,v,x){e:{for(C in x){var C=!1;break e}C=!0}C||(x=ul(x),typeof u=="string"?x!=null&&encodeURIComponent(String(x)):ct(u,v,x))}function it(u){vt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(it,vt);var Qi=/^https?$/i,li=["POST","PUT"];i=it.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,v,x,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ta.g(),this.v=this.o?Zr(this.o):Zr(ta),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(re){Ho(this,re);return}if(u=x||"",x=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var W in C)x.set(W,C[W]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const re of C.keys())x.set(re,C.get(re));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(x.keys()).find(re=>re.toLowerCase()=="content-type"),W=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(li,v,void 0))||C||W||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Ae]of x)this.g.setRequestHeader(re,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oi(this),this.u=!0,this.g.send(u),this.u=!1}catch(re){Ho(this,re)}};function Ho(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,Yi(u),oa(u)}function Yi(u){u.A||(u.A=!0,st(u,"complete"),st(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,st(this,"complete"),st(this,"abort"),oa(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oa(this,!0)),it.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ki(this):this.bb())},i.bb=function(){Ki(this)};function Ki(u){if(u.h&&typeof m<"u"&&(!u.v[1]||Is(u)!=4||u.Z()!=2)){if(u.u&&Is(u)==4)qt(u.Ea,0,u);else if(st(u,"readystatechange"),Is(u)==4){u.h=!1;try{const Ae=u.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var C;if(C=Ae===0){var W=String(u.D).match(ti)[1]||null;!W&&f.self&&f.self.location&&(W=f.self.location.protocol.slice(0,-1)),C=!Qi.test(W?W.toLowerCase():"")}x=C}if(x)st(u,"complete"),st(u,"success");else{u.m=6;try{var re=2<Is(u)?u.g.statusText:""}catch{re=""}u.l=re+" ["+u.Z()+"]",Yi(u)}}finally{oa(u)}}}}function oa(u,v){if(u.g){oi(u);const x=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||st(u,"ready");try{x.onreadystatechange=C}catch{}}}function oi(u){u.I&&(f.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Is(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Is(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Li(v)}};function Go(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ou(u){const v={};u=(u.g&&2<=Is(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(Y(u[C]))continue;var x=k(u[C]);const W=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const re=v[W]||[];v[W]=re,re.push(x)}M(v,function(C){return C.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(u,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||v}function Xi(u){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ci("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ci("baseRetryDelayMs",5e3,u),this.cb=ci("retryDelaySeedMs",1e4,u),this.Wa=ci("forwardChannelMaxRetries",2,u),this.wa=ci("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ka(u&&u.concurrentRequestLimit),this.Da=new ri,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Xi.prototype,i.la=8,i.G=1,i.connect=function(u,v,x,C){yt(0),this.W=u,this.H=v||{},x&&C!==void 0&&(this.H.OSID=x,this.H.OAID=C),this.F=this.X,this.I=Zo(this,null,this.W),Zi(this)};function hl(u){if($o(u),u.G==3){var v=u.U++,x=js(u.I);if(ct(x,"SID",u.K),ct(x,"RID",v),ct(x,"TYPE","terminate"),di(u,x),v=new ds(u,u.j,v),v.L=2,v.v=ai(js(x)),x=!1,f.navigator&&f.navigator.sendBeacon)try{x=f.navigator.sendBeacon(v.v.toString(),"")}catch{}!x&&f.Image&&(new Image().src=v.v,x=!0),x||(v.g=Jo(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Jn(v)}Wo(u)}function Wi(u){u.g&&(ui(u),u.g.cancel(),u.g=null)}function $o(u){Wi(u),u.u&&(f.clearTimeout(u.u),u.u=null),Ji(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Zi(u){if(!Fi(u.h)&&!u.s){u.s=!0;var v=u.Ga;fe||F(),Ee||(fe(),Ee=!0),_e.add(v,u),u.B=0}}function cu(u,v){return qi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=wt(A(u.Ga,u,v),fl(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const W=new ds(this,this.j,u);let re=this.o;if(this.S&&(re?(re=w(re),E(re,this.S)):re=this.S),this.m!==null||this.O||(W.H=re,re=null),this.P)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var C=this.i[x];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,4096<v){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Qo(this,W,v),x=js(this.I),ct(x,"RID",u),ct(x,"CVER",22),this.D&&ct(x,"X-HTTP-Session-Id",this.D),di(this,x),re&&(this.O?v="headers="+encodeURIComponent(String(ul(re)))+"&"+v:this.m&&Ht(x,this.m,re)),Hi(this.h,W),this.Ua&&ct(x,"TYPE","init"),this.P?(ct(x,"$req",v),ct(x,"SID","null"),W.T=!0,$s(W,x,null)):$s(W,x,v),this.G=2}}else this.G==3&&(u?ml(this,u):this.i.length==0||Fi(this.h)||ml(this))};function ml(u,v){var x;v?x=v.l:x=u.U++;const C=js(u.I);ct(C,"SID",u.K),ct(C,"RID",x),ct(C,"AID",u.T),di(u,C),u.m&&u.o&&Ht(C,u.m,u.o),x=new ds(u,u.j,x,u.B+1),u.m===null&&(x.H=u.o),v&&(u.i=v.D.concat(u.i)),v=Qo(u,x,1e3),x.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Hi(u.h,x),$s(x,C,v)}function di(u,v){u.H&&z(u.H,function(x,C){ct(v,C,x)}),u.l&&rl({},function(x,C){ct(v,C,x)})}function Qo(u,v,x){x=Math.min(u.i.length,x);var C=u.l?A(u.l.Na,u.l,u):null;e:{var W=u.i;let re=-1;for(;;){const Ae=["count="+x];re==-1?0<x?(re=W[0].g,Ae.push("ofs="+re)):re=0:Ae.push("ofs="+re);let Xe=!0;for(let Bt=0;Bt<x;Bt++){let We=W[Bt].g;const Gt=W[Bt].map;if(We-=re,0>We)re=Math.max(0,W[Bt].g-100),Xe=!1;else try{ia(Gt,Ae,"req"+We+"_")}catch{C&&C(Gt)}}if(Xe){C=Ae.join("&");break e}}}return u=u.i.splice(0,x),v.D=u,C}function Yo(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;fe||F(),Ee||(fe(),Ee=!0),_e.add(v,u),u.v=0}}function pl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=wt(A(u.Fa,u),fl(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,Ko(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=wt(A(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Wi(this),Ko(this))};function ui(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Ko(u){u.g=new ds(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=js(u.qa);ct(v,"RID","rpc"),ct(v,"SID",u.K),ct(v,"AID",u.T),ct(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&ct(v,"TO",u.ja),ct(v,"TYPE","xmlhttp"),di(u,v),u.m&&u.o&&Ht(v,u.m,u.o),u.L&&(u.g.I=u.L);var x=u.g;u=u.ia,x.L=1,x.v=ai(js(v)),x.m=null,x.P=!0,wa(x,u)}i.Za=function(){this.C!=null&&(this.C=null,Wi(this),pl(this),yt(19))};function Ji(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Xo(u,v){var x=null;if(u.g==v){Ji(u),ui(u),u.g=null;var C=2}else if(nl(u.h,v))x=v.D,us(u.h,v),C=1;else return;if(u.G!=0){if(v.o)if(C==1){x=v.m?v.m.length:0,v=Date.now()-v.F;var W=u.B;C=rn(),st(C,new Vt(C,x)),Zi(u)}else Yo(u);else if(W=v.s,W==3||W==0&&0<v.X||!(C==1&&cu(u,v)||C==2&&pl(u)))switch(x&&0<x.length&&(v=u.h,v.i=v.i.concat(x)),W){case 1:Oa(u,5);break;case 4:Oa(u,10);break;case 3:Oa(u,6);break;default:Oa(u,2)}}}function fl(u,v){let x=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(x*=2),x*v}function Oa(u,v){if(u.j.info("Error code "+v),v==2){var x=A(u.fb,u),C=u.Xa;const W=!C;C=new kt(C||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||si(C,"https"),ai(C),W?ii(C.toString(),x):Qs(C.toString(),x)}else yt(2);u.G=0,u.l&&u.l.sa(v),Wo(u),$o(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Wo(u){if(u.G=0,u.ka=[],u.l){const v=il(u.h);(v.length!=0||u.i.length!=0)&&(U(u.ka,v),U(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function Zo(u,v,x){var C=x instanceof kt?js(x):new kt(x);if(C.g!="")v&&(C.g=v+"."+C.g),un(C,C.s);else{var W=f.location;C=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var re=new kt(null);C&&si(re,C),v&&(re.g=v),W&&un(re,W),x&&(re.l=x),C=re}return x=u.D,v=u.ya,x&&v&&ct(C,x,v),ct(C,"VER",u.la),di(u,C),C}function Jo(u,v,x){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new it(new hn({eb:x})):new it(u.pa),v.Ha(u.J),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ec(){}i=ec.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function er(){}er.prototype.g=function(u,v){return new hs(u,v)};function hs(u,v){vt.call(this),this.g=new Xi(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!Y(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Y(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new ca(this)}D(hs,vt),hs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hs.prototype.close=function(){hl(this.g)},hs.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.u&&(x={},x.__data__=Gs(u),u=x);v.i.push(new zo(v.Ya++,u)),v.G==3&&Zi(v)},hs.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,hs.aa.N.call(this)};function tc(u){Ea.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const x in v){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}D(tc,Ea);function sc(){el.call(this),this.status=1}D(sc,el);function ca(u){this.g=u}D(ca,ec),ca.prototype.ua=function(){st(this.g,"a")},ca.prototype.ta=function(u){st(this.g,new tc(u))},ca.prototype.sa=function(u){st(this.g,new sc)},ca.prototype.ra=function(){st(this.g,"b")},er.prototype.createWebChannel=er.prototype.g,hs.prototype.send=hs.prototype.o,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,sj=function(){return new er},tj=function(){return rn()},ej=ea,_m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cn.NO_ERROR=0,cn.TIMEOUT=8,cn.HTTP_ERROR=6,pd=cn,Ca.COMPLETE="complete",Jx=Ca,Jr.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",vt.prototype.listen=vt.prototype.K,ro=Jr,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,Zx=it}).apply(typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{});const xy="@firebase/firestore",jy="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ls.UNAUTHENTICATED=new ls(null),ls.GOOGLE_CREDENTIALS=new ls("google-credentials-uid"),ls.FIRST_PARTY=new ls("first-party-uid"),ls.MOCK_USER=new ls("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gr="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Gx("@firebase/firestore");function wr(){return Ri.logLevel}function ke(i,...t){if(Ri.logLevel<=et.DEBUG){const n=t.map(Jm);Ri.debug(`Firestore (${Gr}): ${i}`,...n)}}function sn(i,...t){if(Ri.logLevel<=et.ERROR){const n=t.map(Jm);Ri.error(`Firestore (${Gr}): ${i}`,...n)}}function Or(i,...t){if(Ri.logLevel<=et.WARN){const n=t.map(Jm);Ri.warn(`Firestore (${Gr}): ${i}`,...n)}}function Jm(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(i,t,n){let l="Unexpected state";typeof t=="string"?l=t:n=t,aj(i,l,n)}function aj(i,t,n){let l=`FIRESTORE (${Gr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(n!==void 0)try{l+=" CONTEXT: "+JSON.stringify(n)}catch{l+=" CONTEXT: "+n}throw sn(l),new Error(l)}function rt(i,t,n,l){let c="Unexpected state";typeof n=="string"?c=n:l=n,i||aj(t,c,l)}function Fe(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Hr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class SS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ls.UNAUTHENTICATED))}shutdown(){}}class AS{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ES{constructor(t){this.t=t,this.currentUser=ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){rt(this.o===void 0,42304);let l=this.i;const c=y=>this.i!==l?(l=this.i,n(y)):Promise.resolve();let d=new Za;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Za,t.enqueueRetryable(()=>c(this.currentUser))};const m=()=>{const y=d;t.enqueueRetryable(async()=>{await y.promise,await c(this.currentUser)})},f=y=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Za)}},0),m()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(l=>this.i!==t?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(rt(typeof l.accessToken=="string",31837,{l}),new nj(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return rt(t===null||typeof t=="string",2055,{h:t}),new ls(t)}}class CS{constructor(t,n,l){this.P=t,this.T=n,this.I=l,this.type="FirstParty",this.user=ls.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wS{constructor(t,n,l){this.P=t,this.T=n,this.I=l}getToken(){return Promise.resolve(new CS(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(ls.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ny{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kS{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dS(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){rt(this.o===void 0,3512);const l=d=>{d.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.m;return this.m=d.token,ke("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?n(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable(()=>l(d))};const c=d=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(d=>c(d)),setTimeout(()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?c(d):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ny(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ny(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let l=0;l<i;l++)n[l]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let l="";for(;l.length<20;){const c=RS(40);for(let d=0;d<c.length;++d)l.length<20&&c[d]<n&&(l+=t.charAt(c[d]%62))}return l}}function Ye(i,t){return i<t?-1:i>t?1:0}function Sm(i,t){const n=Math.min(i.length,t.length);for(let l=0;l<n;l++){const c=i.charAt(l),d=t.charAt(l);if(c!==d)return hm(c)===hm(d)?Ye(c,d):hm(c)?1:-1}return Ye(i.length,t.length)}const DS=55296,IS=57343;function hm(i){const t=i.charCodeAt(0);return t>=DS&&t<=IS}function Vr(i,t,n){return i.length===t.length&&i.every((l,c)=>n(l,t[c]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="__name__";class ga{constructor(t,n,l){n===void 0?n=0:n>t.length&&Le(637,{offset:n,range:t.length}),l===void 0?l=t.length-n:l>t.length-n&&Le(1746,{length:l,range:t.length-n}),this.segments=t,this.offset=n,this.len=l}get length(){return this.len}isEqual(t){return ga.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ga?t.forEach(l=>{n.push(l)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,l=this.limit();n<l;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const l=Math.min(t.length,n.length);for(let c=0;c<l;c++){const d=ga.compareSegments(t.get(c),n.get(c));if(d!==0)return d}return Ye(t.length,n.length)}static compareSegments(t,n){const l=ga.isNumericId(t),c=ga.isNumericId(n);return l&&!c?-1:!l&&c?1:l&&c?ga.extractNumericId(t).compare(ga.extractNumericId(n)):Sm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vn.fromString(t.substring(4,t.length-2))}}class ft extends ga{construct(t,n,l){return new ft(t,n,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const l of t){if(l.indexOf("//")>=0)throw new Ce(ve.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);n.push(...l.split("/").filter(c=>c.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const PS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ss extends ga{construct(t,n,l){return new ss(t,n,l)}static isValidIdentifier(t){return PS.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ss.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===by}static keyField(){return new ss([by])}static fromServerFormat(t){const n=[];let l="",c=0;const d=()=>{if(l.length===0)throw new Ce(ve.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(l),l=""};let m=!1;for(;c<t.length;){const f=t[c];if(f==="\\"){if(c+1===t.length)throw new Ce(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[c+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ce(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);l+=y,c+=2}else f==="`"?(m=!m,c++):f!=="."||m?(l+=f,c++):(d(),c++)}if(d(),m)throw new Ce(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ss(n)}static emptyPath(){return new ss([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.path=t}static fromPath(t){return new Me(ft.fromString(t))}static fromName(t){return new Me(ft.fromString(t).popFirst(5))}static empty(){return new Me(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ft.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ft.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Me(new ft(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(i,t,n){if(!n)throw new Ce(ve.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function MS(i,t,n,l){if(t===!0&&l===!0)throw new Ce(ve.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Ty(i){if(!Me.isDocumentKey(i))throw new Ce(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function _y(i){if(Me.isDocumentKey(i))throw new Ce(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function rj(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ld(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(l){return l.constructor?l.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Le(12329,{type:typeof i})}function an(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Ce(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ld(i);throw new Ce(ve.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(i,t){const n={typeString:i};return t&&(n.value=t),n}function ko(i,t){if(!rj(i))throw new Ce(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const l in t)if(t[l]){const c=t[l].typeString,d="value"in t[l]?{value:t[l].value}:void 0;if(!(l in i)){n=`JSON missing required field: '${l}'`;break}const m=i[l];if(c&&typeof m!==c){n=`JSON field '${l}' must be a ${c}.`;break}if(d!==void 0&&m!==d.value){n=`Expected '${l}' field to equal '${d.value}'`;break}}if(n)throw new Ce(ve.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-62135596800,Ay=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(t){return gt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),l=Math.floor((t-1e3*n)*Ay);return new gt(n,l)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ce(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Sy)throw new Ce(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ce(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ay}_compareTo(t){return this.seconds===t.seconds?Ye(this.nanoseconds,t.nanoseconds):Ye(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ko(t,gt._jsonSchema))return new gt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Sy;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Mt("string",gt._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(t){return new ze(t)}static min(){return new ze(new gt(0,0))}static max(){return new ze(new gt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=-1;function OS(i,t){const n=i.toTimestamp().seconds,l=i.toTimestamp().nanoseconds+1,c=ze.fromTimestamp(l===1e9?new gt(n+1,0):new gt(n,l));return new Ln(c,Me.empty(),t)}function VS(i){return new Ln(i.readTime,i.key,xo)}class Ln{constructor(t,n,l){this.readTime=t,this.documentKey=n,this.largestBatchId=l}static min(){return new Ln(ze.min(),Me.empty(),xo)}static max(){return new Ln(ze.max(),Me.empty(),xo)}}function BS(i,t){let n=i.readTime.compareTo(t.readTime);return n!==0?n:(n=Me.comparator(i.documentKey,t.documentKey),n!==0?n:Ye(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class US{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $r(i){if(i.code!==ve.FAILED_PRECONDITION||i.message!==LS)throw i;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new je((l,c)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(l,c)},this.catchCallback=d=>{this.wrapFailure(n,d).next(l,c)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof je?n:je.resolve(n)}catch(n){return je.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):je.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):je.reject(n)}static resolve(t){return new je((n,l)=>{n(t)})}static reject(t){return new je((n,l)=>{l(t)})}static waitFor(t){return new je((n,l)=>{let c=0,d=0,m=!1;t.forEach(f=>{++c,f.next(()=>{++d,m&&d===c&&n()},y=>l(y))}),m=!0,d===c&&n()})}static or(t){let n=je.resolve(!1);for(const l of t)n=n.next(c=>c?je.resolve(c):l());return n}static forEach(t,n){const l=[];return t.forEach((c,d)=>{l.push(n.call(this,c,d))}),this.waitFor(l)}static mapArray(t,n){return new je((l,c)=>{const d=t.length,m=new Array(d);let f=0;for(let y=0;y<d;y++){const g=y;n(t[g]).next(j=>{m[g]=j,++f,f===d&&l(m)},j=>c(j))}})}static doWhile(t,n){return new je((l,c)=>{const d=()=>{t()===!0?n().next(()=>{d()},c):l()};d()})}}function zS(i){const t=i.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qr(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=l=>this.ae(l),this.ue=l=>n.writeSequenceNumber(l))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ud.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=-1;function zd(i){return i==null}function Ad(i){return i===0&&1/i==-1/0}function FS(i){return typeof i=="number"&&Number.isInteger(i)&&!Ad(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="";function qS(i){let t="";for(let n=0;n<i.length;n++)t.length>0&&(t=Ey(t)),t=HS(i.get(n),t);return Ey(t)}function HS(i,t){let n=t;const l=i.length;for(let c=0;c<l;c++){const d=i.charAt(c);switch(d){case"\0":n+="";break;case lj:n+="";break;default:n+=d}}return n}function Ey(i){return i+lj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(i){let t=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t++;return t}function Gn(i,t){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t(n,i[n])}function oj(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t,n){this.comparator=t,this.root=n||ts.EMPTY}insert(t,n){return new bt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ts.BLACK,null,null))}remove(t){return new bt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ts.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const l=this.comparator(t,n.key);if(l===0)return n.value;l<0?n=n.left:l>0&&(n=n.right)}return null}indexOf(t){let n=0,l=this.root;for(;!l.isEmpty();){const c=this.comparator(t,l.key);if(c===0)return n+l.left.size;c<0?l=l.left:(n+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,l)=>(t(n,l),!1))}toString(){const t=[];return this.inorderTraversal((n,l)=>(t.push(`${n}:${l}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new id(this.root,t,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new id(this.root,t,this.comparator,!0)}}class id{constructor(t,n,l,c){this.isReverse=c,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=n?l(t.key,n):1,n&&c&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(d===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ts{constructor(t,n,l,c,d){this.key=t,this.value=n,this.color=l??ts.RED,this.left=c??ts.EMPTY,this.right=d??ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,l,c,d){return new ts(t??this.key,n??this.value,l??this.color,c??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,l){let c=this;const d=l(t,c.key);return c=d<0?c.copy(null,null,null,c.left.insert(t,n,l),null):d===0?c.copy(null,n,null,null,null):c.copy(null,null,null,null,c.right.insert(t,n,l)),c.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let l,c=this;if(n(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,n),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),n(t,c.key)===0){if(c.right.isEmpty())return ts.EMPTY;l=c.right.min(),c=c.copy(l.key,l.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,n))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Le(27949);return t+(this.isRed()?0:1)}}ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1;ts.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(t,n,l,c,d){return this}insert(t,n,l){return new ts(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t){this.comparator=t,this.data=new bt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,l)=>(t(n),!1))}forEachInRange(t,n){const l=this.data.getIteratorFrom(t[0]);for(;l.hasNext();){const c=l.getNext();if(this.comparator(c.key,t[1])>=0)return;n(c.key)}}forEachWhile(t,n){let l;for(l=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();l.hasNext();)if(!t(l.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new wy(this.data.getIterator())}getIteratorFrom(t){return new wy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(l=>{n=n.add(l)}),n}isEqual(t){if(!(t instanceof Ft)||this.size!==t.size)return!1;const n=this.data.getIterator(),l=t.data.getIterator();for(;n.hasNext();){const c=n.getNext().key,d=l.getNext().key;if(this.comparator(c,d)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ft(this.comparator);return n.data=t,n}}class wy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t){this.fields=t,t.sort(ss.comparator)}static empty(){return new Cs([])}unionWith(t){let n=new Ft(ss.comparator);for(const l of this.fields)n=n.add(l);for(const l of t)n=n.add(l);return new Cs(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Vr(this.fields,t.fields,(n,l)=>n.isEqual(l))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(c){try{return atob(c)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new cj("Invalid base64 string: "+d):d}}(t);return new as(n)}static fromUint8Array(t){const n=function(c){let d="";for(let m=0;m<c.length;++m)d+=String.fromCharCode(c[m]);return d}(t);return new as(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const l=new Uint8Array(n.length);for(let c=0;c<n.length;c++)l[c]=n.charCodeAt(c);return l}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ye(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}as.EMPTY_BYTE_STRING=new as("");const GS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Un(i){if(rt(!!i,39018),typeof i=="string"){let t=0;const n=GS.exec(i);if(rt(!!n,46558,{timestamp:i}),n[1]){let c=n[1];c=(c+"000000000").substr(0,9),t=Number(c)}const l=new Date(i);return{seconds:Math.floor(l.getTime()/1e3),nanos:t}}return{seconds:Ct(i.seconds),nanos:Ct(i.nanos)}}function Ct(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function zn(i){return typeof i=="string"?as.fromBase64String(i):as.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj="server_timestamp",uj="__type__",hj="__previous_value__",mj="__local_write_time__";function sp(i){return(i?.mapValue?.fields||{})[uj]?.stringValue===dj}function Fd(i){const t=i.mapValue.fields[hj];return sp(t)?Fd(t):t}function jo(i){const t=Un(i.mapValue.fields[mj].timestampValue);return new gt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t,n,l,c,d,m,f,y,g,j){this.databaseId=t,this.appId=n,this.persistenceKey=l,this.host=c,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=j}}const Ed="(default)";class No{constructor(t,n){this.projectId=t,this.database=n||Ed}static empty(){return new No("","")}get isDefaultDatabase(){return this.database===Ed}isEqual(t){return t instanceof No&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj="__type__",QS="__max__",rd={mapValue:{}},fj="__vector__",Cd="value";function Fn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?sp(i)?4:KS(i)?9007199254740991:YS(i)?10:11:Le(28295,{value:i})}function Ta(i,t){if(i===t)return!0;const n=Fn(i);if(n!==Fn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return jo(i).isEqual(jo(t));case 3:return function(c,d){if(typeof c.timestampValue=="string"&&typeof d.timestampValue=="string"&&c.timestampValue.length===d.timestampValue.length)return c.timestampValue===d.timestampValue;const m=Un(c.timestampValue),f=Un(d.timestampValue);return m.seconds===f.seconds&&m.nanos===f.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(c,d){return zn(c.bytesValue).isEqual(zn(d.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(c,d){return Ct(c.geoPointValue.latitude)===Ct(d.geoPointValue.latitude)&&Ct(c.geoPointValue.longitude)===Ct(d.geoPointValue.longitude)}(i,t);case 2:return function(c,d){if("integerValue"in c&&"integerValue"in d)return Ct(c.integerValue)===Ct(d.integerValue);if("doubleValue"in c&&"doubleValue"in d){const m=Ct(c.doubleValue),f=Ct(d.doubleValue);return m===f?Ad(m)===Ad(f):isNaN(m)&&isNaN(f)}return!1}(i,t);case 9:return Vr(i.arrayValue.values||[],t.arrayValue.values||[],Ta);case 10:case 11:return function(c,d){const m=c.mapValue.fields||{},f=d.mapValue.fields||{};if(Cy(m)!==Cy(f))return!1;for(const y in m)if(m.hasOwnProperty(y)&&(f[y]===void 0||!Ta(m[y],f[y])))return!1;return!0}(i,t);default:return Le(52216,{left:i})}}function bo(i,t){return(i.values||[]).find(n=>Ta(n,t))!==void 0}function Br(i,t){if(i===t)return 0;const n=Fn(i),l=Fn(t);if(n!==l)return Ye(n,l);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ye(i.booleanValue,t.booleanValue);case 2:return function(d,m){const f=Ct(d.integerValue||d.doubleValue),y=Ct(m.integerValue||m.doubleValue);return f<y?-1:f>y?1:f===y?0:isNaN(f)?isNaN(y)?0:-1:1}(i,t);case 3:return ky(i.timestampValue,t.timestampValue);case 4:return ky(jo(i),jo(t));case 5:return Sm(i.stringValue,t.stringValue);case 6:return function(d,m){const f=zn(d),y=zn(m);return f.compareTo(y)}(i.bytesValue,t.bytesValue);case 7:return function(d,m){const f=d.split("/"),y=m.split("/");for(let g=0;g<f.length&&g<y.length;g++){const j=Ye(f[g],y[g]);if(j!==0)return j}return Ye(f.length,y.length)}(i.referenceValue,t.referenceValue);case 8:return function(d,m){const f=Ye(Ct(d.latitude),Ct(m.latitude));return f!==0?f:Ye(Ct(d.longitude),Ct(m.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return Ry(i.arrayValue,t.arrayValue);case 10:return function(d,m){const f=d.fields||{},y=m.fields||{},g=f[Cd]?.arrayValue,j=y[Cd]?.arrayValue,S=Ye(g?.values?.length||0,j?.values?.length||0);return S!==0?S:Ry(g,j)}(i.mapValue,t.mapValue);case 11:return function(d,m){if(d===rd.mapValue&&m===rd.mapValue)return 0;if(d===rd.mapValue)return 1;if(m===rd.mapValue)return-1;const f=d.fields||{},y=Object.keys(f),g=m.fields||{},j=Object.keys(g);y.sort(),j.sort();for(let S=0;S<y.length&&S<j.length;++S){const A=Sm(y[S],j[S]);if(A!==0)return A;const O=Br(f[y[S]],g[j[S]]);if(O!==0)return O}return Ye(y.length,j.length)}(i.mapValue,t.mapValue);default:throw Le(23264,{he:n})}}function ky(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Ye(i,t);const n=Un(i),l=Un(t),c=Ye(n.seconds,l.seconds);return c!==0?c:Ye(n.nanos,l.nanos)}function Ry(i,t){const n=i.values||[],l=t.values||[];for(let c=0;c<n.length&&c<l.length;++c){const d=Br(n[c],l[c]);if(d)return d}return Ye(n.length,l.length)}function Lr(i){return Am(i)}function Am(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const l=Un(n);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return zn(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Me.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let l="[",c=!0;for(const d of n.values||[])c?c=!1:l+=",",l+=Am(d);return l+"]"}(i.arrayValue):"mapValue"in i?function(n){const l=Object.keys(n.fields||{}).sort();let c="{",d=!0;for(const m of l)d?d=!1:c+=",",c+=`${m}:${Am(n.fields[m])}`;return c+"}"}(i.mapValue):Le(61005,{value:i})}function fd(i){switch(Fn(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fd(i);return t?16+fd(t):16;case 5:return 2*i.stringValue.length;case 6:return zn(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(l){return(l.values||[]).reduce((c,d)=>c+fd(d),0)}(i.arrayValue);case 10:case 11:return function(l){let c=0;return Gn(l.fields,(d,m)=>{c+=d.length+fd(m)}),c}(i.mapValue);default:throw Le(13486,{value:i})}}function Dy(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function Em(i){return!!i&&"integerValue"in i}function ap(i){return!!i&&"arrayValue"in i}function Iy(i){return!!i&&"nullValue"in i}function Py(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gd(i){return!!i&&"mapValue"in i}function YS(i){return(i?.mapValue?.fields||{})[pj]?.stringValue===fj}function ho(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Gn(i.mapValue.fields,(n,l)=>t.mapValue.fields[n]=ho(l)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ho(i.arrayValue.values[n]);return t}return{...i}}function KS(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===QS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(t){this.value=t}static empty(){return new xs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let l=0;l<t.length-1;++l)if(n=(n.mapValue.fields||{})[t.get(l)],!gd(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ho(n)}setAll(t){let n=ss.emptyPath(),l={},c=[];t.forEach((m,f)=>{if(!n.isImmediateParentOf(f)){const y=this.getFieldsMap(n);this.applyChanges(y,l,c),l={},c=[],n=f.popLast()}m?l[f.lastSegment()]=ho(m):c.push(f.lastSegment())});const d=this.getFieldsMap(n);this.applyChanges(d,l,c)}delete(t){const n=this.field(t.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ta(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let l=0;l<t.length;++l){let c=n.mapValue.fields[t.get(l)];gd(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},n.mapValue.fields[t.get(l)]=c),n=c}return n.mapValue.fields}applyChanges(t,n,l){Gn(n,(c,d)=>t[c]=d);for(const c of l)delete t[c]}clone(){return new xs(ho(this.value))}}function gj(i){const t=[];return Gn(i.fields,(n,l)=>{const c=new ss([n]);if(gd(l)){const d=gj(l.mapValue).fields;if(d.length===0)t.push(c);else for(const m of d)t.push(c.child(m))}else t.push(c)}),new Cs(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t,n,l,c,d,m,f){this.key=t,this.documentType=n,this.version=l,this.readTime=c,this.createTime=d,this.data=m,this.documentState=f}static newInvalidDocument(t){return new os(t,0,ze.min(),ze.min(),ze.min(),xs.empty(),0)}static newFoundDocument(t,n,l,c){return new os(t,1,n,ze.min(),l,c,0)}static newNoDocument(t,n){return new os(t,2,n,ze.min(),ze.min(),xs.empty(),0)}static newUnknownDocument(t,n){return new os(t,3,n,ze.min(),ze.min(),xs.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof os&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t,n){this.position=t,this.inclusive=n}}function My(i,t,n){let l=0;for(let c=0;c<i.position.length;c++){const d=t[c],m=i.position[c];if(d.field.isKeyField()?l=Me.comparator(Me.fromName(m.referenceValue),n.key):l=Br(m,n.data.field(d.field)),d.dir==="desc"&&(l*=-1),l!==0)break}return l}function Oy(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ta(i.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n="asc"){this.field=t,this.dir=n}}function XS(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{}class Pt extends vj{constructor(t,n,l){super(),this.field=t,this.op=n,this.value=l}static create(t,n,l){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,l):new ZS(t,n,l):n==="array-contains"?new tA(t,l):n==="in"?new sA(t,l):n==="not-in"?new aA(t,l):n==="array-contains-any"?new nA(t,l):new Pt(t,n,l)}static createKeyFieldInFilter(t,n,l){return n==="in"?new JS(t,l):new eA(t,l)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Br(n,this.value)):n!==null&&Fn(this.value)===Fn(n)&&this.matchesComparison(Br(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zs extends vj{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Zs(t,n)}matches(t){return yj(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yj(i){return i.op==="and"}function xj(i){return WS(i)&&yj(i)}function WS(i){for(const t of i.filters)if(t instanceof Zs)return!1;return!0}function Cm(i){if(i instanceof Pt)return i.field.canonicalString()+i.op.toString()+Lr(i.value);if(xj(i))return i.filters.map(t=>Cm(t)).join(",");{const t=i.filters.map(n=>Cm(n)).join(",");return`${i.op}(${t})`}}function jj(i,t){return i instanceof Pt?function(l,c){return c instanceof Pt&&l.op===c.op&&l.field.isEqual(c.field)&&Ta(l.value,c.value)}(i,t):i instanceof Zs?function(l,c){return c instanceof Zs&&l.op===c.op&&l.filters.length===c.filters.length?l.filters.reduce((d,m,f)=>d&&jj(m,c.filters[f]),!0):!1}(i,t):void Le(19439)}function Nj(i){return i instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Lr(n.value)}`}(i):i instanceof Zs?function(n){return n.op.toString()+" {"+n.getFilters().map(Nj).join(" ,")+"}"}(i):"Filter"}class ZS extends Pt{constructor(t,n,l){super(t,n,l),this.key=Me.fromName(l.referenceValue)}matches(t){const n=Me.comparator(t.key,this.key);return this.matchesComparison(n)}}class JS extends Pt{constructor(t,n){super(t,"in",n),this.keys=bj("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class eA extends Pt{constructor(t,n){super(t,"not-in",n),this.keys=bj("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function bj(i,t){return(t.arrayValue?.values||[]).map(n=>Me.fromName(n.referenceValue))}class tA extends Pt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ap(n)&&bo(n.arrayValue,this.value)}}class sA extends Pt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&bo(this.value.arrayValue,n)}}class aA extends Pt{constructor(t,n){super(t,"not-in",n)}matches(t){if(bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bo(this.value.arrayValue,n)}}class nA extends Pt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some(l=>bo(this.value.arrayValue,l))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t,n=null,l=[],c=[],d=null,m=null,f=null){this.path=t,this.collectionGroup=n,this.orderBy=l,this.filters=c,this.limit=d,this.startAt=m,this.endAt=f,this.Te=null}}function Vy(i,t=null,n=[],l=[],c=null,d=null,m=null){return new iA(i,t,n,l,c,d,m)}function np(i){const t=Fe(i);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(l=>Cm(l)).join(","),n+="|ob:",n+=t.orderBy.map(l=>function(d){return d.field.canonicalString()+d.dir}(l)).join(","),zd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(l=>Lr(l)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(l=>Lr(l)).join(",")),t.Te=n}return t.Te}function ip(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!XS(i.orderBy[n],t.orderBy[n]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!jj(i.filters[n],t.filters[n]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!Oy(i.startAt,t.startAt)&&Oy(i.endAt,t.endAt)}function wm(i){return Me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t,n=null,l=[],c=[],d=null,m="F",f=null,y=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=l,this.filters=c,this.limit=d,this.limitType=m,this.startAt=f,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rA(i,t,n,l,c,d,m,f){return new Yr(i,t,n,l,c,d,m,f)}function rp(i){return new Yr(i)}function By(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Tj(i){return i.collectionGroup!==null}function mo(i){const t=Fe(i);if(t.Ie===null){t.Ie=[];const n=new Set;for(const d of t.explicitOrderBy)t.Ie.push(d),n.add(d.field.canonicalString());const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let f=new Ft(ss.comparator);return m.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(f=f.add(g.field))})}),f})(t).forEach(d=>{n.has(d.canonicalString())||d.isKeyField()||t.Ie.push(new To(d,l))}),n.has(ss.keyField().canonicalString())||t.Ie.push(new To(ss.keyField(),l))}return t.Ie}function ya(i){const t=Fe(i);return t.Ee||(t.Ee=lA(t,mo(i))),t.Ee}function lA(i,t){if(i.limitType==="F")return Vy(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(c=>{const d=c.dir==="desc"?"asc":"desc";return new To(c.field,d)});const n=i.endAt?new wd(i.endAt.position,i.endAt.inclusive):null,l=i.startAt?new wd(i.startAt.position,i.startAt.inclusive):null;return Vy(i.path,i.collectionGroup,t,i.filters,i.limit,n,l)}}function km(i,t){const n=i.filters.concat([t]);return new Yr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Rm(i,t,n){return new Yr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,n,i.startAt,i.endAt)}function qd(i,t){return ip(ya(i),ya(t))&&i.limitType===t.limitType}function _j(i){return`${np(ya(i))}|lt:${i.limitType}`}function kr(i){return`Query(target=${function(n){let l=n.path.canonicalString();return n.collectionGroup!==null&&(l+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(l+=`, filters: [${n.filters.map(c=>Nj(c)).join(", ")}]`),zd(n.limit)||(l+=", limit: "+n.limit),n.orderBy.length>0&&(l+=`, orderBy: [${n.orderBy.map(c=>function(m){return`${m.field.canonicalString()} (${m.dir})`}(c)).join(", ")}]`),n.startAt&&(l+=", startAt: ",l+=n.startAt.inclusive?"b:":"a:",l+=n.startAt.position.map(c=>Lr(c)).join(",")),n.endAt&&(l+=", endAt: ",l+=n.endAt.inclusive?"a:":"b:",l+=n.endAt.position.map(c=>Lr(c)).join(",")),`Target(${l})`}(ya(i))}; limitType=${i.limitType})`}function Hd(i,t){return t.isFoundDocument()&&function(l,c){const d=c.key.path;return l.collectionGroup!==null?c.key.hasCollectionId(l.collectionGroup)&&l.path.isPrefixOf(d):Me.isDocumentKey(l.path)?l.path.isEqual(d):l.path.isImmediateParentOf(d)}(i,t)&&function(l,c){for(const d of mo(l))if(!d.field.isKeyField()&&c.data.field(d.field)===null)return!1;return!0}(i,t)&&function(l,c){for(const d of l.filters)if(!d.matches(c))return!1;return!0}(i,t)&&function(l,c){return!(l.startAt&&!function(m,f,y){const g=My(m,f,y);return m.inclusive?g<=0:g<0}(l.startAt,mo(l),c)||l.endAt&&!function(m,f,y){const g=My(m,f,y);return m.inclusive?g>=0:g>0}(l.endAt,mo(l),c))}(i,t)}function oA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Sj(i){return(t,n)=>{let l=!1;for(const c of mo(i)){const d=cA(c,t,n);if(d!==0)return d;l=l||c.field.isKeyField()}return 0}}function cA(i,t,n){const l=i.field.isKeyField()?Me.comparator(t.key,n.key):function(d,m,f){const y=m.data.field(d),g=f.data.field(d);return y!==null&&g!==null?Br(y,g):Le(42886)}(i.field,t,n);switch(i.dir){case"asc":return l;case"desc":return-1*l;default:return Le(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),l=this.inner[n];if(l!==void 0){for(const[c,d]of l)if(this.equalsFn(c,t))return d}}has(t){return this.get(t)!==void 0}set(t,n){const l=this.mapKeyFn(t),c=this.inner[l];if(c===void 0)return this.inner[l]=[[t,n]],void this.innerSize++;for(let d=0;d<c.length;d++)if(this.equalsFn(c[d][0],t))return void(c[d]=[t,n]);c.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),l=this.inner[n];if(l===void 0)return!1;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return l.length===1?delete this.inner[n]:l.splice(c,1),this.innerSize--,!0;return!1}forEach(t){Gn(this.inner,(n,l)=>{for(const[c,d]of l)t(c,d)})}isEmpty(){return oj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new bt(Me.comparator);function nn(){return dA}const Aj=new bt(Me.comparator);function lo(...i){let t=Aj;for(const n of i)t=t.insert(n.key,n);return t}function Ej(i){let t=Aj;return i.forEach((n,l)=>t=t.insert(n,l.overlayedDocument)),t}function wi(){return po()}function Cj(){return po()}function po(){return new Pi(i=>i.toString(),(i,t)=>i.isEqual(t))}const uA=new bt(Me.comparator),hA=new Ft(Me.comparator);function Ke(...i){let t=hA;for(const n of i)t=t.add(n);return t}const mA=new Ft(Ye);function pA(){return mA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(t)?"-0":t}}function wj(i){return{integerValue:""+i}}function fA(i,t){return FS(t)?wj(t):lp(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function gA(i,t,n){return i instanceof _o?function(c,d){const m={fields:{[uj]:{stringValue:dj},[mj]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return d&&sp(d)&&(d=Fd(d)),d&&(m.fields[hj]=d),{mapValue:m}}(n,t):i instanceof So?Rj(i,t):i instanceof Ao?Dj(i,t):function(c,d){const m=kj(c,d),f=Ly(m)+Ly(c.Ae);return Em(m)&&Em(c.Ae)?wj(f):lp(c.serializer,f)}(i,t)}function vA(i,t,n){return i instanceof So?Rj(i,t):i instanceof Ao?Dj(i,t):n}function kj(i,t){return i instanceof kd?function(l){return Em(l)||function(d){return!!d&&"doubleValue"in d}(l)}(t)?t:{integerValue:0}:null}class _o extends Gd{}class So extends Gd{constructor(t){super(),this.elements=t}}function Rj(i,t){const n=Ij(t);for(const l of i.elements)n.some(c=>Ta(c,l))||n.push(l);return{arrayValue:{values:n}}}class Ao extends Gd{constructor(t){super(),this.elements=t}}function Dj(i,t){let n=Ij(t);for(const l of i.elements)n=n.filter(c=>!Ta(c,l));return{arrayValue:{values:n}}}class kd extends Gd{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Ly(i){return Ct(i.integerValue||i.doubleValue)}function Ij(i){return ap(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(t,n){this.field=t,this.transform=n}}function xA(i,t){return i.field.isEqual(t.field)&&function(l,c){return l instanceof So&&c instanceof So||l instanceof Ao&&c instanceof Ao?Vr(l.elements,c.elements,Ta):l instanceof kd&&c instanceof kd?Ta(l.Ae,c.Ae):l instanceof _o&&c instanceof _o}(i.transform,t.transform)}class jA{constructor(t,n){this.version=t,this.transformResults=n}}class Ws{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ws}static exists(t){return new Ws(void 0,t)}static updateTime(t){return new Ws(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function vd(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class $d{}function Pj(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new op(i.key,Ws.none()):new Ro(i.key,i.data,Ws.none());{const n=i.data,l=xs.empty();let c=new Ft(ss.comparator);for(let d of t.fields)if(!c.has(d)){let m=n.field(d);m===null&&d.length>1&&(d=d.popLast(),m=n.field(d)),m===null?l.delete(d):l.set(d,m),c=c.add(d)}return new $n(i.key,l,new Cs(c.toArray()),Ws.none())}}function NA(i,t,n){i instanceof Ro?function(c,d,m){const f=c.value.clone(),y=zy(c.fieldTransforms,d,m.transformResults);f.setAll(y),d.convertToFoundDocument(m.version,f).setHasCommittedMutations()}(i,t,n):i instanceof $n?function(c,d,m){if(!vd(c.precondition,d))return void d.convertToUnknownDocument(m.version);const f=zy(c.fieldTransforms,d,m.transformResults),y=d.data;y.setAll(Mj(c)),y.setAll(f),d.convertToFoundDocument(m.version,y).setHasCommittedMutations()}(i,t,n):function(c,d,m){d.convertToNoDocument(m.version).setHasCommittedMutations()}(0,t,n)}function fo(i,t,n,l){return i instanceof Ro?function(d,m,f,y){if(!vd(d.precondition,m))return f;const g=d.value.clone(),j=Fy(d.fieldTransforms,y,m);return g.setAll(j),m.convertToFoundDocument(m.version,g).setHasLocalMutations(),null}(i,t,n,l):i instanceof $n?function(d,m,f,y){if(!vd(d.precondition,m))return f;const g=Fy(d.fieldTransforms,y,m),j=m.data;return j.setAll(Mj(d)),j.setAll(g),m.convertToFoundDocument(m.version,j).setHasLocalMutations(),f===null?null:f.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(S=>S.field))}(i,t,n,l):function(d,m,f){return vd(d.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):f}(i,t,n)}function bA(i,t){let n=null;for(const l of i.fieldTransforms){const c=t.data.field(l.field),d=kj(l.transform,c||null);d!=null&&(n===null&&(n=xs.empty()),n.set(l.field,d))}return n||null}function Uy(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(l,c){return l===void 0&&c===void 0||!(!l||!c)&&Vr(l,c,(d,m)=>xA(d,m))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Ro extends $d{constructor(t,n,l,c=[]){super(),this.key=t,this.value=n,this.precondition=l,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class $n extends $d{constructor(t,n,l,c,d=[]){super(),this.key=t,this.data=n,this.fieldMask=l,this.precondition=c,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Mj(i){const t=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const l=i.data.field(n);t.set(n,l)}}),t}function zy(i,t,n){const l=new Map;rt(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let c=0;c<n.length;c++){const d=i[c],m=d.transform,f=t.data.field(d.field);l.set(d.field,vA(m,f,n[c]))}return l}function Fy(i,t,n){const l=new Map;for(const c of i){const d=c.transform,m=n.data.field(c.field);l.set(c.field,gA(d,m,t))}return l}class op extends $d{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TA extends $d{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t,n,l,c){this.batchId=t,this.localWriteTime=n,this.baseMutations=l,this.mutations=c}applyToRemoteDocument(t,n){const l=n.mutationResults;for(let c=0;c<this.mutations.length;c++){const d=this.mutations[c];d.key.isEqual(t.key)&&NA(d,t,l[c])}}applyToLocalView(t,n){for(const l of this.baseMutations)l.key.isEqual(t.key)&&(n=fo(l,t,n,this.localWriteTime));for(const l of this.mutations)l.key.isEqual(t.key)&&(n=fo(l,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const l=Cj();return this.mutations.forEach(c=>{const d=t.get(c.key),m=d.overlayedDocument;let f=this.applyToLocalView(m,d.mutatedFields);f=n.has(c.key)?null:f;const y=Pj(m,f);y!==null&&l.set(c.key,y),m.isValidDocument()||m.convertToNoDocument(ze.min())}),l}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ke())}isEqual(t){return this.batchId===t.batchId&&Vr(this.mutations,t.mutations,(n,l)=>Uy(n,l))&&Vr(this.baseMutations,t.baseMutations,(n,l)=>Uy(n,l))}}class cp{constructor(t,n,l,c){this.batch=t,this.commitVersion=n,this.mutationResults=l,this.docVersions=c}static from(t,n,l){rt(t.mutations.length===l.length,58842,{me:t.mutations.length,fe:l.length});let c=function(){return uA}();const d=t.mutations;for(let m=0;m<d.length;m++)c=c.insert(d[m].key,l[m].version);return new cp(t,n,l,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Je;function EA(i){switch(i){case ve.OK:return Le(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Le(15467,{code:i})}}function Oj(i){if(i===void 0)return sn("GRPC error has no .code"),ve.UNKNOWN;switch(i){case It.OK:return ve.OK;case It.CANCELLED:return ve.CANCELLED;case It.UNKNOWN:return ve.UNKNOWN;case It.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case It.INTERNAL:return ve.INTERNAL;case It.UNAVAILABLE:return ve.UNAVAILABLE;case It.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case It.NOT_FOUND:return ve.NOT_FOUND;case It.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case It.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case It.ABORTED:return ve.ABORTED;case It.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case It.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case It.DATA_LOSS:return ve.DATA_LOSS;default:return Le(39323,{code:i})}}(Je=It||(It={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Vn([4294967295,4294967295],0);function qy(i){const t=CA().encode(i),n=new Wx;return n.update(t),new Uint8Array(n.digest())}function Hy(i){const t=new DataView(i.buffer),n=t.getUint32(0,!0),l=t.getUint32(4,!0),c=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new Vn([n,l],0),new Vn([c,d],0)]}class dp{constructor(t,n,l){if(this.bitmap=t,this.padding=n,this.hashCount=l,n<0||n>=8)throw new oo(`Invalid padding: ${n}`);if(l<0)throw new oo(`Invalid hash count: ${l}`);if(t.length>0&&this.hashCount===0)throw new oo(`Invalid hash count: ${l}`);if(t.length===0&&n!==0)throw new oo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Vn.fromNumber(this.ge)}ye(t,n,l){let c=t.add(n.multiply(Vn.fromNumber(l)));return c.compare(wA)===1&&(c=new Vn([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=qy(t),[l,c]=Hy(n);for(let d=0;d<this.hashCount;d++){const m=this.ye(l,c,d);if(!this.we(m))return!1}return!0}static create(t,n,l){const c=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),m=new dp(d,c,n);return l.forEach(f=>m.insert(f)),m}insert(t){if(this.ge===0)return;const n=qy(t),[l,c]=Hy(n);for(let d=0;d<this.hashCount;d++){const m=this.ye(l,c,d);this.Se(m)}}Se(t){const n=Math.floor(t/8),l=t%8;this.bitmap[n]|=1<<l}}class oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t,n,l,c,d){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=l,this.documentUpdates=c,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,n,l){const c=new Map;return c.set(t,Do.createSynthesizedTargetChangeForCurrentChange(t,n,l)),new Qd(ze.min(),c,new bt(Ye),nn(),Ke())}}class Do{constructor(t,n,l,c,d){this.resumeToken=t,this.current=n,this.addedDocuments=l,this.modifiedDocuments=c,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,n,l){return new Do(l,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t,n,l,c){this.be=t,this.removedTargetIds=n,this.key=l,this.De=c}}class Vj{constructor(t,n){this.targetId=t,this.Ce=n}}class Bj{constructor(t,n,l=as.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=n,this.resumeToken=l,this.cause=c}}class Gy{constructor(){this.ve=0,this.Fe=$y(),this.Me=as.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ke(),n=Ke(),l=Ke();return this.Fe.forEach((c,d)=>{switch(d){case 0:t=t.add(c);break;case 2:n=n.add(c);break;case 1:l=l.add(c);break;default:Le(38017,{changeType:d})}}),new Do(this.Me,this.xe,t,n,l)}qe(){this.Oe=!1,this.Fe=$y()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class kA{constructor(t){this.Ge=t,this.ze=new Map,this.je=nn(),this.Je=ld(),this.He=ld(),this.Ye=new bt(Ye)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const l=this.nt(n);switch(t.state){case 0:this.rt(n)&&l.Le(t.resumeToken);break;case 1:l.Ke(),l.Ne||l.qe(),l.Le(t.resumeToken);break;case 2:l.Ke(),l.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(l.We(),l.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),l.Le(t.resumeToken));break;default:Le(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((l,c)=>{this.rt(c)&&n(c)})}st(t){const n=t.targetId,l=t.Ce.count,c=this.ot(n);if(c){const d=c.target;if(wm(d))if(l===0){const m=new Me(d.path);this.et(n,m,os.newNoDocument(m,ze.min()))}else rt(l===1,20013,{expectedCount:l});else{const m=this._t(n);if(m!==l){const f=this.ut(t),y=f?this.ct(f,t,m):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:l="",padding:c=0},hashCount:d=0}=n;let m,f;try{m=zn(l).toUint8Array()}catch(y){if(y instanceof cj)return Or("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{f=new dp(m,c,d)}catch(y){return Or(y instanceof oo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return f.ge===0?null:f}ct(t,n,l){return n.Ce.count===l-this.Pt(t,n.targetId)?0:2}Pt(t,n){const l=this.Ge.getRemoteKeysForTarget(n);let c=0;return l.forEach(d=>{const m=this.Ge.ht(),f=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.mightContain(f)||(this.et(n,d,null),c++)}),c}Tt(t){const n=new Map;this.ze.forEach((d,m)=>{const f=this.ot(m);if(f){if(d.current&&wm(f.target)){const y=new Me(f.target.path);this.It(y).has(m)||this.Et(m,y)||this.et(m,y,os.newNoDocument(y,t))}d.Be&&(n.set(m,d.ke()),d.qe())}});let l=Ke();this.He.forEach((d,m)=>{let f=!0;m.forEachWhile(y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(l=l.add(d))}),this.je.forEach((d,m)=>m.setReadTime(t));const c=new Qd(t,n,this.Ye,this.je,l);return this.je=nn(),this.Je=ld(),this.He=ld(),this.Ye=new bt(Ye),c}Xe(t,n){if(!this.rt(t))return;const l=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,l),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,l){if(!this.rt(t))return;const c=this.nt(t);this.Et(t,n)?c.Qe(n,1):c.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),l&&(this.je=this.je.insert(n,l))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Gy,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ft(Ye),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ft(Ye),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Gy),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function ld(){return new bt(Me.comparator)}function $y(){return new bt(Me.comparator)}const RA={asc:"ASCENDING",desc:"DESCENDING"},DA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IA={and:"AND",or:"OR"};class PA{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Dm(i,t){return i.useProto3Json||zd(t)?t:{value:t}}function Rd(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Lj(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function MA(i,t){return Rd(i,t.toTimestamp())}function xa(i){return rt(!!i,49232),ze.fromTimestamp(function(n){const l=Un(n);return new gt(l.seconds,l.nanos)}(i))}function up(i,t){return Im(i,t).canonicalString()}function Im(i,t){const n=function(c){return new ft(["projects",c.projectId,"databases",c.database])}(i).child("documents");return t===void 0?n:n.child(t)}function Uj(i){const t=ft.fromString(i);return rt(Gj(t),10190,{key:t.toString()}),t}function Pm(i,t){return up(i.databaseId,t.path)}function mm(i,t){const n=Uj(t);if(n.get(1)!==i.databaseId.projectId)throw new Ce(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ce(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Me(Fj(n))}function zj(i,t){return up(i.databaseId,t)}function OA(i){const t=Uj(i);return t.length===4?ft.emptyPath():Fj(t)}function Mm(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Fj(i){return rt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Qy(i,t,n){return{name:Pm(i,t),fields:n.value.mapValue.fields}}function VA(i,t){let n;if("targetChange"in t){t.targetChange;const l=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Le(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],d=function(g,j){return g.useProto3Json?(rt(j===void 0||typeof j=="string",58123),as.fromBase64String(j||"")):(rt(j===void 0||j instanceof Buffer||j instanceof Uint8Array,16193),as.fromUint8Array(j||new Uint8Array))}(i,t.targetChange.resumeToken),m=t.targetChange.cause,f=m&&function(g){const j=g.code===void 0?ve.UNKNOWN:Oj(g.code);return new Ce(j,g.message||"")}(m);n=new Bj(l,c,d,f||null)}else if("documentChange"in t){t.documentChange;const l=t.documentChange;l.document,l.document.name,l.document.updateTime;const c=mm(i,l.document.name),d=xa(l.document.updateTime),m=l.document.createTime?xa(l.document.createTime):ze.min(),f=new xs({mapValue:{fields:l.document.fields}}),y=os.newFoundDocument(c,d,m,f),g=l.targetIds||[],j=l.removedTargetIds||[];n=new yd(g,j,y.key,y)}else if("documentDelete"in t){t.documentDelete;const l=t.documentDelete;l.document;const c=mm(i,l.document),d=l.readTime?xa(l.readTime):ze.min(),m=os.newNoDocument(c,d),f=l.removedTargetIds||[];n=new yd([],f,m.key,m)}else if("documentRemove"in t){t.documentRemove;const l=t.documentRemove;l.document;const c=mm(i,l.document),d=l.removedTargetIds||[];n=new yd([],d,c,null)}else{if(!("filter"in t))return Le(11601,{Rt:t});{t.filter;const l=t.filter;l.targetId;const{count:c=0,unchangedNames:d}=l,m=new AA(c,d),f=l.targetId;n=new Vj(f,m)}}return n}function BA(i,t){let n;if(t instanceof Ro)n={update:Qy(i,t.key,t.value)};else if(t instanceof op)n={delete:Pm(i,t.key)};else if(t instanceof $n)n={update:Qy(i,t.key,t.data),updateMask:QA(t.fieldMask)};else{if(!(t instanceof TA))return Le(16599,{Vt:t.type});n={verify:Pm(i,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(l=>function(d,m){const f=m.transform;if(f instanceof _o)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof So)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ao)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof kd)return{fieldPath:m.field.canonicalString(),increment:f.Ae};throw Le(20930,{transform:m.transform})}(0,l))),t.precondition.isNone||(n.currentDocument=function(c,d){return d.updateTime!==void 0?{updateTime:MA(c,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Le(27497)}(i,t.precondition)),n}function LA(i,t){return i&&i.length>0?(rt(t!==void 0,14353),i.map(n=>function(c,d){let m=c.updateTime?xa(c.updateTime):xa(d);return m.isEqual(ze.min())&&(m=xa(d)),new jA(m,c.transformResults||[])}(n,t))):[]}function UA(i,t){return{documents:[zj(i,t.path)]}}function zA(i,t){const n={structuredQuery:{}},l=t.path;let c;t.collectionGroup!==null?(c=l,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=l.popLast(),n.structuredQuery.from=[{collectionId:l.lastSegment()}]),n.parent=zj(i,c);const d=function(g){if(g.length!==0)return Hj(Zs.create(g,"and"))}(t.filters);d&&(n.structuredQuery.where=d);const m=function(g){if(g.length!==0)return g.map(j=>function(A){return{field:Rr(A.field),direction:HA(A.dir)}}(j))}(t.orderBy);m&&(n.structuredQuery.orderBy=m);const f=Dm(i,t.limit);return f!==null&&(n.structuredQuery.limit=f),t.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{ft:n,parent:c}}function FA(i){let t=OA(i.parent);const n=i.structuredQuery,l=n.from?n.from.length:0;let c=null;if(l>0){rt(l===1,65062);const j=n.from[0];j.allDescendants?c=j.collectionId:t=t.child(j.collectionId)}let d=[];n.where&&(d=function(S){const A=qj(S);return A instanceof Zs&&xj(A)?A.getFilters():[A]}(n.where));let m=[];n.orderBy&&(m=function(S){return S.map(A=>function(D){return new To(Dr(D.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(A))}(n.orderBy));let f=null;n.limit&&(f=function(S){let A;return A=typeof S=="object"?S.value:S,zd(A)?null:A}(n.limit));let y=null;n.startAt&&(y=function(S){const A=!!S.before,O=S.values||[];return new wd(O,A)}(n.startAt));let g=null;return n.endAt&&(g=function(S){const A=!S.before,O=S.values||[];return new wd(O,A)}(n.endAt)),rA(t,c,m,d,f,"F",y,g)}function qA(i,t){const n=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:c})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function qj(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const l=Dr(n.unaryFilter.field);return Pt.create(l,"==",{doubleValue:NaN});case"IS_NULL":const c=Dr(n.unaryFilter.field);return Pt.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Dr(n.unaryFilter.field);return Pt.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Dr(n.unaryFilter.field);return Pt.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}}(i):i.fieldFilter!==void 0?function(n){return Pt.create(Dr(n.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Zs.create(n.compositeFilter.filters.map(l=>qj(l)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return Le(1026)}}(n.compositeFilter.op))}(i):Le(30097,{filter:i})}function HA(i){return RA[i]}function GA(i){return DA[i]}function $A(i){return IA[i]}function Rr(i){return{fieldPath:i.canonicalString()}}function Dr(i){return ss.fromServerFormat(i.fieldPath)}function Hj(i){return i instanceof Pt?function(n){if(n.op==="=="){if(Py(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NAN"}};if(Iy(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Py(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NAN"}};if(Iy(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(n.field),op:GA(n.op),value:n.value}}}(i):i instanceof Zs?function(n){const l=n.getFilters().map(c=>Hj(c));return l.length===1?l[0]:{compositeFilter:{op:$A(n.op),filters:l}}}(i):Le(54877,{filter:i})}function QA(i){const t=[];return i.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Gj(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t,n,l,c,d=ze.min(),m=ze.min(),f=as.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=n,this.purpose=l,this.sequenceNumber=c,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(t){return new Pn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t){this.yt=t}}function KA(i){const t=FA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Rm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.Cn=new WA}addToCollectionParentIndex(t,n){return this.Cn.add(n),je.resolve()}getCollectionParents(t,n){return je.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return je.resolve()}deleteFieldIndex(t,n){return je.resolve()}deleteAllFieldIndexes(t){return je.resolve()}createTargetIndexes(t,n){return je.resolve()}getDocumentsMatchingTarget(t,n){return je.resolve(null)}getIndexType(t,n){return je.resolve(0)}getFieldIndexes(t,n){return je.resolve([])}getNextCollectionGroupToUpdate(t){return je.resolve(null)}getMinOffset(t,n){return je.resolve(Ln.min())}getMinOffsetFromCollectionGroup(t,n){return je.resolve(Ln.min())}updateCollectionGroup(t,n,l){return je.resolve()}updateIndexEntries(t,n){return je.resolve()}}class WA{constructor(){this.index={}}add(t){const n=t.lastSegment(),l=t.popLast(),c=this.index[n]||new Ft(ft.comparator),d=!c.has(l);return this.index[n]=c.add(l),d}has(t){const n=t.lastSegment(),l=t.popLast(),c=this.index[n];return c&&c.has(l)}getEntries(t){return(this.index[t]||new Ft(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$j=41943040;class ys{static withCacheSize(t){return new ys(t,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,l){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys($j,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ur(0)}static cr(){return new Ur(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="LruGarbageCollector",ZA=1048576;function Xy([i,t],[n,l]){const c=Ye(i,n);return c===0?Ye(t,l):c}class JA{constructor(t){this.Ir=t,this.buffer=new Ft(Xy),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const l=this.buffer.last();Xy(n,l)<0&&(this.buffer=this.buffer.delete(l).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eE{constructor(t,n,l){this.garbageCollector=t,this.asyncQueue=n,this.localStore=l,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ke(Ky,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qr(n)?ke(Ky,"Ignoring IndexedDB error during garbage collection: ",n):await $r(n)}await this.Vr(3e5)})}}class tE{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(l=>Math.floor(n/100*l))}nthSequenceNumber(t,n){if(n===0)return je.resolve(Ud.ce);const l=new JA(n);return this.mr.forEachTarget(t,c=>l.Ar(c.sequenceNumber)).next(()=>this.mr.pr(t,c=>l.Ar(c))).next(()=>l.maxValue)}removeTargets(t,n,l){return this.mr.removeTargets(t,n,l)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(Yy)):this.getCacheSize(t).next(l=>l<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yy):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let l,c,d,m,f,y,g;const j=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),c=this.params.maximumSequenceNumbersToCollect):c=S,m=Date.now(),this.nthSequenceNumber(t,c))).next(S=>(l=S,f=Date.now(),this.removeTargets(t,l,n))).next(S=>(d=S,y=Date.now(),this.removeOrphanedDocuments(t,l))).next(S=>(g=Date.now(),wr()<=et.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-j}ms
	Determined least recently used ${c} in `+(f-m)+`ms
	Removed ${d} targets in `+(y-f)+`ms
	Removed ${S} documents in `+(g-y)+`ms
Total Duration: ${g-j}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:d,documentsRemoved:S})))}}function sE(i,t){return new tE(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.changes=new Pi(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,os.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const l=this.changes.get(n);return l!==void 0?je.resolve(l):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(t,n,l,c){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=l,this.indexManager=c}getDocument(t,n){let l=null;return this.documentOverlayCache.getOverlay(t,n).next(c=>(l=c,this.remoteDocumentCache.getEntry(t,n))).next(c=>(l!==null&&fo(l.mutation,c,Cs.empty(),gt.now()),c))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(l=>this.getLocalViewOfDocuments(t,l,Ke()).next(()=>l))}getLocalViewOfDocuments(t,n,l=Ke()){const c=wi();return this.populateOverlays(t,c,n).next(()=>this.computeViews(t,n,c,l).next(d=>{let m=lo();return d.forEach((f,y)=>{m=m.insert(f,y.overlayedDocument)}),m}))}getOverlayedDocuments(t,n){const l=wi();return this.populateOverlays(t,l,n).next(()=>this.computeViews(t,n,l,Ke()))}populateOverlays(t,n,l){const c=[];return l.forEach(d=>{n.has(d)||c.push(d)}),this.documentOverlayCache.getOverlays(t,c).next(d=>{d.forEach((m,f)=>{n.set(m,f)})})}computeViews(t,n,l,c){let d=nn();const m=po(),f=function(){return po()}();return n.forEach((y,g)=>{const j=l.get(g.key);c.has(g.key)&&(j===void 0||j.mutation instanceof $n)?d=d.insert(g.key,g):j!==void 0?(m.set(g.key,j.mutation.getFieldMask()),fo(j.mutation,g,j.mutation.getFieldMask(),gt.now())):m.set(g.key,Cs.empty())}),this.recalculateAndSaveOverlays(t,d).next(y=>(y.forEach((g,j)=>m.set(g,j)),n.forEach((g,j)=>f.set(g,new nE(j,m.get(g)??null))),f))}recalculateAndSaveOverlays(t,n){const l=po();let c=new bt((m,f)=>m-f),d=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(m=>{for(const f of m)f.keys().forEach(y=>{const g=n.get(y);if(g===null)return;let j=l.get(y)||Cs.empty();j=f.applyToLocalView(g,j),l.set(y,j);const S=(c.get(f.batchId)||Ke()).add(y);c=c.insert(f.batchId,S)})}).next(()=>{const m=[],f=c.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),g=y.key,j=y.value,S=Cj();j.forEach(A=>{if(!d.has(A)){const O=Pj(n.get(A),l.get(A));O!==null&&S.set(A,O),d=d.add(A)}}),m.push(this.documentOverlayCache.saveOverlays(t,g,S))}return je.waitFor(m)}).next(()=>l)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(l=>this.recalculateAndSaveOverlays(t,l))}getDocumentsMatchingQuery(t,n,l,c){return function(m){return Me.isDocumentKey(m.path)&&m.collectionGroup===null&&m.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Tj(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,l,c):this.getDocumentsMatchingCollectionQuery(t,n,l,c)}getNextDocuments(t,n,l,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,l,c).next(d=>{const m=c-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,l.largestBatchId,c-d.size):je.resolve(wi());let f=xo,y=d;return m.next(g=>je.forEach(g,(j,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),d.get(j)?je.resolve():this.remoteDocumentCache.getEntry(t,j).next(A=>{y=y.insert(j,A)}))).next(()=>this.populateOverlays(t,g,d)).next(()=>this.computeViews(t,y,g,Ke())).next(j=>({batchId:f,changes:Ej(j)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Me(n)).next(l=>{let c=lo();return l.isFoundDocument()&&(c=c.insert(l.key,l)),c})}getDocumentsMatchingCollectionGroupQuery(t,n,l,c){const d=n.collectionGroup;let m=lo();return this.indexManager.getCollectionParents(t,d).next(f=>je.forEach(f,y=>{const g=function(S,A){return new Yr(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,y.child(d));return this.getDocumentsMatchingCollectionQuery(t,g,l,c).next(j=>{j.forEach((S,A)=>{m=m.insert(S,A)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(t,n,l,c){let d;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,l.largestBatchId).next(m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,l,d,c))).next(m=>{d.forEach((y,g)=>{const j=g.getKey();m.get(j)===null&&(m=m.insert(j,os.newInvalidDocument(j)))});let f=lo();return m.forEach((y,g)=>{const j=d.get(y);j!==void 0&&fo(j.mutation,g,Cs.empty(),gt.now()),Hd(n,g)&&(f=f.insert(y,g))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return je.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(c){return{id:c.id,version:c.version,createTime:xa(c.createTime)}}(n)),je.resolve()}getNamedQuery(t,n){return je.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(c){return{name:c.name,query:KA(c.bundledQuery),readTime:xa(c.readTime)}}(n)),je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.overlays=new bt(Me.comparator),this.qr=new Map}getOverlay(t,n){return je.resolve(this.overlays.get(n))}getOverlays(t,n){const l=wi();return je.forEach(n,c=>this.getOverlay(t,c).next(d=>{d!==null&&l.set(c,d)})).next(()=>l)}saveOverlays(t,n,l){return l.forEach((c,d)=>{this.St(t,n,d)}),je.resolve()}removeOverlaysForBatchId(t,n,l){const c=this.qr.get(l);return c!==void 0&&(c.forEach(d=>this.overlays=this.overlays.remove(d)),this.qr.delete(l)),je.resolve()}getOverlaysForCollection(t,n,l){const c=wi(),d=n.length+1,m=new Me(n.child("")),f=this.overlays.getIteratorFrom(m);for(;f.hasNext();){const y=f.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===d&&y.largestBatchId>l&&c.set(y.getKey(),y)}return je.resolve(c)}getOverlaysForCollectionGroup(t,n,l,c){let d=new bt((g,j)=>g-j);const m=this.overlays.getIterator();for(;m.hasNext();){const g=m.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>l){let j=d.get(g.largestBatchId);j===null&&(j=wi(),d=d.insert(g.largestBatchId,j)),j.set(g.getKey(),g)}}const f=wi(),y=d.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,j)=>f.set(g,j)),!(f.size()>=c)););return je.resolve(f)}St(t,n,l){const c=this.overlays.get(l.key);if(c!==null){const m=this.qr.get(c.largestBatchId).delete(l.key);this.qr.set(c.largestBatchId,m)}this.overlays=this.overlays.insert(l.key,new SA(n,l));let d=this.qr.get(n);d===void 0&&(d=Ke(),this.qr.set(n,d)),this.qr.set(n,d.add(l.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.sessionToken=as.EMPTY_BYTE_STRING}getSessionToken(t){return je.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.Qr=new Ft(Kt.$r),this.Ur=new Ft(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const l=new Kt(t,n);this.Qr=this.Qr.add(l),this.Ur=this.Ur.add(l)}Wr(t,n){t.forEach(l=>this.addReference(l,n))}removeReference(t,n){this.Gr(new Kt(t,n))}zr(t,n){t.forEach(l=>this.removeReference(l,n))}jr(t){const n=new Me(new ft([])),l=new Kt(n,t),c=new Kt(n,t+1),d=[];return this.Ur.forEachInRange([l,c],m=>{this.Gr(m),d.push(m.key)}),d}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Me(new ft([])),l=new Kt(n,t),c=new Kt(n,t+1);let d=Ke();return this.Ur.forEachInRange([l,c],m=>{d=d.add(m.key)}),d}containsKey(t){const n=new Kt(t,0),l=this.Qr.firstAfterOrEqual(n);return l!==null&&t.isEqual(l.key)}}class Kt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Me.comparator(t.key,n.key)||Ye(t.Yr,n.Yr)}static Kr(t,n){return Ye(t.Yr,n.Yr)||Me.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Kt.$r)}checkEmpty(t){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,l,c){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new _A(d,n,l,c);this.mutationQueue.push(m);for(const f of c)this.Zr=this.Zr.add(new Kt(f.key,d)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return je.resolve(m)}lookupMutationBatch(t,n){return je.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const l=n+1,c=this.ei(l),d=c<0?0:c;return je.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?tp:this.tr-1)}getAllMutationBatches(t){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const l=new Kt(n,0),c=new Kt(n,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([l,c],m=>{const f=this.Xr(m.Yr);d.push(f)}),je.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,n){let l=new Ft(Ye);return n.forEach(c=>{const d=new Kt(c,0),m=new Kt(c,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,m],f=>{l=l.add(f.Yr)})}),je.resolve(this.ti(l))}getAllMutationBatchesAffectingQuery(t,n){const l=n.path,c=l.length+1;let d=l;Me.isDocumentKey(d)||(d=d.child(""));const m=new Kt(new Me(d),0);let f=new Ft(Ye);return this.Zr.forEachWhile(y=>{const g=y.key.path;return!!l.isPrefixOf(g)&&(g.length===c&&(f=f.add(y.Yr)),!0)},m),je.resolve(this.ti(f))}ti(t){const n=[];return t.forEach(l=>{const c=this.Xr(l);c!==null&&n.push(c)}),n}removeMutationBatch(t,n){rt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let l=this.Zr;return je.forEach(n.mutations,c=>{const d=new Kt(c.key,n.batchId);return l=l.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)}).next(()=>{this.Zr=l})}ir(t){}containsKey(t,n){const l=new Kt(n,0),c=this.Zr.firstAfterOrEqual(l);return je.resolve(n.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,je.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t){this.ri=t,this.docs=function(){return new bt(Me.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const l=n.key,c=this.docs.get(l),d=c?c.size:0,m=this.ri(n);return this.docs=this.docs.insert(l,{document:n.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(t,l.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const l=this.docs.get(n);return je.resolve(l?l.document.mutableCopy():os.newInvalidDocument(n))}getEntries(t,n){let l=nn();return n.forEach(c=>{const d=this.docs.get(c);l=l.insert(c,d?d.document.mutableCopy():os.newInvalidDocument(c))}),je.resolve(l)}getDocumentsMatchingQuery(t,n,l,c){let d=nn();const m=n.path,f=new Me(m.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:g,value:{document:j}}=y.getNext();if(!m.isPrefixOf(g.path))break;g.path.length>m.length+1||BS(VS(j),l)<=0||(c.has(j.key)||Hd(n,j))&&(d=d.insert(j.key,j.mutableCopy()))}return je.resolve(d)}getAllFromCollectionGroup(t,n,l,c){Le(9500)}ii(t,n){return je.forEach(this.docs,l=>n(l))}newChangeBuffer(t){return new uE(this)}getSize(t){return je.resolve(this.size)}}class uE extends aE{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((l,c)=>{c.isValidDocument()?n.push(this.Nr.addEntry(t,c)):this.Nr.removeEntry(l)}),je.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(t){this.persistence=t,this.si=new Pi(n=>np(n),ip),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new hp,this.targetCount=0,this.ai=Ur.ur()}forEachTarget(t,n){return this.si.forEach((l,c)=>n(c)),je.resolve()}getLastRemoteSnapshotVersion(t){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return je.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(t,n,l){return l&&(this.lastRemoteSnapshotVersion=l),n>this.oi&&(this.oi=n),je.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ur(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,je.resolve()}updateTargetData(t,n){return this.Pr(n),je.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,je.resolve()}removeTargets(t,n,l){let c=0;const d=[];return this.si.forEach((m,f)=>{f.sequenceNumber<=n&&l.get(f.targetId)===null&&(this.si.delete(m),d.push(this.removeMatchingKeysForTargetId(t,f.targetId)),c++)}),je.waitFor(d).next(()=>c)}getTargetCount(t){return je.resolve(this.targetCount)}getTargetData(t,n){const l=this.si.get(n)||null;return je.resolve(l)}addMatchingKeys(t,n,l){return this._i.Wr(n,l),je.resolve()}removeMatchingKeys(t,n,l){this._i.zr(n,l);const c=this.persistence.referenceDelegate,d=[];return c&&n.forEach(m=>{d.push(c.markPotentiallyOrphaned(t,m))}),je.waitFor(d)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),je.resolve()}getMatchingKeysForTargetId(t,n){const l=this._i.Hr(n);return je.resolve(l)}containsKey(t,n){return je.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(t,n){this.ui={},this.overlays={},this.ci=new Ud(0),this.li=!1,this.li=!0,this.hi=new oE,this.referenceDelegate=t(this),this.Pi=new hE(this),this.indexManager=new XA,this.remoteDocumentCache=function(c){return new dE(c)}(l=>this.referenceDelegate.Ti(l)),this.serializer=new YA(n),this.Ii=new rE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new lE,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let l=this.ui[t.toKey()];return l||(l=new cE(n,this.referenceDelegate),this.ui[t.toKey()]=l),l}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,l){ke("MemoryPersistence","Starting transaction:",t);const c=new mE(this.ci.next());return this.referenceDelegate.Ei(),l(c).next(d=>this.referenceDelegate.di(c).next(()=>d)).toPromise().then(d=>(c.raiseOnCommittedEvent(),d))}Ai(t,n){return je.or(Object.values(this.ui).map(l=>()=>l.containsKey(t,n)))}}class mE extends US{constructor(t){super(),this.currentSequenceNumber=t}}class mp{constructor(t){this.persistence=t,this.Ri=new hp,this.Vi=null}static mi(t){return new mp(t)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(t,n,l){return this.Ri.addReference(l,n),this.fi.delete(l.toString()),je.resolve()}removeReference(t,n,l){return this.Ri.removeReference(l,n),this.fi.add(l.toString()),je.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),je.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(c=>this.fi.add(c.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(t,n.targetId).next(c=>{c.forEach(d=>this.fi.add(d.toString()))}).next(()=>l.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.fi,l=>{const c=Me.fromPath(l);return this.gi(t,c).next(d=>{d||n.removeEntry(c,ze.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(l=>{l?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return je.or([()=>je.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Dd{constructor(t,n){this.persistence=t,this.pi=new Pi(l=>qS(l.path),(l,c)=>l.isEqual(c)),this.garbageCollector=sE(this,n)}static mi(t,n){return new Dd(t,n)}Ei(){}di(t){return je.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(l=>n.next(c=>l+c))}wr(t){let n=0;return this.pr(t,l=>{n++}).next(()=>n)}pr(t,n){return je.forEach(this.pi,(l,c)=>this.br(t,l,c).next(d=>d?je.resolve():n(c)))}removeTargets(t,n,l){return this.persistence.getTargetCache().removeTargets(t,n,l)}removeOrphanedDocuments(t,n){let l=0;const c=this.persistence.getRemoteDocumentCache(),d=c.newChangeBuffer();return c.ii(t,m=>this.br(t,m,n).next(f=>{f||(l++,d.removeEntry(m,ze.min()))})).next(()=>d.apply(t)).next(()=>l)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),je.resolve()}removeTarget(t,n){const l=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,l)}addReference(t,n,l){return this.pi.set(l,t.currentSequenceNumber),je.resolve()}removeReference(t,n,l){return this.pi.set(l,t.currentSequenceNumber),je.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),je.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=fd(t.data.value)),n}br(t,n,l){return je.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const c=this.pi.get(n);return je.resolve(c!==void 0&&c>l)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t,n,l,c){this.targetId=t,this.fromCache=n,this.Es=l,this.ds=c}static As(t,n){let l=Ke(),c=Ke();for(const d of n.docChanges)switch(d.type){case 0:l=l.add(d.doc.key);break;case 1:c=c.add(d.doc.key)}return new pp(t,n.fromCache,l,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return l_()?8:zS(i_())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,l,c){const d={result:null};return this.ys(t,n).next(m=>{d.result=m}).next(()=>{if(!d.result)return this.ws(t,n,c,l).next(m=>{d.result=m})}).next(()=>{if(d.result)return;const m=new pE;return this.Ss(t,n,m).next(f=>{if(d.result=f,this.Vs)return this.bs(t,n,m,f.size)})}).next(()=>d.result)}bs(t,n,l,c){return l.documentReadCount<this.fs?(wr()<=et.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),je.resolve()):(wr()<=et.DEBUG&&ke("QueryEngine","Query:",kr(n),"scans",l.documentReadCount,"local documents and returns",c,"documents as results."),l.documentReadCount>this.gs*c?(wr()<=et.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ya(n))):je.resolve())}ys(t,n){if(By(n))return je.resolve(null);let l=ya(n);return this.indexManager.getIndexType(t,l).next(c=>c===0?null:(n.limit!==null&&c===1&&(n=Rm(n,null,"F"),l=ya(n)),this.indexManager.getDocumentsMatchingTarget(t,l).next(d=>{const m=Ke(...d);return this.ps.getDocuments(t,m).next(f=>this.indexManager.getMinOffset(t,l).next(y=>{const g=this.Ds(n,f);return this.Cs(n,g,m,y.readTime)?this.ys(t,Rm(n,null,"F")):this.vs(t,g,n,y)}))})))}ws(t,n,l,c){return By(n)||c.isEqual(ze.min())?je.resolve(null):this.ps.getDocuments(t,l).next(d=>{const m=this.Ds(n,d);return this.Cs(n,m,l,c)?je.resolve(null):(wr()<=et.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),kr(n)),this.vs(t,m,n,OS(c,xo)).next(f=>f))})}Ds(t,n){let l=new Ft(Sj(t));return n.forEach((c,d)=>{Hd(t,d)&&(l=l.add(d))}),l}Cs(t,n,l,c){if(t.limit===null)return!1;if(l.size!==n.size)return!0;const d=t.limitType==="F"?n.last():n.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(c)>0)}Ss(t,n,l){return wr()<=et.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",kr(n)),this.ps.getDocumentsMatchingQuery(t,n,Ln.min(),l)}vs(t,n,l,c){return this.ps.getDocumentsMatchingQuery(t,l,c).next(d=>(n.forEach(m=>{d=d.insert(m.key,m)}),d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="LocalStore",gE=3e8;class vE{constructor(t,n,l,c){this.persistence=t,this.Fs=n,this.serializer=c,this.Ms=new bt(Ye),this.xs=new Pi(d=>np(d),ip),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(l)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new iE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function yE(i,t,n,l){return new vE(i,t,n,l)}async function Yj(i,t){const n=Fe(i);return await n.persistence.runTransaction("Handle user change","readonly",l=>{let c;return n.mutationQueue.getAllMutationBatches(l).next(d=>(c=d,n.Bs(t),n.mutationQueue.getAllMutationBatches(l))).next(d=>{const m=[],f=[];let y=Ke();for(const g of c){m.push(g.batchId);for(const j of g.mutations)y=y.add(j.key)}for(const g of d){f.push(g.batchId);for(const j of g.mutations)y=y.add(j.key)}return n.localDocuments.getDocuments(l,y).next(g=>({Ls:g,removedBatchIds:m,addedBatchIds:f}))})})}function xE(i,t){const n=Fe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const c=t.batch.keys(),d=n.Ns.newChangeBuffer({trackRemovals:!0});return function(f,y,g,j){const S=g.batch,A=S.keys();let O=je.resolve();return A.forEach(D=>{O=O.next(()=>j.getEntry(y,D)).next(H=>{const U=g.docVersions.get(D);rt(U!==null,48541),H.version.compareTo(U)<0&&(S.applyToRemoteDocument(H,g),H.isValidDocument()&&(H.setReadTime(g.commitVersion),j.addEntry(H)))})}),O.next(()=>f.mutationQueue.removeMutationBatch(y,S))}(n,l,t,d).next(()=>d.apply(l)).next(()=>n.mutationQueue.performConsistencyCheck(l)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(l,c,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,function(f){let y=Ke();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(y=y.add(f.batch.mutations[g].key));return y}(t))).next(()=>n.localDocuments.getDocuments(l,c))})}function Kj(i){const t=Fe(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function jE(i,t){const n=Fe(i),l=t.snapshotVersion;let c=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=n.Ns.newChangeBuffer({trackRemovals:!0});c=n.Ms;const f=[];t.targetChanges.forEach((j,S)=>{const A=c.get(S);if(!A)return;f.push(n.Pi.removeMatchingKeys(d,j.removedDocuments,S).next(()=>n.Pi.addMatchingKeys(d,j.addedDocuments,S)));let O=A.withSequenceNumber(d.currentSequenceNumber);t.targetMismatches.get(S)!==null?O=O.withResumeToken(as.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):j.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(j.resumeToken,l)),c=c.insert(S,O),function(H,U,q){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=gE?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(A,O,j)&&f.push(n.Pi.updateTargetData(d,O))});let y=nn(),g=Ke();if(t.documentUpdates.forEach(j=>{t.resolvedLimboDocuments.has(j)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(d,j))}),f.push(NE(d,m,t.documentUpdates).next(j=>{y=j.ks,g=j.qs})),!l.isEqual(ze.min())){const j=n.Pi.getLastRemoteSnapshotVersion(d).next(S=>n.Pi.setTargetsMetadata(d,d.currentSequenceNumber,l));f.push(j)}return je.waitFor(f).next(()=>m.apply(d)).next(()=>n.localDocuments.getLocalViewOfDocuments(d,y,g)).next(()=>y)}).then(d=>(n.Ms=c,d))}function NE(i,t,n){let l=Ke(),c=Ke();return n.forEach(d=>l=l.add(d)),t.getEntries(i,l).next(d=>{let m=nn();return n.forEach((f,y)=>{const g=d.get(f);y.isFoundDocument()!==g.isFoundDocument()&&(c=c.add(f)),y.isNoDocument()&&y.version.isEqual(ze.min())?(t.removeEntry(f,y.readTime),m=m.insert(f,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),m=m.insert(f,y)):ke(fp,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",y.version)}),{ks:m,qs:c}})}function bE(i,t){const n=Fe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",l=>(t===void 0&&(t=tp),n.mutationQueue.getNextMutationBatchAfterBatchId(l,t)))}function TE(i,t){const n=Fe(i);return n.persistence.runTransaction("Allocate target","readwrite",l=>{let c;return n.Pi.getTargetData(l,t).next(d=>d?(c=d,je.resolve(c)):n.Pi.allocateTargetId(l).next(m=>(c=new Pn(t,m,"TargetPurposeListen",l.currentSequenceNumber),n.Pi.addTargetData(l,c).next(()=>c))))}).then(l=>{const c=n.Ms.get(l.targetId);return(c===null||l.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(l.targetId,l),n.xs.set(t,l.targetId)),l})}async function Om(i,t,n){const l=Fe(i),c=l.Ms.get(t),d=n?"readwrite":"readwrite-primary";try{n||await l.persistence.runTransaction("Release target",d,m=>l.persistence.referenceDelegate.removeTarget(m,c))}catch(m){if(!Qr(m))throw m;ke(fp,`Failed to update sequence numbers for target ${t}: ${m}`)}l.Ms=l.Ms.remove(t),l.xs.delete(c.target)}function Wy(i,t,n){const l=Fe(i);let c=ze.min(),d=Ke();return l.persistence.runTransaction("Execute query","readwrite",m=>function(y,g,j){const S=Fe(y),A=S.xs.get(j);return A!==void 0?je.resolve(S.Ms.get(A)):S.Pi.getTargetData(g,j)}(l,m,ya(t)).next(f=>{if(f)return c=f.lastLimboFreeSnapshotVersion,l.Pi.getMatchingKeysForTargetId(m,f.targetId).next(y=>{d=y})}).next(()=>l.Fs.getDocumentsMatchingQuery(m,t,n?c:ze.min(),n?d:Ke())).next(f=>(_E(l,oA(t),f),{documents:f,Qs:d})))}function _E(i,t,n){let l=i.Os.get(t)||ze.min();n.forEach((c,d)=>{d.readTime.compareTo(l)>0&&(l=d.readTime)}),i.Os.set(t,l)}class Zy{constructor(){this.activeTargetIds=pA()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class SE{constructor(){this.Mo=new Zy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,l){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,l){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Zy,Promise.resolve()}handleUserChange(t,n,l){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="ConnectivityMonitor";class ex{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(Jy,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ke(Jy,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od=null;function Vm(){return od===null?od=function(){return 268435456+Math.round(2147483648*Math.random())}():od++,"0x"+od.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RestConnection",EE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CE{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",l=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${l}/databases/${c}`,this.Wo=this.databaseId.database===Ed?`project_id=${l}`:`project_id=${l}&database_id=${c}`}Go(t,n,l,c,d){const m=Vm(),f=this.zo(t,n.toUriEncodedString());ke(pm,`Sending RPC '${t}' ${m}:`,f,l);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,c,d);const{host:g}=new URL(f),j=Wm(g);return this.Jo(t,f,y,l,j).then(S=>(ke(pm,`Received RPC '${t}' ${m}: `,S),S),S=>{throw Or(pm,`RPC '${t}' ${m} failed with error: `,S,"url: ",f,"request:",l),S})}Ho(t,n,l,c,d,m){return this.Go(t,n,l,c,d)}jo(t,n,l){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((c,d)=>t[d]=c),l&&l.headers.forEach((c,d)=>t[d]=c)}zo(t,n){const l=EE[t];return`${this.Uo}/v1/${n}:${l}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="WebChannelConnection";class kE extends CE{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,l,c,d){const m=Vm();return new Promise((f,y)=>{const g=new Zx;g.setWithCredentials(!0),g.listenOnce(Jx.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case pd.NO_ERROR:const S=g.getResponseJson();ke(rs,`XHR for RPC '${t}' ${m} received:`,JSON.stringify(S)),f(S);break;case pd.TIMEOUT:ke(rs,`RPC '${t}' ${m} timed out`),y(new Ce(ve.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const A=g.getStatus();if(ke(rs,`RPC '${t}' ${m} failed with status:`,A,"response text:",g.getResponseText()),A>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const D=O?.error;if(D&&D.status&&D.message){const H=function(q){const Y=q.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Y)>=0?Y:ve.UNKNOWN}(D.status);y(new Ce(H,D.message))}else y(new Ce(ve.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new Ce(ve.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:t,streamId:m,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ke(rs,`RPC '${t}' ${m} completed.`)}});const j=JSON.stringify(c);ke(rs,`RPC '${t}' ${m} sending request:`,c),g.send(n,"POST",j,l,15)})}T_(t,n,l){const c=Vm(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=sj(),f=tj(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,l),y.encodeInitMessageHeaders=!0;const j=d.join("");ke(rs,`Creating RPC '${t}' stream ${c}: ${j}`,y);const S=m.createWebChannel(j,y);this.I_(S);let A=!1,O=!1;const D=new wE({Yo:U=>{O?ke(rs,`Not sending because RPC '${t}' stream ${c} is closed:`,U):(A||(ke(rs,`Opening RPC '${t}' stream ${c} transport.`),S.open(),A=!0),ke(rs,`RPC '${t}' stream ${c} sending:`,U),S.send(U))},Zo:()=>S.close()}),H=(U,q,Y)=>{U.listen(q,P=>{try{Y(P)}catch(Q){setTimeout(()=>{throw Q},0)}})};return H(S,ro.EventType.OPEN,()=>{O||(ke(rs,`RPC '${t}' stream ${c} transport opened.`),D.o_())}),H(S,ro.EventType.CLOSE,()=>{O||(O=!0,ke(rs,`RPC '${t}' stream ${c} transport closed`),D.a_(),this.E_(S))}),H(S,ro.EventType.ERROR,U=>{O||(O=!0,Or(rs,`RPC '${t}' stream ${c} transport errored. Name:`,U.name,"Message:",U.message),D.a_(new Ce(ve.UNAVAILABLE,"The operation could not be completed")))}),H(S,ro.EventType.MESSAGE,U=>{if(!O){const q=U.data[0];rt(!!q,16349);const Y=q,P=Y?.error||Y[0]?.error;if(P){ke(rs,`RPC '${t}' stream ${c} received error:`,P);const Q=P.status;let se=function(w){const b=It[w];if(b!==void 0)return Oj(b)}(Q),z=P.message;se===void 0&&(se=ve.INTERNAL,z="Unknown error status: "+Q+" with message "+P.message),O=!0,D.a_(new Ce(se,z)),S.close()}else ke(rs,`RPC '${t}' stream ${c} received:`,q),D.u_(q)}}),H(f,ej.STAT_EVENT,U=>{U.stat===_m.PROXY?ke(rs,`RPC '${t}' stream ${c} detected buffering proxy`):U.stat===_m.NOPROXY&&ke(rs,`RPC '${t}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(i){return new PA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(t,n,l=1e3,c=1.5,d=6e4){this.Mi=t,this.timerId=n,this.d_=l,this.A_=c,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),l=Math.max(0,Date.now()-this.f_),c=Math.max(0,n-l);c>0&&ke("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${l} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,c,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="PersistentStream";class Wj{constructor(t,n,l,c,d,m,f,y){this.Mi=t,this.S_=l,this.b_=c,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xj(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(sn(n.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([l,c])=>{this.D_===n&&this.G_(l,c)},l=>{t(()=>{const c=new Ce(ve.UNKNOWN,"Fetching auth token failed: "+l.message);return this.z_(c)})})}G_(t,n){const l=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{l(()=>this.listener.Xo())}),this.stream.t_(()=>{l(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(c=>{l(()=>this.z_(c))}),this.stream.onMessage(c=>{l(()=>++this.F_==1?this.J_(c):this.onNext(c))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ke(tx,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(ke(tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RE extends Wj{constructor(t,n,l,c,d,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,l,c,m),this.serializer=d}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=VA(this.serializer,t),l=function(d){if(!("targetChange"in d))return ze.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?ze.min():m.readTime?xa(m.readTime):ze.min()}(t);return this.listener.H_(n,l)}Y_(t){const n={};n.database=Mm(this.serializer),n.addTarget=function(d,m){let f;const y=m.target;if(f=wm(y)?{documents:UA(d,y)}:{query:zA(d,y).ft},f.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){f.resumeToken=Lj(d,m.resumeToken);const g=Dm(d,m.expectedCount);g!==null&&(f.expectedCount=g)}else if(m.snapshotVersion.compareTo(ze.min())>0){f.readTime=Rd(d,m.snapshotVersion.toTimestamp());const g=Dm(d,m.expectedCount);g!==null&&(f.expectedCount=g)}return f}(this.serializer,t);const l=qA(this.serializer,t);l&&(n.labels=l),this.q_(n)}Z_(t){const n={};n.database=Mm(this.serializer),n.removeTarget=t,this.q_(n)}}class DE extends Wj{constructor(t,n,l,c,d,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,l,c,m),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return rt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,rt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){rt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=LA(t.writeResults,t.commitTime),l=xa(t.commitTime);return this.listener.na(l,n)}ra(){const t={};t.database=Mm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(l=>BA(this.serializer,l))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{}class PE extends IE{constructor(t,n,l,c){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=l,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new Ce(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Go(t,Im(n,l),c,d,m)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ce(ve.UNKNOWN,d.toString())})}Ho(t,n,l,c,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,f])=>this.connection.Ho(t,Im(n,l),c,m,f,d)).catch(m=>{throw m.name==="FirebaseError"?(m.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Ce(ve.UNKNOWN,m.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ME{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sn(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="RemoteStore";class OE{constructor(t,n,l,c,d){this.localStore=t,this.datastore=n,this.asyncQueue=l,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo(m=>{l.enqueueAndForget(async()=>{Mi(this)&&(ke(Di,"Restarting streams for network reachability change."),await async function(y){const g=Fe(y);g.Ea.add(4),await Io(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Kd(g)}(this))})}),this.Ra=new ME(l,c)}}async function Kd(i){if(Mi(i))for(const t of i.da)await t(!0)}async function Io(i){for(const t of i.da)await t(!1)}function Zj(i,t){const n=Fe(i);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),xp(n)?yp(n):Kr(n).O_()&&vp(n,t))}function gp(i,t){const n=Fe(i),l=Kr(n);n.Ia.delete(t),l.O_()&&Jj(n,t),n.Ia.size===0&&(l.O_()?l.L_():Mi(n)&&n.Ra.set("Unknown"))}function vp(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ze.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Kr(i).Y_(t)}function Jj(i,t){i.Va.Ue(t),Kr(i).Z_(t)}function yp(i){i.Va=new kA({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),Kr(i).start(),i.Ra.ua()}function xp(i){return Mi(i)&&!Kr(i).x_()&&i.Ia.size>0}function Mi(i){return Fe(i).Ea.size===0}function eN(i){i.Va=void 0}async function VE(i){i.Ra.set("Online")}async function BE(i){i.Ia.forEach((t,n)=>{vp(i,t)})}async function LE(i,t){eN(i),xp(i)?(i.Ra.ha(t),yp(i)):i.Ra.set("Unknown")}async function UE(i,t,n){if(i.Ra.set("Online"),t instanceof Bj&&t.state===2&&t.cause)try{await async function(c,d){const m=d.cause;for(const f of d.targetIds)c.Ia.has(f)&&(await c.remoteSyncer.rejectListen(f,m),c.Ia.delete(f),c.Va.removeTarget(f))}(i,t)}catch(l){ke(Di,"Failed to remove targets %s: %s ",t.targetIds.join(","),l),await Id(i,l)}else if(t instanceof yd?i.Va.Ze(t):t instanceof Vj?i.Va.st(t):i.Va.tt(t),!n.isEqual(ze.min()))try{const l=await Kj(i.localStore);n.compareTo(l)>=0&&await function(d,m){const f=d.Va.Tt(m);return f.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const j=d.Ia.get(g);j&&d.Ia.set(g,j.withResumeToken(y.resumeToken,m))}}),f.targetMismatches.forEach((y,g)=>{const j=d.Ia.get(y);if(!j)return;d.Ia.set(y,j.withResumeToken(as.EMPTY_BYTE_STRING,j.snapshotVersion)),Jj(d,y);const S=new Pn(j.target,y,g,j.sequenceNumber);vp(d,S)}),d.remoteSyncer.applyRemoteEvent(f)}(i,n)}catch(l){ke(Di,"Failed to raise snapshot:",l),await Id(i,l)}}async function Id(i,t,n){if(!Qr(t))throw t;i.Ea.add(1),await Io(i),i.Ra.set("Offline"),n||(n=()=>Kj(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ke(Di,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Kd(i)})}function tN(i,t){return t().catch(n=>Id(i,n,t))}async function Xd(i){const t=Fe(i),n=qn(t);let l=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:tp;for(;zE(t);)try{const c=await bE(t.localStore,l);if(c===null){t.Ta.length===0&&n.L_();break}l=c.batchId,FE(t,c)}catch(c){await Id(t,c)}sN(t)&&aN(t)}function zE(i){return Mi(i)&&i.Ta.length<10}function FE(i,t){i.Ta.push(t);const n=qn(i);n.O_()&&n.X_&&n.ea(t.mutations)}function sN(i){return Mi(i)&&!qn(i).x_()&&i.Ta.length>0}function aN(i){qn(i).start()}async function qE(i){qn(i).ra()}async function HE(i){const t=qn(i);for(const n of i.Ta)t.ea(n.mutations)}async function GE(i,t,n){const l=i.Ta.shift(),c=cp.from(l,t,n);await tN(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),await Xd(i)}async function $E(i,t){t&&qn(i).X_&&await async function(l,c){if(function(m){return EA(m)&&m!==ve.ABORTED}(c.code)){const d=l.Ta.shift();qn(l).B_(),await tN(l,()=>l.remoteSyncer.rejectFailedWrite(d.batchId,c)),await Xd(l)}}(i,t),sN(i)&&aN(i)}async function sx(i,t){const n=Fe(i);n.asyncQueue.verifyOperationInProgress(),ke(Di,"RemoteStore received new credentials");const l=Mi(n);n.Ea.add(3),await Io(n),l&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Kd(n)}async function QE(i,t){const n=Fe(i);t?(n.Ea.delete(2),await Kd(n)):t||(n.Ea.add(2),await Io(n),n.Ra.set("Unknown"))}function Kr(i){return i.ma||(i.ma=function(n,l,c){const d=Fe(n);return d.sa(),new RE(l,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,c)}(i.datastore,i.asyncQueue,{Xo:VE.bind(null,i),t_:BE.bind(null,i),r_:LE.bind(null,i),H_:UE.bind(null,i)}),i.da.push(async t=>{t?(i.ma.B_(),xp(i)?yp(i):i.Ra.set("Unknown")):(await i.ma.stop(),eN(i))})),i.ma}function qn(i){return i.fa||(i.fa=function(n,l,c){const d=Fe(n);return d.sa(),new DE(l,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,c)}(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:qE.bind(null,i),r_:$E.bind(null,i),ta:HE.bind(null,i),na:GE.bind(null,i)}),i.da.push(async t=>{t?(i.fa.B_(),await Xd(i)):(await i.fa.stop(),i.Ta.length>0&&(ke(Di,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))})),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(t,n,l,c,d){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=l,this.op=c,this.removalCallback=d,this.deferred=new Za,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,l,c,d){const m=Date.now()+l,f=new jp(t,n,m,c,d);return f.start(l),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ve.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Np(i,t){if(sn("AsyncQueue",`${t}: ${i}`),Qr(i))return new Ce(ve.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{static emptySet(t){return new Pr(t.comparator)}constructor(t){this.comparator=t?(n,l)=>t(n,l)||Me.comparator(n.key,l.key):(n,l)=>Me.comparator(n.key,l.key),this.keyedMap=lo(),this.sortedSet=new bt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,l)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Pr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),l=t.sortedSet.getIterator();for(;n.hasNext();){const c=n.getNext().key,d=l.getNext().key;if(!c.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const l=new Pr;return l.comparator=this.comparator,l.keyedMap=t,l.sortedSet=n,l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.ga=new bt(Me.comparator)}track(t){const n=t.doc.key,l=this.ga.get(n);l?t.type!==0&&l.type===3?this.ga=this.ga.insert(n,t):t.type===3&&l.type!==1?this.ga=this.ga.insert(n,{type:l.type,doc:t.doc}):t.type===2&&l.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&l.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&l.type===0?this.ga=this.ga.remove(n):t.type===1&&l.type===2?this.ga=this.ga.insert(n,{type:1,doc:l.doc}):t.type===0&&l.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Le(63341,{Rt:t,pa:l}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,l)=>{t.push(l)}),t}}class zr{constructor(t,n,l,c,d,m,f,y,g){this.query=t,this.docs=n,this.oldDocs=l,this.docChanges=c,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,n,l,c,d){const m=[];return n.forEach(f=>{m.push({type:0,doc:f})}),new zr(t,n,Pr.emptySet(n),m,l,c,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&qd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,l=t.docChanges;if(n.length!==l.length)return!1;for(let c=0;c<n.length;c++)if(n[c].type!==l[c].type||!n[c].doc.isEqual(l[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class KE{constructor(){this.queries=nx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,l){const c=Fe(n),d=c.queries;c.queries=nx(),d.forEach((m,f)=>{for(const y of f.Sa)y.onError(l)})})(this,new Ce(ve.ABORTED,"Firestore shutting down"))}}function nx(){return new Pi(i=>_j(i),qd)}async function nN(i,t){const n=Fe(i);let l=3;const c=t.query;let d=n.queries.get(c);d?!d.ba()&&t.Da()&&(l=2):(d=new YE,l=t.Da()?0:1);try{switch(l){case 0:d.wa=await n.onListen(c,!0);break;case 1:d.wa=await n.onListen(c,!1);break;case 2:await n.onFirstRemoteStoreListen(c)}}catch(m){const f=Np(m,`Initialization of query '${kr(t.query)}' failed`);return void t.onError(f)}n.queries.set(c,d),d.Sa.push(t),t.va(n.onlineState),d.wa&&t.Fa(d.wa)&&bp(n)}async function iN(i,t){const n=Fe(i),l=t.query;let c=3;const d=n.queries.get(l);if(d){const m=d.Sa.indexOf(t);m>=0&&(d.Sa.splice(m,1),d.Sa.length===0?c=t.Da()?0:1:!d.ba()&&t.Da()&&(c=2))}switch(c){case 0:return n.queries.delete(l),n.onUnlisten(l,!0);case 1:return n.queries.delete(l),n.onUnlisten(l,!1);case 2:return n.onLastRemoteStoreUnlisten(l);default:return}}function XE(i,t){const n=Fe(i);let l=!1;for(const c of t){const d=c.query,m=n.queries.get(d);if(m){for(const f of m.Sa)f.Fa(c)&&(l=!0);m.wa=c}}l&&bp(n)}function WE(i,t,n){const l=Fe(i),c=l.queries.get(t);if(c)for(const d of c.Sa)d.onError(n);l.queries.delete(t)}function bp(i){i.Ca.forEach(t=>{t.next()})}var Bm,ix;(ix=Bm||(Bm={})).Ma="default",ix.Cache="cache";class rN{constructor(t,n,l){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=l||{}}Fa(t){if(!this.options.includeMetadataChanges){const l=[];for(const c of t.docChanges)c.type!==3&&l.push(c);t=new zr(t.query,t.docs,t.oldDocs,l,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const l=n!=="Offline";return(!this.options.qa||!l)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=zr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t){this.key=t}}class oN{constructor(t){this.key=t}}class ZE{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=Sj(t),this.tu=new Pr(this.eu)}get nu(){return this.Ya}ru(t,n){const l=n?n.iu:new ax,c=n?n.tu:this.tu;let d=n?n.mutatedKeys:this.mutatedKeys,m=c,f=!1;const y=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,g=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal((j,S)=>{const A=c.get(j),O=Hd(this.query,S)?S:null,D=!!A&&this.mutatedKeys.has(A.key),H=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;A&&O?A.data.isEqual(O.data)?D!==H&&(l.track({type:3,doc:O}),U=!0):this.su(A,O)||(l.track({type:2,doc:O}),U=!0,(y&&this.eu(O,y)>0||g&&this.eu(O,g)<0)&&(f=!0)):!A&&O?(l.track({type:0,doc:O}),U=!0):A&&!O&&(l.track({type:1,doc:A}),U=!0,(y||g)&&(f=!0)),U&&(O?(m=m.add(O),d=H?d.add(j):d.delete(j)):(m=m.delete(j),d=d.delete(j)))}),this.query.limit!==null)for(;m.size>this.query.limit;){const j=this.query.limitType==="F"?m.last():m.first();m=m.delete(j.key),d=d.delete(j.key),l.track({type:1,doc:j})}return{tu:m,iu:l,Cs:f,mutatedKeys:d}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,l,c){const d=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const m=t.iu.ya();m.sort((j,S)=>function(O,D){const H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:U})}};return H(O)-H(D)}(j.type,S.type)||this.eu(j.doc,S.doc)),this.ou(l),c=c??!1;const f=n&&!c?this._u():[],y=this.Xa.size===0&&this.current&&!c?1:0,g=y!==this.Za;return this.Za=y,m.length!==0||g?{snapshot:new zr(this.query,t.tu,d,m,t.mutatedKeys,y===0,g,!1,!!l&&l.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ax,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ke(),this.tu.forEach(l=>{this.uu(l.key)&&(this.Xa=this.Xa.add(l.key))});const n=[];return t.forEach(l=>{this.Xa.has(l)||n.push(new oN(l))}),this.Xa.forEach(l=>{t.has(l)||n.push(new lN(l))}),n}cu(t){this.Ya=t.Qs,this.Xa=Ke();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return zr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tp="SyncEngine";class JE{constructor(t,n,l){this.query=t,this.targetId=n,this.view=l}}class eC{constructor(t){this.key=t,this.hu=!1}}class tC{constructor(t,n,l,c,d,m){this.localStore=t,this.remoteStore=n,this.eventManager=l,this.sharedClientState=c,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Pi(f=>_j(f),qd),this.Iu=new Map,this.Eu=new Set,this.du=new bt(Me.comparator),this.Au=new Map,this.Ru=new hp,this.Vu={},this.mu=new Map,this.fu=Ur.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sC(i,t,n=!0){const l=pN(i);let c;const d=l.Tu.get(t);return d?(l.sharedClientState.addLocalQueryTarget(d.targetId),c=d.view.lu()):c=await cN(l,t,n,!0),c}async function aC(i,t){const n=pN(i);await cN(n,t,!0,!1)}async function cN(i,t,n,l){const c=await TE(i.localStore,ya(t)),d=c.targetId,m=i.sharedClientState.addLocalQueryTarget(d,n);let f;return l&&(f=await nC(i,t,d,m==="current",c.resumeToken)),i.isPrimaryClient&&n&&Zj(i.remoteStore,c),f}async function nC(i,t,n,l,c){i.pu=(S,A,O)=>async function(H,U,q,Y){let P=U.view.ru(q);P.Cs&&(P=await Wy(H.localStore,U.query,!1).then(({documents:M})=>U.view.ru(M,P)));const Q=Y&&Y.targetChanges.get(U.targetId),se=Y&&Y.targetMismatches.get(U.targetId)!=null,z=U.view.applyChanges(P,H.isPrimaryClient,Q,se);return lx(H,U.targetId,z.au),z.snapshot}(i,S,A,O);const d=await Wy(i.localStore,t,!0),m=new ZE(t,d.Qs),f=m.ru(d.documents),y=Do.createSynthesizedTargetChangeForCurrentChange(n,l&&i.onlineState!=="Offline",c),g=m.applyChanges(f,i.isPrimaryClient,y);lx(i,n,g.au);const j=new JE(t,n,m);return i.Tu.set(t,j),i.Iu.has(n)?i.Iu.get(n).push(t):i.Iu.set(n,[t]),g.snapshot}async function iC(i,t,n){const l=Fe(i),c=l.Tu.get(t),d=l.Iu.get(c.targetId);if(d.length>1)return l.Iu.set(c.targetId,d.filter(m=>!qd(m,t))),void l.Tu.delete(t);l.isPrimaryClient?(l.sharedClientState.removeLocalQueryTarget(c.targetId),l.sharedClientState.isActiveQueryTarget(c.targetId)||await Om(l.localStore,c.targetId,!1).then(()=>{l.sharedClientState.clearQueryState(c.targetId),n&&gp(l.remoteStore,c.targetId),Lm(l,c.targetId)}).catch($r)):(Lm(l,c.targetId),await Om(l.localStore,c.targetId,!0))}async function rC(i,t){const n=Fe(i),l=n.Tu.get(t),c=n.Iu.get(l.targetId);n.isPrimaryClient&&c.length===1&&(n.sharedClientState.removeLocalQueryTarget(l.targetId),gp(n.remoteStore,l.targetId))}async function lC(i,t,n){const l=pC(i);try{const c=await function(m,f){const y=Fe(m),g=gt.now(),j=f.reduce((O,D)=>O.add(D.key),Ke());let S,A;return y.persistence.runTransaction("Locally write mutations","readwrite",O=>{let D=nn(),H=Ke();return y.Ns.getEntries(O,j).next(U=>{D=U,D.forEach((q,Y)=>{Y.isValidDocument()||(H=H.add(q))})}).next(()=>y.localDocuments.getOverlayedDocuments(O,D)).next(U=>{S=U;const q=[];for(const Y of f){const P=bA(Y,S.get(Y.key).overlayedDocument);P!=null&&q.push(new $n(Y.key,P,gj(P.value.mapValue),Ws.exists(!0)))}return y.mutationQueue.addMutationBatch(O,g,q,f)}).next(U=>{A=U;const q=U.applyToLocalDocumentSet(S,H);return y.documentOverlayCache.saveOverlays(O,U.batchId,q)})}).then(()=>({batchId:A.batchId,changes:Ej(S)}))}(l.localStore,t);l.sharedClientState.addPendingMutation(c.batchId),function(m,f,y){let g=m.Vu[m.currentUser.toKey()];g||(g=new bt(Ye)),g=g.insert(f,y),m.Vu[m.currentUser.toKey()]=g}(l,c.batchId,n),await Po(l,c.changes),await Xd(l.remoteStore)}catch(c){const d=Np(c,"Failed to persist write");n.reject(d)}}async function dN(i,t){const n=Fe(i);try{const l=await jE(n.localStore,t);t.targetChanges.forEach((c,d)=>{const m=n.Au.get(d);m&&(rt(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?m.hu=!0:c.modifiedDocuments.size>0?rt(m.hu,14607):c.removedDocuments.size>0&&(rt(m.hu,42227),m.hu=!1))}),await Po(n,l,t)}catch(l){await $r(l)}}function rx(i,t,n){const l=Fe(i);if(l.isPrimaryClient&&n===0||!l.isPrimaryClient&&n===1){const c=[];l.Tu.forEach((d,m)=>{const f=m.view.va(t);f.snapshot&&c.push(f.snapshot)}),function(m,f){const y=Fe(m);y.onlineState=f;let g=!1;y.queries.forEach((j,S)=>{for(const A of S.Sa)A.va(f)&&(g=!0)}),g&&bp(y)}(l.eventManager,t),c.length&&l.Pu.H_(c),l.onlineState=t,l.isPrimaryClient&&l.sharedClientState.setOnlineState(t)}}async function oC(i,t,n){const l=Fe(i);l.sharedClientState.updateQueryState(t,"rejected",n);const c=l.Au.get(t),d=c&&c.key;if(d){let m=new bt(Me.comparator);m=m.insert(d,os.newNoDocument(d,ze.min()));const f=Ke().add(d),y=new Qd(ze.min(),new Map,new bt(Ye),m,f);await dN(l,y),l.du=l.du.remove(d),l.Au.delete(t),_p(l)}else await Om(l.localStore,t,!1).then(()=>Lm(l,t,n)).catch($r)}async function cC(i,t){const n=Fe(i),l=t.batch.batchId;try{const c=await xE(n.localStore,t);hN(n,l,null),uN(n,l),n.sharedClientState.updateMutationState(l,"acknowledged"),await Po(n,c)}catch(c){await $r(c)}}async function dC(i,t,n){const l=Fe(i);try{const c=await function(m,f){const y=Fe(m);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let j;return y.mutationQueue.lookupMutationBatch(g,f).next(S=>(rt(S!==null,37113),j=S.keys(),y.mutationQueue.removeMutationBatch(g,S))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,j,f)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,j)).next(()=>y.localDocuments.getDocuments(g,j))})}(l.localStore,t);hN(l,t,n),uN(l,t),l.sharedClientState.updateMutationState(t,"rejected",n),await Po(l,c)}catch(c){await $r(c)}}function uN(i,t){(i.mu.get(t)||[]).forEach(n=>{n.resolve()}),i.mu.delete(t)}function hN(i,t,n){const l=Fe(i);let c=l.Vu[l.currentUser.toKey()];if(c){const d=c.get(t);d&&(n?d.reject(n):d.resolve(),c=c.remove(t)),l.Vu[l.currentUser.toKey()]=c}}function Lm(i,t,n=null){i.sharedClientState.removeLocalQueryTarget(t);for(const l of i.Iu.get(t))i.Tu.delete(l),n&&i.Pu.yu(l,n);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach(l=>{i.Ru.containsKey(l)||mN(i,l)})}function mN(i,t){i.Eu.delete(t.path.canonicalString());const n=i.du.get(t);n!==null&&(gp(i.remoteStore,n),i.du=i.du.remove(t),i.Au.delete(n),_p(i))}function lx(i,t,n){for(const l of n)l instanceof lN?(i.Ru.addReference(l.key,t),uC(i,l)):l instanceof oN?(ke(Tp,"Document no longer in limbo: "+l.key),i.Ru.removeReference(l.key,t),i.Ru.containsKey(l.key)||mN(i,l.key)):Le(19791,{wu:l})}function uC(i,t){const n=t.key,l=n.path.canonicalString();i.du.get(n)||i.Eu.has(l)||(ke(Tp,"New document in limbo: "+n),i.Eu.add(l),_p(i))}function _p(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const n=new Me(ft.fromString(t)),l=i.fu.next();i.Au.set(l,new eC(n)),i.du=i.du.insert(n,l),Zj(i.remoteStore,new Pn(ya(rp(n.path)),l,"TargetPurposeLimboResolution",Ud.ce))}}async function Po(i,t,n){const l=Fe(i),c=[],d=[],m=[];l.Tu.isEmpty()||(l.Tu.forEach((f,y)=>{m.push(l.pu(y,t,n).then(g=>{if((g||n)&&l.isPrimaryClient){const j=g?!g.fromCache:n?.targetChanges.get(y.targetId)?.current;l.sharedClientState.updateQueryState(y.targetId,j?"current":"not-current")}if(g){c.push(g);const j=pp.As(y.targetId,g);d.push(j)}}))}),await Promise.all(m),l.Pu.H_(c),await async function(y,g){const j=Fe(y);try{await j.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>je.forEach(g,A=>je.forEach(A.Es,O=>j.persistence.referenceDelegate.addReference(S,A.targetId,O)).next(()=>je.forEach(A.ds,O=>j.persistence.referenceDelegate.removeReference(S,A.targetId,O)))))}catch(S){if(!Qr(S))throw S;ke(fp,"Failed to update sequence numbers: "+S)}for(const S of g){const A=S.targetId;if(!S.fromCache){const O=j.Ms.get(A),D=O.snapshotVersion,H=O.withLastLimboFreeSnapshotVersion(D);j.Ms=j.Ms.insert(A,H)}}}(l.localStore,d))}async function hC(i,t){const n=Fe(i);if(!n.currentUser.isEqual(t)){ke(Tp,"User change. New user:",t.toKey());const l=await Yj(n.localStore,t);n.currentUser=t,function(d,m){d.mu.forEach(f=>{f.forEach(y=>{y.reject(new Ce(ve.CANCELLED,m))})}),d.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,l.removedBatchIds,l.addedBatchIds),await Po(n,l.Ls)}}function mC(i,t){const n=Fe(i),l=n.Au.get(t);if(l&&l.hu)return Ke().add(l.key);{let c=Ke();const d=n.Iu.get(t);if(!d)return c;for(const m of d){const f=n.Tu.get(m);c=c.unionWith(f.view.nu)}return c}}function pN(i){const t=Fe(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=dN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oC.bind(null,t),t.Pu.H_=XE.bind(null,t.eventManager),t.Pu.yu=WE.bind(null,t.eventManager),t}function pC(i){const t=Fe(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dC.bind(null,t),t}class Pd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Yd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return yE(this.persistence,new fE,t.initialUser,this.serializer)}Cu(t){return new Qj(mp.mi,this.serializer)}Du(t){return new SE}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pd.provider={build:()=>new Pd};class fC extends Pd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){rt(this.persistence.referenceDelegate instanceof Dd,46915);const l=this.persistence.referenceDelegate.garbageCollector;return new eE(l,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new Qj(l=>Dd.mi(l,n),this.serializer)}}class Um{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=l=>rx(this.syncEngine,l,1),this.remoteStore.remoteSyncer.handleCredentialChange=hC.bind(null,this.syncEngine),await QE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new KE}()}createDatastore(t){const n=Yd(t.databaseInfo.databaseId),l=function(d){return new kE(d)}(t.databaseInfo);return function(d,m,f,y){return new PE(d,m,f,y)}(t.authCredentials,t.appCheckCredentials,l,n)}createRemoteStore(t){return function(l,c,d,m,f){return new OE(l,c,d,m,f)}(this.localStore,this.datastore,t.asyncQueue,n=>rx(this.syncEngine,n,0),function(){return ex.v()?new ex:new AE}())}createSyncEngine(t,n){return function(c,d,m,f,y,g,j){const S=new tC(c,d,m,f,y,g);return j&&(S.gu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const l=Fe(n);ke(Di,"RemoteStore shutting down."),l.Ea.add(5),await Io(l),l.Aa.shutdown(),l.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Um.provider={build:()=>new Um};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):sn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="FirestoreClient";class gC{constructor(t,n,l,c,d){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=l,this.databaseInfo=c,this.user=ls.UNAUTHENTICATED,this.clientId=ep.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(l,async m=>{ke(Hn,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m}),this.appCheckCredentials.start(l,m=>(ke(Hn,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Za;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const l=Np(n,"Failed to shutdown persistence");t.reject(l)}}),t.promise}}async function gm(i,t){i.asyncQueue.verifyOperationInProgress(),ke(Hn,"Initializing OfflineComponentProvider");const n=i.configuration;await t.initialize(n);let l=n.initialUser;i.setCredentialChangeListener(async c=>{l.isEqual(c)||(await Yj(t.localStore,c),l=c)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function ox(i,t){i.asyncQueue.verifyOperationInProgress();const n=await vC(i);ke(Hn,"Initializing OnlineComponentProvider"),await t.initialize(n,i.configuration),i.setCredentialChangeListener(l=>sx(t.remoteStore,l)),i.setAppCheckTokenChangeListener((l,c)=>sx(t.remoteStore,c)),i._onlineComponents=t}async function vC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ke(Hn,"Using user provided OfflineComponentProvider");try{await gm(i,i._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(c){return c.name==="FirebaseError"?c.code===ve.FAILED_PRECONDITION||c.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await gm(i,new Pd)}}else ke(Hn,"Using default OfflineComponentProvider"),await gm(i,new fC(void 0));return i._offlineComponents}async function gN(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ke(Hn,"Using user provided OnlineComponentProvider"),await ox(i,i._uninitializedComponentsProvider._online)):(ke(Hn,"Using default OnlineComponentProvider"),await ox(i,new Um))),i._onlineComponents}function yC(i){return gN(i).then(t=>t.syncEngine)}async function vN(i){const t=await gN(i),n=t.eventManager;return n.onListen=sC.bind(null,t.syncEngine),n.onUnlisten=iC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=aC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=rC.bind(null,t.syncEngine),n}function xC(i,t,n={}){const l=new Za;return i.asyncQueue.enqueueAndForget(async()=>function(d,m,f,y,g){const j=new fN({next:A=>{j.Nu(),m.enqueueAndForget(()=>iN(d,S));const O=A.docs.has(f);!O&&A.fromCache?g.reject(new Ce(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&A.fromCache&&y&&y.source==="server"?g.reject(new Ce(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),S=new rN(rp(f.path),j,{includeMetadataChanges:!0,qa:!0});return nN(d,S)}(await vN(i),i.asyncQueue,t,n,l)),l.promise}function jC(i,t,n={}){const l=new Za;return i.asyncQueue.enqueueAndForget(async()=>function(d,m,f,y,g){const j=new fN({next:A=>{j.Nu(),m.enqueueAndForget(()=>iN(d,S)),A.fromCache&&y.source==="server"?g.reject(new Ce(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),S=new rN(f,j,{includeMetadataChanges:!0,qa:!0});return nN(d,S)}(await vN(i),i.asyncQueue,t,n,l)),l.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="firestore.googleapis.com",dx=!0;class ux{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Ce(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xN,this.ssl=dx}else this.host=t.host,this.ssl=t.ssl??dx;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=$j;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<ZA)throw new Ce(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}MS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yN(t.experimentalLongPollingOptions??{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ce(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ce(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ce(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(l,c){return l.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Wd{constructor(t,n,l,c){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=l,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ux({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ce(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ux(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(l){if(!l)return new SS;switch(l.type){case"firstParty":return new wS(l.sessionIndex||"0",l.iamToken||null,l.authTokenFactory||null);case"provider":return l.client;default:throw new Ce(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const l=cx.get(n);l&&(ke("ComponentProvider","Removing Datastore"),cx.delete(n),l.terminate())}(this),Promise.resolve()}}function NC(i,t,n,l={}){i=an(i,Wd);const c=Wm(t),d=i._getSettings(),m={...d,emulatorOptions:i._getEmulatorOptions()},f=`${t}:${n}`;c&&(e_(`https://${f}`),n_("Firestore",!0)),d.host!==xN&&d.host!==f&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...d,host:f,ssl:c,emulatorOptions:l};if(!Td(y,m)&&(i._setSettings(y),l.mockUserToken)){let g,j;if(typeof l.mockUserToken=="string")g=l.mockUserToken,j=ls.MOCK_USER;else{g=t_(l.mockUserToken,i._app?.options.projectId);const S=l.mockUserToken.sub||l.mockUserToken.user_id;if(!S)throw new Ce(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");j=new ls(S)}i._authCredentials=new AS(new nj(g,j))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n,l){this.converter=n,this._query=l,this.type="query",this.firestore=t}withConverter(t){return new Oi(this.firestore,t,this._query)}}class Ot{constructor(t,n,l){this.converter=n,this._key=l,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ot(this.firestore,t,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,l){if(ko(n,Ot._jsonSchema))return new Ot(t,l||null,new Me(ft.fromString(n.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Mt("string",Ot._jsonSchemaVersion),referencePath:Mt("string")};class Bn extends Oi{constructor(t,n,l){super(t,n,rp(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ot(this.firestore,null,new Me(t))}withConverter(t){return new Bn(this.firestore,t,this._path)}}function cd(i,t,...n){if(i=en(i),ij("collection","path",t),i instanceof Wd){const l=ft.fromString(t,...n);return _y(l),new Bn(i,null,l)}{if(!(i instanceof Ot||i instanceof Bn))throw new Ce(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=i._path.child(ft.fromString(t,...n));return _y(l),new Bn(i.firestore,null,l)}}function xd(i,t,...n){if(i=en(i),arguments.length===1&&(t=ep.newId()),ij("doc","path",t),i instanceof Wd){const l=ft.fromString(t,...n);return Ty(l),new Ot(i,null,new Me(l))}{if(!(i instanceof Ot||i instanceof Bn))throw new Ce(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=i._path.child(ft.fromString(t,...n));return Ty(l),new Ot(i.firestore,i instanceof Bn?i.converter:null,new Me(l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="AsyncQueue";class mx{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xj(this,"async_queue_retry"),this._c=()=>{const l=fm();l&&ke(hx,"Visibility state changed to "+l.visibilityState),this.M_.w_()},this.ac=t;const n=fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Za;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Qr(t))throw t;ke(hx,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(l=>{throw this.nc=l,this.rc=!1,sn("INTERNAL UNHANDLED ERROR: ",px(l)),l}).then(l=>(this.rc=!1,l))));return this.ac=n,n}enqueueAfterDelay(t,n,l){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const c=jp.createAndSchedule(this,t,n,l,d=>this.hc(d));return this.tc.push(c),c}uc(){this.nc&&Le(47125,{Pc:px(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,l)=>n.targetTimeMs-l.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function px(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}class Xr extends Wd{constructor(t,n,l,c){super(t,n,l,c),this.type="firestore",this._queue=new mx,this._persistenceKey=c?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mx(t),this._firestoreClient=void 0,await t}}}function bC(i,t){const n=typeof i=="object"?i:pS(),l=typeof i=="string"?i:Ed,c=cS(n,"firestore").getImmediate({identifier:l});if(!c._initialized){const d=ZT("firestore");d&&NC(c,...d)}return c}function Sp(i){if(i._terminated)throw new Ce(ve.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||TC(i),i._firestoreClient}function TC(i){const t=i._freezeSettings(),n=function(c,d,m,f){return new $S(c,d,m,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yN(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new gC(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&function(c){const d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qs(as.fromBase64String(t))}catch(n){throw new Ce(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new qs(as.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ko(t,qs._jsonSchema))return qs.fromBase64String(t.bytes)}}qs._jsonSchemaVersion="firestore/bytes/1.0",qs._jsonSchema={type:Mt("string",qs._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ce(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ss(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ce(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ce(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ye(this._lat,t._lat)||Ye(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ja._jsonSchemaVersion}}static fromJSON(t){if(ko(t,ja._jsonSchema))return new ja(t.latitude,t.longitude)}}ja._jsonSchemaVersion="firestore/geoPoint/1.0",ja._jsonSchema={type:Mt("string",ja._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(l,c){if(l.length!==c.length)return!1;for(let d=0;d<l.length;++d)if(l[d]!==c[d])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Na._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ko(t,Na._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Na(t.vectorValues);throw new Ce(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Na._jsonSchemaVersion="firestore/vectorValue/1.0",Na._jsonSchema={type:Mt("string",Na._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/^__.*__$/;class SC{constructor(t,n,l){this.data=t,this.fieldMask=n,this.fieldTransforms=l}toMutation(t,n){return this.fieldMask!==null?new $n(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(t,this.data,n,this.fieldTransforms)}}class jN{constructor(t,n,l){this.data=t,this.fieldMask=n,this.fieldTransforms=l}toMutation(t,n){return new $n(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function NN(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:i})}}class Ap{constructor(t,n,l,c,d,m){this.settings=t,this.databaseId=n,this.serializer=l,this.ignoreUndefinedProperties=c,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ap({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),l=this.Vc({path:n,fc:!1});return l.gc(t),l}yc(t){const n=this.path?.child(t),l=this.Vc({path:n,fc:!1});return l.Rc(),l}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Md(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(NN(this.Ac)&&_C.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class AC{constructor(t,n,l){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=l||Yd(t)}Cc(t,n,l,c=!1){return new Ap({Ac:t,methodName:n,Dc:l,path:ss.emptyPath(),fc:!1,bc:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ep(i){const t=i._freezeSettings(),n=Yd(i._databaseId);return new AC(i._databaseId,!!t.ignoreUndefinedProperties,n)}function EC(i,t,n,l,c,d={}){const m=i.Cc(d.merge||d.mergeFields?2:0,t,n,c);wp("Data must be an object, but it was:",m,l);const f=bN(l,m);let y,g;if(d.merge)y=new Cs(m.fieldMask),g=m.fieldTransforms;else if(d.mergeFields){const j=[];for(const S of d.mergeFields){const A=zm(t,S,n);if(!m.contains(A))throw new Ce(ve.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);_N(j,A)||j.push(A)}y=new Cs(j),g=m.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,g=m.fieldTransforms;return new SC(new xs(f),y,g)}class eu extends Jd{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof eu}}class Cp extends Jd{_toFieldTransform(t){return new yA(t.path,new _o)}isEqual(t){return t instanceof Cp}}function CC(i,t,n,l){const c=i.Cc(1,t,n);wp("Data must be an object, but it was:",c,l);const d=[],m=xs.empty();Gn(l,(y,g)=>{const j=kp(t,y,n);g=en(g);const S=c.yc(j);if(g instanceof eu)d.push(j);else{const A=Mo(g,S);A!=null&&(d.push(j),m.set(j,A))}});const f=new Cs(d);return new jN(m,f,c.fieldTransforms)}function wC(i,t,n,l,c,d){const m=i.Cc(1,t,n),f=[zm(t,l,n)],y=[c];if(d.length%2!=0)throw new Ce(ve.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<d.length;A+=2)f.push(zm(t,d[A])),y.push(d[A+1]);const g=[],j=xs.empty();for(let A=f.length-1;A>=0;--A)if(!_N(g,f[A])){const O=f[A];let D=y[A];D=en(D);const H=m.yc(O);if(D instanceof eu)g.push(O);else{const U=Mo(D,H);U!=null&&(g.push(O),j.set(O,U))}}const S=new Cs(g);return new jN(j,S,m.fieldTransforms)}function kC(i,t,n,l=!1){return Mo(n,i.Cc(l?4:3,t))}function Mo(i,t){if(TN(i=en(i)))return wp("Unsupported field value:",t,i),bN(i,t);if(i instanceof Jd)return function(l,c){if(!NN(c.Ac))throw c.Sc(`${l._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Sc(`${l._methodName}() is not currently supported inside arrays`);const d=l._toFieldTransform(c);d&&c.fieldTransforms.push(d)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(l,c){const d=[];let m=0;for(const f of l){let y=Mo(f,c.wc(m));y==null&&(y={nullValue:"NULL_VALUE"}),d.push(y),m++}return{arrayValue:{values:d}}}(i,t)}return function(l,c){if((l=en(l))===null)return{nullValue:"NULL_VALUE"};if(typeof l=="number")return fA(c.serializer,l);if(typeof l=="boolean")return{booleanValue:l};if(typeof l=="string")return{stringValue:l};if(l instanceof Date){const d=gt.fromDate(l);return{timestampValue:Rd(c.serializer,d)}}if(l instanceof gt){const d=new gt(l.seconds,1e3*Math.floor(l.nanoseconds/1e3));return{timestampValue:Rd(c.serializer,d)}}if(l instanceof ja)return{geoPointValue:{latitude:l.latitude,longitude:l.longitude}};if(l instanceof qs)return{bytesValue:Lj(c.serializer,l._byteString)};if(l instanceof Ot){const d=c.databaseId,m=l.firestore._databaseId;if(!m.isEqual(d))throw c.Sc(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:up(l.firestore._databaseId||c.databaseId,l._key.path)}}if(l instanceof Na)return function(m,f){return{mapValue:{fields:{[pj]:{stringValue:fj},[Cd]:{arrayValue:{values:m.toArray().map(g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return lp(f.serializer,g)})}}}}}}(l,c);throw c.Sc(`Unsupported field value: ${Ld(l)}`)}(i,t)}function bN(i,t){const n={};return oj(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gn(i,(l,c)=>{const d=Mo(c,t.mc(l));d!=null&&(n[l]=d)}),{mapValue:{fields:n}}}function TN(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof gt||i instanceof ja||i instanceof qs||i instanceof Ot||i instanceof Jd||i instanceof Na)}function wp(i,t,n){if(!TN(n)||!rj(n)){const l=Ld(n);throw l==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+l)}}function zm(i,t,n){if((t=en(t))instanceof Zd)return t._internalPath;if(typeof t=="string")return kp(i,t);throw Md("Field path arguments must be of type string or ",i,!1,void 0,n)}const RC=new RegExp("[~\\*/\\[\\]]");function kp(i,t,n){if(t.search(RC)>=0)throw Md(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Zd(...t.split("."))._internalPath}catch{throw Md(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Md(i,t,n,l,c){const d=l&&!l.isEmpty(),m=c!==void 0;let f=`Function ${t}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(d||m)&&(y+=" (found",d&&(y+=` in field ${l}`),m&&(y+=` in document ${c}`),y+=")"),new Ce(ve.INVALID_ARGUMENT,f+i+y)}function _N(i,t){return i.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(t,n,l,c,d){this._firestore=t,this._userDataWriter=n,this._key=l,this._document=c,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new DC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(tu("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DC extends SN{data(){return super.data()}}function tu(i,t){return typeof t=="string"?kp(i,t):t instanceof Zd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ce(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rp{}class AN extends Rp{}function dd(i,t,...n){let l=[];t instanceof Rp&&l.push(t),l=l.concat(n),function(d){const m=d.filter(y=>y instanceof Dp).length,f=d.filter(y=>y instanceof su).length;if(m>1||m>0&&f>0)throw new Ce(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(l);for(const c of l)i=c._apply(i);return i}class su extends AN{constructor(t,n,l){super(),this._field=t,this._op=n,this._value=l,this.type="where"}static _create(t,n,l){return new su(t,n,l)}_apply(t){const n=this._parse(t);return EN(t._query,n),new Oi(t.firestore,t.converter,km(t._query,n))}_parse(t){const n=Ep(t.firestore);return function(d,m,f,y,g,j,S){let A;if(g.isKeyField()){if(j==="array-contains"||j==="array-contains-any")throw new Ce(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if(j==="in"||j==="not-in"){yx(S,j);const D=[];for(const H of S)D.push(vx(y,d,H));A={arrayValue:{values:D}}}else A=vx(y,d,S)}else j!=="in"&&j!=="not-in"&&j!=="array-contains-any"||yx(S,j),A=kC(f,m,S,j==="in"||j==="not-in");return Pt.create(g,j,A)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function fx(i,t,n){const l=t,c=tu("where",i);return su._create(c,l,n)}class Dp extends Rp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Dp(t,n)}_parse(t){const n=this._queryConstraints.map(l=>l._parse(t)).filter(l=>l.getFilters().length>0);return n.length===1?n[0]:Zs.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(c,d){let m=c;const f=d.getFlattenedFilters();for(const y of f)EN(m,y),m=km(m,y)}(t._query,n),new Oi(t.firestore,t.converter,km(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ip extends AN{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ip(t,n)}_apply(t){const n=function(c,d,m){if(c.startAt!==null)throw new Ce(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(c.endAt!==null)throw new Ce(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new To(d,m)}(t._query,this._field,this._direction);return new Oi(t.firestore,t.converter,function(c,d){const m=c.explicitOrderBy.concat([d]);return new Yr(c.path,c.collectionGroup,m,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t._query,n))}}function gx(i,t="asc"){const n=t,l=tu("orderBy",i);return Ip._create(l,n)}function vx(i,t,n){if(typeof(n=en(n))=="string"){if(n==="")throw new Ce(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tj(t)&&n.indexOf("/")!==-1)throw new Ce(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const l=t.path.child(ft.fromString(n));if(!Me.isDocumentKey(l))throw new Ce(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return Dy(i,new Me(l))}if(n instanceof Ot)return Dy(i,n._key);throw new Ce(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(n)}.`)}function yx(i,t){if(!Array.isArray(i)||i.length===0)throw new Ce(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function EN(i,t){const n=function(c,d){for(const m of c)for(const f of m.getFlattenedFilters())if(d.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Ce(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ce(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class PC{convertValue(t,n="none"){switch(Fn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ct(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(zn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Le(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const l={};return Gn(t,(c,d)=>{l[c]=this.convertValue(d,n)}),l}convertVectorValue(t){const n=t.fields?.[Cd].arrayValue?.values?.map(l=>Ct(l.doubleValue));return new Na(n)}convertGeoPoint(t){return new ja(Ct(t.latitude),Ct(t.longitude))}convertArray(t,n){return(t.values||[]).map(l=>this.convertValue(l,n))}convertServerTimestamp(t,n){switch(n){case"previous":const l=Fd(t);return l==null?null:this.convertValue(l,n);case"estimate":return this.convertTimestamp(jo(t));default:return null}}convertTimestamp(t){const n=Un(t);return new gt(n.seconds,n.nanos)}convertDocumentKey(t,n){const l=ft.fromString(t);rt(Gj(l),9688,{name:t});const c=new No(l.get(1),l.get(3)),d=new Me(l.popFirst(5));return c.isEqual(n)||sn(`Document ${d} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(i,t,n){let l;return l=i?i.toFirestore(t):t,l}class co{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ki extends SN{constructor(t,n,l,c,d,m){super(t,n,l,c,m),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const l=this._document.data.field(tu("DocumentSnapshot.get",t));if(l!==null)return this._userDataWriter.convertValue(l,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",ki._jsonSchema={type:Mt("string",ki._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class jd extends ki{data(t={}){return super.data(t)}}class Mr{constructor(t,n,l,c){this._firestore=t,this._userDataWriter=n,this._snapshot=c,this.metadata=new co(c.hasPendingWrites,c.fromCache),this.query=l}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(l=>{t.call(n,new jd(this._firestore,this._userDataWriter,l.key,l,new co(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(c,d){if(c._snapshot.oldDocs.isEmpty()){let m=0;return c._snapshot.docChanges.map(f=>{const y=new jd(c._firestore,c._userDataWriter,f.doc.key,f.doc,new co(c._snapshot.mutatedKeys.has(f.doc.key),c._snapshot.fromCache),c.query.converter);return f.doc,{type:"added",doc:y,oldIndex:-1,newIndex:m++}})}{let m=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(f=>d||f.type!==3).map(f=>{const y=new jd(c._firestore,c._userDataWriter,f.doc.key,f.doc,new co(c._snapshot.mutatedKeys.has(f.doc.key),c._snapshot.fromCache),c.query.converter);let g=-1,j=-1;return f.type!==0&&(g=m.indexOf(f.doc.key),m=m.delete(f.doc.key)),f.type!==1&&(m=m.add(f.doc),j=m.indexOf(f.doc.key)),{type:OC(f.type),doc:y,oldIndex:g,newIndex:j}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Mr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ep.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],l=[],c=[];return this.docs.forEach(d=>{d._document!==null&&(n.push(d._document),l.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),c.push(d.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function OC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(i){i=an(i,Ot);const t=an(i.firestore,Xr);return xC(Sp(t),i._key).then(n=>UC(t,i,n))}Mr._jsonSchemaVersion="firestore/querySnapshot/1.0",Mr._jsonSchema={type:Mt("string",Mr._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class CN extends PC{constructor(t){super(),this.firestore=t}convertBytes(t){return new qs(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function xx(i){i=an(i,Oi);const t=an(i.firestore,Xr),n=Sp(t),l=new CN(t);return IC(i._query),jC(n,i._query).then(c=>new Mr(t,l,i,c))}function BC(i,t,n,...l){i=an(i,Ot);const c=an(i.firestore,Xr),d=Ep(c);let m;return m=typeof(t=en(t))=="string"||t instanceof Zd?wC(d,"updateDoc",i._key,t,n,l):CC(d,"updateDoc",i._key,t),Pp(c,[m.toMutation(i._key,Ws.exists(!0))])}function LC(i){return Pp(an(i.firestore,Xr),[new op(i._key,Ws.none())])}function jx(i,t){const n=an(i.firestore,Xr),l=xd(i),c=MC(i.converter,t);return Pp(n,[EC(Ep(i.firestore),"addDoc",l._key,c,i.converter!==null,{}).toMutation(l._key,Ws.exists(!1))]).then(()=>l)}function Pp(i,t){return function(l,c){const d=new Za;return l.asyncQueue.enqueueAndForget(async()=>lC(await yC(l),c,d)),d.promise}(Sp(i),t)}function UC(i,t,n){const l=n.docs.get(t._key),c=new CN(i);return new ki(i,c,t._key,l,new co(n.hasPendingWrites,n.fromCache),t.converter)}function io(){return new Cp("serverTimestamp")}(function(t,n=!0){(function(c){Gr=c})(mS),Sd(new vo("firestore",(l,{instanceIdentifier:c,options:d})=>{const m=l.getProvider("app").getImmediate(),f=new Xr(new ES(l.getProvider("auth-internal")),new kS(m,l.getProvider("app-check-internal")),function(g,j){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ce(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(g.options.projectId,j)}(m,c),m);return d={useFetchStreams:n,...d},f._setSettings(d),f},"PUBLIC").setMultipleInstances(!0)),Ir(xy,jy,t),Ir(xy,jy,"esm2020")})();var zC="firebase",FC="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(zC,FC,"app");const ud={apiKey:"AIzaSyCMBVgcth_EMnt-c4fwlYClvofgOjtzUjM",authDomain:"travelos-6a239.firebaseapp.com",projectId:"travelos-6a239",storageBucket:"travelos-6a239.firebasestorage.app",messagingSenderId:"877730605991",appId:"1:877730605991:web:46843406a8499e63cbe482"};let Nx,va;try{console.log("Initializing Firebase with config:",ud.projectId),ud.apiKey==="your-api-key"||ud.projectId==="your-project-id"?(console.warn(" Firebase config not set up yet. Please update src/firebase/config.js with your Firebase credentials."),va={collection:()=>({add:()=>Promise.reject(new Error("Firebase not configured")),get:()=>Promise.reject(new Error("Firebase not configured")),doc:()=>({get:()=>Promise.reject(new Error("Firebase not configured")),set:()=>Promise.reject(new Error("Firebase not configured")),update:()=>Promise.reject(new Error("Firebase not configured")),delete:()=>Promise.reject(new Error("Firebase not configured"))})})}):(console.log("Initializing Firebase app..."),Nx=Yx(ud),console.log("Firebase app initialized, getting Firestore..."),va=bC(Nx),console.log("Firestore initialized successfully"))}catch(i){console.error("Error initializing Firebase:",i),va={collection:()=>({add:()=>Promise.reject(new Error("Firebase initialization failed")),get:()=>Promise.reject(new Error("Firebase initialization failed")),doc:()=>({get:()=>Promise.reject(new Error("Firebase initialization failed")),set:()=>Promise.reject(new Error("Firebase initialization failed")),update:()=>Promise.reject(new Error("Firebase initialization failed")),delete:()=>Promise.reject(new Error("Firebase initialization failed"))})})}}const Ei={REVENUE_FUNCTIONS:"Functions",DRAFTS:"drafts",TEMPLATES:"templates"};class qC{constructor(){console.log("RevenueFunctionService initialized")}async saveRevenueFunction(t,n="draft"){try{const l={...t,status:n,createdAt:io(),updatedAt:io(),version:1},c=await jx(cd(va,Ei.REVENUE_FUNCTIONS),l);return console.log("Revenue function saved with ID:",c.id),c.id}catch(l){throw console.error("Error saving revenue function:",l),l.message.includes("Firebase not configured")||l.message.includes("Firebase initialization failed")?new Error("Firebase is not configured. Please update the Firebase configuration in src/firebase/config.js"):l}}async updateRevenueFunction(t,n,l="draft"){try{const c={...n,status:l,updatedAt:io()},d=xd(va,Ei.REVENUE_FUNCTIONS,t);await BC(d,c),console.log("Revenue function updated:",t)}catch(c){throw console.error("Error updating revenue function:",c),c}}async getRevenueFunction(t){try{const n=xd(va,Ei.REVENUE_FUNCTIONS,t),l=await VC(n);if(l.exists())return{id:l.id,...l.data()};throw new Error("Revenue function not found")}catch(n){throw console.error("Error getting revenue function:",n),n}}async getAllRevenueFunctions(t={}){try{let n=cd(va,Ei.REVENUE_FUNCTIONS);t.status&&(n=dd(n,fx("status","==",t.status))),t.functionType&&(n=dd(n,fx("functionType","==",t.functionType))),n=dd(n,gx("createdAt","desc"));const l=await xx(n),c=[];return l.forEach(d=>{c.push({id:d.id,...d.data()})}),c}catch(n){throw console.error("Error getting revenue functions:",n),n}}async getDraftFunctions(){return this.getAllRevenueFunctions({status:"draft"})}async getCompletedFunctions(){return this.getAllRevenueFunctions({status:"completed"})}async deleteRevenueFunction(t){try{const n=xd(va,Ei.REVENUE_FUNCTIONS,t);await LC(n),console.log("Revenue function deleted:",t)}catch(n){throw console.error("Error deleting revenue function:",n),n}}async saveTemplate(t){try{const n={...t,createdAt:io(),updatedAt:io()},l=await jx(cd(va,Ei.TEMPLATES),n);return console.log("Template saved with ID:",l.id),l.id}catch(n){throw console.error("Error saving template:",n),n}}async getAllTemplates(){try{const t=dd(cd(va,Ei.TEMPLATES),gx("createdAt","desc")),n=await xx(t),l=[];return n.forEach(c=>{l.push({id:c.id,...c.data()})}),l}catch(t){throw console.error("Error getting templates:",t),t}}async getAnalytics(){try{const t=await this.getAllRevenueFunctions(),n={total:t.length,drafts:t.filter(l=>l.status==="draft").length,completed:t.filter(l=>l.status==="completed").length,byType:{},byObjective:{},recentActivity:t.slice(0,10)};return t.forEach(l=>{const c=l.functionType||"Unknown";n.byType[c]=(n.byType[c]||0)+1}),t.forEach(l=>{l.objectives&&Array.isArray(l.objectives)&&l.objectives.forEach(c=>{n.byObjective[c]=(n.byObjective[c]||0)+1})}),n}catch(t){throw console.error("Error getting analytics:",t),t}}}const Od=new qC;function bx({customFunction:i,handleInputChange:t,handleArrayToggle:n,handleToggleCategory:l,getSelectedCountForCategory:c,collapsedCategories:d,tagInput:m,setTagInput:f,showTagSuggestions:y,setShowTagSuggestions:g,getFilteredTagSuggestions:j,handleTagInputChange:S,handleTagInputKeyDown:A,addTag:O,removeTag:D,selectSuggestion:H,isPredefinedTag:U}){const q=["Upsell","Cross-sell"],Y=[{id:"revenue_uplift",name:"Revenue uplift",description:"Drive incremental revenue through offers",category:"Revenue & Commercial"},{id:"ancillary_attach",name:"Ancillary attach rate",description:"Increase % of bookings with ancillaries (bags, seats, lounge, etc.)",category:"Revenue & Commercial"},{id:"basket_size",name:"Basket size increase",description:"Drive higher average booking or transaction value",category:"Revenue & Commercial"},{id:"upgrade_conversion",name:"Upgrade conversion",description:"Convert more users to premium options (e.g. flight class, hotel room)",category:"Revenue & Commercial"},{id:"offer_redemption",name:"Offer redemption rate",description:"Track how often offered upsells are accepted",category:"Revenue & Commercial"},{id:"booking_completion",name:"Booking completion rate",description:"Reduce abandonment by nudging users who start but don't finish",category:"Revenue & Commercial"},{id:"payment_adoption",name:"Payment method adoption",description:"Promote preferred payment rails (e.g. proprietary card, BNPL)",category:"Revenue & Commercial"},{id:"supplier_mix",name:"Supplier mix optimization",description:"Shift bookings to preferred/negotiated suppliers",category:"Revenue & Commercial"},{id:"repeat_booking",name:"Repeat booking rate",description:"Increase how often a user books again in a set period",category:"Retention & Loyalty"},{id:"loyalty_participation",name:"Loyalty program participation",description:"Encourage more users to enroll in or engage with a loyalty program",category:"Retention & Loyalty"},{id:"points_redemption",name:"Points redemption volume",description:"Boost loyalty point usage (reduces financial liability for banks)",category:"Retention & Loyalty"},{id:"card_usage",name:"Card usage frequency",description:"Drive card spend through exclusive offers tied to usage",category:"Retention & Loyalty"},{id:"product_stickiness",name:"Product stickiness",description:"Encourage engagement with multiple bank products (e.g. travel + card + app)",category:"Retention & Loyalty"},{id:"tier_retention",name:"Tier retention or uplift",description:"Help users maintain or reach a higher tier by encouraging qualifying spend",category:"Retention & Loyalty"},{id:"customer_delight",name:"Customer delight",description:"Surprise-and-delight offers to improve NPS or perception",category:"Engagement & Experience"},{id:"offer_engagement",name:"Offer engagement rate",description:"% of customers clicking/opening an offer",category:"Engagement & Experience"},{id:"channel_engagement",name:"Channel engagement",description:"Track performance of SMS vs push vs concierge, etc.",category:"Engagement & Experience"},{id:"personalization",name:"Personalization accuracy",description:"Improve match rate of offer to persona or intent",category:"Engagement & Experience"},{id:"conversion_time",name:"Conversion time reduction",description:"Shorten the time between trigger  conversion",category:"Engagement & Experience"},{id:"support_deflection",name:"Support deflection",description:"Reduce inbound customer service load by pre-emptively resolving gaps",category:"Operational & Support"},{id:"concierge_balancing",name:"Concierge load balancing",description:"Use functions to route or automate low-touch upsells",category:"Operational & Support"},{id:"disruption_mitigation",name:"Involuntary disruption mitigation",description:"Trigger compensatory or goodwill offers post-disruption",category:"Operational & Support"},{id:"first_engagement",name:"First-time engagement",description:"Activate users who've never booked travel",category:"Strategic & Long-Term Value"},{id:"persona_shift",name:"Persona behavior shift",description:"Guide a segment toward new behaviors (e.g. lounge usage, longer stays)",category:"Strategic & Long-Term Value"},{id:"cross_sell_trial",name:"Product cross-sell trial",description:"Encourage use of other verticals (e.g. user books hotel  offer eSIM)",category:"Strategic & Long-Term Value"},{id:"data_enrichment",name:"Data enrichment",description:"Incentivize users to share data (calendar sync, preferences)",category:"Strategic & Long-Term Value"},{id:"corporate_adoption",name:"Corporate adoption",description:"Drive SMEs into corporate travel module via incentive",category:"Strategic & Long-Term Value"}],P=["Low","Medium","High"];return e.jsxs("div",{className:"builder-step",children:[e.jsx("h4",{children:"Basic Information & Objective"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Function Name"}),e.jsx("input",{type:"text",value:i.title,onChange:Q=>t("title",Q.target.value),className:"form-input",placeholder:"Enter function name..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:i.description,onChange:Q=>t("description",Q.target.value),className:"form-input",rows:"3",placeholder:"Describe what this function does..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Function Type"}),e.jsxs("select",{value:i.functionType,onChange:Q=>t("functionType",Q.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"Select function type..."}),q.map(Q=>e.jsx("option",{value:Q,children:Q},Q))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Objectives"}),e.jsx("p",{className:"help-text",children:"Select one or more objectives that this function will help achieve"}),e.jsx("div",{className:"objectives-container",children:["Revenue & Commercial","Retention & Loyalty","Engagement & Experience","Operational & Support","Strategic & Long-Term Value"].map(Q=>{const se=Y.filter(b=>b.category===Q),z={"Revenue & Commercial":"","Retention & Loyalty":"","Engagement & Experience":"","Operational & Support":"","Strategic & Long-Term Value":""}[Q],M=c(Q),w=d[Q];return e.jsxs("div",{className:"objective-category",children:[e.jsxs("div",{className:"category-header clickable",onClick:()=>l(Q),children:[e.jsxs("div",{className:"category-header-left",children:[e.jsx("span",{className:"category-icon",children:z}),e.jsx("span",{className:"category-name",children:Q})]}),e.jsxs("div",{className:"category-header-right",children:[e.jsxs("span",{className:"selected-count",children:[M," selected"]}),e.jsx("span",{className:`collapse-icon ${w?"collapsed":""}`,children:w?"":""})]})]}),!w&&e.jsx("div",{className:"objectives-grid",children:se.map(b=>e.jsxs("label",{className:"objective-checkbox",children:[e.jsx("input",{type:"checkbox",checked:i.objectives.includes(b.id),onChange:()=>n("objectives",b.id)}),e.jsxs("div",{className:"objective-content",children:[e.jsx("span",{className:"objective-name",children:b.name}),e.jsx("span",{className:"objective-description",children:b.description})]})]},b.id))})]},Q)})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Priority"}),e.jsx("select",{value:i.priority,onChange:Q=>t("priority",Q.target.value),className:"form-input",children:P.map(Q=>e.jsx("option",{value:Q,children:Q},Q))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tags (Optional)"}),e.jsx("p",{className:"help-text",children:"Type and press Enter to add tags. You can select from suggestions or create custom tags."}),e.jsxs("div",{className:"tag-input-container",children:[e.jsxs("div",{className:"tag-input-wrapper",children:[i.tags.map(Q=>e.jsxs("span",{className:`tag ${U(Q)?"tag-predefined":"tag-custom"}`,children:[Q,e.jsx("button",{type:"button",className:"tag-remove",onClick:()=>D(Q),children:""})]},Q)),e.jsx("input",{type:"text",value:m,onChange:S,onKeyDown:A,onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),200),className:"tag-input",placeholder:i.tags.length===0?"Type to add tags...":""})]}),y&&j().length>0&&e.jsxs("div",{className:"tag-suggestions",children:[e.jsx("div",{className:"suggestions-header",children:e.jsx("span",{children:"Suggestions:"})}),e.jsx("div",{className:"suggestions-list",children:j().slice(0,8).map(Q=>e.jsx("button",{type:"button",className:"suggestion-item",onClick:()=>H(Q),children:Q},Q))})]})]})]})]})]})}function HC({customFunction:i,handleInputChange:t,handleArrayToggle:n,addTriggerCondition:l,removeTriggerCondition:c,updateTriggerCondition:d}){const m=[{id:"flight_booked",name:"Flight booked",description:"User completes flight booking",category:" Flights"},{id:"flight_not_booked_after_search",name:"Flight not booked (after search)",description:"Abandoned cart / conversion nudge",category:" Flights"},{id:"flight_cancelled",name:"Flight cancelled (user or involuntary)",description:"Trigger rebooking or support",category:" Flights"},{id:"flight_delayed",name:"Flight delayed",description:"Trigger disruption comms / lounge offer",category:" Flights"},{id:"schedule_change",name:"Schedule change (involuntary)",description:"Trigger re-confirmation or rescheduling",category:" Flights"},{id:"no_seat_selected",name:"No seat selected",description:"Opportunity to upsell premium seat",category:" Flights"},{id:"no_bag_added",name:"No bag added",description:"Trigger bag upsell",category:" Flights"},{id:"no_lounge_access",name:"No lounge access",description:"Trigger lounge offer",category:" Flights"},{id:"no_fast_track_selected",name:"No fast track selected",description:"Trigger security fast track offer",category:" Flights"},{id:"long_layover_detected",name:"Long layover detected",description:"Trigger lounge/dining/upgraded itinerary",category:" Flights"},{id:"missed_checkin_deadline",name:"Missed check-in deadline",description:"Trigger alert / recovery",category:" Flights"},{id:"multiple_flights_short_window",name:"Multiple flights booked in short window",description:"Suggest corporate flow or pass bundle",category:" Flights"},{id:"destination_specific_rule",name:"Destination-specific rule matched",description:"Trigger location-specific offers",category:" Flights"},{id:"pre_trip_x_days",name:"Pre-trip (X days before)",description:"Trigger ancillaries / reminders",category:" Flights"},{id:"post_trip",name:"Post-trip",description:"Trigger review / upsell return trip",category:" Flights"},{id:"hotel_booked",name:"Hotel booked",description:"Completed booking",category:" Hotels"},{id:"hotel_not_booked_after_flight",name:"Hotel not booked (after flight)",description:"Suggest hotel upsell",category:" Hotels"},{id:"hotel_booking_cancelled",name:"Booking cancelled",description:"Trigger alternate offer or recovery flow",category:" Hotels"},{id:"no_breakfast_selected",name:"No breakfast selected",description:"Offer breakfast upsell",category:" Hotels"},{id:"no_cancellation_coverage",name:"No cancellation coverage",description:"Trigger flexible rate upsell",category:" Hotels"},{id:"low_occupancy_hotel",name:"Low occupancy (hotel)",description:"Trigger upgrade or extended stay offer",category:" Hotels"},{id:"vip_booking_low_star",name:"VIP customer booking 3 or below",description:"Offer luxury upsell",category:" Hotels"},{id:"long_stay_booked",name:"Long stay booked",description:"Suggest room upgrade or apartment alternatives",category:" Hotels"},{id:"pre_checkin_x_days",name:"Pre-check-in (X days)",description:"Trigger amenity upsells",category:" Hotels"},{id:"post_checkout",name:"Post-check-out",description:"Trigger review or return offer",category:" Hotels"},{id:"ticket_booked",name:"Ticket booked",description:"Event or activity confirmed",category:" Activities / Tickets / Events"},{id:"no_activity_booked_post_travel",name:"No activity booked (post hotel/flight)",description:"Cross-sell local experiences",category:" Activities / Tickets / Events"},{id:"same_city_multiple_customers",name:"Same city, multiple customers",description:"Suggest group or package deal",category:" Activities / Tickets / Events"},{id:"weather_forecast_detected",name:"Weather forecast detected",description:"Suggest indoor vs outdoor activities",category:" Activities / Tickets / Events"},{id:"post_event",name:"Post-event",description:"Trigger loyalty points or feedback prompt",category:" Activities / Tickets / Events"},{id:"flight_booked_internationally",name:"Flight booked internationally",description:"Trigger eSIM offer",category:" eSIM & Connectivity"},{id:"no_esim_active_48h_before",name:"No eSIM active 48h before trip",description:"Reminder + offer",category:" eSIM & Connectivity"},{id:"esim_expires",name:"eSIM expires",description:"Offer extension or upgrade",category:" eSIM & Connectivity"},{id:"customer_in_roaming_territory",name:"Customer in roaming territory",description:"Trigger eSIM push",category:" eSIM & Connectivity"},{id:"vip_without_esim",name:"VIP without eSIM",description:"Concierge reach-out opportunity",category:" eSIM & Connectivity"},{id:"flight_booked_offer_transfer",name:"Flight booked",description:"Offer airport transfer automatically",category:" Airport Transfers"},{id:"no_transfer_booked",name:"No transfer booked",description:"Trigger 35 days before trip",category:" Airport Transfers"},{id:"customer_arrives_destination",name:"Customer arrives in destination",description:"Trigger concierge offer",category:" Airport Transfers"},{id:"large_party_size_detected",name:"Large party size detected",description:"Offer van or private transfer",category:" Airport Transfers"},{id:"flight_booked_busy_airport",name:"Flight booked with busy airport",description:"Offer fast track",category:" Fast Track Security"},{id:"flight_at_peak_time",name:"Flight at peak time (69am)",description:"Trigger fast track upsell",category:" Fast Track Security"},{id:"short_layover",name:"Short layover",description:"Trigger speed-up suggestion",category:" Fast Track Security"},{id:"vip_econ_ticket",name:"VIP persona + econ ticket",description:"Suggest fast track for comfort",category:" Fast Track Security"},{id:"long_layover_2h",name:"Long layover (>2 hours)",description:"Trigger lounge offer",category:" Airport Lounge"},{id:"no_lounge_access_detected",name:"No lounge access detected",description:"Trigger upsell",category:" Airport Lounge"},{id:"loyalty_tier_includes_lounge",name:"Loyalty tier includes lounge",description:"Reminder to use benefit",category:" Airport Lounge"},{id:"flight_delay_lounge",name:"Flight delay",description:"Offer lounge for comfort",category:" Airport Lounge"},{id:"concierge_recovery_lounge",name:"Concierge-triggered recovery",description:"Free lounge as delight gesture",category:" Airport Lounge"},{id:"lounge_not_booked",name:"Lounge not booked",description:"Suggest premium dining instead",category:" Airport Dining"},{id:"known_airport_fb_partners",name:"Known airport with F&B partners",description:"Trigger dining offers",category:" Airport Dining"},{id:"time_to_departure_2h",name:"Time to departure < 2 hours",description:"Last-minute food voucher",category:" Airport Dining"},{id:"indestination_dining_campaign",name:"In-destination dining campaign",description:"Trigger location-based food experiences",category:" Airport Dining"}],f=[{value:"one_time_per_user",label:"One-time per user",description:"Trigger fires once for each user, ever"},{value:"once_per_trip_session",label:"Once per trip / session",description:"Triggers once for a given travel instance (e.g. per flight booked)"},{value:"repeatable",label:"Repeatable",description:"Can trigger multiple times per user if conditions match"},{value:"cooldown_based",label:"Cooldown-based",description:"Triggers again only after a cooldown window expires"}],y=[{id:"flight",name:"Flight",description:"Complete flight booking"},{id:"flight_seat",name:"Flight Seat",description:"Premium seat selection"},{id:"flight_baggage",name:"Flight Baggage",description:"Checked or carry-on baggage"},{id:"flight_upgrade",name:"Flight Upgrade",description:"Cabin class upgrade"},{id:"hotel_upgrade",name:"Hotel Upgrade",description:"Room or hotel upgrade"},{id:"ticket",name:"Ticket",description:"Activity or event tickets"},{id:"esim",name:"eSIM",description:"International data connectivity"},{id:"airport_transfer",name:"Airport Transfer",description:"Ground transportation"},{id:"airport_fast_track",name:"Airport Fast Track",description:"Security fast track service"},{id:"airport_dining",name:"Airport Dining",description:"Airport restaurant vouchers"},{id:"health_wellness",name:"Health & Wellness",description:"Travel insurance, health services"}],g=[{category:" Relative to Booking Time",options:[{id:"immediately",name:"Immediately after trigger fires",description:"Offer presented right away"},{id:"hours_after",name:"X hours after trigger fires",description:"Delayed offer with custom hours",hasInput:!0,inputType:"hours"},{id:"days_after",name:"X days after trigger fires",description:"Delayed offer with custom days",hasInput:!0,inputType:"days"}]},{category:" Relative to Travel Dates",options:[{id:"day_of_departure",name:"Day of flight departure",description:"Offer on departure day"},{id:"day_before_departure",name:"Day before flight departure",description:"Offer day before departure"},{id:"day_of_checkin",name:"Day of hotel check-in",description:"Offer on check-in day"},{id:"day_before_checkin",name:"Day before hotel check-in",description:"Offer day before check-in"},{id:"day_of_event",name:"Day of activity/ticket/event",description:"Offer on event day"},{id:"day_before_event",name:"Day before activity/ticket/event",description:"Offer day before event"},{id:"days_before_trip_start",name:"X days before trip starts",description:"Trip = earliest booked product",hasInput:!0,inputType:"days"},{id:"days_before_trip_end",name:"X days before trip ends",description:"Trip = latest booked product",hasInput:!0,inputType:"days"}]},{category:" Relative to Flight Time",options:[{id:"hours_before_departure",name:"X hours before flight departure",description:"Pre-flight offer",hasInput:!0,inputType:"hours"},{id:"after_landing",name:"After flight lands",description:"For return journey perks or re-engagement"}]},{category:" Relative to Hotel Stay",options:[{id:"hours_before_checkin",name:"X hours before hotel check-in",description:"Pre-check-in offer",hasInput:!0,inputType:"hours"},{id:"hours_before_checkout",name:"X hours before hotel check-out",description:"e.g. upsell transfer home",hasInput:!0,inputType:"hours"}]}],j=["Mobile app","Website","API","Digital Concierge"],S=()=>{l()},A=D=>{c(D)},O=(D,H,U)=>{d(D,H,U)};return e.jsxs("div",{className:"builder-step",children:[e.jsx("h4",{children:"Trigger Definition"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Trigger Conditions"}),e.jsx("p",{className:"help-text",children:"Define the conditions that will trigger this revenue optimization function"}),e.jsxs("div",{className:"conditions-builder",children:[e.jsxs("div",{className:"condition-section",children:[e.jsx("div",{className:"condition-label",children:"When"}),i.triggerConditions.map((D,H)=>e.jsxs("div",{className:"condition-row",children:[H>0&&e.jsx("div",{className:"condition-operator",children:e.jsxs("select",{value:D.operator,onChange:U=>O(D.id,"operator",U.target.value),className:"form-input operator-select",children:[e.jsx("option",{value:"And",children:"And"}),e.jsx("option",{value:"Or",children:"Or"})]})}),e.jsx("div",{className:"condition-selector",children:e.jsxs("select",{value:D.triggerEvent,onChange:U=>O(D.id,"triggerEvent",U.target.value),className:"form-input trigger-select",children:[e.jsx("option",{value:"",children:"Select a trigger event..."}),m.map(U=>e.jsxs("option",{value:U.id,className:"trigger-option",children:[U.name," - ",U.description]},U.id))]})}),i.triggerConditions.length>1&&e.jsx("button",{type:"button",className:"btn-icon remove-condition",onClick:()=>A(D.id),title:"Remove condition",children:""})]},D.id)),e.jsx("button",{type:"button",className:"btn add-condition-btn",onClick:S,children:"+ Add Condition"})]}),e.jsxs("div",{className:"condition-section",children:[e.jsx("div",{className:"condition-label required",children:"Then Offer"}),e.jsx("div",{className:"checkbox-grid",children:y.map(D=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.offerCategories?.includes(D.id)||!1,onChange:()=>n("offerCategories",D.id)}),e.jsxs("span",{children:[D.name," - ",D.description]})]},D.id))}),e.jsx("p",{className:"help-text-small",children:"You will be able to specify the offer details in the Offer section (Step 4)."})]}),e.jsxs("div",{className:"condition-section",children:[e.jsx("div",{className:"condition-label required",children:"When to Send Offer"}),e.jsxs("select",{value:i.timingOption||"",onChange:D=>t("timingOption",D.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"Select when to send the offer..."}),g.map((D,H)=>e.jsx("optgroup",{label:D.category,children:D.options.map(U=>e.jsxs("option",{value:U.id,children:[U.name," - ",U.description]},U.id))},H))]}),(()=>{const D=g.flatMap(H=>H.options).find(H=>H.id===i.timingOption);return D?.hasInput?e.jsxs("div",{className:"timing-input",children:[e.jsx("input",{type:"number",className:"form-input no-arrows",placeholder:D.inputType==="hours"?"24":"7",value:i.timingValue||"",onChange:H=>t("timingValue",H.target.value)}),e.jsx("span",{className:"input-suffix",children:D.inputType})]}):null})()]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Trigger Frequency"}),e.jsxs("select",{value:i.triggerFrequency,onChange:D=>t("triggerFrequency",D.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"Select trigger frequency..."}),f.map(D=>e.jsxs("option",{value:D.value,children:[D.label," - ",D.description]},D.value))]})]}),i.triggerFrequency==="cooldown_based"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cooldown Period"}),e.jsxs("div",{className:"input-with-suffix",children:[e.jsx("input",{type:"number",className:"form-input no-arrows",placeholder:"7",value:i.cooldownPeriod||"",onChange:D=>t("cooldownPeriod",D.target.value)}),e.jsx("span",{className:"input-suffix-inline",children:"days"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Event Interfaces"}),e.jsx("div",{className:"checkbox-grid",children:j.map(D=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.eventSources.includes(D),onChange:()=>n("eventSources",D)}),e.jsx("span",{children:D})]},D))})]})]})}function GC({customFunction:i,handleInputChange:t,handleArrayToggle:n,handleNestedInputChange:l}){const[c,d]=I.useState(!1);return e.jsxs("div",{className:"builder-step",children:[e.jsx("h4",{children:"Persona & User Targeting"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Select Persona Groups"}),e.jsx("div",{className:"checkbox-grid",children:["Business Travelers","Leisure Travelers","VIP Members","New Customers","Returning Customers","High Spenders"].map(m=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.personaGroups.includes(m),onChange:()=>n("personaGroups",m)}),e.jsx("span",{children:m})]},m))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Select Products"}),e.jsx("div",{className:"checkbox-grid",children:["Gold Card","Platinum Card","Basic Card"].map(m=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.products?.includes(m)||!1,onChange:()=>n("products",m)}),e.jsx("span",{children:m})]},m))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("div",{className:"exclusions-header",onClick:()=>d(!c),children:[e.jsx("label",{children:"Exclusions (Optional)"}),e.jsx("span",{className:`dropdown-arrow ${c?"expanded":""}`,children:""})]}),c&&e.jsx("div",{className:"exclusions-content",children:e.jsxs("div",{className:"exclusions-grid",children:[e.jsxs("div",{className:"exclusion-section",children:[e.jsx("h5",{children:"Personas"}),e.jsx("div",{className:"checkbox-grid",children:["Premium Members","Corporate Accounts","Group Bookings"].map(m=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.exclusions.personas.includes(m),onChange:()=>n("exclusions.personas",m)}),e.jsx("span",{children:m})]},m))})]}),e.jsxs("div",{className:"exclusion-section",children:[e.jsx("h5",{children:"Loyalty Tiers"}),e.jsx("div",{className:"checkbox-grid",children:["Gold","Platinum","Diamond"].map(m=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.exclusions.loyaltyTiers.includes(m),onChange:()=>n("exclusions.loyaltyTiers",m)}),e.jsx("span",{children:m})]},m))})]})]})})]})]})}function $C({customFunction:i,handleArrayToggle:t,handleNestedInputChange:n,handleInputChange:l,getBookingTypeIcon:c}){const d=[{id:"discount",name:"Discount",description:"Percentage or fixed amount off",icon:""},{id:"free",name:"Free/Entitlement",description:"Complimentary service or product",icon:""},{id:"upgrade",name:"Upgrade",description:"Enhanced service or product",icon:""},{id:"bundle",name:"Bundle",description:"Multiple services at reduced price",icon:""},{id:"cashback",name:"Cashback",description:"Money back after purchase",icon:""},{id:"points",name:"Points/Rewards",description:"Loyalty points or rewards",icon:""}],m={hotel:[{id:"hilton",name:"Hilton Hotels",logo:""},{id:"marriott",name:"Marriott International",logo:""},{id:"ihg",name:"IHG Hotels & Resorts",logo:""},{id:"accor",name:"Accor Hotels",logo:""},{id:"hyatt",name:"Hyatt Hotels",logo:""},{id:"any",name:"Any Hotel Provider",logo:""}],flight:[{id:"british_airways",name:"British Airways",logo:""},{id:"lufthansa",name:"Lufthansa",logo:""},{id:"air_france",name:"Air France",logo:""},{id:"klm",name:"KLM Royal Dutch Airlines",logo:""},{id:"emirates",name:"Emirates",logo:""},{id:"any",name:"Any Airline",logo:""}],airport_lounge:[{id:"priority_pass",name:"Priority Pass",logo:""},{id:"lounge_key",name:"LoungeKey",logo:""},{id:"dragonpass",name:"DragonPass",logo:""},{id:"any",name:"Any Lounge Network",logo:""}],fast_track:[{id:"fast_track_global",name:"Fast Track Global",logo:""},{id:"airport_express",name:"Airport Express",logo:""},{id:"any",name:"Any Fast Track Service",logo:""}],airport_transfer:[{id:"uber",name:"Uber",logo:""},{id:"lyft",name:"Lyft",logo:""},{id:"blacklane",name:"Blacklane",logo:""},{id:"any",name:"Any Transfer Service",logo:""}],esim:[{id:"airalo",name:"Airalo",logo:""},{id:"holafly",name:"Holafly",logo:""},{id:"esimdb",name:"eSIMdb",logo:""},{id:"any",name:"Any eSIM Provider",logo:""}]},[f,y]=qm.useState(!1),j=(()=>{const P=[];return Object.values(m).forEach(Q=>{Q.forEach(se=>{P.push(se.name)})}),P})(),S=P=>j.includes(P),A=P=>P,O=P=>{l("supplierInput",P.target.value)},D=P=>{P.key==="Enter"&&P.target.value.trim()?(P.preventDefault(),H(P.target.value.trim())):P.key==="Backspace"&&P.target.value===""&&(i.selectedSuppliers||[]).length>0&&U((i.selectedSuppliers||[]).slice(-1)[0])},H=P=>{if(P&&!(i.selectedSuppliers||[]).includes(P)){const Q=[...i.selectedSuppliers||[],P];l("selectedSuppliers",Q),l("supplierInput","")}},U=P=>{const Q=(i.selectedSuppliers||[]).filter(se=>se!==P);l("selectedSuppliers",Q)},q=()=>{const P=(i.supplierInput||"").toLowerCase();return j.filter(Q=>Q.toLowerCase().includes(P)&&!(i.selectedSuppliers||[]).includes(Q))},Y=P=>{H(P),y(!1)};return e.jsxs("div",{className:"builder-step",children:[e.jsx("h4",{children:"Offer Definition"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Offer Type"}),e.jsx("p",{className:"help-text",children:"Select the type of offer you want to provide"}),e.jsx("div",{className:"offers-grid",children:d.map(P=>e.jsxs("label",{className:`offer-checkbox ${i.offerType===P.id?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"offerType",value:P.id,checked:i.offerType===P.id,onChange:Q=>l("offerType",Q.target.value)}),e.jsxs("span",{className:"offer-label",children:[e.jsx("span",{className:"offer-icon",children:P.icon}),e.jsxs("div",{className:"offer-content",children:[e.jsx("div",{className:"offer-name",children:P.name}),e.jsx("div",{className:"offer-description",children:P.description})]})]})]},P.id))})]}),i.offerType&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Offer Details"}),e.jsx("p",{className:"help-text",children:"Configure the specific details of your offer"}),e.jsxs("div",{className:"offer-details-config",children:[e.jsx("div",{className:"details-section",children:e.jsx("div",{className:"offer-detail-types-grid",children:[{id:"discount_amount",name:"Discount Amount",description:"e.g. 15% or 20 off",icon:""},{id:"quantity_count",name:"Quantity / Count",description:"e.g. 1 lounge access, 2 SIMs",icon:""},{id:"max_value",name:"Max Value",description:"Optional cap per redemption",icon:""},{id:"duration_validity",name:"Duration of Offer Validity",description:"e.g. offer available for 24h",icon:""},{id:"redemption_limit",name:"Redemption Limit",description:"e.g. can be redeemed once per trip",icon:""}].map(P=>e.jsxs("label",{className:`offer-detail-checkbox ${i.offerDetailType===P.id?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"offerDetailType",value:P.id,checked:i.offerDetailType===P.id,onChange:Q=>l("offerDetailType",Q.target.value)}),e.jsxs("span",{className:"offer-detail-label",children:[e.jsx("span",{className:"offer-detail-icon",children:P.icon}),e.jsxs("div",{className:"offer-detail-content",children:[e.jsx("div",{className:"offer-detail-name",children:P.name}),e.jsx("div",{className:"offer-detail-description",children:P.description})]})]})]},P.id))})}),i.offerDetailType&&e.jsx("div",{className:"details-section",children:e.jsxs("div",{className:"details-grid",children:[i.offerDetailType==="discount_amount"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Discount Type"}),e.jsxs("select",{value:i.discountType||"percentage",onChange:P=>l("discountType",P.target.value),className:"form-input",children:[e.jsx("option",{value:"percentage",children:"Percentage (%)"}),e.jsx("option",{value:"fixed",children:"Fixed Amount ()"})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Discount Value"}),e.jsxs("div",{className:"input-with-suffix",children:[e.jsx("input",{type:"number",value:i.discountValue||"",onChange:P=>l("discountValue",P.target.value),className:"form-input no-arrows",placeholder:i.discountType==="percentage"?"15":"20",min:"0",max:i.discountType==="percentage"?"100":"1000"}),e.jsx("span",{className:"input-suffix",children:i.discountType==="percentage"?"%":""})]})]})]}),i.offerDetailType==="quantity_count"&&e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{className:"required",children:"Quantity / Count"}),e.jsx("input",{type:"text",value:i.quantityCount||"",onChange:P=>l("quantityCount",P.target.value),className:"form-input",placeholder:"e.g., 1 lounge access, 2 SIMs, 1 fast track pass"})]}),i.offerDetailType==="max_value"&&e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{className:"required",children:"Max Value Per Redemption"}),e.jsxs("div",{className:"input-with-suffix",children:[e.jsx("input",{type:"number",value:i.maxValuePerRedemption||"",onChange:P=>l("maxValuePerRedemption",P.target.value),className:"form-input no-arrows",placeholder:"50",min:"0"}),e.jsx("span",{className:"input-suffix",children:""})]})]}),i.offerDetailType==="duration_validity"&&e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{className:"required",children:"Offer Validity Duration"}),e.jsx("input",{type:"text",value:i.offerValidity||"",onChange:P=>l("offerValidity",P.target.value),className:"form-input",placeholder:"e.g., 24 hours, 7 days, until departure"})]}),i.offerDetailType==="redemption_limit"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Redemption Limit Type"}),e.jsxs("select",{value:i.redemptionLimit||"once_per_trip",onChange:P=>l("redemptionLimit",P.target.value),className:"form-input",children:[e.jsx("option",{value:"once_per_trip",children:"Once per trip"}),e.jsx("option",{value:"once_per_user",children:"Once per user (ever)"}),e.jsx("option",{value:"multiple_per_trip",children:"Multiple times per trip"}),e.jsx("option",{value:"unlimited",children:"Unlimited"})]})]}),i.redemptionLimit==="multiple_per_trip"&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Max Redemptions Per Trip"}),e.jsx("input",{type:"number",value:i.maxRedemptionsPerTrip||"",onChange:P=>l("maxRedemptionsPerTrip",P.target.value),className:"form-input no-arrows",placeholder:"3",min:"1"})]})]})]})})]})]}),i.offerType&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Specific Supplier Selector (Optional)"}),e.jsx("p",{className:"help-text",children:"Type and press Enter to add suppliers. You can select from suggestions or create custom suppliers."}),e.jsxs("div",{className:"supplier-input-container",children:[e.jsxs("div",{className:"supplier-input-wrapper",children:[(i.selectedSuppliers||[]).map(P=>e.jsxs("span",{className:`supplier-tag ${S(P)?"supplier-predefined":"supplier-custom"}`,children:[A(P),e.jsx("button",{type:"button",className:"supplier-tag-remove",onClick:()=>U(P),children:""})]},P)),e.jsx("input",{type:"text",value:i.supplierInput||"",onChange:O,onKeyDown:D,onFocus:()=>y(!0),onBlur:()=>setTimeout(()=>y(!1),200),className:"supplier-input",placeholder:(i.selectedSuppliers||[]).length===0?"Type to add suppliers...":""})]}),f&&q().length>0&&e.jsxs("div",{className:"supplier-suggestions",children:[e.jsx("div",{className:"suggestions-header",children:e.jsx("span",{children:"Suggestions:"})}),e.jsx("div",{className:"suggestions-list",children:q().slice(0,8).map(P=>e.jsx("button",{type:"button",className:"suggestion-item",onClick:()=>Y(P),children:P},P))})]})]})]}),i.offerType&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Eligibility / Limitations (Optional)"}),e.jsx("p",{className:"help-text",children:"Set restrictions and limitations for your offer"}),e.jsxs("div",{className:"eligibility-limitations",children:[e.jsx("div",{className:"eligibility-types-section",children:e.jsx("div",{className:"eligibility-types-grid",children:[{id:"inventory_cap",name:"Inventory Cap",description:"e.g. only 500 redemptions globally",icon:""},{id:"offer_quota",name:"Offer Quota Per User",description:"e.g. 2 redemptions per user",icon:""},{id:"geo_limitations",name:"Geo or Market Limitations",description:"e.g. only for UK users",icon:""},{id:"loyalty_gating",name:"Loyalty Tier Gating",description:"e.g. only for Gold+ customers",icon:""}].map(P=>e.jsxs("label",{className:`eligibility-checkbox ${i.eligibilityType===P.id?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"eligibilityType",value:P.id,checked:i.eligibilityType===P.id,onChange:Q=>l("eligibilityType",Q.target.value)}),e.jsxs("span",{className:"eligibility-label",children:[e.jsx("span",{className:"eligibility-icon",children:P.icon}),e.jsxs("div",{className:"eligibility-content",children:[e.jsx("div",{className:"eligibility-name",children:P.name}),e.jsx("div",{className:"eligibility-description",children:P.description})]})]})]},P.id))})}),i.eligibilityType&&e.jsx("div",{className:"eligibility-config-section",children:e.jsxs("div",{className:"eligibility-config-grid",children:[i.eligibilityType==="inventory_cap"&&e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{className:"required",children:"Global Redemption Limit"}),e.jsx("input",{type:"number",value:i.inventoryCap||"",onChange:P=>l("inventoryCap",P.target.value),className:"form-input no-arrows",placeholder:"e.g., 500",min:"1"})]}),i.eligibilityType==="offer_quota"&&e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{className:"required",children:"Redemptions Per User"}),e.jsx("input",{type:"number",value:i.offerQuotaPerUser||"",onChange:P=>l("offerQuotaPerUser",P.target.value),className:"form-input no-arrows",placeholder:"e.g., 2",min:"1"})]}),i.eligibilityType==="geo_limitations"&&e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{className:"required",children:"Target Markets"}),e.jsx("input",{type:"text",value:i.geoLimitations||"",onChange:P=>l("geoLimitations",P.target.value),className:"form-input",placeholder:"e.g., UK, US, EU only"})]}),i.eligibilityType==="loyalty_gating"&&e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{className:"required",children:"Minimum Loyalty Tier"}),e.jsxs("select",{value:i.loyaltyTierGating||"",onChange:P=>l("loyaltyTierGating",P.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"Select minimum tier"}),e.jsx("option",{value:"bronze",children:"Bronze+"}),e.jsx("option",{value:"silver",children:"Silver+"}),e.jsx("option",{value:"gold",children:"Gold+"}),e.jsx("option",{value:"platinum",children:"Platinum+"}),e.jsx("option",{value:"diamond",children:"Diamond+"})]})]})]})})]})]}),i.offerType&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Offer Schedule (Optional)"}),e.jsx("p",{className:"help-text",children:"Set when this offer should start and end"}),e.jsx("div",{className:"schedule-config",children:e.jsxs("div",{className:"schedule-inputs",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Start Date"}),e.jsx("input",{type:"datetime-local",value:i.startDate||"",onChange:P=>l("startDate",P.target.value),className:"form-input",min:new Date().toISOString().slice(0,16)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"End Date"}),e.jsx("input",{type:"datetime-local",value:i.endDate||"",onChange:P=>l("endDate",P.target.value),className:"form-input",min:i.startDate||new Date().toISOString().slice(0,16)})]})]})})]})]})}function QC({customFunction:i,handleArrayToggle:t,handleNestedInputChange:n}){const l=["Concierge","Email","SMS","App Push","WhatsApp","In-app Banner"],c=["English","Spanish","French","German","Italian","Portuguese"],d=["Formal","Casual","Fun","Luxury","Match Persona Default"];return e.jsxs("div",{className:"builder-step",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h4",{children:"Communication Setup"}),e.jsxs("button",{type:"button",className:"ai-magic-button",onClick:()=>{console.log("AI magic activated!")},title:"Let AI create/update comms dynamically",children:[e.jsx("span",{className:"ai-magic-icon",children:""}),e.jsx("span",{className:"ai-magic-text",children:"AI Magic"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Communication Channels"}),e.jsx("div",{className:"channels-grid",children:l.map(m=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.channels.includes(m),onChange:()=>t("channels",m)}),e.jsx("span",{children:m})]},m))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Message Template"}),e.jsxs("div",{className:"template-config",children:[e.jsxs("div",{className:"template-type",children:[e.jsxs("label",{className:"radio-label",children:[e.jsx("input",{type:"radio",name:"templateType",value:"saved",checked:i.messageTemplate.type==="saved",onChange:m=>n("messageTemplate","type",m.target.value)}),e.jsx("span",{children:"Use saved template"})]}),e.jsxs("label",{className:"radio-label",children:[e.jsx("input",{type:"radio",name:"templateType",value:"new",checked:i.messageTemplate.type==="new",onChange:m=>n("messageTemplate","type",m.target.value)}),e.jsx("span",{children:"Build new template"})]})]}),i.messageTemplate.type==="saved"?e.jsxs("select",{value:i.messageTemplate.templateId||"",onChange:m=>n("messageTemplate","templateId",m.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"Select a template..."}),e.jsx("option",{value:"upsell_generic",children:"Generic Upsell Template"}),e.jsx("option",{value:"lounge_offer",children:"Lounge Access Offer"}),e.jsx("option",{value:"seat_upgrade",children:"Seat Upgrade Promotion"})]}):e.jsxs("div",{className:"new-template-fields",children:[i.channels.includes("Email")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Email Subject Line"}),e.jsx("input",{type:"text",value:i.messageTemplate.emailSubject||"",onChange:m=>n("messageTemplate","emailSubject",m.target.value),className:"form-input",placeholder:"Enter email subject line..."})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Email Body"}),e.jsx("textarea",{value:i.messageTemplate.emailBody||"",onChange:m=>n("messageTemplate","emailBody",m.target.value),className:"form-input",rows:"6",placeholder:"Enter email body content..."})]})]}),i.channels.includes("SMS")&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"SMS Message"}),e.jsx("textarea",{value:i.messageTemplate.smsMessage||"",onChange:m=>n("messageTemplate","smsMessage",m.target.value),className:"form-input",rows:"3",placeholder:"Enter SMS message (max 160 characters)...",maxLength:"160"}),e.jsxs("div",{className:"char-count",children:[i.messageTemplate.smsMessage?.length||0,"/160 characters"]})]}),i.channels.includes("WhatsApp")&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"WhatsApp Message"}),e.jsx("textarea",{value:i.messageTemplate.whatsappMessage||"",onChange:m=>n("messageTemplate","whatsappMessage",m.target.value),className:"form-input",rows:"4",placeholder:"Enter WhatsApp message..."})]}),i.channels.includes("App Push")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Push Notification Title"}),e.jsx("input",{type:"text",value:i.messageTemplate.pushTitle||"",onChange:m=>n("messageTemplate","pushTitle",m.target.value),className:"form-input",placeholder:"Enter push notification title..."})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Push Notification Body"}),e.jsx("textarea",{value:i.messageTemplate.pushBody||"",onChange:m=>n("messageTemplate","pushBody",m.target.value),className:"form-input",rows:"3",placeholder:"Enter push notification body..."})]})]}),i.channels.includes("In-app Banner")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Banner Title"}),e.jsx("input",{type:"text",value:i.messageTemplate.bannerTitle||"",onChange:m=>n("messageTemplate","bannerTitle",m.target.value),className:"form-input",placeholder:"Enter banner title..."})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Banner Description"}),e.jsx("textarea",{value:i.messageTemplate.bannerDescription||"",onChange:m=>n("messageTemplate","bannerDescription",m.target.value),className:"form-input",rows:"3",placeholder:"Enter banner description..."})]})]}),i.channels.includes("Concierge")&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Concierge Script"}),e.jsx("textarea",{value:i.messageTemplate.conciergeScript||"",onChange:m=>n("messageTemplate","conciergeScript",m.target.value),className:"form-input",rows:"6",placeholder:"Enter concierge conversation script..."})]}),i.channels.length===0&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"required",children:"Message Content"}),e.jsx("textarea",{value:i.messageTemplate.content||"",onChange:m=>n("messageTemplate","content",m.target.value),className:"form-input",rows:"4",placeholder:"Enter your message template..."})]})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Language"}),e.jsx("select",{value:i.messageTemplate.language,onChange:m=>n("messageTemplate","language",m.target.value),className:"form-input",children:c.map(m=>e.jsx("option",{value:m,children:m},m))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tone"}),e.jsx("select",{value:i.messageTemplate.tone,onChange:m=>n("messageTemplate","tone",m.target.value),className:"form-input",children:d.map(m=>e.jsx("option",{value:m,children:m},m))})]})]})]})}function YC({customFunction:i,handleInputChange:t,handleNestedInputChange:n}){return e.jsxs("div",{className:"builder-step",children:[e.jsx("h4",{children:"AI Support & Review"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"AI Optimization"}),e.jsxs("div",{className:"ai-options",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.aiOptimization.autoOptimization,onChange:l=>n("aiOptimization","autoOptimization",l.target.checked)}),e.jsx("span",{children:"Enable auto-optimization (Let AI test timings, channels, message copy)"})]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.aiOptimization.suggestSegments,onChange:l=>n("aiOptimization","suggestSegments",l.target.checked)}),e.jsx("span",{children:"Use AI to suggest segments/personas (Based on prior conversions/booking behaviour)"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Control & Testing"}),e.jsx("div",{className:"control-options",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.testMode,onChange:l=>t("testMode",l.target.checked)}),e.jsx("span",{children:"Preview/Test mode (Dry-run on sample data)"})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Function Summary"}),e.jsxs("div",{className:"function-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Name:"})," ",i.title||"Not set"]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Type:"})," ",i.functionType]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Trigger:"})," ",i.triggerEvent]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Offers:"})," ",i.offerSelection.length>0?i.offerSelection.join(", "):"None selected"]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Channels:"})," ",i.channels.join(", ")]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Status:"})," ",i.status]})]})]})]})}function wN({isOpen:i,onClose:t,onSave:n,editingFunction:l=null,getBookingTypeIcon:c}){const[d,m]=I.useState({title:"",description:"",functionType:"",objectives:[],priority:"Medium",tags:[],status:"Draft",triggerEvents:[],triggerConditions:[{id:1,triggerEvent:"",operator:"And",isActive:!0}],triggerFrequency:"",eventSources:["Mobile app","Website","API"],offerCategories:[],timingOption:"",timingValue:"",cooldownPeriod:"",personaGroups:[],products:[],exclusions:{personas:[],loyaltyTiers:[],geo:[],cardTypes:[]},userLimits:{perUserPerDay:1,perUserPerWeek:3,maxTriggersPerProgram:1e3},offerSelection:[],offerFallback:{enabled:!1,fallbackOffers:[]},offerVisibilityRules:{maxPrice:null,minInventory:null},channels:[],messageTemplate:{type:"saved",templateId:null,content:"",language:"English",tone:"Formal",aiCopywriting:!1},aiOptimization:{autoOptimization:!1,suggestSegments:!1},testMode:!1,auditTrail:{createdBy:"Current User",createdAt:new Date().toISOString(),lastModifiedBy:"Current User",lastModifiedAt:new Date().toISOString()}}),[f,y]=I.useState(1),[g,j]=I.useState(!1),[S,A]=I.useState(""),[O,D]=I.useState({}),[H,U]=I.useState(""),[q,Y]=I.useState(!1),[P,Q]=I.useState([]),se=6,z=[{id:"revenue_uplift",name:"Revenue uplift",description:"Drive incremental revenue through offers",category:"Revenue & Commercial"},{id:"ancillary_attach",name:"Ancillary attach rate",description:"Increase % of bookings with ancillaries (bags, seats, lounge, etc.)",category:"Revenue & Commercial"},{id:"basket_size",name:"Basket size increase",description:"Drive higher average booking or transaction value",category:"Revenue & Commercial"},{id:"upgrade_conversion",name:"Upgrade conversion",description:"Convert more users to premium options (e.g. flight class, hotel room)",category:"Revenue & Commercial"},{id:"offer_redemption",name:"Offer redemption rate",description:"Track how often offered upsells are accepted",category:"Revenue & Commercial"},{id:"booking_completion",name:"Booking completion rate",description:"Reduce abandonment by nudging users who start but don't finish",category:"Revenue & Commercial"},{id:"payment_adoption",name:"Payment method adoption",description:"Promote preferred payment rails (e.g. proprietary card, BNPL)",category:"Revenue & Commercial"},{id:"supplier_mix",name:"Supplier mix optimization",description:"Shift bookings to preferred/negotiated suppliers",category:"Revenue & Commercial"},{id:"repeat_booking",name:"Repeat booking rate",description:"Increase how often a user books again in a set period",category:"Retention & Loyalty"},{id:"loyalty_participation",name:"Loyalty program participation",description:"Encourage more users to enroll in or engage with a loyalty program",category:"Retention & Loyalty"},{id:"points_redemption",name:"Points redemption volume",description:"Boost loyalty point usage (reduces financial liability for banks)",category:"Retention & Loyalty"},{id:"card_usage",name:"Card usage frequency",description:"Drive card spend through exclusive offers tied to usage",category:"Retention & Loyalty"},{id:"product_stickiness",name:"Product stickiness",description:"Encourage engagement with multiple bank products (e.g. travel + card + app)",category:"Retention & Loyalty"},{id:"tier_retention",name:"Tier retention or uplift",description:"Help users maintain or reach a higher tier by encouraging qualifying spend",category:"Retention & Loyalty"},{id:"customer_delight",name:"Customer delight",description:"Surprise-and-delight offers to improve NPS or perception",category:"Engagement & Experience"},{id:"offer_engagement",name:"Offer engagement rate",description:"% of customers clicking/opening an offer",category:"Engagement & Experience"},{id:"channel_engagement",name:"Channel engagement",description:"Track performance of SMS vs push vs concierge, etc.",category:"Engagement & Experience"},{id:"personalization",name:"Personalization accuracy",description:"Improve match rate of offer to persona or intent",category:"Engagement & Experience"},{id:"conversion_time",name:"Conversion time reduction",description:"Shorten the time between trigger  conversion",category:"Engagement & Experience"},{id:"support_deflection",name:"Support deflection",description:"Reduce inbound customer service load by pre-emptively resolving gaps",category:"Operational & Support"},{id:"concierge_balancing",name:"Concierge load balancing",description:"Use functions to route or automate low-touch upsells",category:"Operational & Support"},{id:"disruption_mitigation",name:"Involuntary disruption mitigation",description:"Trigger compensatory or goodwill offers post-disruption",category:"Operational & Support"},{id:"first_engagement",name:"First-time engagement",description:"Activate users who've never booked travel",category:"Strategic & Long-Term Value"},{id:"persona_shift",name:"Persona behavior shift",description:"Guide a segment toward new behaviors (e.g. lounge usage, longer stays)",category:"Strategic & Long-Term Value"},{id:"cross_sell_trial",name:"Product cross-sell trial",description:"Encourage use of other verticals (e.g. user books hotel  offer eSIM)",category:"Strategic & Long-Term Value"},{id:"data_enrichment",name:"Data enrichment",description:"Incentivize users to share data (calendar sync, preferences)",category:"Strategic & Long-Term Value"},{id:"corporate_adoption",name:"Corporate adoption",description:"Drive SMEs into corporate travel module via incentive",category:"Strategic & Long-Term Value"}];I.useEffect(()=>{l&&l.id?(m({...d,...l}),y(l.progress||1)):(m({title:"",description:"",functionType:"",objectives:[],priority:"Medium",tags:[],status:"Draft",triggerEvents:[],triggerConditions:[{id:1,triggerEvent:"",operator:"And",isActive:!0}],triggerFrequency:"",eventSources:["Mobile app","Website","API"],offerCategories:[],timingOption:"",timingValue:"",cooldownPeriod:"",personaGroups:[],products:[],exclusions:{personas:[],loyaltyTiers:[],geo:[],cardTypes:[]},userLimits:{perUserPerDay:1,perUserPerWeek:3,maxTriggersPerProgram:1e3},offerSelection:[],offerFallback:{enabled:!1,fallbackOffers:[]},offerVisibilityRules:{maxPrice:null,minInventory:null},channels:[],messageTemplate:{type:"saved",templateId:null,content:"",language:"English",tone:"Formal",aiCopywriting:!1},aiOptimization:{autoOptimization:!1,suggestSegments:!1},testMode:!1,auditTrail:{createdBy:"Current User",createdAt:new Date().toISOString(),lastModifiedBy:"Current User",lastModifiedAt:new Date().toISOString()}}),y(1),Q([]))},[l,i]);const M=(Ne,Se)=>{m(ee=>({...ee,[Ne]:Se})),P.length>0&&(console.log("Clearing validation errors on input change"),Q([]))};I.useEffect(()=>{P.length>0&&(console.log("Clearing cached validation errors on render"),Q([]))});const w=(Ne,Se,ee)=>{m(Re=>({...Re,[Ne]:{...Re[Ne],[Se]:ee}})),P.length>0&&Q([])},b=(Ne,Se)=>{m(ee=>{if(Ne.includes(".")){const[ce,le]=Ne.split("."),Ve=ee[ce]||{},nt=Ve[le]||[];return{...ee,[ce]:{...Ve,[le]:nt.includes(Se)?nt.filter(ps=>ps!==Se):[...nt,Se]}}}const Re=ee[Ne]||[];return{...ee,[Ne]:Re.includes(Se)?Re.filter(ce=>ce!==Se):[...Re,Se]}}),P.length>0&&Q([])},E=()=>{console.log("addTriggerCondition called, current triggerConditions:",d.triggerConditions);const Ne=d.triggerConditions.length>0?Math.max(...d.triggerConditions.map(Se=>Se.id))+1:1;console.log("newId calculated:",Ne),m(Se=>({...Se,triggerConditions:[...Se.triggerConditions,{id:Ne,triggerEvent:"",operator:"And",isActive:!0}]}))},k=Ne=>{d.triggerConditions.length>1&&m(Se=>({...Se,triggerConditions:Se.triggerConditions.filter(ee=>ee.id!==Ne)}))},V=(Ne,Se,ee)=>{m(Re=>({...Re,triggerConditions:Re.triggerConditions.map(ce=>ce.id===Ne?{...ce,[Se]:ee}:ce)}))},T=async()=>{console.log("handleSaveDraft called - setting isSaving to true"),j(!0),A("Saving draft...");try{const Ne={...d,progress:f,lastModified:new Date().toISOString(),status:"draft"};let Se;l&&l.id?(await Od.updateRevenueFunction(l.id,Ne,"draft"),Se=l.id):Se=await Od.saveRevenueFunction(Ne,"draft"),m(ee=>({...ee,id:Se})),n(Ne),A("Draft saved successfully!"),setTimeout(()=>A(""),3e3)}catch(Ne){console.error("Error saving draft:",Ne),A(`Error saving draft: ${Ne.message}`),console.error("Full error details:",Ne)}finally{j(!1)}},ie=async()=>{j(!0),A("Saving function..."),setTimeout(()=>{t(),j(!1)},500)},be=()=>{t()},J=()=>{Q([]),f<se&&y(f+1)},fe=()=>{f>1&&y(f-1)},Ee=Ne=>{Ne<=f&&y(Ne)},_e=Ne=>{D(Se=>({...Se,[Ne]:!Se[Ne]}))},F=Ne=>z.filter(ee=>ee.category===Ne).filter(ee=>d.objectives.includes(ee.id)).length,Te=Object.values({" Engagement Type":["upsell","cross-sell","delight","reminder","recovery","retargeting"]," Booking Type":["flight","hotel","activity","ticket","airport transfer","fast track","lounge","dining","eSIM"]," Persona / Customer Focus":["VIP","frequent traveler","corporate","new user","high spender","inactive"]," Objective Themes":["loyalty","revenue","support","conversion","tier uplift","retention"]," Contextual or Situational":["last minute","holiday season","pre trip","in trip","post trip","weather alert"]}).flat(),G=Ne=>Te.includes(Ne),B=()=>{if(!H.trim())return[];const Ne=H.toLowerCase(),Se=d.tags.map(ee=>ee.toLowerCase());return Te.filter(ee=>ee.toLowerCase().includes(Ne)&&!Se.includes(ee.toLowerCase()))},ue=Ne=>{U(Ne.target.value),Y(Ne.target.value.trim().length>0)},me=Ne=>{Ne.key==="Enter"?(Ne.preventDefault(),we(H.trim())):Ne.key==="Backspace"&&H===""&&d.tags.length>0&&K(d.tags[d.tags.length-1])},we=Ne=>{!Ne||d.tags.includes(Ne)||(m(Se=>({...Se,tags:[...Se.tags,Ne]})),U(""),Y(!1))},K=Ne=>{m(Se=>({...Se,tags:Se.tags.filter(ee=>ee!==Ne)}))},ye=Ne=>{we(Ne)},oe=()=>e.jsxs("div",{className:"breadcrumbs",children:[e.jsx("button",{className:"breadcrumb-link",onClick:t,children:"Revenue Optimizer"}),e.jsx("span",{className:"breadcrumb-separator",children:"/"}),e.jsx("button",{className:"breadcrumb-link",onClick:t,children:"Build"}),e.jsx("span",{className:"breadcrumb-separator",children:"/"}),e.jsx("span",{className:"breadcrumb-current",children:l?"Edit Function":"New Function"})]}),R=()=>e.jsx("div",{className:"step-indicator",children:[1,2,3,4,5,6].map(Ne=>{const Se=["Basic Info","Triggers","Targeting","Offers","Comms","Review"],ee=Ne===f,Re=Ne<f,ce=Ne<=f;return e.jsxs("div",{className:`step ${ee?"active":""} ${Re?"completed":""} ${ce?"clickable":""}`,onClick:()=>ce&&Ee(Ne),children:[e.jsx("span",{className:"step-number",children:Re?"":Ne}),e.jsx("span",{className:"step-label",children:Se[Ne-1]})]},Ne)})}),pe=()=>e.jsxs("div",{className:"builder-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:l?"Edit Custom Function":"Create New Function"}),e.jsx("p",{className:"header-subtitle",children:l?`Editing: ${l.title}`:"Build advanced revenue functions with custom logic and targeting"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"btn secondary",onClick:T,disabled:g,children:g?"Saving...":"Save for Later"}),e.jsx("button",{className:"btn secondary",onClick:be,children:"Cancel"})]})]}),De=()=>{switch(f){case 1:return e.jsx(bx,{customFunction:d,handleInputChange:M,handleArrayToggle:b,handleToggleCategory:_e,getSelectedCountForCategory:F,collapsedCategories:O,tagInput:H,setTagInput:U,showTagSuggestions:q,setShowTagSuggestions:Y,getFilteredTagSuggestions:B,handleTagInputChange:ue,handleTagInputKeyDown:me,addTag:we,removeTag:K,selectSuggestion:ye,isPredefinedTag:G});case 2:return e.jsx(HC,{customFunction:d,handleInputChange:M,handleArrayToggle:b,addTriggerCondition:E,removeTriggerCondition:k,updateTriggerCondition:V});case 3:return e.jsx(GC,{customFunction:d,handleInputChange:M,handleArrayToggle:b,handleNestedInputChange:w});case 4:return e.jsx($C,{customFunction:d,handleArrayToggle:b,handleNestedInputChange:w,handleInputChange:M,getBookingTypeIcon:c});case 5:return e.jsx(QC,{customFunction:d,handleArrayToggle:b,handleNestedInputChange:w});case 6:return e.jsx(YC,{customFunction:d,handleInputChange:M,handleNestedInputChange:w});default:return e.jsx(bx,{customFunction:d,handleInputChange:M,handleArrayToggle:b,handleToggleCategory:_e,getSelectedCountForCategory:F,collapsedCategories:O,tagInput:H,setTagInput:U,showTagSuggestions:q,setShowTagSuggestions:Y,getFilteredTagSuggestions:B,handleTagInputChange:ue,handleTagInputKeyDown:me,addTag:we,removeTag:K,selectSuggestion:ye,isPredefinedTag:G})}};return i?e.jsx("div",{className:"custom-builder-page",children:e.jsxs("div",{className:"builder-container",children:[oe(),pe(),R(),e.jsxs("div",{className:"builder-content",children:[P.length>0&&e.jsxs("div",{className:"validation-errors",children:[e.jsxs("div",{className:"validation-header",children:[e.jsx("span",{className:"validation-icon",children:""}),e.jsx("span",{className:"validation-title",children:"Please fix the following errors:"})]}),e.jsx("ul",{className:"validation-list",children:P.map((Ne,Se)=>e.jsx("li",{className:"validation-error",children:Ne},Se))})]}),De()]}),e.jsxs("div",{className:"builder-footer",children:[e.jsx("div",{className:"footer-left",children:S&&e.jsx("span",{className:"save-status",children:S})}),e.jsxs("div",{className:"footer-right",children:[e.jsx("button",{className:"btn secondary",onClick:be,children:"Cancel"}),e.jsxs("div",{className:"step-navigation",children:[f>1&&e.jsx("button",{className:"btn secondary",onClick:fe,children:"Previous"}),f<se?e.jsx("button",{className:"btn primary",onClick:J,children:"Next"}):e.jsx("button",{className:"btn primary",onClick:ie,children:l?"Update Function":"Save & Activate"})]})]})]})]})}):null}function KC({setShowFunctionBuilder:i,getBookingTypeIcon:t,handlePrepareComms:n}){const[l,c]=I.useState([{id:1,title:"Premium Flight Upsell",description:"Upsell premium seats and lounge access for business travelers",type:"Upsell",trigger:"Flight Booking",timingAmount:"24hrs",timingSequence:"After",offerSelection:["Seat Upgrade","Airport Lounge"],progress:3,lastModified:"2024-01-15T10:30:00Z",status:"Draft"},{id:2,title:"Hotel Cross-Sell Bundle",description:"Cross-sell airport transfers and activities for hotel bookings",type:"Cross-Sell",trigger:"Hotel Booking",timingAmount:"2 days",timingSequence:"After",offerSelection:["Airport Transfer","Event Ticket"],progress:2,lastModified:"2024-01-14T16:45:00Z",status:"Draft"}]),[d,m]=I.useState(!1),[f,y]=I.useState(null),g=()=>{y(null),m(!0)},j=q=>{y(q),m(!0)},S=q=>{c(Y=>Y.filter(P=>P.id!==q))},A=q=>{const Y=new Date(q),Q=Math.floor((new Date-Y)/(1e3*60*60));if(Q<1)return"Just now";if(Q<24)return`${Q}h ago`;const se=Math.floor(Q/24);return se<7?`${se}d ago`:Y.toLocaleDateString()},O=q=>{if(f)c(Y=>Y.map(P=>P.id===f.id?q:P));else{const Y={...q,id:Date.now()};c(P=>[...P,Y])}console.log("Saving custom function:",q),n(q)},D=()=>{m(!1),y(null)},H=()=>e.jsx("div",{className:"draft-button-container",children:e.jsxs("button",{className:"build-btn primary",onClick:g,children:[e.jsx("span",{className:"btn-icon",children:""}),"Start New Function"]})}),U=()=>e.jsxs("div",{className:"custom-builder-content",children:[e.jsx("div",{className:"content-header",children:e.jsxs("div",{className:"header-top",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h4",{children:"Custom Revenue Function Builder"}),e.jsx("p",{children:"Create advanced revenue functions with custom logic, conditions, and targeting"})]}),e.jsx("div",{className:"header-right",children:H()})]})}),l.length>0&&e.jsxs("div",{className:"draft-functions-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h4",{className:"draft-functions-title",children:["Draft Functions (",l.length,")"]}),e.jsx("p",{children:"Continue building your revenue functions"})]}),e.jsx("div",{className:"draft-functions-grid",children:l.map(q=>e.jsxs("div",{className:"draft-function-card",children:[e.jsxs("div",{className:"draft-function-header",children:[e.jsxs("div",{className:"draft-function-info",children:[e.jsx("h5",{children:q.title}),e.jsx("p",{children:q.description}),e.jsxs("div",{className:"draft-function-meta",children:[e.jsx("span",{className:"category-badge",children:q.type}),e.jsx("span",{className:"status-badge warning",children:"Draft"}),e.jsxs("span",{className:"progress-text",children:["Step ",q.progress," of 7"]})]})]}),e.jsxs("div",{className:"draft-function-actions",children:[e.jsx("button",{className:"function-btn primary",onClick:()=>j(q),children:"Continue Building"}),e.jsx("button",{className:"function-btn secondary",onClick:()=>S(q.id),children:"Delete"})]})]}),e.jsxs("div",{className:"draft-function-details",children:[e.jsxs("div",{className:"draft-function-triggers",children:[e.jsx("span",{className:"section-label",children:"Trigger:"}),e.jsxs("span",{className:"booking-type-tag",children:[t(q.trigger)," ",q.trigger]})]}),e.jsxs("div",{className:"draft-function-timing",children:[e.jsx("span",{className:"section-label",children:"Timing:"}),e.jsxs("span",{className:"timing-text",children:[q.timingAmount," ",q.timingSequence]})]}),e.jsxs("div",{className:"draft-function-offers",children:[e.jsx("span",{className:"section-label",children:"Offers:"}),q.offerSelection.map(Y=>e.jsxs("span",{className:"booking-type-tag target",children:[t(Y)," ",Y]},Y))]})]}),e.jsx("div",{className:"draft-function-footer",children:e.jsxs("span",{className:"last-modified",children:["Last modified: ",A(q.lastModified)]})})]},q.id))})]}),l.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h4",{children:"No Custom Functions Yet"}),e.jsx("p",{children:"Start building your first custom revenue function to unlock advanced targeting and logic"}),e.jsxs("button",{className:"build-btn primary",onClick:g,children:[e.jsx("span",{className:"btn-icon",children:""}),"Create Your First Function"]})]})]});return e.jsxs("div",{className:"custom-builder-section",children:[U(),e.jsx(wN,{isOpen:d,onClose:D,onSave:O,editingFunction:f,getBookingTypeIcon:t})]})}function XC({buildSubTab:i,setBuildSubTab:t,templateSearch:n,setTemplateSearch:l,templateFilter:c,setTemplateFilter:d,templateProductFilter:m,setTemplateProductFilter:f,templatePopularityFilter:y,setTemplatePopularityFilter:g,filteredTemplates:j,getBookingTypeIcon:S,getTemplateStatus:A,handleActivateTemplate:O,setShowFunctionBuilder:D,showTemplateModal:H,setShowTemplateModal:U,selectedTemplateForEdit:q,handlePrepareComms:Y,handlePauseTemplate:P,handleEditTemplate:Q}){const[se,z]=I.useState(null);I.useEffect(()=>{q&&z({...q,offerSelection:[...q.offerSelection],timingAmount:q.timingAmount||"24hrs",timingSequence:q.timingSequence||"After"})},[q]);const M=(k,V)=>{se&&z(T=>({...T,[k]:V}))},w=()=>{U(!1),setTimeout(()=>z(null),100)},b=k=>{z(V=>({...V,offerSelection:V.offerSelection.includes(k)?V.offerSelection.filter(T=>T!==k):[...V.offerSelection,k]}))},E=["Hotel","Flight","Airport Lounge","Fast Track","Airport Transfer","eSIM","Seat Upgrade","Event Ticket","Spa Treatment"];return e.jsxs("div",{className:"build-section",children:[e.jsxs("div",{className:"build-sub-tabs",children:[e.jsxs("button",{className:`build-sub-tab ${i==="templates"?"active":""}`,onClick:()=>t("templates"),children:[e.jsx("span",{className:"sub-tab-icon",children:""}),"Templates"]}),e.jsxs("button",{className:`build-sub-tab ${i==="custom"?"active":""}`,onClick:()=>t("custom"),children:[e.jsx("span",{className:"sub-tab-icon",children:""}),"Build Custom"]})]}),i==="templates"&&e.jsx("div",{className:"templates-sub-section",children:e.jsxs("div",{className:"template-library",children:[e.jsxs("div",{className:"template-controls",children:[e.jsxs("div",{className:"template-search",children:[e.jsx("label",{className:"filter-label",children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search templates...",value:n,onChange:k=>l(k.target.value),className:"template-search-input"})]}),e.jsxs("div",{className:"template-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Type"}),e.jsxs("select",{value:c,onChange:k=>d(k.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"Cross-Sell",children:"Cross-Sell"}),e.jsx("option",{value:"Upsell",children:"Upsell"}),e.jsx("option",{value:"Bundle",children:"Bundle"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Product"}),e.jsxs("select",{value:m,onChange:k=>f(k.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Products"}),e.jsx("option",{value:"Flight",children:"Flight"}),e.jsx("option",{value:"Hotel",children:"Hotel"}),e.jsx("option",{value:"Airport Lounge",children:"Airport Lounge"}),e.jsx("option",{value:"Fast Track",children:"Fast Track"}),e.jsx("option",{value:"Airport Transfer",children:"Airport Transfer"}),e.jsx("option",{value:"eSIM",children:"eSIM"}),e.jsx("option",{value:"Seat Upgrade",children:"Seat Upgrade"}),e.jsx("option",{value:"Event Ticket",children:"Event Ticket"}),e.jsx("option",{value:"Spa Treatment",children:"Spa Treatment"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Popularity"}),e.jsxs("select",{value:y,onChange:k=>g(k.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Templates"}),e.jsx("option",{value:"popular",children:"Popular (Active)"}),e.jsx("option",{value:"new",children:"New (Not Active)"})]})]})]})]}),e.jsx("div",{className:"template-grid",children:j.map(k=>{const V=A(k);return e.jsxs("div",{className:"template-card",children:[e.jsxs("div",{className:"template-header",children:[e.jsx("h4",{children:k.title}),e.jsxs("div",{className:"template-meta",children:[e.jsx("span",{className:`template-type ${k.type.toLowerCase()}`,children:k.type}),V.status!=="Not Implemented"?e.jsx("span",{className:`implementation-status ${V.status.toLowerCase()}`,children:V.status==="Active"?" Active":" Draft"}):e.jsx("span",{className:`template-status ${k.status.toLowerCase().replace(" ","-")}`,children:k.status})]})]}),e.jsx("p",{className:"template-description",children:k.description}),e.jsxs("div",{className:"template-details",children:[e.jsxs("div",{className:"template-trigger",children:[e.jsx("span",{className:"detail-label",children:"Trigger:"}),e.jsx("span",{className:"detail-value",children:k.trigger})]}),e.jsxs("div",{className:"template-timing",children:[e.jsx("span",{className:"detail-label",children:"Timing:"}),e.jsx("span",{className:"detail-value",children:k.timing})]}),k.conditions&&e.jsxs("div",{className:"template-conditions",children:[e.jsx("span",{className:"detail-label",children:"Conditions:"}),e.jsx("span",{className:"detail-value",children:k.conditions})]}),e.jsxs("div",{className:"template-offers",children:[e.jsx("span",{className:"detail-label",children:"Offers:"}),e.jsx("div",{className:"offer-icons",children:k.offerSelection.map(T=>e.jsx("span",{className:"offer-icon",children:S(T)},T))})]})]}),k.status==="Active"&&k.performance&&e.jsxs("div",{className:"template-performance",children:[e.jsxs("div",{className:"perf-metric",children:[e.jsx("span",{className:"perf-label",children:"Revenue"}),e.jsx("span",{className:"perf-value",children:k.performance.revenue})]}),e.jsxs("div",{className:"perf-metric",children:[e.jsx("span",{className:"perf-label",children:"Conversion"}),e.jsx("span",{className:"perf-value",children:k.performance.conversionRate})]}),e.jsxs("div",{className:"perf-metric",children:[e.jsx("span",{className:"perf-label",children:"Comms"}),e.jsx("span",{className:"perf-value",children:k.performance.comms})]})]}),e.jsx("div",{className:"template-actions",children:k.status==="Active"||k.status==="active"?e.jsxs("div",{className:"active-template-actions",style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"template-btn secondary",onClick:()=>P(k),children:"Pause"}),e.jsx("button",{className:"template-btn primary",onClick:()=>Q(k),children:"Edit"})]}):V.status==="Active"?e.jsx("button",{className:"template-btn primary",children:"View Performance"}):V.status==="Draft"?e.jsx("button",{className:"template-btn secondary",children:"Continue Building"}):e.jsx("button",{className:"template-btn primary",onClick:()=>O(k),children:"Activate"})})]},k.id)})})]})}),H&&e.jsx("div",{className:"modal-overlay",onClick:w,children:e.jsx("div",{className:"modal-content modal-large",onClick:k=>k.stopPropagation(),children:se&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Edit Revenue Function"}),e.jsx("button",{className:"modal-close",onClick:w,children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"template-edit-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Basic Information"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Function Name"}),e.jsx("input",{type:"text",value:se.title,onChange:k=>M("title",k.target.value),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:se.description,onChange:k=>M("description",k.target.value),className:"form-input",rows:"3"})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Function Logic"}),e.jsx("div",{className:"form-group",children:e.jsx("label",{style:{marginBottom:"0.5rem",display:"block"},children:e.jsxs("span",{style:{fontWeight:"normal"},children:[e.jsx("strong",{children:se.title||"Function Name"})," should be sent"," ",e.jsxs("select",{value:se.timingAmount||"24hrs",onChange:k=>M("timingAmount",k.target.value),className:"form-input",style:{display:"inline-block",width:"auto",minWidth:"120px",margin:"0 0.25rem",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:[e.jsx("option",{value:"Immediately",children:"Immediately"}),e.jsx("option",{value:"24hrs",children:"24hrs"}),e.jsx("option",{value:"2 days",children:"2 days"}),e.jsx("option",{value:"3 days",children:"3 days"}),e.jsx("option",{value:"5 days",children:"5 days"}),e.jsx("option",{value:"1 week",children:"1 week"}),e.jsx("option",{value:"2 weeks",children:"2 weeks"}),e.jsx("option",{value:"1 month",children:"1 month"}),e.jsx("option",{value:"3 months",children:"3 months"})]})," ",e.jsxs("select",{value:se.timingSequence||"After",onChange:k=>M("timingSequence",k.target.value),className:"form-input",style:{display:"inline-block",width:"auto",minWidth:"80px",margin:"0 0.25rem",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:[e.jsx("option",{value:"Before",children:"Before"}),e.jsx("option",{value:"After",children:"After"})]})," ",e.jsxs("select",{value:se.trigger,onChange:k=>M("trigger",k.target.value),className:"form-input",style:{display:"inline-block",width:"auto",minWidth:"140px",margin:"0 0.25rem",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:[e.jsx("option",{value:"Flight Booking",children:"Flight Booking"}),e.jsx("option",{value:"Flight Departure",children:"Flight Departure"}),e.jsx("option",{value:"Flight Day",children:"Flight Day"}),e.jsx("option",{value:"Hotel Booking",children:"Hotel Booking"}),e.jsx("option",{value:"Hotel Check-in",children:"Hotel Check-in"})]})]})})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Offers"}),e.jsx("div",{className:"offers-grid",children:E.map(k=>e.jsxs("label",{className:"offer-checkbox",children:[e.jsx("input",{type:"checkbox",checked:se.offerSelection.includes(k),onChange:()=>b(k)}),e.jsxs("span",{className:"offer-label",children:[S(k)," ",k]})]},k))})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:w,children:"Cancel"}),e.jsx("button",{className:"modal-btn primary",onClick:()=>Y(se),children:"Prepare Comms"})]})]})})}),i==="custom"&&e.jsx(KC,{setShowFunctionBuilder:D,getBookingTypeIcon:S,handlePrepareComms:Y})]})}function WC({revenueFunctions:i,setActiveTab:t,getBookingTypeIcon:n,getStatusColor:l}){const[c,d]=I.useState("overview"),[m,f]=I.useState([]),[y,g]=I.useState([]),[j,S]=I.useState(null),[A,O]=I.useState(!1),[D,H]=I.useState(!1),[U,q]=I.useState(!1),[Y,P]=I.useState(!1),[Q,se]=I.useState(!1),[z,M]=I.useState(""),[w,b]=I.useState("all"),[E,k]=I.useState("all"),[V,T]=I.useState("all"),[ie,be]=I.useState({name:"",description:"",type:"email",revenueType:"upsell",channels:["email"],messageTemplate:{emailSubject:"",emailBody:"",smsMessage:"",pushTitle:"",pushMessage:"",inAppTitle:"",inAppMessage:"",tiktokCaption:"",tiktokHashtags:"",instagramCaption:"",instagramHashtags:"",facebookCaption:"",facebookLink:""},images:{emailHeaderImage:null,emailBodyImage:null,pushIcon:null,inAppBanner:null,tiktokVideo:null,instagramPost:null,facebookPost:null},language:"english",tone:"professional"}),J=["email","sms","push","in-app","tiktok","instagram","facebook"],fe=[{id:1,name:"Social Media Acquisition Campaign",description:"New acquisition campaign for TikTok & Instagram ads",type:"email",revenueType:"acquisition",status:"active",createdAt:"2024-01-15",performance:{impressions:1200,clickThroughRate:66.7,converted:3.8},images:{emailHeaderImage:"/social-media-acquisition-ad.png",emailBodyImage:null,pushIcon:null,inAppBanner:null,tiktokVideo:null,instagramPost:null,facebookPost:null}},{id:2,name:"Cross-sell SMS Template",description:"SMS for cross-selling related products",type:"email",revenueType:"cross-sell",status:"draft",createdAt:"2024-01-20",performance:{impressions:500,clickThroughRate:60,converted:2.4},images:{emailHeaderImage:"/sapphire-reserve-ad.png",emailBodyImage:null,pushIcon:null,inAppBanner:null,tiktokVideo:null,instagramPost:null,facebookPost:null}},{id:3,name:"Push Notification Template",description:"Push notification for app users",type:"email",revenueType:"upsell",status:"active",createdAt:"2024-01-25",performance:{impressions:800,clickThroughRate:75,converted:3.5},images:{emailHeaderImage:"/chase-travel-ad.png",emailBodyImage:null,pushIcon:null,inAppBanner:null,tiktokVideo:null,instagramPost:null,facebookPost:null}}];I.useEffect(()=>{f(fe)},[]),I.useEffect(()=>{let R=m;z&&(R=R.filter(pe=>pe.name.toLowerCase().includes(z.toLowerCase())||pe.description.toLowerCase().includes(z.toLowerCase()))),w!=="all"&&(R=R.filter(pe=>pe.type===w)),E!=="all"&&(R=R.filter(pe=>pe.revenueType===E)),V!=="all"&&(R=R.filter(pe=>pe.status===V)),g(R)},[m,z,w,E,V]);const Ee=()=>{const R={id:Date.now(),...ie,status:"draft",createdAt:new Date().toISOString().split("T")[0],performance:{impressions:0,clickThroughRate:0,converted:0}};f(pe=>[...pe,R]),O(!1),me(),S(null)},_e=()=>{j&&(f(R=>R.map(pe=>pe.id===j.id?{...ie,id:pe.id,status:pe.status,createdAt:pe.createdAt,performance:pe.performance}:pe)),O(!1),S(null),me())},F=()=>{j&&(f(R=>R.filter(pe=>pe.id!==j.id)),P(!1),S(null))},de=R=>{const pe={...R,id:Date.now(),status:"draft",createdAt:new Date().toISOString().split("T")[0],performance:{impressions:0,clickThroughRate:0,converted:0}};f(De=>[...De,pe]),q(!1)},Te=(R,pe)=>{be(De=>({...De,[R]:De[R].includes(pe)?De[R].filter(Ne=>Ne!==pe):[...De[R],pe]}))},G=(R,pe,De)=>{be(Ne=>({...Ne,[R]:{...Ne[R],[pe]:De}}))},B=(R,pe)=>{if(pe){const De=new FileReader;De.onload=Ne=>{be(Se=>({...Se,images:{...Se.images,[R]:Ne.target.result}}))},De.readAsDataURL(pe)}},ue=R=>{be(pe=>({...pe,images:{...pe.images,[R]:null}}))},me=()=>{be({name:"",description:"",type:"email",revenueType:"upsell",channels:["email"],messageTemplate:{emailSubject:"",emailBody:"",smsMessage:"",pushTitle:"",pushMessage:"",inAppTitle:"",inAppMessage:"",tiktokCaption:"",tiktokHashtags:"",instagramCaption:"",instagramHashtags:"",facebookCaption:"",facebookLink:""},images:{emailHeaderImage:null,emailBodyImage:null,pushIcon:null,inAppBanner:null,tiktokVideo:null,instagramPost:null,facebookPost:null},language:"english",tone:"professional"})},we=R=>{S(R),be({name:R.name,description:R.description,type:R.type,revenueType:R.revenueType,channels:R.channels||["email"],messageTemplate:R.messageTemplate||{emailSubject:"",emailBody:"",smsMessage:"",pushTitle:"",pushMessage:"",inAppTitle:"",inAppMessage:"",tiktokCaption:"",tiktokHashtags:"",instagramCaption:"",instagramHashtags:"",facebookCaption:"",facebookLink:""},images:R.images||{emailHeaderImage:null,emailBodyImage:null,pushIcon:null,inAppBanner:null,tiktokVideo:null,instagramPost:null,facebookPost:null},language:R.language||"english",tone:R.tone||"professional"}),O(!0)},K=R=>{switch(R){case"active":return"#10b981";case"draft":return"#f59e0b";case"archived":return"#6b7280";default:return"#6b7280"}},ye=R=>{switch(R){case"email":return"";case"sms":return"";case"push":return"";case"in-app":return"";default:return""}},oe=R=>{switch(R){case"upsell":return"#3b82f6";case"cross-sell":return"#8b5cf6";case"pre-sell":return"#10b981";default:return"#6b7280"}};return e.jsxs("div",{className:"comms-section",children:[e.jsxs("div",{className:"comms-header",children:[e.jsxs("div",{className:"comms-header-left",children:[e.jsx("h3",{children:"Communication Templates"}),e.jsx("p",{children:"Manage and create communication templates for your revenue functions"})]}),e.jsxs("div",{className:"comms-header-right",children:[e.jsx("button",{className:"comms-btn secondary",onClick:()=>q(!0),children:"Import Template"}),e.jsx("button",{className:"comms-btn primary",onClick:()=>{S(null),me(),O(!0)},children:"Create Template"})]})]}),e.jsxs("div",{className:"comms-overview",children:[e.jsxs("div",{className:"template-controls",children:[e.jsxs("div",{className:"template-search",children:[e.jsx("label",{className:"filter-label",children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search templates...",value:z,onChange:R=>M(R.target.value),className:"template-search-input"})]}),e.jsxs("div",{className:"template-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Type"}),e.jsxs("select",{value:w,onChange:R=>b(R.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"push",children:"Push Notification"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"in-app",children:"In-App"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Revenue Type"}),e.jsxs("select",{value:E,onChange:R=>k(R.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"upsell",children:"Up-sell"}),e.jsx("option",{value:"cross-sell",children:"Cross-sell"}),e.jsx("option",{value:"pre-sell",children:"Pre-sell (New acquisition)"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Status"}),e.jsxs("select",{value:V,onChange:R=>T(R.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]})]}),e.jsx("div",{className:"template-grid",children:y.map(R=>e.jsxs("div",{className:"template-card",children:[e.jsxs("div",{className:"template-header",children:[e.jsx("div",{className:"template-icon",children:ye(R.type)}),e.jsxs("div",{className:"template-info",children:[e.jsx("h4",{children:R.name}),e.jsx("p",{children:R.description})]}),e.jsx("div",{className:"template-status",children:e.jsx("span",{className:"status-badge",style:{backgroundColor:K(R.status)},children:R.status})})]}),e.jsxs("div",{className:"template-meta-horizontal",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{className:"meta-item-horizontal",style:{flex:1},children:[e.jsx("span",{className:"meta-label",children:"Type:"}),e.jsx("span",{className:"meta-value",children:R.type})]}),e.jsxs("div",{className:"meta-item-horizontal",style:{flex:1},children:[e.jsx("span",{className:"meta-label",children:"Revenue:"}),e.jsx("span",{className:"meta-value",style:{color:oe(R.revenueType)},children:R.revenueType})]}),e.jsxs("div",{className:"meta-item-horizontal",style:{flex:1},children:[e.jsx("span",{className:"meta-label",children:"Created:"}),e.jsx("span",{className:"meta-value",children:R.createdAt})]})]}),e.jsxs("div",{className:"template-performance",style:{display:"flex",justifyContent:"space-between",gap:"8px",marginTop:"12px"},children:[e.jsxs("div",{className:"perf-item",style:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#f8fafc",padding:"8px 12px",borderRadius:"6px",flex:1,border:"1px solid #e2e8f0"},children:[e.jsx("span",{className:"perf-number",style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",lineHeight:"1.2"},children:R.performance?.impressions||0}),e.jsx("span",{className:"perf-label",style:{fontSize:"12px",color:"#64748b",fontWeight:"500",marginTop:"2px"},children:"Impressions"})]}),e.jsxs("div",{className:"perf-item",style:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#f0f9ff",padding:"8px 12px",borderRadius:"6px",flex:1,border:"1px solid #bae6fd"},children:[e.jsxs("span",{className:"perf-number",style:{fontSize:"18px",fontWeight:"600",color:"#0369a1",lineHeight:"1.2"},children:[R.performance?.clickThroughRate||0,"%"]}),e.jsx("span",{className:"perf-label",style:{fontSize:"12px",color:"#0284c7",fontWeight:"500",marginTop:"2px"},children:"CTR"})]}),e.jsxs("div",{className:"perf-item",style:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#f0fdf4",padding:"8px 12px",borderRadius:"6px",flex:1,border:"1px solid #bbf7d0"},children:[e.jsxs("span",{className:"perf-number",style:{fontSize:"18px",fontWeight:"600",color:"#166534",lineHeight:"1.2"},children:[R.performance?.converted||0,"%"]}),e.jsx("span",{className:"perf-label",style:{fontSize:"12px",color:"#16a34a",fontWeight:"500",marginTop:"2px"},children:"Converted"})]})]}),e.jsxs("div",{className:"template-actions",children:[e.jsx("button",{className:"template-btn secondary",onClick:()=>{S(R),se(!0)},children:"Preview"}),e.jsx("button",{className:"template-btn secondary",onClick:()=>we(R),children:"Edit"}),e.jsx("button",{className:"template-btn secondary",onClick:()=>{S(R),P(!0)},children:"Delete"}),e.jsx("button",{className:"template-btn primary",children:R.status==="active"?"Pause":"Activate"})]})]},R.id))}),y.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h4",{children:"No templates found"}),e.jsx("p",{children:"Create your first communication template to get started"}),e.jsx("button",{className:"comms-btn primary",onClick:()=>O(!0),children:"Create Template"})]})]}),A&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content modal-large",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{color:"white"},children:j?"Edit Communication Template":"Create Communication Template"}),e.jsx("button",{className:"modal-close",onClick:()=>{O(!1),me(),S(null)},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"template-edit-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Basic Information"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Template Name"}),e.jsx("input",{type:"text",className:"form-input",value:ie.name,onChange:R=>be(pe=>({...pe,name:R.target.value})),placeholder:"Enter template name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{className:"form-input",value:ie.description,onChange:R=>be(pe=>({...pe,description:R.target.value})),placeholder:"Describe the purpose of this template",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Revenue Type"}),e.jsxs("select",{className:"form-input",value:ie.revenueType,onChange:R=>be(pe=>({...pe,revenueType:R.target.value})),children:[e.jsx("option",{value:"upsell",children:"Up-sell"}),e.jsx("option",{value:"cross-sell",children:"Cross-sell"}),e.jsx("option",{value:"pre-sell",children:"Pre-sell (New acquisition)"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Communication Channels"}),e.jsx("div",{className:"channels-grid",children:J.map(R=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:ie.channels.includes(R),onChange:()=>Te("channels",R)}),e.jsx("span",{className:"checkbox-text",children:R.charAt(0).toUpperCase()+R.slice(1)})]},R))})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Message Template"}),ie.channels.includes("email")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Subject"}),e.jsx("input",{type:"text",className:"form-input",value:ie.messageTemplate.emailSubject,onChange:R=>G("messageTemplate","emailSubject",R.target.value),placeholder:"Enter email subject"})]}),ie.channels.includes("email")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Body"}),e.jsx("textarea",{className:"form-input",value:ie.messageTemplate.emailBody,onChange:R=>G("messageTemplate","emailBody",R.target.value),placeholder:"Enter email body content",rows:"6"})]}),ie.channels.includes("sms")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"SMS Message"}),e.jsx("textarea",{className:"form-input",value:ie.messageTemplate.smsMessage,onChange:R=>G("messageTemplate","smsMessage",R.target.value),placeholder:"Enter SMS message (160 characters max)",rows:"3",maxLength:"160"}),e.jsxs("div",{className:"char-count",children:[ie.messageTemplate.smsMessage.length,"/160"]})]}),ie.channels.includes("push")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Push Notification Title"}),e.jsx("input",{type:"text",className:"form-input",value:ie.messageTemplate.pushTitle,onChange:R=>G("messageTemplate","pushTitle",R.target.value),placeholder:"Enter push notification title"})]}),ie.channels.includes("push")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Push Notification Message"}),e.jsx("textarea",{className:"form-input",value:ie.messageTemplate.pushMessage,onChange:R=>G("messageTemplate","pushMessage",R.target.value),placeholder:"Enter push notification message",rows:"3"})]}),ie.channels.includes("in-app")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"In-App Notification Title"}),e.jsx("input",{type:"text",className:"form-input",value:ie.messageTemplate.inAppTitle,onChange:R=>G("messageTemplate","inAppTitle",R.target.value),placeholder:"Enter in-app notification title"})]}),ie.channels.includes("in-app")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"In-App Notification Message"}),e.jsx("textarea",{className:"form-input",value:ie.messageTemplate.inAppMessage,onChange:R=>G("messageTemplate","inAppMessage",R.target.value),placeholder:"Enter in-app notification message",rows:"3"})]}),ie.channels.includes("tiktok")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TikTok Caption"}),e.jsx("textarea",{className:"form-input",value:ie.messageTemplate.tiktokCaption,onChange:R=>G("messageTemplate","tiktokCaption",R.target.value),placeholder:"Enter TikTok video caption",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TikTok Hashtags"}),e.jsx("input",{type:"text",className:"form-input",value:ie.messageTemplate.tiktokHashtags,onChange:R=>G("messageTemplate","tiktokHashtags",R.target.value),placeholder:"#travel #deals #upsell"})]})]}),ie.channels.includes("instagram")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Instagram Caption"}),e.jsx("textarea",{className:"form-input",value:ie.messageTemplate.instagramCaption,onChange:R=>G("messageTemplate","instagramCaption",R.target.value),placeholder:"Enter Instagram post caption",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Instagram Hashtags"}),e.jsx("input",{type:"text",className:"form-input",value:ie.messageTemplate.instagramHashtags,onChange:R=>G("messageTemplate","instagramHashtags",R.target.value),placeholder:"#travel #vacation #upgrade"})]})]}),ie.channels.includes("facebook")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Facebook Post Caption"}),e.jsx("textarea",{className:"form-input",value:ie.messageTemplate.facebookCaption,onChange:R=>G("messageTemplate","facebookCaption",R.target.value),placeholder:"Enter Facebook post caption",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Facebook Link (Optional)"}),e.jsx("input",{type:"url",className:"form-input",value:ie.messageTemplate.facebookLink,onChange:R=>G("messageTemplate","facebookLink",R.target.value),placeholder:"https://example.com/offer"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Images & Assets"}),ie.channels.includes("email")&&e.jsxs("div",{className:"image-upload-group",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Header Image"}),e.jsx("div",{className:"image-upload-container",children:ie.images.emailHeaderImage?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:ie.images.emailHeaderImage,alt:"Email header",className:"preview-image"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>ue("emailHeaderImage"),children:""})]}):e.jsxs("label",{className:"image-upload-label",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R=>B("emailHeaderImage",R.target.files[0]),className:"image-upload-input"}),e.jsxs("div",{className:"upload-placeholder",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Upload Header Image"})]})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Body Image"}),e.jsx("div",{className:"image-upload-container",children:ie.images.emailBodyImage?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:ie.images.emailBodyImage,alt:"Email body",className:"preview-image"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>ue("emailBodyImage"),children:""})]}):e.jsxs("label",{className:"image-upload-label",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R=>B("emailBodyImage",R.target.files[0]),className:"image-upload-input"}),e.jsxs("div",{className:"upload-placeholder",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Upload Body Image"})]})]})})]})]}),ie.channels.includes("push")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Push Notification Icon"}),e.jsx("div",{className:"image-upload-container",children:ie.images.pushIcon?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:ie.images.pushIcon,alt:"Push icon",className:"preview-image icon-preview"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>ue("pushIcon"),children:""})]}):e.jsxs("label",{className:"image-upload-label",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R=>B("pushIcon",R.target.files[0]),className:"image-upload-input"}),e.jsxs("div",{className:"upload-placeholder",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Upload Push Icon"})]})]})})]}),ie.channels.includes("in-app")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"In-App Banner Image"}),e.jsx("div",{className:"image-upload-container",children:ie.images.inAppBanner?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:ie.images.inAppBanner,alt:"In-app banner",className:"preview-image"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>ue("inAppBanner"),children:""})]}):e.jsxs("label",{className:"image-upload-label",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R=>B("inAppBanner",R.target.files[0]),className:"image-upload-input"}),e.jsxs("div",{className:"upload-placeholder",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Upload Banner Image"})]})]})})]}),ie.channels.includes("tiktok")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TikTok Video Thumbnail"}),e.jsx("div",{className:"image-upload-container",children:ie.images.tiktokVideo?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:ie.images.tiktokVideo,alt:"TikTok video",className:"preview-image"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>ue("tiktokVideo"),children:""})]}):e.jsxs("label",{className:"image-upload-label",children:[e.jsx("input",{type:"file",accept:"image/*,video/*",onChange:R=>B("tiktokVideo",R.target.files[0]),className:"image-upload-input"}),e.jsxs("div",{className:"upload-placeholder",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Upload Video/Thumbnail"})]})]})})]}),ie.channels.includes("instagram")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Instagram Post Image"}),e.jsx("div",{className:"image-upload-container",children:ie.images.instagramPost?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:ie.images.instagramPost,alt:"Instagram post",className:"preview-image"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>ue("instagramPost"),children:""})]}):e.jsxs("label",{className:"image-upload-label",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R=>B("instagramPost",R.target.files[0]),className:"image-upload-input"}),e.jsxs("div",{className:"upload-placeholder",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Upload Post Image"})]})]})})]}),ie.channels.includes("facebook")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Facebook Post Image"}),e.jsx("div",{className:"image-upload-container",children:ie.images.facebookPost?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:ie.images.facebookPost,alt:"Facebook post",className:"preview-image"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>ue("facebookPost"),children:""})]}):e.jsxs("label",{className:"image-upload-label",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R=>B("facebookPost",R.target.files[0]),className:"image-upload-input"}),e.jsxs("div",{className:"upload-placeholder",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Upload Post Image"})]})]})})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{children:"Language & Tone"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Language"}),e.jsxs("select",{className:"form-input",value:ie.language,onChange:R=>be(pe=>({...pe,language:R.target.value})),children:[e.jsx("option",{value:"english",children:"English"}),e.jsx("option",{value:"spanish",children:"Spanish"}),e.jsx("option",{value:"french",children:"French"}),e.jsx("option",{value:"german",children:"German"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tone"}),e.jsxs("select",{className:"form-input",value:ie.tone,onChange:R=>be(pe=>({...pe,tone:R.target.value})),children:[e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"friendly",children:"Friendly"}),e.jsx("option",{value:"casual",children:"Casual"}),e.jsx("option",{value:"formal",children:"Formal"})]})]})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:()=>{O(!1),me()},children:"Cancel"}),e.jsx("button",{className:"modal-btn primary",onClick:j?_e:Ee,disabled:!ie.name,children:j?"Update Template":"Save Template"})]})]})}),U&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Import Communication Template"}),e.jsx("button",{className:"modal-close",onClick:()=>q(!1),children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Template File"}),e.jsx("input",{type:"file",className:"form-input",accept:".json,.csv",onChange:R=>{const pe=R.target.files[0];if(pe){const De=new FileReader;De.onload=Ne=>{try{const Se=JSON.parse(Ne.target.result);de(Se)}catch(Se){console.error("Error parsing template file:",Se)}},De.readAsText(pe)}}}),e.jsx("div",{className:"help-text",children:"Upload a JSON file containing template data. The file should include name, description, type, content, and other template properties."})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn secondary",onClick:()=>q(!1),children:"Cancel"})})]})}),Y&&j&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Delete Template"}),e.jsx("button",{className:"modal-close",onClick:()=>{P(!1),S(null)},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("p",{children:['Are you sure you want to delete "',j.name,'"? This action cannot be undone.']})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:()=>{P(!1),S(null)},children:"Cancel"}),e.jsx("button",{className:"modal-btn primary",onClick:F,style:{backgroundColor:"#dc2626"},children:"Delete Template"})]})]})}),Q&&j&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content modal-large",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{style:{color:"white"},children:["Template Preview - ",j.name]}),e.jsx("button",{className:"modal-close",onClick:()=>{se(!1),S(null)},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"preview-container",children:j.type==="email"&&e.jsx("div",{className:"email-preview",children:e.jsx("div",{className:"image-only-preview",children:j.images?.emailHeaderImage&&e.jsx("img",{src:j.images.emailHeaderImage,alt:"Ad Preview",className:"clickable-image full-preview-image",onClick:()=>openImageLightbox(j.images.emailHeaderImage,"Ad Image")})})})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:()=>{se(!1),S(null)},children:"Close"}),e.jsx("button",{className:"modal-btn primary",onClick:()=>{se(!1),we(j)},children:"Edit Template"})]})]})})]})}function ZC({functionId:i,onBack:t}){const[n,l]=I.useState("30"),[c,d]=I.useState("overview"),[m,f]=I.useState(!1),[y,g]=I.useState(null),[j,S]=I.useState([]),[A,O]=I.useState(!1),[D,H]=I.useState({}),[U,q]=I.useState({}),[Y,P]=I.useState({}),[Q,se]=I.useState({}),[z,M]=I.useState({id:i,name:"Pre-Departure Seat Upgrade",description:"3 days before flight departure, offer seat bookability with discount",category:"Upsell",status:"Active",performance:{impressions:125e3,clicks:8750,conversions:4375,revenue:141750,conversionRate:5,avgOrderValue:32.4},objectives:["Increase Revenue","Improve Customer Experience"],communications:[{id:"comm-1",name:"Instagram reel campaign",type:"Email",status:"Active",performance:{impressions:18750,opens:18750,clicks:1875,conversions:938,revenue:30391,openRate:15,clickRate:10,conversionRate:5}},{id:"comm-2",name:"UK market TikTok campaign",type:"Email",status:"Active",performance:{impressions:16250,opens:16250,clicks:1625,conversions:130,revenue:4208,openRate:13,clickRate:10,conversionRate:.8}},{id:"comm-3",name:"Digital Concierge A/B Test A",type:"In-App",status:"Active",performance:{impressions:45e3,clicks:3150,conversions:1575,revenue:51030,clickRate:7,conversionRate:5}},{id:"comm-4",name:"Digital Concierge A/B Test B",type:"In-App",status:"Active",performance:{impressions:45e3,clicks:2100,conversions:1050,revenue:34020,clickRate:4.7,conversionRate:5}}]}),b=(B=>{const ue=Math.min(B.revenue/1e5*40,40),me=Math.min(B.conversionRate/10*30,30),we=Math.min(B.conversions/1e3*30,30);return Math.round(ue+me+we)})(z.performance),E=B=>{g(B),f(!0)},k=()=>{f(!1),g(null),S([])},V=(B,ue)=>{S(ue?me=>[...me,B]:me=>me.filter(we=>we!==B))},T=()=>{if(j.length===0)return;const B={};j.forEach(ue=>{const me={id:`improvement-${ue}-${Date.now()}`,parentCommId:y,improvementType:ue,name:ie(ue),status:"running",performance:{impressions:0,clicks:0,conversions:0,revenue:0,conversionRate:0},startDate:new Date().toISOString()};B[me.id]=me}),P(ue=>({...ue,...B})),k()},ie=B=>({"cta-colors":"Optimized CTA Colors","send-timing":"Optimized Send Timing","discount-amounts":"Optimized Discount Amounts"})[B]||B.replace("-"," ").replace(/\b\w/g,me=>me.toUpperCase()),be=()=>{O(!0)},J=()=>{O(!1),H({})},fe=(B,ue,me)=>{H(we=>({...we,[B]:{...we[B],[ue]:me}}))},Ee=()=>{console.log("Running A/B tests with config:",D);const B={};Object.keys(D).forEach(ue=>{const me=D[ue];me.testA&&me.testB&&(B[ue]={id:`ab-test-${ue}-${Date.now()}`,parentCommId:y,improvementType:ue,testA:{id:`test-a-${ue}`,name:`Test A (${me.testA})`,config:me.testA,performance:{impressions:0,clicks:0,conversions:0,revenue:0,conversionRate:0},status:"running"},testB:{id:`test-b-${ue}`,name:`Test B (${me.testB})`,config:me.testB,performance:{impressions:0,clicks:0,conversions:0,revenue:0,conversionRate:0},status:"running"},startDate:new Date().toISOString(),status:"running"})}),q(ue=>({...ue,...B})),J(),k()},_e=B=>{se(ue=>({...ue,[B]:!ue[B]}))},F=B=>{q(ue=>{const me={...ue};return me[B]&&(me[B].status="stopped",me[B].testA.status="stopped",me[B].testB.status="stopped"),me})},de=(B,ue)=>{q(me=>{const we={...me};if(we[B]){const K=we[B],ye=ue==="A"?K.testA:K.testB,oe={id:`promoted-${B}-${ue}`,name:`${ye.name} (Promoted)`,type:"Email",status:"Active",performance:{...ye.performance,revenue:ye.performance.revenue,conversionRate:ye.performance.conversionRate,clicks:ye.performance.clicks,conversions:ye.performance.conversions,impressions:ye.performance.impressions}};M(R=>({...R,communications:[...R.communications,oe]})),we[B].status="promoted",we[B].promotedVariant=ue,we[B].testA.status=ue==="A"?"promoted":"stopped",we[B].testB.status=ue==="B"?"promoted":"stopped"}return we})},Te=B=>{P(ue=>{const me={...ue};return me[B]&&(me[B].status="stopped"),me})},G=B=>{P(ue=>{const me={...ue};if(me[B]){const we=me[B],K={id:`promoted-improvement-${B}`,name:`${we.name} (Promoted)`,type:"Email",status:"Active",performance:{...we.performance,revenue:we.performance.revenue,conversionRate:we.performance.conversionRate,clicks:we.performance.clicks,conversions:we.performance.conversions,impressions:we.performance.impressions}};M(ye=>({...ye,communications:[...ye.communications,K]})),me[B].status="promoted"}return me})};return e.jsxs("div",{className:"function-details",children:[e.jsx("div",{className:"back-button-section",children:e.jsx("button",{className:"back-btn",onClick:t,children:" Back to Performance"})}),e.jsxs("div",{className:"details-content",children:[c==="overview"&&e.jsxs("div",{className:"overview-section",children:[e.jsxs("div",{className:"performance-summary",children:[e.jsxs("div",{className:"summary-header",children:[e.jsxs("div",{className:"function-info",children:[e.jsx("h2",{children:z.name}),e.jsx("p",{className:"function-description",children:z.description}),e.jsxs("div",{className:"function-meta",children:[e.jsx("span",{className:"category-badge",children:z.category}),e.jsx("span",{className:`status-badge ${z.status.toLowerCase()}`,children:z.status})]})]}),e.jsx("div",{className:"performance-score",children:e.jsxs("div",{className:`score-circle large ${b<70?"low-score":""}`,children:[e.jsx("span",{className:"score-number",children:b}),e.jsx("span",{className:"score-label",children:"Score"})]})})]}),e.jsxs("div",{className:"metrics-row",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:"Impressions"}),e.jsx("p",{className:"metric-value",children:z.performance.impressions.toLocaleString()}),e.jsx("p",{className:"metric-trend positive",children:"+15.2% vs last period"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:"Click Through Rate"}),e.jsxs("p",{className:"metric-value",children:[(z.performance.clicks/z.performance.impressions*100).toFixed(1),"%"]}),e.jsx("p",{className:"metric-trend positive",children:"+2.3% vs last period"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:"Conversion Rate"}),e.jsxs("p",{className:"metric-value",children:[z.performance.conversionRate,"%"]}),e.jsx("p",{className:"metric-trend positive",children:"+1.2% vs last period"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:"Total Revenue"}),e.jsxs("p",{className:"metric-value",children:["",z.performance.revenue.toLocaleString()]}),e.jsx("p",{className:"metric-trend positive",children:"+12.5% vs last period"})]})]})]})]}),e.jsxs("div",{className:"communications-analysis",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Communications Analysis"}),e.jsxs("button",{className:"ai-optimize-all-btn",children:[e.jsx("span",{className:"ai-icon",children:""}),"AI Optimize All"]})]}),e.jsx("div",{className:"comms-list",children:z.communications.map(B=>{const ue=Object.values(U).filter(R=>R.parentCommId===B.id),me=Object.values(Y).filter(R=>R.parentCommId===B.id),we=ue.length>0,K=me.length>0,ye=we||K,oe=Q[B.id];return e.jsxs("div",{className:"comm-item",children:[e.jsxs("div",{className:"comm-main-info",children:[e.jsxs("div",{className:"comm-name-type",children:[e.jsx("h3",{children:B.name}),e.jsx("span",{className:"comm-type",children:B.type}),e.jsx("span",{className:`comm-status ${B.status.toLowerCase()}`,children:B.status}),ye&&e.jsxs("span",{className:"ab-test-badge",children:[we&&` ${ue.length}`,we&&K&&" + ",K&&` ${me.length}`]})]}),e.jsx("div",{className:"comm-performance",children:e.jsx("div",{className:`performance-status ${B.performance.conversionRate>=5?"good":"needs-improvement"}`,children:B.performance.conversionRate>=5?" Performing Well":" Needs Attention"})})]}),e.jsxs("div",{className:"comm-metrics",children:[e.jsxs("div",{className:"metric-pair",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Impressions"}),e.jsx("span",{className:"value",children:B.performance.impressions?.toLocaleString()||"0"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Click Through Rate"}),e.jsx("span",{className:"value",children:B.performance.clickRate?B.performance.clickRate+"%":(B.performance.clicks/B.performance.impressions*100||0).toFixed(1)+"%"})]})]}),e.jsxs("div",{className:"metric-pair",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Conversion Rate"}),e.jsxs("span",{className:"value",children:[B.performance.conversionRate,"%"]})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Revenue"}),e.jsxs("span",{className:"value",children:["",B.performance.revenue.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"comm-actions",children:[e.jsx("button",{className:"btn-secondary",children:"Pause"}),e.jsxs("button",{className:"btn-ai",onClick:()=>E(B.id),children:[e.jsx("span",{className:"ai-icon",children:""}),"Improve Performance"]}),ye&&e.jsxs("button",{className:"btn-expand",onClick:()=>_e(B.id),children:[oe?"":""," Tests"]})]}),oe&&ye&&e.jsxs("div",{className:"comm-ab-tests",children:[e.jsxs("div",{className:"ab-tests-header",children:[e.jsx("h4",{children:"Active Tests & Improvements"}),e.jsxs("span",{className:"tests-count",children:[we&&`${ue.length} A/B tests`,we&&K&&" + ",K&&`${me.length} improvements`," running"]})]}),e.jsxs("div",{className:"ab-tests-list",children:[ue.map(R=>e.jsxs("div",{className:"ab-test-item",children:[e.jsxs("div",{className:"test-header",children:[e.jsxs("div",{className:"test-info",children:[e.jsx("h5",{children:R.improvementType.replace("-"," ").replace(/\b\w/g,pe=>pe.toUpperCase())}),e.jsx("span",{className:`test-status ${R.status}`,children:R.status})]}),e.jsx("div",{className:"test-actions",children:R.status==="running"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"action-btn small primary",onClick:()=>de(R.id,"A"),children:"Promote A"}),e.jsx("button",{className:"action-btn small primary",onClick:()=>de(R.id,"B"),children:"Promote B"}),e.jsx("button",{className:"action-btn small secondary",onClick:()=>F(R.id),children:"Stop Test"})]})})]}),e.jsxs("div",{className:"test-variants",children:[e.jsxs("div",{className:"variant-item",children:[e.jsxs("div",{className:"variant-header",children:[e.jsx("span",{className:"variant-name",children:R.testA.name}),e.jsx("span",{className:`variant-status ${R.testA.status}`,children:R.testA.status})]}),e.jsxs("div",{className:"variant-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Conversion Rate"}),e.jsxs("span",{className:"value",children:[R.testA.performance.conversionRate,"%"]})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Revenue"}),e.jsxs("span",{className:"value",children:["",R.testA.performance.revenue.toLocaleString()]})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Clicks"}),e.jsx("span",{className:"value",children:R.testA.performance.clicks.toLocaleString()})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Conversions"}),e.jsx("span",{className:"value",children:R.testA.performance.conversions.toLocaleString()})]})]})]}),e.jsxs("div",{className:"variant-item",children:[e.jsxs("div",{className:"variant-header",children:[e.jsx("span",{className:"variant-name",children:R.testB.name}),e.jsx("span",{className:`variant-status ${R.testB.status}`,children:R.testB.status})]}),e.jsxs("div",{className:"variant-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Conversion Rate"}),e.jsxs("span",{className:"value",children:[R.testB.performance.conversionRate,"%"]})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Revenue"}),e.jsxs("span",{className:"value",children:["",R.testB.performance.revenue.toLocaleString()]})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Clicks"}),e.jsx("span",{className:"value",children:R.testB.performance.clicks.toLocaleString()})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Conversions"}),e.jsx("span",{className:"value",children:R.testB.performance.conversions.toLocaleString()})]})]})]})]})]},R.id)),me.map(R=>e.jsxs("div",{className:"improvement-item",children:[e.jsxs("div",{className:"test-header",children:[e.jsxs("div",{className:"test-info",children:[e.jsx("h5",{children:R.name}),e.jsx("span",{className:`test-status ${R.status}`,children:R.status})]}),e.jsx("div",{className:"test-actions",children:R.status==="running"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"action-btn small primary",onClick:()=>G(R.id),children:"Promote"}),e.jsx("button",{className:"action-btn small secondary",onClick:()=>Te(R.id),children:"Stop Improvement"})]})})]}),e.jsxs("div",{className:"improvement-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Conversion Rate"}),e.jsxs("span",{className:"value",children:[R.performance.conversionRate,"%"]})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Revenue"}),e.jsxs("span",{className:"value",children:["",R.performance.revenue.toLocaleString()]})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Clicks"}),e.jsx("span",{className:"value",children:R.performance.clicks.toLocaleString()})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Conversions"}),e.jsx("span",{className:"value",children:R.performance.conversions.toLocaleString()})]})]})]},R.id))]})]})]},B.id)})})]})]}),c==="communications"&&e.jsxs("div",{className:"communications-section",children:[e.jsxs("div",{className:"comms-header",children:[e.jsx("h3",{children:"Communication Performance"}),e.jsxs("button",{className:"ai-magic-btn",children:[e.jsx("span",{className:"ai-icon",children:""}),"AI Optimize All"]})]}),e.jsx("div",{className:"comms-detailed",children:z.communications.map(B=>e.jsxs("div",{className:"comm-detailed-card",children:[e.jsxs("div",{className:"comm-detailed-header",children:[e.jsxs("div",{className:"comm-info",children:[e.jsx("h4",{children:B.name}),e.jsx("span",{className:"comm-type",children:B.type}),e.jsxs("div",{className:"comm-status-indicator",children:[e.jsx("span",{className:`status-dot ${B.status.toLowerCase()}`}),B.status]})]}),e.jsxs("div",{className:"comm-actions",children:[e.jsx("button",{className:"action-btn secondary",children:"Pause"}),e.jsx("button",{className:"action-btn primary",children:"Run A/B Test"}),e.jsxs("button",{className:"action-btn ai-btn",onClick:()=>E(B.id),children:[e.jsx("span",{className:"ai-icon",children:""}),"Improve Performance"]})]})]}),e.jsx("div",{className:"comm-detailed-metrics",children:e.jsxs("div",{className:"metric-row",children:[e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"Revenue"}),e.jsxs("span",{className:"metric-value",children:["",B.performance.revenue.toLocaleString()]})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"Conversions"}),e.jsx("span",{className:"metric-value",children:B.performance.conversions.toLocaleString()})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"Conversion Rate"}),e.jsxs("span",{className:"metric-value",children:[B.performance.conversionRate,"%"]})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"Clicks"}),e.jsx("span",{className:"metric-value",children:B.performance.clicks.toLocaleString()})]})]})}),e.jsxs("div",{className:"ab-test-section",children:[e.jsxs("div",{className:"ab-test-header",children:[e.jsx("h5",{children:"A/B Test Variations"}),e.jsx("button",{className:"add-variation-btn",children:"+ Add Variation"})]}),e.jsxs("div",{className:"variations-grid",children:[e.jsxs("div",{className:"variation-card control",children:[e.jsxs("div",{className:"variation-header",children:[e.jsx("span",{className:"variation-label",children:"Control (Current)"}),e.jsx("span",{className:"variation-status active",children:"Active"})]}),e.jsxs("div",{className:"variation-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Click Rate"}),e.jsx("span",{className:"metric-value",children:"7.0%"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Conversion"}),e.jsx("span",{className:"metric-value",children:"5.0%"})]})]})]}),e.jsxs("div",{className:"variation-card test",children:[e.jsxs("div",{className:"variation-header",children:[e.jsx("span",{className:"variation-label",children:"Test A"}),e.jsx("span",{className:"variation-status running",children:"Running"})]}),e.jsxs("div",{className:"variation-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Click Rate"}),e.jsx("span",{className:"metric-value",children:"4.7%"}),e.jsx("span",{className:"metric-trend negative",children:"-33%"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Conversion"}),e.jsx("span",{className:"metric-value",children:"5.0%"}),e.jsx("span",{className:"metric-trend neutral",children:"0%"})]})]}),e.jsxs("div",{className:"variation-actions",children:[e.jsx("button",{className:"action-btn small",children:"Stop Test"}),e.jsx("button",{className:"action-btn small",children:"View Details"})]})]})]})]})]},B.id))})]}),c==="ab-testing"&&e.jsxs("div",{className:"ab-testing-section",children:[e.jsxs("div",{className:"ab-testing-header",children:[e.jsx("h3",{children:"A/B Testing Center"}),e.jsxs("button",{className:"ai-magic-btn large",children:[e.jsx("span",{className:"ai-icon",children:""}),"AI Create Test"]})]}),e.jsxs("div",{className:"active-tests-summary",children:[e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-icon",children:""}),e.jsxs("div",{className:"summary-content",children:[e.jsx("h4",{children:"Active Tests"}),e.jsx("p",{className:"summary-number",children:"3"}),e.jsx("p",{className:"summary-desc",children:"Running across communications"})]})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-icon",children:""}),e.jsxs("div",{className:"summary-content",children:[e.jsx("h4",{children:"Avg Improvement"}),e.jsx("p",{className:"summary-number",children:"+18%"}),e.jsx("p",{className:"summary-desc",children:"Across all test variations"})]})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-icon",children:""}),e.jsxs("div",{className:"summary-content",children:[e.jsx("h4",{children:"Confidence Level"}),e.jsx("p",{className:"summary-number",children:"87%"}),e.jsx("p",{className:"summary-desc",children:"Statistical significance"})]})]})]}),e.jsxs("div",{className:"ai-test-suggestions",children:[e.jsx("h4",{children:"AI-Powered Test Suggestions"}),e.jsxs("div",{className:"suggestions-grid",children:[e.jsxs("div",{className:"suggestion-card",children:[e.jsxs("div",{className:"suggestion-header",children:[e.jsx("div",{className:"suggestion-icon",children:""}),e.jsx("div",{className:"suggestion-badge",children:"High Impact"})]}),e.jsx("h5",{children:"Test Different CTA Colors"}),e.jsx("p",{children:"AI suggests testing red vs blue CTA buttons. Historical data shows red CTAs perform 23% better in travel industry."}),e.jsxs("div",{className:"suggestion-metrics",children:[e.jsx("span",{className:"metric",children:"Expected Lift: +23%"}),e.jsx("span",{className:"metric",children:"Confidence: 94%"})]}),e.jsx("button",{className:"action-btn primary",children:"Create Test"})]}),e.jsxs("div",{className:"suggestion-card",children:[e.jsxs("div",{className:"suggestion-header",children:[e.jsx("div",{className:"suggestion-icon",children:""}),e.jsx("div",{className:"suggestion-badge",children:"Timing"})]}),e.jsx("h5",{children:"Test Send Timing"}),e.jsx("p",{children:"Test sending emails at 9 AM vs 6 PM. Morning emails show 15% higher open rates for business travelers."}),e.jsxs("div",{className:"suggestion-metrics",children:[e.jsx("span",{className:"metric",children:"Expected Lift: +15%"}),e.jsx("span",{className:"metric",children:"Confidence: 89%"})]}),e.jsx("button",{className:"action-btn primary",children:"Create Test"})]}),e.jsxs("div",{className:"suggestion-card",children:[e.jsxs("div",{className:"suggestion-header",children:[e.jsx("div",{className:"suggestion-icon",children:""}),e.jsx("div",{className:"suggestion-badge",children:"Pricing"})]}),e.jsx("h5",{children:"Test Discount Amounts"}),e.jsx("p",{children:"Test 10% vs 15% discount offers. AI predicts 15% discount will increase conversions by 28% with minimal revenue impact."}),e.jsxs("div",{className:"suggestion-metrics",children:[e.jsx("span",{className:"metric",children:"Expected Lift: +28%"}),e.jsx("span",{className:"metric",children:"Confidence: 91%"})]}),e.jsx("button",{className:"action-btn primary",children:"Create Test"})]})]})]}),e.jsxs("div",{className:"active-tests",children:[e.jsx("h4",{children:"Active A/B Tests"}),e.jsxs("div",{className:"tests-grid",children:[e.jsxs("div",{className:"test-card",children:[e.jsxs("div",{className:"test-header",children:[e.jsx("h5",{children:"Email Subject Line Test"}),e.jsx("span",{className:"test-status running",children:"Running"})]}),e.jsxs("div",{className:"test-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"65%"}})}),e.jsx("span",{className:"progress-text",children:"65% complete"})]}),e.jsxs("div",{className:"test-variations",children:[e.jsxs("div",{className:"variation",children:[e.jsx("span",{className:"variation-name",children:'Control: "Upgrade Your Seat"'}),e.jsx("span",{className:"variation-performance",children:"Open Rate: 15.2%"})]}),e.jsxs("div",{className:"variation",children:[e.jsx("span",{className:"variation-name",children:'Test A: "Get Premium Comfort"'}),e.jsx("span",{className:"variation-performance",children:"Open Rate: 18.7% (+23%)"})]})]}),e.jsxs("div",{className:"test-actions",children:[e.jsx("button",{className:"action-btn secondary",children:"Stop Test"}),e.jsx("button",{className:"action-btn primary",children:"View Details"})]})]}),e.jsxs("div",{className:"test-card",children:[e.jsxs("div",{className:"test-header",children:[e.jsx("h5",{children:"Digital Concierge CTA Test"}),e.jsx("span",{className:"test-status running",children:"Running"})]}),e.jsxs("div",{className:"test-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"45%"}})}),e.jsx("span",{className:"progress-text",children:"45% complete"})]}),e.jsxs("div",{className:"test-variations",children:[e.jsxs("div",{className:"variation",children:[e.jsx("span",{className:"variation-name",children:'Control: "Book Now"'}),e.jsx("span",{className:"variation-performance",children:"Click Rate: 7.0%"})]}),e.jsxs("div",{className:"variation",children:[e.jsx("span",{className:"variation-name",children:'Test A: "Upgrade Seat"'}),e.jsx("span",{className:"variation-performance",children:"Click Rate: 4.7% (-33%)"})]})]}),e.jsxs("div",{className:"test-actions",children:[e.jsx("button",{className:"action-btn secondary",children:"Stop Test"}),e.jsx("button",{className:"action-btn primary",children:"View Details"})]})]})]})]})]}),c==="actions"&&e.jsxs("div",{className:"actions-section",children:[e.jsxs("div",{className:"actions-header",children:[e.jsx("h3",{children:"AI-Powered Recommendations"}),e.jsxs("div",{className:"ai-magic-indicator",children:[e.jsx("span",{className:"ai-icon",children:""}),e.jsx("span",{className:"ai-text",children:"AI Magic"})]})]}),e.jsx("div",{className:"ai-insights-summary",children:e.jsxs("div",{className:"insight-highlight",children:[e.jsx("div",{className:"highlight-icon",children:""}),e.jsxs("div",{className:"highlight-content",children:[e.jsx("h4",{children:"Performance Opportunity"}),e.jsxs("p",{children:["Your function has a ",e.jsx("strong",{children:"15% improvement potential"})," based on similar high-performing campaigns in your industry."]})]})]})}),e.jsxs("div",{className:"actions-grid",children:[e.jsxs("div",{className:"action-card ai-powered",children:[e.jsxs("div",{className:"action-header",children:[e.jsx("div",{className:"action-icon",children:""}),e.jsx("div",{className:"ai-badge",children:"AI Suggested"})]}),e.jsx("h4",{children:"Optimize A/B Test B"}),e.jsxs("p",{children:["Digital Concierge A/B Test B has 33% lower click rate than Test A. ",e.jsx("strong",{children:"AI suggests:"})," Update imagery to match Test A's style and test different call-to-action text."]}),e.jsxs("div",{className:"action-metrics",children:[e.jsx("span",{className:"metric",children:"Expected Impact: +25% click rate"}),e.jsx("span",{className:"metric",children:"Confidence: 87%"})]}),e.jsx("button",{className:"action-btn primary",children:"Run A/B Test"})]}),e.jsxs("div",{className:"action-card ai-powered",children:[e.jsxs("div",{className:"action-header",children:[e.jsx("div",{className:"action-icon",children:""}),e.jsx("div",{className:"ai-badge",children:"AI Suggested"})]}),e.jsx("h4",{children:"Expand Email Campaigns"}),e.jsxs("p",{children:["Email campaigns are performing well. ",e.jsx("strong",{children:"AI suggests:"})," Expand to French and German markets where similar campaigns show 40% higher engagement."]}),e.jsxs("div",{className:"action-metrics",children:[e.jsx("span",{className:"metric",children:"Expected Impact: +40% engagement"}),e.jsx("span",{className:"metric",children:"Confidence: 92%"})]}),e.jsx("button",{className:"action-btn primary",children:"Create Campaign"})]}),e.jsxs("div",{className:"action-card ai-powered",children:[e.jsxs("div",{className:"action-header",children:[e.jsx("div",{className:"action-icon",children:""}),e.jsx("div",{className:"ai-badge",children:"AI Suggested"})]}),e.jsx("h4",{children:"Optimize Timing Strategy"}),e.jsxs("p",{children:[e.jsx("strong",{children:"AI suggests:"})," Test sending seat upgrade offers 2 days before departure instead of 3 days. Historical data shows 18% higher conversion rates."]}),e.jsxs("div",{className:"action-metrics",children:[e.jsx("span",{className:"metric",children:"Expected Impact: +18% conversion"}),e.jsx("span",{className:"metric",children:"Confidence: 89%"})]}),e.jsx("button",{className:"action-btn primary",children:"Test Timing"})]}),e.jsxs("div",{className:"action-card ai-powered",children:[e.jsxs("div",{className:"action-header",children:[e.jsx("div",{className:"action-icon",children:""}),e.jsx("div",{className:"ai-badge",children:"AI Suggested"})]}),e.jsx("h4",{children:"Personalize Content"}),e.jsxs("p",{children:[e.jsx("strong",{children:"AI suggests:"})," Implement dynamic content based on customer's previous booking history. This could increase conversion rates by 22%."]}),e.jsxs("div",{className:"action-metrics",children:[e.jsx("span",{className:"metric",children:"Expected Impact: +22% conversion"}),e.jsx("span",{className:"metric",children:"Confidence: 85%"})]}),e.jsx("button",{className:"action-btn primary",children:"Setup Personalization"})]})]}),e.jsxs("div",{className:"ai-tools-section",children:[e.jsx("h4",{children:"AI-Powered Tools"}),e.jsxs("div",{className:"ai-tools-grid",children:[e.jsxs("div",{className:"ai-tool-card",children:[e.jsx("div",{className:"tool-icon",children:""}),e.jsx("h5",{children:"Smart A/B Testing"}),e.jsx("p",{children:"Let AI automatically test variations and optimize for the best performance."}),e.jsx("button",{className:"action-btn secondary",children:"Launch AI Test"})]}),e.jsxs("div",{className:"ai-tool-card",children:[e.jsx("div",{className:"tool-icon",children:""}),e.jsx("h5",{children:"Performance Predictor"}),e.jsx("p",{children:"Get AI predictions on how changes will impact your conversion rates."}),e.jsx("button",{className:"action-btn secondary",children:"Get Prediction"})]}),e.jsxs("div",{className:"ai-tool-card",children:[e.jsx("div",{className:"tool-icon",children:""}),e.jsx("h5",{children:"Audience Optimizer"}),e.jsx("p",{children:"AI will find the best audience segments for your campaigns."}),e.jsx("button",{className:"action-btn secondary",children:"Optimize Audience"})]})]})]})]})]}),m&&e.jsx("div",{className:"modal-overlay",onClick:k,children:e.jsxs("div",{className:"modal-content improvement-modal",onClick:B=>B.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Improve Performance"}),e.jsx("button",{className:"modal-close",onClick:k,children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"improvement-opportunities",children:[e.jsxs("div",{className:"opportunity-item",children:[e.jsxs("div",{className:"opportunity-header",children:[e.jsx("div",{className:"opportunity-icon",children:""}),e.jsxs("div",{className:"opportunity-info",children:[e.jsx("h3",{children:"Replace CTA Button Text"}),e.jsx("p",{children:'Change current CTA from "Learn More" to "Upgrade My Seat Now" with red button color'})]}),e.jsxs("div",{className:"opportunity-metrics",children:[e.jsx("span",{className:"expected-lift",children:"+45%"}),e.jsx("span",{className:"confidence",children:"92% confidence"})]})]}),e.jsx("div",{className:"opportunity-actions",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:j.includes("cta-colors"),onChange:B=>V("cta-colors",B.target.checked)}),e.jsx("span",{children:"Select this improvement"})]})})]}),e.jsxs("div",{className:"opportunity-item",children:[e.jsxs("div",{className:"opportunity-header",children:[e.jsx("div",{className:"opportunity-icon",children:""}),e.jsxs("div",{className:"opportunity-info",children:[e.jsx("h3",{children:'Add "147 passengers upgraded today"'}),e.jsx("p",{children:"Insert social proof counter above CTA button showing real-time upgrade activity"})]}),e.jsxs("div",{className:"opportunity-metrics",children:[e.jsx("span",{className:"expected-lift",children:"+38%"}),e.jsx("span",{className:"confidence",children:"87% confidence"})]})]}),e.jsx("div",{className:"opportunity-actions",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:j.includes("send-timing"),onChange:B=>V("send-timing",B.target.checked)}),e.jsx("span",{children:"Select this improvement"})]})})]}),e.jsxs("div",{className:"opportunity-item",children:[e.jsxs("div",{className:"opportunity-header",children:[e.jsx("div",{className:"opportunity-icon",children:""}),e.jsxs("div",{className:"opportunity-info",children:[e.jsx("h3",{children:'Add "Only 4 premium seats left"'}),e.jsx("p",{children:"Display countdown timer and seat availability directly below the offer title"})]}),e.jsxs("div",{className:"opportunity-metrics",children:[e.jsx("span",{className:"expected-lift",children:"+52%"}),e.jsx("span",{className:"confidence",children:"89% confidence"})]})]}),e.jsx("div",{className:"opportunity-actions",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:j.includes("urgency-messaging"),onChange:B=>V("urgency-messaging",B.target.checked)}),e.jsx("span",{children:"Select this improvement"})]})})]}),e.jsxs("div",{className:"opportunity-item",children:[e.jsxs("div",{className:"opportunity-header",children:[e.jsx("div",{className:"opportunity-icon",children:""}),e.jsxs("div",{className:"opportunity-info",children:[e.jsx("h3",{children:"Increase discount from 10% to 15%"}),e.jsx("p",{children:'Update offer pricing to show "15% off premium seats"'})]}),e.jsxs("div",{className:"opportunity-metrics",children:[e.jsx("span",{className:"expected-lift",children:"+65%"}),e.jsx("span",{className:"confidence",children:"91% confidence"})]})]}),e.jsx("div",{className:"opportunity-actions",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:j.includes("discount-amounts"),onChange:B=>V("discount-amounts",B.target.checked)}),e.jsx("span",{children:"Select this improvement"})]})})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:k,children:"Cancel"}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"modal-btn secondary",onClick:be,disabled:j.length===0,children:" A/B Test"}),e.jsxs("button",{className:"modal-btn primary",onClick:T,disabled:j.length===0,children:[e.jsx("span",{className:"ai-icon",children:""}),"Run Selected Improvements"]})]})]})]})}),A&&e.jsx("div",{className:"modal-overlay",onClick:J,children:e.jsxs("div",{className:"modal-content ab-test-modal",onClick:B=>B.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Configure A/B Tests"}),e.jsx("button",{className:"modal-close",onClick:J,children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"ab-test-config",children:[j.includes("cta-colors")&&e.jsxs("div",{className:"test-config-item",children:[e.jsxs("div",{className:"test-config-header",children:[e.jsx("div",{className:"test-icon",children:""}),e.jsx("h3",{children:"CTA Colors Test"})]}),e.jsxs("div",{className:"test-variables",children:[e.jsxs("div",{className:"variable-group",children:[e.jsx("label",{children:"Test A (Control)"}),e.jsx("input",{type:"text",placeholder:"Blue CTA",value:D["cta-colors"]?.testA||"",onChange:B=>fe("cta-colors","testA",B.target.value)})]}),e.jsxs("div",{className:"variable-group",children:[e.jsx("label",{children:"Test B (Variant)"}),e.jsx("input",{type:"text",placeholder:"Red CTA",value:D["cta-colors"]?.testB||"",onChange:B=>fe("cta-colors","testB",B.target.value)})]})]})]}),j.includes("send-timing")&&e.jsxs("div",{className:"test-config-item",children:[e.jsxs("div",{className:"test-config-header",children:[e.jsx("div",{className:"test-icon",children:""}),e.jsx("h3",{children:"Send Timing Test"})]}),e.jsxs("div",{className:"test-variables",children:[e.jsxs("div",{className:"variable-group",children:[e.jsx("label",{children:"Test A (Control)"}),e.jsx("input",{type:"text",placeholder:"9:00 AM",value:D["send-timing"]?.testA||"",onChange:B=>fe("send-timing","testA",B.target.value)})]}),e.jsxs("div",{className:"variable-group",children:[e.jsx("label",{children:"Test B (Variant)"}),e.jsx("input",{type:"text",placeholder:"6:00 PM",value:D["send-timing"]?.testB||"",onChange:B=>fe("send-timing","testB",B.target.value)})]})]})]}),j.includes("discount-amounts")&&e.jsxs("div",{className:"test-config-item",children:[e.jsxs("div",{className:"test-config-header",children:[e.jsx("div",{className:"test-icon",children:""}),e.jsx("h3",{children:"Discount Amounts Test"})]}),e.jsxs("div",{className:"test-variables",children:[e.jsxs("div",{className:"variable-group",children:[e.jsx("label",{children:"Test A (Control)"}),e.jsx("input",{type:"text",placeholder:"10% discount",value:D["discount-amounts"]?.testA||"",onChange:B=>fe("discount-amounts","testA",B.target.value)})]}),e.jsxs("div",{className:"variable-group",children:[e.jsx("label",{children:"Test B (Variant)"}),e.jsx("input",{type:"text",placeholder:"15% discount",value:D["discount-amounts"]?.testB||"",onChange:B=>fe("discount-amounts","testB",B.target.value)})]})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:J,children:"Cancel"}),e.jsx("button",{className:"modal-btn primary",onClick:Ee,disabled:Object.keys(D).length===0,children:" Run A/B Tests"})]})]})})]})}function JC({revenueFunctions:i}){console.log("RevenueOptimizerPerformance received revenueFunctions:",i);const[t,n]=I.useState("30"),[l,c]=I.useState("all"),[d,m]=I.useState("all"),[f,y]=I.useState(null),j=[{id:"func-1",name:"Flight to Hotel Cross-Sell",description:"Automatically suggest hotel bookings when customers book flights",category:"Cross-Sell",bookingTypes:["Flight"],status:"Active",performance:{impressions:12470,clicks:3120,conversions:890,revenue:"267,000",conversionRate:"7.1%"},comms:[{id:"comm-1",name:"Post-Booking Email Campaign",status:"Active",performance:{opens:"23%",clicks:"8.2%",impressions:8900,deliveries:"98%"}},{id:"comm-2",name:"In-App Hotel Suggestions",status:"Active",performance:{impressions:3570,clicks:"12.4%",conversions:445}},{id:"comm-3",name:"SMS Hotel Reminder",status:"Active",performance:{deliveries:"96%",clicks:"15.1%",opens:"18%"}}]},{id:"func-2",name:"Pre-Departure Seat Upgrade",description:"3 days before flight departure, offer seat bookability with discount",category:"Upsell",bookingTypes:["Flight"],status:"Active",performance:{impressions:18900,clicks:5670,conversions:945,revenue:"89,250",conversionRate:"3.2%"},comms:[{id:"comm-4",name:"Instagram reel campaign",status:"Active",performance:{opens:"31%",clicks:"12.4%",impressions:6300,deliveries:"97%"}},{id:"comm-5",name:"UK market TikTok campaign",status:"Active",performance:{opens:"29%",clicks:"11.8%",impressions:4200,deliveries:"96%"}},{id:"comm-6",name:"Digital Concierge (A/B Test A)",status:"Active",performance:{impressions:4200,clicks:"18.2%",opens:"45%"}},{id:"comm-7",name:"Digital Concierge (A/B Test B)",status:"Active",performance:{impressions:4200,clicks:"16.8%",opens:"42%"}}]},{id:"func-3",name:"Airport Services Bundle",description:"Offer fast track, lounge access, and transfers as a package",category:"Bundle",bookingTypes:["Flight"],status:"Active",performance:{impressions:8920,clicks:2670,conversions:580,revenue:"69,600",conversionRate:"6.5%"},comms:[{id:"comm-8",name:"Pre-Departure SMS Bundle",status:"Active",performance:{deliveries:"98%",clicks:"15.1%",opens:"22%"}},{id:"comm-9",name:"Website Bundle Banner",status:"Active",performance:{impressions:4450,clicks:"3.2%",conversions:142}}]}],S=j.filter(z=>{const M=l==="all"||z.category===l,w=d==="all"||z.status===d;return M&&w});console.log("Filtered functions:",S);const A=j.filter(z=>z.status==="Active");A.reduce((z,M)=>{const w=M.performance.revenue||"0";return z+parseFloat(w.replace("","").replace(",",""))},0);const O=A.reduce((z,M)=>z+(M.performance.impressions||0),0),D=A.reduce((z,M)=>z+(M.performance.conversions||0),0);O>0&&(D/O*100).toFixed(1);const U=A.flatMap(z=>(z.comms||[]).map(M=>({...M,functionName:z.name,functionCategory:z.category}))).filter(z=>z.status==="Active");U.length>0&&U.reduce((z,M)=>{const w=M.performance?.clicks?parseFloat(M.performance.clicks.replace("%","")):0,b=M.performance?.opens?parseFloat(M.performance.opens.replace("%","")):0;return z+(w+b)/2},0)/U.length;const q=z=>{const M=z.performance?.revenue?parseFloat(z.performance.revenue.replace("","").replace(",",""))/1e3:0,w=z.performance?.conversionRate?parseFloat(z.performance.conversionRate.replace("%",""))*10:0,b=(z.comms||[]).filter(k=>k.status==="Active").length*20,E=Math.min(100,(M+w+b)/3);return Math.round(E)},Y=z=>{const M={"Cross-Sell":[{id:"revenue_uplift",name:"Revenue uplift",target:"15%",current:"12%",status:"on-track"},{id:"basket_size",name:"Basket size increase",target:"2,500",current:"2,100",status:"needs-attention"},{id:"ancillary_attach",name:"Ancillary attach rate",target:"8%",current:"7.1%",status:"on-track"}],Upsell:[{id:"upgrade_conversion",name:"Upgrade conversion",target:"25%",current:"22%",status:"on-track"},{id:"basket_size",name:"Basket size increase",target:"450",current:"420",status:"needs-attention"},{id:"offer_redemption",name:"Offer redemption rate",target:"12%",current:"11.2%",status:"on-track"}],Bundle:[{id:"revenue_uplift",name:"Revenue uplift",target:"18%",current:"16%",status:"on-track"},{id:"customer_delight",name:"Customer delight",target:"4.5/5",current:"4.3/5",status:"needs-attention"},{id:"basket_size",name:"Basket size increase",target:"10%",current:"9.1%",status:"on-track"}]};return M[z.category]||M["Cross-Sell"]},P=z=>[{name:"Revenue Generated",value:z.performance?.revenue||"0",trend:"+12.5%",type:"positive"},{name:"Conversion Rate",value:z.performance?.conversionRate||"0%",trend:"+1.2%",type:"positive"},{name:"Customer Acquisition",value:(z.performance?.conversions||0).toLocaleString(),trend:"+8.3%",type:"positive"},{name:"ROI",value:"3.2x",trend:"+0.4x",type:"positive"}],Q=z=>{console.log("View Details clicked for function:",z),y(z)},se=()=>{y(null)};return f?e.jsx(ZC,{functionId:f,onBack:se}):e.jsx("div",{className:"review-section",children:e.jsx("div",{className:"review-overview",children:e.jsxs("div",{className:"functions-performance",children:[e.jsx("h4",{children:"Function Performance"}),e.jsx("div",{className:"functions-grid",children:S.length===0?e.jsx("div",{className:"no-functions-message",children:e.jsx("p",{children:"No functions found matching your criteria. Please adjust your filters."})}):S.map(z=>{const M=q(z);return Y(z),P(z),(z.comms||[]).filter(w=>w.status==="Active"),e.jsxs("div",{className:"function-tile",children:[e.jsxs("div",{className:"function-header",children:[e.jsxs("div",{className:"function-info",children:[e.jsxs("div",{className:"function-title-section",children:[e.jsx("h5",{children:z.name}),e.jsx("div",{className:"function-status",children:e.jsx("span",{className:"function-category",children:z.category})})]}),e.jsx("p",{className:"function-description",children:z.description})]}),e.jsx("div",{className:"performance-score",children:e.jsxs("div",{className:`score-circle ${M<70?"low-score":""}`,children:[e.jsx("span",{className:"score-value",children:M}),e.jsx("span",{className:"score-label",children:"Score"})]})})]}),e.jsx("div",{className:"function-overview",children:e.jsxs("div",{className:"overview-metrics",children:[e.jsxs("div",{className:"overview-metric",children:[e.jsx("span",{className:"metric-label",children:"Impressions"}),e.jsx("span",{className:"metric-value",children:z.performance?.impressions?.toLocaleString()||"0"})]}),e.jsxs("div",{className:"overview-metric",children:[e.jsx("span",{className:"metric-label",children:"Click Through Rate"}),e.jsx("span",{className:"metric-value",children:z.performance?.clickThroughRate||(z.performance?.clicks/z.performance?.impressions*100||0).toFixed(1)+"%"})]}),e.jsxs("div",{className:"overview-metric",children:[e.jsx("span",{className:"metric-label",children:"Conversion Rate"}),e.jsx("span",{className:"metric-value",children:z.performance?.conversionRate||"0%"})]}),e.jsxs("div",{className:"overview-metric",children:[e.jsx("span",{className:"metric-label",children:"Revenue"}),e.jsx("span",{className:"metric-value",children:z.performance?.revenue||"0"})]})]})}),e.jsx("div",{className:"function-actions",style:{display:"flex",justifyContent:"flex-end",marginTop:"12px"},children:e.jsx("button",{className:`view-details-btn ${M<70?"improve-btn":""}`,onClick:()=>Q(z.id),style:{display:"block",visibility:"visible"},children:M<70?"Improve Performance":"View Details"})})]},z.id)})})]})})})}function e1(){console.log("RevenueOptimizer component rendering...");const[i,t]=I.useState("build"),[n,l]=I.useState("templates"),[c,d]=I.useState(null),[m,f]=I.useState(!1),[y,g]=I.useState(!1),[j,S]=I.useState(""),[A,O]=I.useState("all"),[D,H]=I.useState("all"),[U,q]=I.useState("all"),[Y,P]=I.useState(!1),[Q,se]=I.useState(""),[z,M]=I.useState(!1),[w,b]=I.useState(null),[E,k]=I.useState(!1),[V,T]=I.useState(null),[ie,be]=I.useState([]),[J,fe]=I.useState([]),[Ee,_e]=I.useState(!1),[F,de]=I.useState(null);I.useEffect(()=>{(async()=>{try{_e(!0),console.log("Loading data from Firebase...");const le=await Od.getAllRevenueFunctions();console.log("Loaded revenue functions:",le),be(le);const Ve=await Od.getAllTemplates();console.log("Loaded templates:",Ve),fe(Ve),_e(!1)}catch(le){console.error("Error loading data from Firebase:",le),de(le.message),_e(!1),console.log("Using fallback data due to Firebase error")}})()},[]);const Te=[{id:"func-1",name:"Flight to Hotel Cross-Sell",description:"Automatically suggest hotel bookings when customers book flights",category:"Cross-Sell",bookingTypes:["Flight"],targetTypes:["Hotel"],timing:"3 days after flight booking",status:"Active",performance:{impressions:12470,clicks:3120,conversions:890,revenue:"267,000",conversionRate:"7.1%"},comms:[{id:"comm-1",name:"Post-Booking Email Campaign",status:"Active",performance:{opens:"23%",clicks:"8.2%",impressions:8900,deliveries:"98%"}},{id:"comm-2",name:"In-App Hotel Suggestions",status:"Active",performance:{impressions:3570,clicks:"12.4%",conversions:445}},{id:"comm-3",name:"SMS Hotel Reminder",status:"Active",performance:{deliveries:"96%",clicks:"15.1%",opens:"18%"}}]},{id:"func-2",name:"Airport Services Bundle",description:"Offer fast track, lounge access, and transfers as a package",category:"Bundle",bookingTypes:["Flight"],targetTypes:["Fast Track","Airport Lounge","Airport Transfer"],timing:"24 hours before departure",status:"Active",performance:{impressions:8920,clicks:2670,conversions:580,revenue:"69,600",conversionRate:"6.5%"},comms:[{id:"comm-4",name:"Pre-Departure SMS Bundle",status:"Active",performance:{deliveries:"98%",clicks:"15.1%",opens:"22%"}},{id:"comm-5",name:"Website Bundle Banner",status:"Active",performance:{impressions:4450,clicks:"3.2%",conversions:142}},{id:"comm-6",name:"Push Notification Bundle",status:"Active",performance:{impressions:2230,clicks:"8.7%",opens:"31%"}}]},{id:"func-3",name:"Premium Upgrade Path",description:"Suggest premium services to high-value customers",category:"Upsell",bookingTypes:["Flight","Hotel"],targetTypes:["Airport Lounge","Fast Track","eSIM"],timing:"Immediate after booking",status:"Active",performance:{impressions:5670,clicks:1700,conversions:340,revenue:"51,000",conversionRate:"6.0%"},comms:[{id:"comm-7",name:"Premium Services Email",status:"Active",performance:{opens:"28%",clicks:"9.8%",impressions:3400,deliveries:"99%"}},{id:"comm-8",name:"In-App Premium Offers",status:"Active",performance:{impressions:2270,clicks:"11.2%",conversions:254}}]},{id:"func-4",name:"Pre-Departure Seat Upgrade",description:"3 days before flight departure, offer seat bookability with discount",category:"Upsell",bookingTypes:["Flight"],targetTypes:["Seat Upgrade"],timing:"3 days before departure",status:"Active",performance:{impressions:18900,clicks:5670,conversions:945,revenue:"141,750",conversionRate:"5.0%"},comms:[{id:"comm-9",name:"South America Email Campaign (Spanish)",status:"Active",performance:{opens:"31%",clicks:"12.4%",impressions:6300,deliveries:"97%",conversions:378,revenue:"56,700"}},{id:"comm-10",name:"South America Email Campaign (Portuguese)",status:"Active",performance:{opens:"29%",clicks:"11.8%",impressions:4200,deliveries:"96%",conversions:252,revenue:"37,800"}},{id:"comm-11",name:"Digital Concierge Seat Offer (A/B Test A)",status:"Active",performance:{impressions:4200,clicks:"18.2%",opens:"45%",conversions:189,revenue:"28,350"}},{id:"comm-12",name:"Digital Concierge Seat Offer (A/B Test B)",status:"Active",performance:{impressions:4200,clicks:"16.8%",opens:"42%",conversions:126,revenue:"18,900"}}]}],G=[{id:"template-1",title:"Post-Flight Hotel Cross-Sell",description:"3 days after flight booking, offer hotel options for the destination",type:"Cross-Sell",status:"Active",trigger:"Flight Booking",timing:"3 days after booking",offerSelection:["Hotel"],performance:{revenue:"15,230",conversionRate:"8.2%",comms:2}},{id:"template-2",title:"Pre-Departure Seat Upgrade",description:"3 days before flight departure, offer seat bookability with discount",type:"Upsell",status:"Active",trigger:"Flight Departure",timing:"3 days before departure",offerSelection:["Seat Upgrade"],performance:{revenue:"8,450",conversionRate:"12.1%",comms:1}},{id:"template-3",title:"Day-of Lounge Access",description:"Day of flight, offer lounge access if NOT in premium cabins",type:"Upsell",status:"Not Active",trigger:"Flight Day",timing:"Day of departure",offerSelection:["Airport Lounge"],conditions:"Not in premium cabins"},{id:"template-4",title:"Pre-Departure eSIM Package",description:"24hrs before flight departure, send offer for eSIM package",type:"Cross-Sell",status:"Not Active",trigger:"Flight Departure",timing:"24 hours before departure",offerSelection:["eSIM"]},{id:"template-5",title:"Pre-Departure Airport Transfer",description:"24hrs before flight departure, send offer for airport transfer",type:"Cross-Sell",status:"Not Active",trigger:"Flight Departure",timing:"24 hours before departure",offerSelection:["Airport Transfer"]},{id:"template-6",title:"Post-Hotel Check-in Activities",description:"Immediately after hotel check in time, offer ticket around the area of hotel",type:"Cross-Sell",status:"Not Active",trigger:"Hotel Check-in",timing:"Immediately after check-in",offerSelection:["Event Ticket"]},{id:"template-7",title:"VIP Hotel Spa Treatment",description:"For VIP client, IF hotel is booked, offer spa treatment at hotel or nearby location",type:"Upsell",status:"Not Active",trigger:"Hotel Booking",timing:"After hotel booking",offerSelection:["Spa Treatment"],conditions:"VIP clients only"},{id:"template-8",title:"Weekend Hotel Event Bundle",description:"IF hotel booking includes weekend stay, offer ticket event over the weekend, within the area",type:"Cross-Sell",status:"Not Active",trigger:"Hotel Booking",timing:"After hotel booking",offerSelection:["Event Ticket"],conditions:"Weekend stays only"}],B=ce=>ce.map(le=>{try{return console.log("Transforming function:",le),le.functionType&&le.triggerConditions?{id:le.id||"unknown",name:le.title||"Untitled Function",description:le.description||"",category:le.functionType||"General",bookingTypes:Array.isArray(le.triggerEvents)?le.triggerEvents:[],targetTypes:Array.isArray(le.offerCategories)?le.offerCategories:[],timing:le.timingOption==="immediately"?"Immediate after booking":le.timingOption==="day_of_departure"?"Day of flight departure":`${le.timingValue||"3"} ${le.timingOption==="delayed"?"hours":"days"} before trip`,status:le.status==="completed"?"Active":le.status==="draft"?"Draft":"Active",performance:le.performance||{impressions:0,clicks:0,conversions:0,revenue:"0",conversionRate:"0%"},comms:Array.isArray(le.comms)?le.comms:[]}:{id:le.id||"unknown",name:le.title||le.name||"Untitled Function",description:le.description||"",category:le.functionType||le.category||"General",bookingTypes:Array.isArray(le.offerCategories)?le.offerCategories:Array.isArray(le.bookingTypes)?le.bookingTypes:[],targetTypes:Array.isArray(le.offerSelection)?le.offerSelection:Array.isArray(le.targetTypes)?le.targetTypes:[],timing:le.timingOption==="immediately"?"Immediate after booking":`${le.timingValue||"3"} ${le.timingOption==="delayed"?"hours after booking":"before departure"}`,status:le.status==="completed"?"Active":le.status==="draft"?"Draft":"Active",performance:le.performance||{impressions:0,clicks:0,conversions:0,revenue:"0",conversionRate:"0%"},comms:Array.isArray(le.comms)?le.comms:[]}}catch(Ve){return console.error("Error transforming function:",le,Ve),{id:le?.id||"error",name:le?.title||le?.name||"Error Loading Function",description:le?.description||"Error loading function data",category:"Error",bookingTypes:[],targetTypes:[],timing:"Unknown",status:"Error",performance:{impressions:0,clicks:0,conversions:0,revenue:"0",conversionRate:"0%"},comms:[]}}}),ue=ce=>ce.map(le=>{try{return{id:le.id||"unknown",title:le.title||"Untitled Template",description:le.description||"",type:le.type||"General",status:le.status||"Not Active",trigger:le.trigger||"",timing:le.timing||"",offerSelection:Array.isArray(le.offerSelection)?le.offerSelection:[],performance:le.performance||{},conditions:le.conditions||""}}catch(Ve){return console.error("Error transforming template:",le,Ve),{id:le?.id||"error",title:le?.title||"Error Loading Template",description:le?.description||"Error loading template data",type:"Error",status:"Error",trigger:"",timing:"",offerSelection:[],performance:{},conditions:""}}});let me=Te,we=G;try{ie.length>0&&(me=B(ie)),J.length>0&&(we=ue(J))}catch(ce){console.error("Error transforming data:",ce),me=Te,we=G}const K=ce=>{switch(ce.toLowerCase()){case"flight":return"";case"hotel":return"";case"event ticket":return"";case"esim":return"";case"fast track":return"";case"airport lounge":return"";case"airport dining":return"";case"airport transfer":return"";case"seat upgrade":return"";case"spa treatment":return"";default:return""}},ye=ce=>{switch(ce.toLowerCase()){case"active":return"success";case"draft":return"warning";case"paused":return"danger";case"not active":return"neutral";default:return"neutral"}},oe=ce=>{T(ce),k(!0)},R=ce=>{const le={title:ce.title,description:ce.description,functionType:ce.type,objectives:[],priority:"Medium",tags:[],status:"Draft",triggerEvents:[],triggerConditions:[],triggerFrequency:"once_per_trip_session",eventSources:["Mobile app","Website","API"],offerCategories:ce.offerSelection.map(nt=>({Hotel:"hotel_upgrade",Flight:"flight","Airport Lounge":"airport_lounge","Fast Track":"airport_fast_track","Airport Transfer":"airport_transfer",eSIM:"esim","Seat Upgrade":"flight_seat","Event Ticket":"ticket","Spa Treatment":"health_wellness"})[nt]||"flight"),timingOption:"days_after",timingValue:"3",cooldownPeriod:"",personaGroups:[],exclusions:{personas:[],loyaltyTiers:[],geo:[],cardTypes:[]},userLimits:{perUserPerDay:1,perUserPerWeek:3,maxTriggersPerProgram:1e3},offerSelection:[],offerFallback:{enabled:!1,fallbackOffers:[]},offerVisibilityRules:{maxPrice:null,minInventory:null},channels:["Concierge"],messageTemplate:{type:"saved",templateId:null,content:"",language:"English",tone:"Formal",aiCopywriting:!1},aiOptimization:{autoOptimization:!1,suggestSegments:!1},testMode:!1,auditTrail:{createdBy:"Current User",createdAt:new Date().toISOString(),lastModifiedBy:"Current User",lastModifiedAt:new Date().toISOString()}};ce.type==="Cross-Sell"?le.objectives=["revenue_uplift","basket_size"]:ce.type==="Upsell"?le.objectives=["upgrade_conversion","revenue_uplift"]:ce.type==="Bundle"&&(le.objectives=["ancillary_attach","basket_size"]);const Ve={"Flight Booking":["flight_booked"],"Flight Departure":["pre_trip_x_days"],"Flight Day":["day_of_departure"],"Hotel Booking":["hotel_booked"],"Hotel Check-in":["day_of_checkin"]};return le.triggerEvents=Ve[ce.trigger]||["flight_booked"],ce.timing.includes("Immediately")?le.timingOption="immediately":ce.timing.includes("Day of")?le.timingOption="day_of_departure":ce.timing.includes("24 hours")?(le.timingOption="hours_before_departure",le.timingValue="24"):ce.timing.includes("3 days")&&(le.timingOption="days_before_trip_start",le.timingValue="3"),le},pe=ce=>{console.log("handleSaveCustomBuild called with:",ce);try{k(!1),T(null),se(`"${ce.title||"New Function"}" has been created successfully!`),P(!0),setTimeout(()=>P(!1),5e3)}catch(le){console.error("Error in handleSaveCustomBuild:",le),k(!1),T(null)}},De=ce=>{M(!1),b(null),se(`"${ce.title}" has been added to the Comms tab. Please plan your communications before activating.`),P(!0),setTimeout(()=>P(!1),5e3)},Ne=ce=>{se(`"${ce.title}" has been paused.`),P(!0),setTimeout(()=>P(!1),3e3)},Se=ce=>{T(ce),k(!0)},ee=ce=>{try{const le=ie.find(Ve=>{try{const nt=Ve.name||Ve.title||"Unknown",ps=ce.title||"Unknown",Js=nt.toLowerCase().includes(ps.toLowerCase())||ps.toLowerCase().includes(nt.toLowerCase()),Hs=Ve.category||Ve.functionType||"Unknown",Vi=ce.type||"Unknown",vt=Hs===Vi,st=Array.isArray(Ve.targetTypes)?Ve.targetTypes:[],cs=Array.isArray(ce.offerSelection)?ce.offerSelection:[],qt=st.some(Qn=>cs.some(Bi=>Qn.toLowerCase().includes(Bi.toLowerCase())||Bi.toLowerCase().includes(Qn.toLowerCase())));return Js||vt&&qt}catch(nt){return console.error("Error comparing function with template:",nt),!1}});return le?{status:le.status||"Unknown",functionId:le.id||"unknown",functionName:le.name||le.title||"Unknown"}:{status:"Not Implemented"}}catch(le){return console.error("Error in getTemplateStatus:",le),{status:"Error"}}},Re=(()=>{try{return Array.isArray(we)?we.filter(ce=>{try{const le=j.toLowerCase(),Ve=ce.title&&ce.title.toLowerCase().includes(le)||ce.description&&ce.description.toLowerCase().includes(le)||ce.trigger&&ce.trigger.toLowerCase().includes(le)||ce.timing&&ce.timing.toLowerCase().includes(le)||ce.offerSelection&&ce.offerSelection.some(Hs=>Hs.toLowerCase().includes(le))||ce.conditions&&typeof ce.conditions=="string"&&ce.conditions.toLowerCase().includes(le),nt=A==="all"||ce.type&&ce.type.toLowerCase()===A.toLowerCase(),ps=D==="all"||ce.trigger&&ce.trigger.toLowerCase().includes(D.toLowerCase())||ce.offerSelection&&ce.offerSelection.some(Hs=>Hs.toLowerCase().includes(D.toLowerCase())),Js=U==="all"||U==="popular"&&ce.status==="Active"&&ce.performance||U==="new"&&ce.status==="Not Active";return Ve&&nt&&ps&&Js}catch(le){return console.error("Error filtering template:",ce,le),!1}}):(console.error("displayTemplateLibrary is not an array:",we),[])}catch(ce){return console.error("Error in filteredTemplates:",ce),[]}})();try{return console.log("Rendering RevenueOptimizer with data:",{revenueFunctions:ie.length,templates:J.length,displayRevenueFunctions:me.length,displayTemplateLibrary:we.length}),e.jsxs("div",{className:"revenue-optimizer-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Revenue Optimizer"}),e.jsx("p",{className:"page-subtitle",children:"Build, communicate, and optimize your revenue functions"})]}),Ee&&e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading data from Firebase..."})]}),e.jsxs("div",{className:"capabilities-tabs",children:[e.jsxs("button",{className:`capability-tab ${i==="build"?"active":""}`,onClick:()=>t("build"),children:[e.jsx("span",{className:"capability-icon",children:""}),e.jsx("span",{className:"capability-text",children:"Build"}),e.jsx("span",{className:"capability-desc",children:"Create revenue functions"}),e.jsx("span",{className:"tab-badge",children:we.length})]}),e.jsxs("button",{className:`capability-tab ${i==="comms"?"active":""}`,onClick:()=>t("comms"),children:[e.jsx("span",{className:"capability-icon",children:""}),e.jsx("span",{className:"capability-text",children:"Comms"}),e.jsx("span",{className:"capability-desc",children:"Manage communications"}),e.jsx("span",{className:"tab-badge",children:(()=>{try{return ie.reduce((ce,le)=>{const Ve=Array.isArray(le.comms)?le.comms:[];return ce+Ve.length},0)}catch(ce){return console.error("Error calculating comms badge:",ce),0}})()})]}),e.jsxs("button",{className:`capability-tab ${i==="performance"?"active":""}`,onClick:()=>t("performance"),children:[e.jsx("span",{className:"capability-icon",children:""}),e.jsx("span",{className:"capability-text",children:"Performance"}),e.jsx("span",{className:"capability-desc",children:"Analyze performance"}),e.jsx("span",{className:"tab-badge",children:(()=>{try{return ie.filter(ce=>(ce.status||"Unknown")==="Active").length}catch(ce){return console.error("Error calculating performance badge:",ce),0}})()})]})]}),e.jsxs("div",{className:"capability-content",children:[i==="build"&&e.jsx(qm.Suspense,{fallback:e.jsx("div",{children:"Loading Build tab..."}),children:e.jsx(XC,{buildSubTab:n,setBuildSubTab:l,templateSearch:j,setTemplateSearch:S,templateFilter:A,setTemplateFilter:O,templateProductFilter:D,setTemplateProductFilter:H,templatePopularityFilter:U,setTemplatePopularityFilter:q,filteredTemplates:Re,getBookingTypeIcon:K,getTemplateStatus:ee,handleActivateTemplate:oe,setShowFunctionBuilder:f,showTemplateModal:z,setShowTemplateModal:M,selectedTemplateForEdit:w,handlePrepareComms:De,handlePauseTemplate:Ne,handleEditTemplate:Se})}),i==="comms"&&e.jsx(I.Suspense,{fallback:e.jsx("div",{children:"Loading Comms tab..."}),children:e.jsx(WC,{revenueFunctions:me,getStatusColor:ye,setShowCommsBuilder:g})}),i==="performance"&&e.jsx(I.Suspense,{fallback:e.jsx("div",{children:"Loading Performance tab..."}),children:e.jsx(JC,{revenueFunctions:me})})]}),m&&e.jsx("div",{className:"modal-overlay",onClick:()=>f(!1),children:e.jsxs("div",{className:"modal-content modal-large",onClick:ce=>ce.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Create Revenue Function"}),e.jsx("button",{className:"modal-close",onClick:()=>f(!1),children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"function-builder",children:[e.jsxs("div",{className:"builder-section",children:[e.jsx("h4",{children:"Function Name"}),e.jsx("input",{type:"text",placeholder:"Enter function name...",className:"function-name-input"})]}),e.jsxs("div",{className:"builder-section",children:[e.jsx("h4",{children:"Category"}),e.jsxs("select",{className:"category-select",children:[e.jsx("option",{children:"Cross-Sell"}),e.jsx("option",{children:"Upsell"}),e.jsx("option",{children:"Bundle"})]})]}),e.jsxs("div",{className:"builder-section",children:[e.jsx("h4",{children:"Trigger Booking Types"}),e.jsxs("div",{className:"booking-types-selector",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  Flight"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  Hotel"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  Event Ticket"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  eSIM"]})]})]}),e.jsxs("div",{className:"builder-section",children:[e.jsx("h4",{children:"Target Offers"}),e.jsxs("div",{className:"offers-selector",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  Hotel"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  Fast Track"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  Airport Lounge"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  Airport Dining"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox"}),"  Airport Transfer"]})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn secondary",onClick:()=>f(!1),children:"Cancel"}),e.jsx("button",{className:"btn primary",children:"Create Function"})]})]})}),y&&e.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:e.jsxs("div",{className:"modal-content modal-large",onClick:ce=>ce.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Create Communication"}),e.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"comms-builder",children:[e.jsxs("div",{className:"builder-section",children:[e.jsx("h4",{children:"Communication Name"}),e.jsx("input",{type:"text",placeholder:"Enter communication name...",className:"comms-name-input"})]}),e.jsxs("div",{className:"builder-section",children:[e.jsx("h4",{children:"Type"}),e.jsxs("select",{className:"comms-type-select",children:[e.jsx("option",{children:"Email"}),e.jsx("option",{children:"SMS"}),e.jsx("option",{children:"Push Notification"}),e.jsx("option",{children:"In-App Message"})]})]}),e.jsxs("div",{className:"builder-section",children:[e.jsx("h4",{children:"Associated Function"}),e.jsxs("select",{className:"function-select",children:[e.jsx("option",{children:"Flight to Hotel Cross-Sell"}),e.jsx("option",{children:"Airport Services Bundle"}),e.jsx("option",{children:"Premium Upgrade Path"})]})]}),e.jsxs("div",{className:"builder-section",children:[e.jsx("h4",{children:"Message Content"}),e.jsx("textarea",{placeholder:"Enter your message content...",className:"message-content",rows:"4"})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx("button",{className:"btn primary",children:"Create Communication"})]})]})}),E&&V&&e.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:e.jsx("div",{className:"modal-content modal-fullscreen",onClick:ce=>ce.stopPropagation(),children:e.jsx(wN,{isOpen:E,onClose:()=>{k(!1),T(null)},onSave:pe,editingFunction:R(V),getBookingTypeIcon:K})})}),Y&&e.jsx("div",{className:"toast-notification",children:e.jsxs("div",{className:"toast-content",children:[e.jsx("span",{className:"toast-icon",children:""}),e.jsx("span",{className:"toast-message",children:Q}),e.jsx("button",{className:"toast-close",onClick:()=>P(!1),children:""})]})})]})}catch(ce){return console.error("Error rendering RevenueOptimizer:",ce),e.jsxs("div",{className:"revenue-optimizer-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Revenue Optimizer"}),e.jsx("p",{className:"page-subtitle",children:"Build, communicate, and optimize your revenue functions"})]}),e.jsxs("div",{className:"error-state",children:[e.jsxs("p",{children:["Error loading Revenue Optimizer: ",ce.message]}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})]})}}function t1({formData:i,handleInputChange:t,showTagSuggestions:n,setShowTagSuggestions:l,tagInputValue:c,setTagInputValue:d}){const m=I.useMemo(()=>["Summer","Business","Luxury","Family","Adventure","Student","Premium","Wellness","Golf","Platinum"],[]),f=O=>(O||"").trim(),y=O=>{const D=f(O);if(D){if(!i.tags.includes(D)){const H=[...i.tags,D];t({target:{name:"tags",value:H}})}d(""),l(!1)}},g=O=>{const D=i.tags.filter(H=>H!==O);t({target:{name:"tags",value:D}})},j=I.useMemo(()=>{const O=f(c).toLowerCase();return O?m.filter(D=>!i.tags.includes(D)).filter(D=>D.toLowerCase().includes(O)).slice(0,8):[]},[c,m,i.tags]),S=O=>{if(O.key==="Enter"){O.preventDefault();const D=m.find(H=>H.toLowerCase()===f(c).toLowerCase());y(D||c)}else O.key==="Backspace"&&!c&&i.tags.length>0&&g(i.tags[i.tags.length-1])},A=O=>m.includes(O);return e.jsxs("div",{className:"form-step",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Basic Program Information"}),e.jsx("p",{children:"Set up the basic information for your reward program."})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"programName",className:"required",children:"Program Name"}),e.jsx("input",{type:"text",id:"programName",name:"programName",value:i.programName,onChange:t,placeholder:"Enter program name",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",className:"required",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:t,placeholder:"Describe your reward program...",rows:"4",className:"form-input"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"startDate",children:"Start Date"}),e.jsx("input",{type:"date",id:"startDate",name:"startDate",value:i.startDate,onChange:t,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"endDate",children:"End Date"}),e.jsx("input",{type:"date",id:"endDate",name:"endDate",value:i.endDate,onChange:t,className:"form-input"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tags",children:"Tags"}),e.jsxs("div",{className:"tag-input-container",children:[e.jsxs("div",{className:"tag-input-wrapper",onClick:()=>l(!0),children:[i.tags.map(O=>e.jsxs("span",{className:`tag ${A(O)?"tag-predefined":"tag-custom"}`,children:[O,e.jsx("button",{type:"button",onClick:()=>g(O),className:"tag-remove",children:""})]},O)),e.jsx("input",{className:"tag-input",value:c,onChange:O=>d(O.target.value),onFocus:()=>l(!0),onKeyDown:S,placeholder:"Add tags..."})]}),n&&j.length>0&&e.jsxs("div",{className:"tag-suggestions",children:[e.jsx("div",{className:"suggestions-header",children:"Suggestions"}),e.jsx("div",{className:"suggestions-list",children:j.map(O=>e.jsx("button",{className:"suggestion-item",type:"button",onClick:()=>y(O),children:O},O))})]})]})]})]})]})}function s1({formData:i,handleInputChange:t,addEligibilityRule:n,updateEligibilityRule:l,removeEligibilityRule:c,getRuleTypeById:d,eligibilityRuleOptions:m,comparisonOperators:f,timePeriods:y,targetPersonas:g,targetProducts:j}){const S=["Business Travelers","Leisure Travelers","Frequent Flyers","Luxury Travelers","Budget Travelers","Family Travelers","Solo Travelers","Group Travelers"],A=["Platinum Credit Card","Gold Credit Card","Travel Credit Card","Golf Credit Card","Student Credit Card","Premium Debit Card","Savings Account","Wealth Account"],O=(D,H)=>{const U=i[D]||[],Y=U.includes(H)?U.filter(P=>P!==H):[...U,H];t(D,Y)};return e.jsxs("div",{className:"form-step",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Targeting & Eligibility"}),e.jsx("p",{children:"Define who can access this program and when"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Target Personas"}),e.jsx("div",{className:"checkbox-grid",children:S.map(D=>e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:!!i.targetPersonas?.includes(D),onChange:()=>O("targetPersonas",D)}),e.jsx("span",{children:D})]},D))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Target Products"}),e.jsx("div",{className:"checkbox-grid",children:A.map(D=>e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:!!i.targetProducts?.includes(D),onChange:()=>O("targetProducts",D)}),e.jsx("span",{children:D})]},D))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Eligibility Rules"}),e.jsx("p",{className:"field-description",children:"Define specific criteria that customers must meet to be eligible for this program. Rules are combined with AND logic - all conditions must be met."}),e.jsx("div",{className:"eligibility-rules-container",children:e.jsxs("div",{className:"add-rule-section",children:[e.jsx("div",{className:"add-rule-controls",children:e.jsx("div",{className:"modern-dropdown",children:e.jsxs("select",{className:"modern-dropdown-select",onChange:D=>{const H=D.target.value;H&&(n(H,m[H][0]),D.target.value="")},defaultValue:"",children:[e.jsx("option",{value:"",children:"Select eligibility category..."}),Object.entries(m).map(([D,H])=>e.jsx("option",{value:D,children:D.replace(/([A-Z])/g," $1").replace(/^./,U=>U.toUpperCase())},D))]})})}),Object.entries(m).map(([D,H])=>{const U=i.eligibilityRules[D];return U.length===0?null:e.jsxs("div",{className:"eligibility-category",children:[e.jsxs("div",{className:"category-header",children:[e.jsxs("h4",{children:[D.replace(/([A-Z])/g," $1").replace(/^./,q=>q.toUpperCase()),e.jsx("span",{className:"rule-count",children:U.length})]}),e.jsx("button",{type:"button",className:"btn enhanced secondary small",onClick:()=>n(D,H[0]),children:"Add Another Rule"})]}),e.jsx("div",{className:"rules-list",children:U.map(q=>{const Y=d(D,q.type.id);return e.jsxs("div",{className:"rule-item",children:[e.jsxs("div",{className:"rule-content",children:[e.jsxs("div",{className:"rule-field",children:[e.jsx("label",{children:"Field:"}),e.jsx("div",{className:"modern-select",children:e.jsx("select",{value:q.type.id,onChange:P=>{const Q=H.find(se=>se.id===P.target.value);l(D,q.id,"type",Q)},className:"form-input small enhanced",children:H.map(P=>e.jsx("option",{value:P.id,children:P.label},P.id))})})]}),e.jsxs("div",{className:"rule-operator",children:[e.jsx("label",{children:"Operator:"}),e.jsx("div",{className:"modern-select",children:e.jsx("select",{value:q.operator,onChange:P=>l(D,q.id,"operator",P.target.value),className:"form-input small enhanced",children:f.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))})})]}),e.jsxs("div",{className:"rule-value",children:[e.jsx("label",{children:"Value:"}),Y.type==="select"?e.jsx("div",{className:"modern-select",children:e.jsxs("select",{value:q.value,onChange:P=>l(D,q.id,"value",P.target.value),className:"form-input small enhanced",children:[e.jsx("option",{value:"",children:"Select value"}),Y.options.map(P=>e.jsx("option",{value:P,children:P},P))]})}):Y.type==="number"?e.jsx("input",{type:"number",value:q.value,onChange:P=>l(D,q.id,"value",P.target.value),placeholder:"Enter value",className:"form-input small enhanced"}):e.jsx("input",{type:"text",value:q.value,onChange:P=>l(D,q.id,"value",P.target.value),placeholder:"Enter value",className:"form-input small enhanced"})]}),Y.period&&e.jsxs("div",{className:"rule-period",children:[e.jsx("label",{children:"Period:"}),e.jsx("div",{className:"modern-select",children:e.jsx("select",{value:q.period,onChange:P=>l(D,q.id,"period",P.target.value),className:"form-input small enhanced",children:y.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))})})]}),q.operator==="between"&&e.jsxs("div",{className:"rule-second-value",children:[e.jsx("label",{children:"To:"}),e.jsx("input",{type:Y.type==="number"?"number":"text",value:q.secondValue||"",onChange:P=>l(D,q.id,"secondValue",P.target.value),placeholder:"Enter second value",className:"form-input small enhanced"})]})]}),e.jsx("button",{type:"button",className:"remove-rule-btn",onClick:()=>c(D,q.id),children:""})]},q.id)})})]},D)}),Object.values(i.eligibilityRules).every(D=>D.length===0)&&e.jsx("div",{className:"no-rules-message",children:e.jsx("p",{children:"No eligibility rules defined yet. Use the dropdown above to add your first rule."})})]})})]})]})]})}function a1({formData:i,handleInputChange:t,handleBenefitInputChange:n,addBenefit:l,removeBenefit:c,currentBenefit:d,setCurrentBenefit:m,showBenefitForm:f,setShowBenefitForm:y,benefitTypes:g,redemptionMethods:j,benefitsCatalog:S=[],addBenefitFromMarketplace:A}){const[O,D]=I.useState("marketplace"),[H,U]=I.useState(""),[q,Y]=I.useState(""),[P,Q]=I.useState(""),se=["flights","hotels","tickets","eSIM","transfers","fast track","lounge","dining"],z={flights:["All","British Airways","American Airlines","Emirates","Qatar Airways","United","Lufthansa"],hotels:["All","Hilton","Marriott","IHG","Hyatt","Accor"],tickets:["All","Ticketmaster","Eventbrite","AXS"],eSIM:["All","Airalo","eSIM Partner"],transfers:["All","Uber","Lyft","RideCo","Taxi Partner"],"fast track":["All","Partner A","Partner B"],lounge:["All","DragonPass","LoungeKey"],dining:["All","Cafe Partner","Food Partner"]},M=I.useMemo(()=>z[d.productType]||[],[d.productType]),w={flights:["E-ticket update with benefit applied","E-voucher code for future booking (email/app delivery)","PNR remark for supplier (benefit applied in booking record)","Loyalty miles/points credit (auto-applied to account)","Concierge call to arrange change/upgrade","Mobile app push notification with booking link (deep link pre-loaded with benefit)"],hotels:["Booking modification with benefit applied","E-voucher for hotel services","QR code/barcode for on-site redemption","Loyalty points credit","Concierge booking confirmation"],tickets:["Digital ticket delivery (QR code, barcode, PDF)","Voucher code for partner booking site","Wallet pass push (Apple Wallet / Google Wallet)","Concierge booking on behalf of customer"],eSIM:["QR code / activation code via app/email","Automatic activation (OTA provisioning)","Concierge assistance for setup"],transfers:["Booking confirmation with benefit applied","Voucher code for partner transfer service","Concierge booking confirmation"],"fast track":["QR code / barcode for entry","Wallet pass push","PNR remark (if airline-integrated fast track)","Concierge booking confirmation"],lounge:["QR code / barcode for entry","Loyalty points deduction + access confirmation","Wallet pass push","Concierge booking confirmation"],dining:["Voucher code for restaurant","QR code for on-site redemption","Wallet pass push","Concierge table reservation confirmation"]},b={flights:"E-ticket update with benefit applied",hotels:"Booking modification with benefit applied",tickets:"Digital ticket delivery (QR code, barcode, PDF)",eSIM:"QR code / activation code via app/email",transfers:"Booking confirmation with benefit applied","fast track":"QR code / barcode for entry",lounge:"QR code / barcode for entry",dining:"Voucher code for restaurant"},E=I.useMemo(()=>w[d.productType]||[],[d.productType]),k=ee=>{const Re=b[ee];if(!Re)return;const ce=Array.isArray(d.deliveryMethods)?d.deliveryMethods:[];if(ce.length===0)n("deliveryMethods",[Re]);else{const le=ce.filter(Ve=>(w[ee]||[]).includes(Ve));le.length===0?n("deliveryMethods",[Re]):n("deliveryMethods",le)}},[V,T]=I.useState(!1),[ie,be]=I.useState(""),J=I.useMemo(()=>{const ee=M||[],Re=ie.trim().toLowerCase();return Re?ee.filter(ce=>ce.toLowerCase().includes(Re)):ee},[M,ie]),fe=Array.isArray(d.suppliers)?d.suppliers:[],Ee=ee=>{const Re=Array.isArray(d.suppliers)?d.suppliers:[];if(ee==="All"){const nt=Re.includes("All")?[]:["All"];n("suppliers",nt);return}const ce=Re.filter(nt=>nt!=="All"),Ve=ce.includes(ee)?ce.filter(nt=>nt!==ee):[...ce,ee];n("suppliers",Ve)},_e=()=>n("suppliers",[]),F=()=>d.productType?fe.includes("All")?"All suppliers":fe.length===0?"Select suppliers":fe.length<=2?fe.join(", "):`${fe.length} selected`:"Select suppliers",[de,Te]=I.useState(!1),[G,B]=I.useState(""),ue=I.useMemo(()=>{const ee=E||[],Re=G.trim().toLowerCase();return Re?ee.filter(ce=>ce.toLowerCase().includes(Re)):ee},[E,G]),me=Array.isArray(d.deliveryMethods)?d.deliveryMethods:[],we=ee=>{const le=(Array.isArray(d.deliveryMethods)?d.deliveryMethods:[]).includes(ee)?[]:[ee];n("deliveryMethods",le)},K=()=>n("deliveryMethods",[]),ye=()=>!d.productType||me.length===0?"Select a delivery method":me[0],oe=I.useMemo(()=>Array.from(new Set(S.map(ee=>ee.type).filter(Boolean))).sort(),[S]),R=I.useMemo(()=>Array.from(new Set(S.map(ee=>ee.supplier).filter(Boolean))).sort(),[S]),pe=I.useMemo(()=>{const ee=H.trim().toLowerCase();return S.filter(Re=>{const ce=!ee||[Re.title,Re.description,Re.type,Re.supplier].filter(Boolean).some(nt=>nt.toLowerCase().includes(ee)),le=!q||Re.type===q,Ve=!P||Re.supplier===P;return ce&&le&&Ve})},[S,H,q,P]),De=ee=>i.benefits.some(Re=>(Re.title||"").toLowerCase()===(ee.title||"").toLowerCase()),[Ne,Se]=I.useState(!1);return e.jsxs("div",{className:"form-step",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Benefits & Rewards"}),e.jsx("p",{children:"Configure the rewards and benefits for your program"})]}),e.jsxs("div",{className:"benefits-section",children:[i.benefits.length>0&&e.jsxs("div",{className:"selected-benefits",children:[e.jsxs("div",{className:"selected-header",children:[e.jsxs("div",{className:"selected-title",children:[e.jsx("span",{className:"label",children:"Selected Benefits"}),e.jsx("span",{className:"badge",children:i.benefits.length})]}),e.jsx("button",{type:"button",className:"btn secondary small",onClick:()=>Se(!Ne),children:Ne?"Hide":"Manage"})]}),Ne?e.jsx("div",{className:"benefits-list compact",children:i.benefits.map(ee=>e.jsxs("div",{className:"benefit-item",children:[e.jsxs("div",{className:"benefit-info",children:[e.jsx("h5",{children:ee.title}),e.jsxs("p",{children:[ee.type,"  ",ee.supplier]}),ee.costToBank&&e.jsxs("small",{className:"benefit-cost-display",children:["Cost: $",ee.costToBank]})]}),e.jsx("button",{type:"button",className:"remove-benefit-btn",onClick:()=>c(ee.id),children:"Remove"})]},ee.id))}):e.jsxs("div",{className:"selected-chips",children:[i.benefits.slice(0,6).map(ee=>e.jsx("span",{className:"selected-chip",children:ee.title},ee.id)),i.benefits.length>6&&e.jsxs("span",{className:"selected-more",children:["+",i.benefits.length-6," more"]})]})]}),e.jsxs("div",{className:"benefits-tabs",children:[e.jsx("button",{type:"button",className:`tab-btn ${O==="marketplace"?"active":""}`,onClick:()=>D("marketplace"),children:"Marketplace"}),e.jsx("button",{type:"button",className:`tab-btn ${O==="create"?"active":""}`,onClick:()=>D("create"),children:"Create New"})]}),O==="create"?e.jsxs("div",{className:"benefit-form",children:[e.jsx("div",{className:"benefit-form-header",children:e.jsx("h4",{children:"Create New Benefit"})}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Benefit Title"}),e.jsx("input",{type:"text",value:d.title,onChange:ee=>n("title",ee.target.value),placeholder:"Enter benefit title",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Benefit Type"}),e.jsxs("select",{value:d.type,onChange:ee=>n("type",ee.target.value),className:"form-input enhanced",children:[e.jsx("option",{value:"",children:"Select type"}),g.map(ee=>e.jsx("option",{value:ee,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Product Type"}),e.jsxs("select",{value:d.productType||"",onChange:ee=>{const Re=ee.target.value;n("productType",Re),_e(),T(!1),be(""),Te(!1),B(""),n("deliveryMethods",[]),k(Re)},className:"form-input enhanced",children:[e.jsx("option",{value:"",children:"Select product"}),se.map(ee=>e.jsx("option",{value:ee,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Suppliers (optional)"}),e.jsxs("div",{className:`modern-multiselect ${V?"open":""}`,children:[e.jsxs("button",{type:"button",className:"multiselect-trigger",disabled:!d.productType,onClick:()=>T(!V),children:[e.jsx("span",{className:"multiselect-placeholder",children:F()}),e.jsx("span",{className:"chevron",children:""})]}),V&&e.jsxs("div",{className:"multiselect-panel",children:[e.jsx("div",{className:"multiselect-search",children:e.jsx("input",{type:"text",value:ie,onChange:ee=>be(ee.target.value),placeholder:"Search suppliers..."})}),e.jsxs("div",{className:"multiselect-options",children:[(J||[]).map(ee=>e.jsxs("label",{className:"multiselect-option",children:[e.jsx("input",{type:"checkbox",checked:fe.includes(ee),onChange:()=>Ee(ee)}),e.jsx("span",{children:ee})]},ee)),J.length===0&&e.jsx("div",{className:"multiselect-empty",children:"No suppliers found"})]}),e.jsxs("div",{className:"multiselect-actions",children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:_e,children:"Clear"}),e.jsx("button",{type:"button",className:"btn primary",onClick:()=>T(!1),children:"Done"})]})]})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Redemption Method"}),e.jsxs("select",{value:d.redemptionMethod,onChange:ee=>n("redemptionMethod",ee.target.value),className:"form-input enhanced",children:[e.jsx("option",{value:"",children:"Select method"}),j.map(ee=>e.jsx("option",{value:ee,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Delivery Logic"}),e.jsxs("div",{className:`modern-multiselect ${de?"open":""}`,children:[e.jsxs("button",{type:"button",className:"multiselect-trigger",disabled:!d.productType,onClick:()=>Te(!de),children:[e.jsx("span",{className:"multiselect-placeholder",children:ye()}),e.jsx("span",{className:"chevron",children:""})]}),de&&e.jsxs("div",{className:"multiselect-panel",children:[e.jsx("div",{className:"multiselect-search",children:e.jsx("input",{type:"text",value:G,onChange:ee=>B(ee.target.value),placeholder:"Search delivery methods..."})}),e.jsxs("div",{className:"multiselect-options",children:[(ue||[]).map(ee=>e.jsxs("label",{className:"multiselect-option",children:[e.jsx("input",{type:"radio",name:"delivery-method",checked:me.includes(ee),onChange:()=>we(ee)}),e.jsx("span",{children:ee})]},ee)),ue.length===0&&e.jsx("div",{className:"multiselect-empty",children:"No methods found"})]}),e.jsxs("div",{className:"multiselect-actions",children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:K,children:"Clear"}),e.jsx("button",{type:"button",className:"btn primary",onClick:()=>Te(!1),children:"Done"})]})]})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cost to Bank (USD)"}),e.jsx("input",{type:"number",value:d.costToBank,onChange:ee=>n("costToBank",ee.target.value),placeholder:"Enter cost in USD",className:"form-input enhanced",min:"0",step:"0.01"}),e.jsx("small",{className:"field-description",children:"The cost per customer for this benefit. Used for bundle pricing analysis."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:d.description,onChange:ee=>n("description",ee.target.value),placeholder:"Enter benefit description",className:"form-input enhanced",rows:"3"})]})]})]}),e.jsxs("div",{className:"benefit-form-actions",children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:()=>{m({title:"",type:"",supplier:"",redemptionMethod:"",deliveryLogic:"",redemptionWindowStart:"",redemptionWindowEnd:"",customerUsageLimit:"",inventory:"",costToBank:"",personaEligibilityOverride:"",visibleInUI:!1,productType:"",suppliers:[],deliveryMethods:[]}),T(!1),be(""),Te(!1),B("")},children:"Clear"}),e.jsx("button",{type:"button",className:"btn primary",onClick:()=>l(!0),children:"Add and continue"}),e.jsx("button",{type:"button",className:"btn primary",onClick:()=>{l(!1),D("marketplace")},children:"Add and close"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"marketplace-toolbar",children:[e.jsx("div",{className:"toolbar-left",children:e.jsx("div",{className:"marketplace-search",children:e.jsx("input",{className:"search-input",placeholder:"Search benefits...",value:H,onChange:ee=>U(ee.target.value)})})}),e.jsxs("div",{className:"toolbar-right",children:[e.jsxs("select",{className:"modern-select",value:q,onChange:ee=>Y(ee.target.value),children:[e.jsx("option",{value:"",children:"All types"}),oe.map(ee=>e.jsx("option",{value:ee,children:ee},ee))]}),e.jsxs("select",{className:"modern-select",value:P,onChange:ee=>Q(ee.target.value),children:[e.jsx("option",{value:"",children:"All suppliers"}),R.map(ee=>e.jsx("option",{value:ee,children:ee},ee))]}),(H||q||P)&&e.jsx("button",{type:"button",className:"btn secondary",onClick:()=>{U(""),Y(""),Q("")},children:"Clear filters"})]})]}),e.jsx("div",{className:"marketplace-grid",children:pe.map(ee=>{const Re=De(ee);return e.jsxs("div",{className:`marketplace-card ${Re?"added":""}`,children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"card-title",children:ee.title}),e.jsx("div",{className:"card-type-chip",children:ee.type})]}),e.jsx("div",{className:"card-sub"}),e.jsx("p",{className:"marketplace-desc",children:ee.description}),e.jsx("div",{className:"card-footer",children:e.jsx("button",{type:"button",className:"btn primary",disabled:Re,onClick:()=>A(ee),children:Re?"Added":"Add to package"})})]},ee.id)})})]})]})]})}function n1({formData:i,personaOptions:t,productOptions:n,eligibilityRuleOptions:l,comparisonOperators:c,timePeriods:d,getRuleTypeById:m}){const[f,y]=I.useState({}),g=Y=>Array.isArray(Y)?Y:[],j=Y=>{if(!Y)return"Not set";const P=new Date(Y);return isNaN(P.getTime())?"Not set":P.toLocaleDateString()},S=Y=>y(P=>({...P,[Y]:!P[Y]})),O=(()=>{const Y=[],P=i?.eligibilityRules||{};return Object.entries(P).forEach(([Q,se])=>{const z=Array.isArray(se)?se:[];z.length>0&&Y.push({category:Q.replace(/([A-Z])/g," $1").replace(/^./,M=>M.toUpperCase()),rules:z.map(M=>{const b=m(Q,M?.type?.id)?.label||M?.type?.label||"Field",E=M?.operator||"",k=M?.value??"",V=M?.secondValue??"";let T=`${b} ${E} ${k}`.trim();return E==="between"&&V&&(T=`${b} between ${k} and ${V}`),M?.period&&(T+=` (${M.period})`),T})})}),Y})(),D=g(i?.targetPersonas),H=g(i?.targetProducts),U=g(i?.benefits),q=g(i?.reportingTags||i?.tags);return e.jsxs("div",{className:"form-step",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Review & Launch"}),e.jsx("p",{children:"Review all details and launch your program"})]}),e.jsxs("div",{className:"review-section",children:[e.jsxs("div",{className:`review-card ${f.info?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"review-card-header",onClick:()=>S("info"),role:"button",children:[e.jsxs("h4",{children:[e.jsx("span",{className:"section-icon",children:""})," Program Information"]}),e.jsx("span",{className:"chevron",children:f.info?"":"+"})]}),f.info&&e.jsxs("div",{className:"review-card-body",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("div",{className:"summary-title",children:i?.programName||"Untitled Program"}),e.jsxs("div",{className:"summary-badges",children:[e.jsxs("span",{className:"chip chip-outline",children:[U.length," benefits"]}),e.jsxs("span",{className:"chip chip-outline",children:[D.length," personas"]}),e.jsxs("span",{className:"chip chip-outline",children:[H.length," products"]}),e.jsx("span",{className:"status-badge",style:{backgroundColor:"rgba(26,34,51,0.08)",color:"var(--brand-primary)",border:"1px solid rgba(26,34,51,0.18)"},children:i?.status||"Draft"})]})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("span",{className:"review-label",children:"Description:"}),e.jsx("span",{className:"review-value",children:i?.description||"Not set"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("span",{className:"review-label",children:"Dates:"}),e.jsxs("span",{className:"review-value",children:[j(i?.startDate),"  ",j(i?.endDate)]})]})]})]}),e.jsxs("div",{className:`review-card ${f.targeting?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"review-card-header",onClick:()=>S("targeting"),role:"button",children:[e.jsxs("h4",{children:[e.jsx("span",{className:"section-icon",children:""})," Targeting & Eligibility"]}),e.jsx("span",{className:"chevron",children:f.targeting?"":"+"})]}),f.targeting&&e.jsxs("div",{className:"review-card-body",children:[e.jsxs("div",{className:"summary-row",style:{marginBottom:12},children:[e.jsx("div",{className:"summary-title",children:"Audience Overview"}),e.jsxs("div",{className:"summary-badges",children:[e.jsxs("span",{className:"chip chip-outline",children:[D.length," personas"]}),e.jsxs("span",{className:"chip chip-outline",children:[H.length," products"]}),e.jsxs("span",{className:"chip chip-outline",children:[O.reduce((Y,P)=>Y+P.rules.length,0)," rules"]})]})]}),e.jsxs("div",{className:"chips-group",children:[e.jsxs("div",{className:"chips-block",children:[e.jsx("div",{className:"chips-label",children:"Target Personas"}),e.jsx("div",{className:"chips",children:D.length>0?D.map(Y=>e.jsx("span",{className:"chip chip-outline",children:Y},Y)):e.jsx("span",{className:"chip chip-muted",children:"None selected"})})]}),e.jsxs("div",{className:"chips-block",children:[e.jsx("div",{className:"chips-label",children:"Target Products"}),e.jsx("div",{className:"chips",children:H.length>0?H.map(Y=>e.jsx("span",{className:"chip chip-outline",children:Y},Y)):e.jsx("span",{className:"chip chip-muted",children:"None selected"})})]})]}),O.length>0&&e.jsxs("div",{className:"eligibility-review-section",children:[e.jsx("h5",{children:"Eligibility Rules"}),O.map((Y,P)=>e.jsxs("div",{className:"eligibility-review-category",children:[e.jsx("h5",{children:Y.category}),Y.rules.map((Q,se)=>e.jsx("div",{className:"eligibility-rule-review",children:e.jsxs("span",{className:"rule-field",children:[" ",Q]})},se))]},P))]})]})]}),e.jsxs("div",{className:`review-card ${f.benefits?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"review-card-header",onClick:()=>S("benefits"),role:"button",children:[e.jsxs("h4",{children:[e.jsx("span",{className:"section-icon",children:""})," Benefits & Rewards"]}),e.jsx("span",{className:"chevron",children:f.benefits?"":"+"})]}),f.benefits&&e.jsx("div",{className:"review-card-body",children:U.length>0?e.jsx("div",{className:"benefit-tiles",children:U.map(Y=>e.jsxs("div",{className:"benefit-tile",children:[e.jsxs("div",{className:"benefit-header",children:[e.jsx("div",{className:"benefit-title",children:Y.title||Y.name}),Y.type&&e.jsx("span",{className:"chip chip-accent",children:Y.type})]}),e.jsxs("div",{className:"benefit-meta",children:[Y.supplier&&e.jsxs("span",{className:"meta-item",children:["Supplier: ",e.jsx("strong",{children:Y.supplier})]}),(Y.deliveryLogic||Y.deliveryMethods&&Y.deliveryMethods[0])&&e.jsxs("span",{className:"meta-item",children:["Delivery: ",e.jsx("strong",{children:Y.deliveryLogic||Y.deliveryMethods[0]})]}),Y.redemptionMethod&&e.jsxs("span",{className:"meta-item",children:["Redemption: ",e.jsx("strong",{children:Y.redemptionMethod})]})]})]},Y.id))}):e.jsx("div",{className:"no-benefits",children:e.jsx("p",{children:"No benefits added yet"})})})]}),e.jsxs("div",{className:`review-card ${f.additional?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"review-card-header",onClick:()=>S("additional"),role:"button",children:[e.jsxs("h4",{children:[e.jsx("span",{className:"section-icon",children:""})," Additional Information"]}),e.jsx("span",{className:"chevron",children:f.additional?"":"+"})]}),f.additional&&e.jsx("div",{className:"review-card-body",children:e.jsxs("div",{className:"chips-block",children:[e.jsx("div",{className:"chips-label",children:"Reporting Tags"}),e.jsx("div",{className:"chips",children:q.length>0?q.map(Y=>e.jsx("span",{className:"chip chip-outline",children:Y},Y)):e.jsx("span",{className:"chip chip-muted",children:"None added"})})]})})]})]})]})}function i1({isOpen:i,onClose:t,initialData:n,onSave:l,saveButtonText:c}){const[d,m]=I.useState(1),[f,y]=I.useState({programName:n?.programName||"",status:n?.status||"Draft",description:n?.description||"",startDate:n?.startDate||"",endDate:n?.endDate||"",targetPersonas:Array.isArray(n?.targetPersonas)?n.targetPersonas:[],targetProducts:Array.isArray(n?.targetProducts)?n.targetProducts:[],tags:Array.isArray(n?.tags)?n.tags:[],eligibilityRules:n?.eligibilityRules||{customerProfileRules:[],bookingHistoryRules:[],currentTripContext:[],financialProductRules:[],activityEngagement:[],geographicLocation:[],externalDataRules:[]},conciergeGuidance:n?.conciergeGuidance||"",reportingTags:Array.isArray(n?.reportingTags)?n.reportingTags:[],benefits:Array.isArray(n?.benefits)?n.benefits:[]});I.useEffect(()=>{i&&(m(1),y({programName:n?.programName||"",status:n?.status||"Draft",description:n?.description||"",startDate:n?.startDate||"",endDate:n?.endDate||"",targetPersonas:Array.isArray(n?.targetPersonas)?n.targetPersonas:[],targetProducts:Array.isArray(n?.targetProducts)?n.targetProducts:[],tags:Array.isArray(n?.tags)?n.tags:[],eligibilityRules:n?.eligibilityRules||{customerProfileRules:[],bookingHistoryRules:[],currentTripContext:[],financialProductRules:[],activityEngagement:[],geographicLocation:[],externalDataRules:[]},conciergeGuidance:n?.conciergeGuidance||"",reportingTags:Array.isArray(n?.reportingTags)?n.reportingTags:[],benefits:Array.isArray(n?.benefits)?n.benefits:[]}))},[i,n]);const[g,j]=I.useState({name:"",description:"",type:"",value:"",redemptionMethod:"",maxRedemptions:"",supplier:"",deliveryLogic:"",redemptionWindowStart:"",redemptionWindowEnd:"",customerUsageLimit:"",inventory:"",costToBank:"",personaEligibilityOverride:"",visibleInUI:!1,title:"",productType:"",suppliers:[],deliveryMethods:[]}),[S,A]=I.useState(!1),O=["Basic Program Info","Targeting & Eligibility","Benefits & Rewards","Review & Launch"],D=["Set up the basic information for your reward program.","Define who can participate and under what conditions.","Configure the rewards and benefits for your program.","Review all settings and launch your program."],H=O.length,U=["Business Travelers","Leisure Travelers","Frequent Flyers","Luxury Travelers","Budget Travelers","Family Travelers","Solo Travelers","Group Travelers"],q=["Flights","Hotels","Car Rentals","Vacation Packages","Travel Insurance","Airport Transfers","Lounge Access","Priority Services"],[Y,P]=I.useState(!1),[Q,se]=I.useState(""),z={customerProfileRules:[{id:"membershipTier",label:"Membership tier",type:"select",options:["Silver","Gold","Platinum","Diamond"]},{id:"loyaltyEnrollment",label:"Loyalty program enrollment status",type:"select",options:["Enrolled","Not enrolled"]},{id:"personaGroup",label:"Persona group",type:"select",options:["Business Travelers","Leisure Travelers","Frequent Flyers","Luxury Travelers","Budget Travelers","Family Travelers","Solo Travelers","Group Travelers"]},{id:"ageGroup",label:"Age group",type:"select",options:["18-24","25-34","35-44","45-54","55-64","65+"]},{id:"country",label:"Country of residence / nationality",type:"text"},{id:"language",label:"Language preference",type:"select",options:["English","Spanish","French","German","Arabic","Chinese"]},{id:"pastSpend",label:"Past spend",type:"number",period:!0},{id:"totalBookings",label:"Total bookings made",type:"number",period:!0},{id:"customerValueScore",label:"Customer value score",type:"number"}],bookingHistoryRules:[{id:"historicalBookingTypes",label:"Booking type(s) purchased before",type:"select",options:["flights","hotels","tickets","car rentals","packages"]},{id:"bookingFrequency",label:"Frequency of bookings",type:"number",period:!0},{id:"avgSpendPerBooking",label:"Average spend per booking",type:"number"},{id:"destinationsPreviouslyBooked",label:"Destinations previously booked",type:"text"},{id:"tripPurposeHistory",label:"Trip purpose (historical)",type:"select",options:["business","leisure"]},{id:"preferredSuppliersHistory",label:"Preferred suppliers previously booked",type:"select",options:["BA","Emirates","Hilton","Marriott","IHG"]},{id:"daysSinceLastBooking",label:"Days since last booking",type:"number"}],currentTripContext:[{id:"currentBookingType",label:"Booking type in current trip",type:"select",options:["flight","hotel","car","package"]},{id:"currentSupplier",label:"Supplier in current booking",type:"select",options:["Emirates","BA","Qatar","Hilton","Marriott"]},{id:"currentBookingValue",label:"Booking value",type:"number"},{id:"currentDestination",label:"Destination(s)",type:"text"},{id:"tripDuration",label:"Trip duration (days)",type:"number"},{id:"dateProximity",label:"Departure/check-in date proximity (days)",type:"number"},{id:"numTravellers",label:"Number of travellers in booking",type:"number"},{id:"cabinOrRoomType",label:"Cabin/class or room type",type:"select",options:["Economy","Premium Economy","Business","First","Standard Room","Suite"]}],financialProductRules:[{id:"cardTypeUsed",label:"Credit/debit card type used",type:"select",options:["Visa Platinum","Visa Gold","Mastercard World Elite","Amex Platinum"]},{id:"cardSpendThreshold",label:"Card spend thresholds reached",type:"number",period:!0},{id:"cardOfferCampaign",label:"Card offer campaign enrolled",type:"text"},{id:"linkedAccounts",label:"Linked accounts present",type:"select",options:["yes","no"]}],activityEngagement:[{id:"mobileAppEngagement",label:"Mobile app engagement (last login within X days)",type:"number",period:!0},{id:"websiteEngagement",label:"Website engagement",type:"number",period:!0},{id:"campaignInteractions",label:"Campaign interactions",type:"select",options:["clicked previous offers","redeemed before","opened emails"]},{id:"conciergeInteractions",label:"Concierge interactions",type:"select",options:["yes","no"]},{id:"incompleteBookings",label:"Incomplete bookings / abandoned carts",type:"select",options:["yes","no"]}],geographicLocation:[{id:"currentLiveLocation",label:"Current live location",type:"text"},{id:"departureAirport",label:"Departure airport",type:"text"},{id:"homeAirport",label:"Home airport",type:"text"},{id:"regionOrCity",label:"Region or city of residence",type:"text"},{id:"withinGeoFence",label:"Within geo-fence of partner location",type:"select",options:["yes","no"]}],externalDataRules:[{id:"crmFlags",label:"CRM flags",type:"select",options:["VIP","HNW","at-risk customer"]},{id:"apiEligibilityFlag",label:"API-fed eligibility flag",type:"select",options:["eligible=yes","eligible=no"]},{id:"corporateContractStatus",label:"Corporate contract status",type:"select",options:["yes","no"]}]},M=[{value:">",label:"Greater than"},{value:"<",label:"Less than"},{value:"=",label:"Equals"},{value:"contains",label:"Contains"},{value:"in list",label:"In list"},{value:"not in list",label:"Not in list"},{value:"between",label:"Between"}],w=[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"6m",label:"Last 6 months"},{value:"12m",label:"Last 12 months"},{value:"lifetime",label:"Lifetime"}],b=["Points","Cash Back","Discount","Free Service","Upgrade","Early Access","Exclusive Offer","Gift Card"],E=["Automatic","Manual Approval","Customer Request","Scheduled","Trigger-based"],k=[{id:"market-1",title:"2x Lounge Passes",type:"Lounge Access",supplier:"DragonPass",description:"Two complimentary lounge passes for the traveler",value:"2 passes",redemptionMethod:"Automatic",costToBank:45},{id:"market-2",title:"Airport Fast Track",type:"Fast Track",supplier:"Partner A",description:"Priority security lane access at select airports",value:"1 pass",redemptionMethod:"Automatic",costToBank:25},{id:"market-3",title:"Priority Boarding",type:"Priority Service",supplier:"Airline A",description:"Access to priority boarding lane",value:"1 boarding",redemptionMethod:"Automatic",costToBank:15},{id:"market-4",title:"Seat Upgrade",type:"Upgrade",supplier:"Airline B",description:"Complimentary seat upgrade where available",value:"1 upgrade",redemptionMethod:"Manual Approval",costToBank:120},{id:"market-5",title:"Hotel Room Upgrade",type:"Upgrade",supplier:"Hotel Chain A",description:"Room upgrade at check-in subject to availability",value:"1 upgrade",redemptionMethod:"Manual Approval",costToBank:85},{id:"market-6",title:"Free Checked Bag",type:"Baggage",supplier:"Airline C",description:"One complimentary checked bag",value:"1 bag",redemptionMethod:"Automatic",costToBank:35},{id:"market-7",title:"Extra Carry-on",type:"Baggage",supplier:"Airline C",description:"One additional cabin bag allowance",value:"1 item",redemptionMethod:"Automatic",costToBank:20},{id:"market-8",title:"Travel Insurance Discount",type:"Discount",supplier:"InsureCo",description:"10% off comprehensive travel insurance",value:"10% off",redemptionMethod:"Customer Request",costToBank:8},{id:"market-9",title:"Spa Access Voucher",type:"Wellness",supplier:"Hotel Chain B",description:"Spa access day pass",value:"1 pass",redemptionMethod:"Manual Approval",costToBank:65},{id:"market-10",title:"Airport Transfer Credit",type:"Transport",supplier:"RideCo",description:"Credit towards airport transfer",value:"$20",redemptionMethod:"Automatic",costToBank:20},{id:"market-11",title:"Ride-hailing Credit",type:"Transport",supplier:"RideCo",description:"Credit on partner ride-hailing",value:"$15",redemptionMethod:"Automatic",costToBank:15},{id:"market-12",title:"Coffee Voucher",type:"Food & Beverage",supplier:"Cafe Partner",description:"Complimentary coffee at airport cafe",value:"1 drink",redemptionMethod:"Automatic",costToBank:6},{id:"market-13",title:"WiFi Voucher",type:"Connectivity",supplier:"Airport WiFi",description:"Premium WiFi access in airport",value:"1 session",redemptionMethod:"Automatic",costToBank:12},{id:"market-14",title:"Dutyfree Discount",type:"Discount",supplier:"Dutyfree",description:"10% off dutyfree purchases",value:"10% off",redemptionMethod:"Automatic",costToBank:5},{id:"market-15",title:"Lounge Guest Pass +1",type:"Lounge Access",supplier:"DragonPass",description:"Guest pass for lounge access",value:"+1 guest",redemptionMethod:"Automatic",costToBank:25},{id:"market-16",title:"Meal Voucher",type:"Food & Beverage",supplier:"Food Partner",description:"Airport meal voucher",value:"$10",redemptionMethod:"Automatic",costToBank:10},{id:"market-17",title:"eSIM Data Pack",type:"Connectivity",supplier:"eSIM Partner",description:"International data pack",value:"5GB",redemptionMethod:"Automatic",costToBank:18},{id:"market-18",title:"Taxi Voucher",type:"Transport",supplier:"Taxi Partner",description:"Voucher for taxi from airport",value:"$25",redemptionMethod:"Automatic",costToBank:25},{id:"market-19",title:"Late Checkout",type:"Hotel",supplier:"Hotel Chain B",description:"Late checkout benefit where available",value:"2 hours",redemptionMethod:"Manual Approval",costToBank:15},{id:"market-20",title:"Early Checkin",type:"Hotel",supplier:"Hotel Chain B",description:"Early checkin where available",value:"2 hours",redemptionMethod:"Manual Approval",costToBank:15},{id:"market-21",title:"Golf Green Fee Discount",type:"Leisure",supplier:"Golf Partner",description:"Discount on golf green fees",value:"15% off",redemptionMethod:"Customer Request",costToBank:12},{id:"market-22",title:"Concierge Access",type:"Service",supplier:"ConciergeCo",description:"Priority concierge assistance",value:"Priority",redemptionMethod:"Automatic",costToBank:30},{id:"market-23",title:"Cashback on Travel",type:"Cash Back",supplier:"Bank",description:"Cashback on eligible travel purchases",value:"2%",redemptionMethod:"Automatic",costToBank:22},{id:"market-24",title:"Bonus Points",type:"Points",supplier:"Bank",description:"Bonus loyalty points on booking",value:"1,000 pts",redemptionMethod:"Automatic",costToBank:18}],V=()=>f.benefits.reduce((oe,R)=>{let pe=R.costToBank;return pe||(pe=T(R)),oe+pe},0),T=oe=>({"Lounge Access":25,"Fast Track":25,"Priority Service":15,Upgrade:100,Baggage:30,Discount:10,Wellness:50,Transport:20,"Food & Beverage":8,Connectivity:15,Leisure:15,Service:25,"Cash Back":20,Points:15})[oe.type]||20,ie=()=>{const oe=V(),R=f.benefits.length;let pe=[];return oe>200?pe.push({type:"warning",message:"Bundle cost is high. Consider removing premium benefits or negotiating supplier rates.",action:"Review and optimize"}):oe>150?pe.push({type:"info",message:"Bundle is in premium range. Good value for high-tier customers.",action:"Consider tiered pricing"}):oe>100?pe.push({type:"success",message:"Bundle cost is well-balanced. Good mix of value and affordability.",action:"Ready for launch"}):oe>50?pe.push({type:"info",message:"Bundle is cost-effective. Consider adding one premium benefit for differentiation.",action:"Add premium benefit"}):pe.push({type:"warning",message:"Bundle cost is very low. May not provide enough perceived value.",action:"Add more benefits"}),R<3?pe.push({type:"info",message:"Bundle has few benefits. Consider adding 2-3 more for better customer appeal.",action:"Expand benefit selection"}):R>8&&pe.push({type:"warning",message:"Bundle has many benefits. Consider grouping into tiers for easier management.",action:"Create benefit tiers"}),[...new Set(f.benefits.map(Ne=>Ne.type))].length<3&&pe.push({type:"info",message:"Limited benefit variety. Mix different categories for broader appeal.",action:"Diversify benefit types"}),pe},be=oe=>{const{name:R,value:pe}=oe.target;y(De=>({...De,[R]:pe}))},J=(oe,R)=>{y(pe=>({...pe,[oe]:R}))},fe=(oe,R)=>{j(pe=>({...pe,[oe]:R}))},Ee=(oe,R)=>{const pe={id:Date.now().toString(),type:R||z[oe][0],operator:M[0].value,value:"",secondValue:"",period:""};y(De=>({...De,eligibilityRules:{...De.eligibilityRules,[oe]:[...De.eligibilityRules[oe],pe]}}))},_e=(oe,R,pe,De)=>{y(Ne=>({...Ne,eligibilityRules:{...Ne.eligibilityRules,[oe]:Ne.eligibilityRules[oe].map(Se=>Se.id===R?{...Se,[pe]:De}:Se)}}))},F=(oe,R)=>{y(pe=>({...pe,eligibilityRules:{...pe.eligibilityRules,[oe]:pe.eligibilityRules[oe].filter(De=>De.id!==R)}}))},de=(oe,R)=>z[oe]?.find(pe=>pe.id===R)||null,Te=(oe=!1)=>{const R=g.name||g.title||"",pe=!!g.type,De=!!g.productType;if(R&&pe&&De){const Ne={id:Date.now(),name:g.name||g.title||R,title:g.title||g.name||R,description:g.description||g.deliveryLogic||"",type:g.type,supplier:g.supplier||"",suppliers:Array.isArray(g.suppliers)?g.suppliers:[],productType:g.productType,redemptionMethod:g.redemptionMethod||"",maxRedemptions:g.maxRedemptions||g.customerUsageLimit||"",value:g.value||"",deliveryLogic:Array.isArray(g.deliveryMethods)&&g.deliveryMethods[0]||g.deliveryLogic||"",deliveryMethods:Array.isArray(g.deliveryMethods)?g.deliveryMethods:[],redemptionWindowStart:g.redemptionWindowStart||"",redemptionWindowEnd:g.redemptionWindowEnd||"",customerUsageLimit:g.customerUsageLimit||"",inventory:g.inventory||"",costToBank:g.costToBank||T({type:g.type}),personaEligibilityOverride:g.personaEligibilityOverride||"",visibleInUI:!!g.visibleInUI};y(Se=>({...Se,benefits:[...Se.benefits,Ne]})),j({name:"",description:"",type:"",value:"",redemptionMethod:"",maxRedemptions:"",supplier:"",deliveryLogic:"",redemptionWindowStart:"",redemptionWindowEnd:"",customerUsageLimit:"",inventory:"",costToBank:"",personaEligibilityOverride:"",visibleInUI:!1,title:"",productType:"",suppliers:[],deliveryMethods:[]}),oe||A(!1)}},G=oe=>{const R={id:Date.now(),title:oe.title,name:oe.title,description:oe.description||"",type:oe.type||"",supplier:oe.supplier||"",redemptionMethod:oe.redemptionMethod||"",value:oe.value||"",maxRedemptions:oe.maxRedemptions||"",visibleInUI:!0,costToBank:oe.costToBank||T({type:oe.type})};y(pe=>({...pe,benefits:[...pe.benefits,R]}))},B=oe=>{y(R=>({...R,benefits:R.benefits.filter(pe=>pe.id!==oe)}))},ue=()=>{d<H&&m(d+1)},me=()=>{d>1&&m(d-1)},we=()=>{typeof l=="function"&&l(f),t()},K=()=>{switch(d){case 1:return e.jsx(t1,{formData:f,handleInputChange:be,showTagSuggestions:Y,setShowTagSuggestions:P,tagInputValue:Q,setTagInputValue:se});case 2:return e.jsx(s1,{formData:f,handleInputChange:J,addEligibilityRule:Ee,updateEligibilityRule:_e,removeEligibilityRule:F,getRuleTypeById:de,eligibilityRuleOptions:z,comparisonOperators:M,timePeriods:w,targetPersonas:f.targetPersonas,targetProducts:f.targetProducts});case 3:return e.jsx(a1,{formData:f,handleInputChange:be,handleBenefitInputChange:fe,addBenefit:Te,removeBenefit:B,currentBenefit:g,setCurrentBenefit:j,showBenefitForm:S,setShowBenefitForm:A,benefitTypes:b,redemptionMethods:E,benefitsCatalog:k,addBenefitFromMarketplace:G});case 4:return e.jsx(n1,{formData:f,personaOptions:U,productOptions:q,eligibilityRuleOptions:z,comparisonOperators:M,timePeriods:w,getRuleTypeById:de});default:return null}},ye=()=>{const oe=V(),R=f.benefits.length,pe=ie();return e.jsx("div",{className:"cost-analysis compact",children:e.jsx("div",{className:"cost-summary",children:e.jsxs("div",{className:"cost-metrics-inline",children:[e.jsxs("div",{className:"cost-metric-inline",children:[e.jsx("span",{className:"metric-label-inline",children:"Cost per Customer:"}),e.jsxs("span",{className:"metric-value-inline",children:["$",oe]})]}),e.jsxs("div",{className:"cost-metric-inline",children:[e.jsx("span",{className:"metric-label-inline",children:"Benefits:"}),e.jsx("span",{className:"metric-value-inline",children:R})]}),e.jsx("div",{className:"cost-metric-inline",children:e.jsxs("div",{className:"info-tooltip",children:[e.jsx("span",{className:"tooltip-icon",children:""}),e.jsx("div",{className:"tooltip-content",children:pe.map((De,Ne)=>e.jsxs("div",{className:`tooltip-suggestion ${De.type}`,children:[e.jsxs("div",{className:"tooltip-icon-small",children:[De.type==="warning"&&"",De.type==="info"&&"",De.type==="success"&&""]}),e.jsx("span",{children:De.message})]},Ne))})]})})]})})})};return i?e.jsxs("div",{className:"reward-form-page",children:[e.jsxs("div",{className:"form-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Create Reward Program"}),e.jsx("p",{children:"Set up a new reward program for your customers"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"btn secondary",onClick:t,children:"Cancel"})})]}),e.jsx("div",{className:"form-progress",children:O.map((oe,R)=>e.jsxs("div",{className:`progress-step ${d>R+1?"completed":d===R+1?"active":""}`,children:[e.jsx("div",{className:"step-number",children:R+1}),e.jsxs("div",{className:"step-info",children:[e.jsx("div",{className:"step-title",children:oe}),e.jsx("div",{className:"step-description",children:D[R]})]})]},R))}),e.jsx("div",{className:"form-content",children:K()}),e.jsxs("div",{className:"form-footer",children:[e.jsx("div",{className:"footer-left",children:d>1&&e.jsx("button",{className:"btn secondary",onClick:me,children:"Previous"})}),e.jsx("div",{className:"footer-center",children:d===3&&e.jsx(ye,{})}),e.jsx("div",{className:"footer-right",children:d<H?e.jsx("button",{className:"btn primary",onClick:ue,children:"Next"}):e.jsx("button",{className:"btn primary",onClick:we,children:c||"Save Draft"})})]})]}):null}function Tx({programs:i=[],onCreateTest:t,onClose:n,editingTest:l=null,onSaveEdit:c}){const[d,m]=I.useState(""),[f,y]=I.useState(""),[g,j]=I.useState({benefits:[]}),[S,A]=I.useState({benefits:[]}),O=!!(l&&l.id),D=I.useMemo(()=>i.find(T=>T.id===d)||null,[i,d]),H=I.useMemo(()=>[{id:"market-1",title:"2x Lounge Passes",type:"Lounge Access"},{id:"market-2",title:"Airport Fast Track",type:"Fast Track"},{id:"market-3",title:"Priority Boarding",type:"Priority Service"},{id:"market-4",title:"Seat Upgrade",type:"Upgrade"},{id:"market-5",title:"Hotel Room Upgrade",type:"Upgrade"},{id:"market-6",title:"Free Checked Bag",type:"Baggage"},{id:"market-8",title:"Travel Insurance Discount",type:"Discount"},{id:"market-12",title:"Coffee Voucher",type:"Food & Beverage"},{id:"market-15",title:"Lounge Guest Pass +1",type:"Lounge Access"},{id:"market-16",title:"Meal Voucher",type:"Food & Beverage"},{id:"market-17",title:"eSIM Data Pack",type:"Connectivity"},{id:"market-18",title:"Taxi Voucher",type:"Transport"}],[]),U=I.useMemo(()=>{const T=(D?.benefits||[]).map(be=>({id:be.id,title:be.title||be.name,type:be.type||""})),ie=new Map;return[...T,...H].forEach(be=>{const J=(be.title||"").toLowerCase();J&&(ie.has(J)||ie.set(J,be))}),Array.from(ie.values())},[D,H]);I.useEffect(()=>{if(O){m(l.programId),y(l.name||"");const T=(l.variants?.A?.benefits||[]).map(be=>({id:be.id,title:be.title,type:be.type||"",quantity:be.quantity||1,perScope:be.perScope||"user",perPeriod:be.perPeriod||"year"})),ie=(l.variants?.B?.benefits||[]).map(be=>({id:be.id,title:be.title,type:be.type||"",quantity:be.quantity||1,perScope:be.perScope||"user",perPeriod:be.perPeriod||"year"}));j({benefits:T}),A({benefits:ie})}},[O,l]),I.useEffect(()=>{if(O)return;const T=(D?.benefits||[]).map(ie=>({id:ie.id,title:ie.title||ie.name,type:ie.type||"",quantity:1,perScope:"user",perPeriod:"year"}));j({benefits:T}),A({benefits:T})},[D,O]);const q=["Entitlement","Discount","Cashback / Rebate","Points / Miles Redemption","Voucher / Promo Code","Upgrade","Freebie / Complimentary Item","Bundle / Package Inclusion","Access Pass","Credit for Future Use"],Y=["user","account","booking","trip","itinerary"],P=["day","week","month","quarter","year","lifetime"],Q=(T,ie)=>{T(be=>{if(be.benefits.some(Ee=>Ee.id===ie))return be;const fe=U.find(Ee=>Ee.id===ie);return fe?{...be,benefits:[...be.benefits,{id:fe.id,title:fe.title,type:fe.type,quantity:1,perScope:"user",perPeriod:"year"}]}:be})},se=(T,ie,be)=>{T(J=>({...J,benefits:J.benefits.map(fe=>fe.id===ie?{...fe,...be}:fe)}))},z=(T,ie)=>{T(be=>({...be,benefits:be.benefits.filter(J=>J.id!==ie)}))},M=()=>{if(!D)return;const T=f||`A/B Test for ${D.name}`,ie={id:O?l.id:`ab-${Date.now()}`,programId:D.id,programName:D.name,name:T,status:O?l.status:"active",variants:{A:{benefits:g.benefits},B:{benefits:S.benefits}},performance:O?l.performance||{A:{redemptions:0,revenue:"0"},B:{redemptions:0,revenue:"0"}}:{A:{redemptions:0,revenue:"0"},B:{redemptions:0,revenue:"0"}}};O&&typeof c=="function"?c(ie):t?.(ie),n?.()},w=I.useMemo(()=>new Set((D?.benefits||[]).map(T=>(T.title||T.name||"").toLowerCase())),[D]),b=T=>w.has((T.title||"").toLowerCase()),E=(T,ie)=>T.find(be=>be.id===ie)?.quantity||0,k=(T,ie)=>{if(!T&&!ie)return"";if(ie==="lifetime")return"lifetime";const be=T?`per ${T}`:"",J=ie?` per ${ie}`:"";return`${be}${J}`.trim()},V={fontSize:12,color:"var(--brand-footer-light)",marginBottom:4,display:"block"};return e.jsx("div",{className:"modal-overlay fullscreen",onClick:n,children:e.jsxs("div",{className:"modal-card fullscreen",onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{className:"form-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:O?"Edit A/B Test":"Create A/B Test"}),e.jsx("p",{children:O?"Adjust variants for this A/B test":"Configure variants for a selected reward program"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"btn secondary",onClick:n,children:"Cancel"})})]}),e.jsxs("div",{className:"form-content",style:{padding:20},children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Select Program"}),e.jsxs("select",{className:"form-input enhanced",value:d,onChange:T=>m(T.target.value),disabled:O,children:[e.jsx("option",{value:"",children:"Choose a program..."}),i.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Test Name"}),e.jsx("input",{className:"form-input",placeholder:"Optional test name",value:f,onChange:T=>y(T.target.value)})]})]}),!!D&&e.jsx("div",{className:"abtest-variants",style:{marginTop:12},children:e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",style:{border:"1px solid var(--brand-card-border)",borderRadius:12,padding:16},children:[e.jsx("div",{className:"step-header",children:e.jsx("h3",{children:"Variant A"})}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Benefits (select and adjust quantity/type)"}),e.jsx("div",{className:"checkbox-grid",children:U.map(T=>{const ie=g.benefits.some(be=>be.id===T.id);return e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:ie,onChange:be=>{be.target.checked?Q(j,T.id):z(j,T.id)}}),e.jsx("span",{children:T.title}),b(T)&&e.jsx("span",{className:"chip chip-outline",style:{marginLeft:8},children:"Current"})]},T.id)})}),g.benefits.length>0&&e.jsx("div",{className:"benefits-list compact",style:{marginTop:8},children:g.benefits.map(T=>{const ie=T.quantity||1,be=E(S.benefits,T.id)||0,J=T.perScope||"user",fe=T.perPeriod||"year",Ee=k(J,fe);return e.jsxs("div",{className:"benefit-item",children:[e.jsxs("div",{className:"benefit-info",children:[e.jsx("h5",{children:T.title}),e.jsxs("p",{children:[ie,"x ",T.type||"Benefit",Ee?`  ${Ee}`:""]})]}),e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-start"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx("span",{style:V,children:"A vs B"}),e.jsxs("span",{className:"chip chip-outline",title:"A vs B",children:[ie," vs ",be]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:V,children:"Qty"}),e.jsx("input",{type:"number",min:"1",className:"form-input small enhanced",value:ie,onChange:_e=>se(j,T.id,{quantity:Math.max(1,Number(_e.target.value)||1)}),placeholder:"Qty",style:{width:80}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:V,children:"Method"}),e.jsxs("select",{className:"form-input small enhanced",value:T.type||"",onChange:_e=>se(j,T.id,{type:_e.target.value}),style:{width:180},children:[e.jsx("option",{value:"",children:"Select type"}),q.map(_e=>e.jsx("option",{value:_e,children:_e},_e))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:V,children:"Scope"}),e.jsx("select",{className:"form-input small enhanced",value:J,onChange:_e=>se(j,T.id,{perScope:_e.target.value}),style:{width:140},children:Y.map(_e=>e.jsx("option",{value:_e,children:`per ${_e}`},_e))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:V,children:"Period"}),e.jsx("select",{className:"form-input small enhanced",value:fe,onChange:_e=>se(j,T.id,{perPeriod:_e.target.value}),style:{width:140},children:P.map(_e=>e.jsx("option",{value:_e,children:_e==="lifetime"?"lifetime":`per ${_e}`},_e))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{...V,visibility:"hidden"},children:"Remove"}),e.jsx("button",{className:"remove-benefit-btn",onClick:()=>z(j,T.id),children:""})]})]})]},T.id)})})]})]}),e.jsxs("div",{className:"form-group full-width",style:{border:"1px solid var(--brand-card-border)",borderRadius:12,padding:16},children:[e.jsx("div",{className:"step-header",children:e.jsx("h3",{children:"Variant B"})}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Benefits (select and adjust quantity/type)"}),e.jsx("div",{className:"checkbox-grid",children:U.map(T=>{const ie=S.benefits.some(be=>be.id===T.id);return e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:ie,onChange:be=>{be.target.checked?Q(A,T.id):z(A,T.id)}}),e.jsx("span",{children:T.title}),b(T)&&e.jsx("span",{className:"chip chip-outline",style:{marginLeft:8},children:"Current"})]},T.id)})}),S.benefits.length>0&&e.jsx("div",{className:"benefits-list compact",style:{marginTop:8},children:S.benefits.map(T=>{const ie=T.quantity||1,be=E(g.benefits,T.id)||0,J=T.perScope||"user",fe=T.perPeriod||"year",Ee=k(J,fe);return e.jsxs("div",{className:"benefit-item",children:[e.jsxs("div",{className:"benefit-info",children:[e.jsx("h5",{children:T.title}),e.jsxs("p",{children:[ie,"x ",T.type||"Benefit",Ee?`  ${Ee}`:""]})]}),e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-start"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx("span",{style:V,children:"A vs B"}),e.jsxs("span",{className:"chip chip-outline",title:"A vs B",children:[be," vs ",ie]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:V,children:"Qty"}),e.jsx("input",{type:"number",min:"1",className:"form-input small enhanced",value:ie,onChange:_e=>se(A,T.id,{quantity:Math.max(1,Number(_e.target.value)||1)}),placeholder:"Qty",style:{width:80}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:V,children:"Method"}),e.jsxs("select",{className:"form-input small enhanced",value:T.type||"",onChange:_e=>se(A,T.id,{type:_e.target.value}),style:{width:180},children:[e.jsx("option",{value:"",children:"Select type"}),q.map(_e=>e.jsx("option",{value:_e,children:_e},_e))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:V,children:"Scope"}),e.jsx("select",{className:"form-input small enhanced",value:J,onChange:_e=>se(A,T.id,{perScope:_e.target.value}),style:{width:140},children:Y.map(_e=>e.jsx("option",{value:_e,children:`per ${_e}`},_e))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:V,children:"Period"}),e.jsx("select",{className:"form-input small enhanced",value:fe,onChange:_e=>se(A,T.id,{perPeriod:_e.target.value}),style:{width:140},children:P.map(_e=>e.jsx("option",{value:_e,children:_e==="lifetime"?"lifetime":`per ${_e}`},_e))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{...V,visibility:"hidden"},children:"Remove"}),e.jsx("button",{className:"remove-benefit-btn",onClick:()=>z(A,T.id),children:""})]})]})]},T.id)})})]})]})]})})]}),e.jsxs("div",{className:"form-footer",children:[e.jsx("div",{className:"footer-left"}),e.jsxs("div",{className:"footer-right",children:[e.jsx("button",{className:"btn secondary",onClick:n,children:"Cancel"}),e.jsx("button",{className:"btn primary",disabled:!d,onClick:M,children:O?"Save Changes":"Launch A/B Test"})]})]})]})})}function r1(){const[i,t]=I.useState("manage"),[n,l]=I.useState([]),[c,d]=I.useState(!1),[m,f]=I.useState(!1),[y,g]=I.useState(!1),[j,S]=I.useState(new Set),[A,O]=I.useState(null),[D,H]=I.useState(null),[U,q]=I.useState(!1),[Y,P]=I.useState([]),[Q,se]=I.useState(null),[z,M]=I.useState(new Set);I.useEffect(()=>{l([{id:"rp-1",name:"Gold Card Rewards",description:"Premium rewards for Gold card holders",targetPersonas:["Gold Card Holders"],linkedProducts:["Gold Credit Card"],status:"active",startDate:"2024-01-01",endDate:"2024-12-31",benefits:[{id:"ben-1",title:"4 Free Lounge Passes",type:"Entitlement"},{id:"ben-2",title:"2x Points on Travel",type:"Points / Miles Redemption"}],performance:{totalRedemptions:12470,activeUsers:3120,revenueGenerated:"267,000",conversionRate:"7.1%"}},{id:"rp-2",name:"Platinum Elite Benefits",description:"Exclusive benefits for Platinum Elite members",targetPersonas:["Platinum Elite"],linkedProducts:["Platinum Card"],status:"active",startDate:"2024-01-01",endDate:"2024-12-31",benefits:[{id:"ben-3",title:"Unlimited Lounge Access",type:"Access Pass"},{id:"ben-4",title:"Priority Boarding",type:"Access Pass"},{id:"ben-5",title:"Hotel Room Upgrade",type:"Upgrade"}],performance:{totalRedemptions:8920,activeUsers:2670,revenueGenerated:"445,000",conversionRate:"8.3%"}}]),P([{id:"ab-1",programId:"rp-1",programName:"Gold Card Rewards",name:"Lounge Pass Quantity Test",status:"active",variants:{A:{benefits:[{id:"ben-1",title:"4 Free Lounge Passes",type:"Entitlement",quantity:4,perScope:"user",perPeriod:"year"}]},B:{benefits:[{id:"ben-1",title:"4 Free Lounge Passes",type:"Entitlement",quantity:1,perScope:"user",perPeriod:"year"}]}},performance:{A:{redemptions:320,revenue:"28,800"},B:{redemptions:170,revenue:"14,450"}}},{id:"ab-2",programId:"rp-1",programName:"Gold Card Rewards",name:"Points vs Cashback",status:"paused",variants:{A:{benefits:[{id:"ben-2",title:"2x Points on Travel",type:"Points / Miles Redemption",quantity:2,perScope:"booking",perPeriod:"trip"}]},B:{benefits:[{id:"mk-cash-1",title:"10 Cashback",type:"Cashback / Rebate",quantity:1,perScope:"booking",perPeriod:"trip"}]}},performance:{A:{redemptions:210,revenue:"9,600"},B:{redemptions:240,revenue:"11,200"}}},{id:"ab-3",programId:"rp-2",programName:"Platinum Elite Benefits",name:"Access Pass vs Upgrade",status:"active",variants:{A:{benefits:[{id:"ben-3",title:"Unlimited Lounge Access",type:"Access Pass",quantity:1,perScope:"user",perPeriod:"year"}]},B:{benefits:[{id:"mk-upg-1",title:"Hotel Room Upgrade",type:"Upgrade",quantity:1,perScope:"booking",perPeriod:"trip"}]}},performance:{A:{redemptions:95,revenue:"7,800"},B:{redemptions:120,revenue:"9,900"}}}])},[]);const w=K=>{switch(K){case"active":return"#10b981";case"paused":return"#f59e0b";case"expired":return"#ef4444";case"draft":return"#6b7280";default:return"#6b7280"}},b=K=>e.jsx("span",{className:"status-badge",style:{backgroundColor:`${w(K)}20`,color:w(K),border:`1px solid ${w(K)}`},children:K.charAt(0).toUpperCase()+K.slice(1)}),E=K=>Y.filter(ye=>ye.programId===K),k=K=>{const ye=new Set(j);ye.has(K)?ye.delete(K):ye.add(K),S(ye)},V=K=>{const ye=new Set(z);ye.has(K)?ye.delete(K):ye.add(K),M(ye)},T=K=>{const ye=R=>Array.isArray(R)?R:R?[R]:[],oe={programName:K.programName||K.name||"",description:K.description||"",targetPersonas:K.targetPersonas||K.personas||[],targetProducts:K.linkedProducts||K.products||K.targetProducts||[],eligibilityRules:K.eligibilityRules||{},geography:K.geography||void 0,startDate:K.startDate||"",endDate:K.endDate||"",status:K.status||"draft",reportingTags:K.reportingTags||K.tags||[],benefits:ye(K.benefits).map(R=>({id:R.id||Date.now()+Math.random(),title:R.title||R.name||"",name:R.name||R.title||"",type:R.type||"",supplier:R.supplier||"",redemptionMethod:R.redemptionMethod||"",deliveryLogic:R.deliveryLogic||"",redemptionWindowStart:R.redemptionWindowStart||R.startDate||"",redemptionWindowEnd:R.redemptionWindowEnd||R.endDate||"",customerUsageLimit:R.customerUsageLimit||R.maxRedemptions||"",inventory:R.inventory||"",costToBank:R.costToBank||"",visibleInUI:!!R.visibleInUI}))};return oe.status=String(oe.status).toLowerCase(),oe},ie=K=>!!(!K.programName||!K.description||!Array.isArray(K.targetPersonas)||K.targetPersonas.length===0||!Array.isArray(K.targetProducts)||K.targetProducts.length===0||!K.status||!Array.isArray(K.benefits)||K.benefits.length===0||K.benefits.some(oe=>!oe.title||!oe.type||!oe.supplier||!oe.redemptionMethod||!(oe.deliveryLogic||Array.isArray(oe.deliveryMethods)&&oe.deliveryMethods[0])||!oe.redemptionWindowStart||!oe.redemptionWindowEnd)),be=K=>({programName:K.name||"",description:K.description||"",targetPersonas:Array.isArray(K.targetPersonas)?K.targetPersonas:[],targetProducts:Array.isArray(K.linkedProducts)?K.linkedProducts:[],status:K.status||"draft",startDate:K.startDate||"",endDate:K.endDate||"",benefits:Array.isArray(K.benefits)?K.benefits:[],tags:[],reportingTags:[],eligibilityRules:{customerProfileRules:[],bookingHistoryRules:[],currentTripContext:[],financialProductRules:[],activityEngagement:[],geographicLocation:[],externalDataRules:[]}}),J=()=>{const[K,ye]=I.useState(""),[oe,R]=I.useState(""),[pe,De]=I.useState(null),Ne=ce=>{try{const le=JSON.parse(ce);De(le),R("")}catch{De(null),R("Invalid JSON")}},Se=ce=>{const le=ce.target.files?.[0];if(!le)return;const Ve=new FileReader;Ve.onload=nt=>{const ps=String(nt.target?.result||"");ye(ps),Ne(ps)},Ve.readAsText(le)},ee=I.useMemo(()=>pe?(Array.isArray(pe)?pe:[pe]).map(T):[],[pe]),Re=()=>{if(!ee.length)return;const ce=ee.find(ie);if(ce){O(ce),g(!1),f(!0);return}const le=ee.map(Ve=>({id:`rp-${Date.now()}-${Math.floor(Math.random()*1e4)}`,name:Ve.programName,description:Ve.description,targetPersonas:Ve.targetPersonas,linkedProducts:Ve.targetProducts,status:Ve.status,startDate:Ve.startDate,endDate:Ve.endDate,benefits:Ve.benefits,performance:{totalRedemptions:0,activeUsers:0,revenueGenerated:"0",conversionRate:"0%"}}));l(Ve=>[...Ve,...le]),g(!1)};return y?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Import Reward Programs"}),e.jsx("button",{className:"close-btn",onClick:()=>g(!1),children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"upload-row",children:e.jsx("input",{type:"file",accept:"application/json",onChange:Se})}),e.jsx("div",{className:"textarea-row",children:e.jsx("textarea",{className:"form-input",placeholder:"Paste JSON here (single program or array of programs)",rows:12,value:K,onChange:ce=>{ye(ce.target.value),Ne(ce.target.value)}})}),oe&&e.jsx("div",{className:"error-text",children:oe}),ee.length>0&&e.jsxs("div",{className:"preview-box",children:[e.jsx("div",{className:"preview-title",children:"Preview"}),e.jsx("div",{className:"preview-content",children:e.jsxs("div",{children:[ee.length," program(s) parsed"]})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx("button",{className:"btn primary",disabled:!ee.length||!!oe,onClick:Re,children:"Import"})]})]})}):null},fe=()=>e.jsxs("div",{className:"manage-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h2",{children:"Manage Reward Programs"}),e.jsxs("div",{className:"header-buttons",children:[e.jsx("button",{className:"btn secondary",onClick:()=>g(!0),children:"Import Programs"}),e.jsx("button",{className:"btn primary",onClick:()=>{H(null),O(null),f(!0)},children:"Create New Program"})]})]}),e.jsx("div",{className:"tab-subtitle",children:e.jsx("p",{children:"Create, import, and manage your reward programs and benefits"})}),e.jsxs("div",{className:"programs-overview",children:[e.jsxs("div",{className:"overview-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.length}),e.jsx("p",{children:"Total Programs"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.reduce((K,ye)=>K+ye.benefits.length,0)}),e.jsx("p",{children:"Active Benefits"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.reduce((K,ye)=>K+ye.performance.activeUsers,0)}),e.jsx("p",{children:"Active Users"})]})]})]}),e.jsxs("div",{className:"programs-list",children:[e.jsxs("div",{className:"list-header",children:[e.jsx("h3",{children:"Your Reward Programs"}),e.jsx("div",{className:"list-filters",children:e.jsxs("select",{className:"modern-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"expired",children:"Expired"})]})})]}),e.jsx("div",{className:"programs-grid",children:n.map(K=>{const ye=E(K.id);return e.jsxs("div",{className:`program-card ${j.has(K.id)?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"program-header",children:[e.jsxs("div",{className:"program-info",children:[e.jsx("h4",{children:K.name}),e.jsx("p",{children:K.description})]}),e.jsxs("div",{className:"program-meta",children:[e.jsx("div",{className:"program-status",children:b(K.status)}),ye.length>0&&e.jsxs("span",{className:"chip chip-outline",children:["Tests (",ye.length,")"]}),e.jsx("button",{className:"expand-btn",onClick:()=>k(K.id),children:j.has(K.id)?"":"+"})]})]}),j.has(K.id)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"program-details",children:[e.jsx("h4",{children:"Benefits"}),e.jsx("div",{className:"benefit-tiles",children:K.benefits.map(oe=>e.jsx("div",{className:"benefit-tile",children:e.jsxs("div",{className:"benefit-header",children:[e.jsx("div",{className:"benefit-title",children:oe.title}),e.jsx("span",{className:"chip chip-outline",children:oe.type})]})},oe.id))})]}),ye.length>0&&e.jsxs("div",{className:"tests-summary",style:{marginTop:12},children:[e.jsx("h4",{children:"Tests"}),e.jsx("div",{className:"benefit-tiles",children:ye.map(oe=>e.jsxs("div",{className:"benefit-tile",children:[e.jsxs("div",{className:"benefit-header",children:[e.jsx("div",{className:"benefit-title",children:oe.name}),e.jsx("span",{className:"chip chip-accent",children:oe.status})]}),e.jsxs("div",{className:"benefit-meta",children:[e.jsxs("span",{className:"meta-item",children:["A: ",e.jsx("strong",{children:oe.performance?.A?.redemptions??0})," redemptions  ",e.jsx("strong",{children:oe.performance?.A?.revenue??"0"})]}),e.jsxs("span",{className:"meta-item",children:["B: ",e.jsx("strong",{children:oe.performance?.B?.redemptions??0})," redemptions  ",e.jsx("strong",{children:oe.performance?.B?.revenue??"0"})]})]})]},oe.id))})]}),e.jsxs("div",{className:"program-performance",children:[e.jsxs("div",{className:"perf-metric",children:[e.jsx("span",{className:"perf-label",children:"Redemptions"}),e.jsx("span",{className:"perf-value",children:K.performance.totalRedemptions.toLocaleString()})]}),e.jsxs("div",{className:"perf-metric",children:[e.jsx("span",{className:"perf-label",children:"Revenue"}),e.jsx("span",{className:"perf-value",children:K.performance.revenueGenerated})]})]}),e.jsxs("div",{className:"program-actions",children:[e.jsx("button",{className:"action-btn secondary",onClick:()=>{H(K.id),O(be(K)),f(!0)},children:"Edit"}),K.status==="draft"?e.jsx("button",{className:"action-btn primary",onClick:()=>l(oe=>oe.map(R=>R.id===K.id?{...R,status:"active"}:R)),children:"Launch"}):e.jsx("button",{className:"action-btn secondary",onClick:()=>{H(K.id),O(be(K)),f(!0)},children:"View Details"})]})]}):e.jsxs("div",{className:"program-summary",children:[e.jsxs("div",{className:"summary-stats",children:[e.jsxs("div",{className:"summary-stat",children:[e.jsx("span",{className:"stat-label",children:"Target:"}),e.jsx("span",{className:"stat-value",children:K.targetPersonas.join(", ")})]}),e.jsxs("div",{className:"summary-stat",children:[e.jsx("span",{className:"stat-label",children:"Benefits:"}),e.jsxs("span",{className:"stat-value",children:[K.benefits.length," benefits"]})]}),e.jsxs("div",{className:"summary-stat",children:[e.jsx("span",{className:"stat-label",children:"Revenue:"}),e.jsx("span",{className:"stat-value",children:K.performance.revenueGenerated})]})]}),e.jsxs("div",{className:"program-actions-compact",children:[e.jsx("button",{className:"action-btn secondary small",onClick:()=>{H(K.id),O(be(K)),f(!0)},children:"Edit"}),K.status==="draft"?e.jsx("button",{className:"action-btn primary small",onClick:()=>l(oe=>oe.map(R=>R.id===K.id?{...R,status:"active"}:R)),children:"Launch"}):e.jsx("button",{className:"action-btn primary small",onClick:()=>{H(K.id),O(be(K)),f(!0)},children:"View Details"})]})]})]},K.id)})})]})]})]}),Ee=K=>{const ye=K.performance?.A||{revenue:"0"},oe=K.performance?.B||{revenue:"0"},R=Number(String(ye.revenue).replace(/[^0-9.]/g,""))||0,pe=Number(String(oe.revenue).replace(/[^0-9.]/g,""))||0,De=R+pe;return De===0?"":`${((Math.max(R,pe)-Math.min(R,pe))/(De/2)*100).toFixed(1)}% diff`},_e=K=>P(ye=>ye.map(oe=>oe.id===K?{...oe,status:"paused"}:oe)),F=K=>P(ye=>ye.map(oe=>oe.id===K?{...oe,status:"active"}:oe)),de=K=>P(ye=>ye.filter(oe=>oe.id!==K)),Te=I.useMemo(()=>{const K=new Map;for(const ye of Y)K.has(ye.programId)||K.set(ye.programId,[]),K.get(ye.programId).push(ye);return K},[Y]),G=K=>{if(K.perPeriod==="lifetime")return"lifetime";const ye=K.perScope?`per ${K.perScope}`:"",oe=K.perPeriod?` per ${K.perPeriod}`:"";return`${ye}${oe}`.trim()},B=K=>{const ye=K.variants?.A?.benefits||[],oe=K.variants?.B?.benefits||[],R=new Map;for(const De of ye)R.set((De.title||"").toLowerCase(),{A:De});for(const De of oe){const Ne=(De.title||"").toLowerCase();R.set(Ne,{...R.get(Ne)||{},B:De})}const pe=[];for(const[De,Ne]of R.entries()){const Se=Ne.A,ee=Ne.B;if(Se&&ee){const Re=(Se.quantity||0)!==(ee.quantity||0),ce=(Se.type||"")!==(ee.type||""),le=(Se.perScope||"")!==(ee.perScope||"")||(Se.perPeriod||"")!==(ee.perPeriod||"");(Re||ce||le)&&pe.push(`${Se.title||ee.title}: ${Se.quantity||0}x ${Se.type||""} ${G(Se)} vs ${ee.quantity||0}x ${ee.type||""} ${G(ee)}`.trim())}else Se&&!ee?pe.push(`${Se.title}: A only (${Se.quantity||0}x ${Se.type||""} ${G(Se)})`):!Se&&ee&&pe.push(`${ee.title}: B only (${ee.quantity||0}x ${ee.type||""} ${G(ee)})`)}return pe},ue=K=>{const ye=(K?.benefits||[]).map(R=>`${R.quantity||1}x ${R.type||"Benefit"} ${G(R)}  ${R.title}`).slice(0,3),oe=Math.max(0,(K?.benefits||[]).length-ye.length);return{list:ye,more:oe}},me=()=>e.jsxs("div",{className:"test-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h2",{children:"A/B Testing"}),e.jsx("button",{className:"btn primary",onClick:()=>{se(null),q(!0)},children:"Create A/B Test"})]}),e.jsx("div",{className:"tab-subtitle",children:e.jsx("p",{children:"Test different reward program variations to optimize performance"})}),e.jsxs("div",{className:"ab-testing-overview",children:[Y.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h4",{children:"No A/B Tests Yet"}),e.jsx("p",{children:"Start testing different reward program variations to optimize performance and increase customer engagement."}),e.jsx("button",{className:"btn primary",onClick:()=>{se(null),q(!0)},children:"Create Your First Test"})]}),Y.length>0&&e.jsx("div",{className:"programs-list",children:[...Te.entries()].map(([K,ye])=>{const oe=n.find(R=>R.id===K);return e.jsxs("div",{className:"program-card expanded",style:{marginBottom:16},children:[e.jsx("div",{className:"program-header",children:e.jsxs("div",{className:"program-info",children:[e.jsx("h4",{children:oe?.name||"Program"}),e.jsx("p",{children:"Tests for this reward package"})]})}),e.jsx("div",{className:"benefit-tiles",children:ye.map(R=>{const pe=B(R),De=pe.slice(0,3),Ne=pe.length-De.length,Se=ue(R.variants?.A),ee=ue(R.variants?.B),Re=z.has(R.id);return e.jsxs("div",{className:`benefit-tile ${Re?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"benefit-header",children:[e.jsx("div",{className:"benefit-title",children:R.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:"chip chip-accent",children:R.status}),e.jsx("button",{className:"expand-btn",onClick:()=>V(R.id),children:Re?"":"+"})]})]}),e.jsxs("div",{className:"benefit-meta",children:[e.jsxs("span",{className:"meta-item",children:["A: ",e.jsx("strong",{children:R.performance?.A?.redemptions??0}),"  ",e.jsx("strong",{children:R.performance?.A?.revenue??"0"})]}),e.jsxs("span",{className:"meta-item",children:["B: ",e.jsx("strong",{children:R.performance?.B?.redemptions??0}),"  ",e.jsx("strong",{children:R.performance?.B?.revenue??"0"})]}),e.jsxs("span",{className:"meta-item",children:["Score: ",e.jsx("strong",{children:Ee(R)})]})]}),Re&&e.jsxs(e.Fragment,{children:[(Se.list.length>0||ee.list.length>0)&&e.jsxs("div",{className:"chips-group",style:{marginTop:8},children:[e.jsxs("div",{className:"chips-block",children:[e.jsx("div",{className:"chips-label",children:"Variant A"}),e.jsxs("div",{className:"chips",children:[Se.list.map((ce,le)=>e.jsx("span",{className:"chip chip-outline",children:ce},le)),Se.more>0&&e.jsxs("span",{className:"chip chip-muted",children:["+",Se.more," more"]})]})]}),e.jsxs("div",{className:"chips-block",children:[e.jsx("div",{className:"chips-label",children:"Variant B"}),e.jsxs("div",{className:"chips",children:[ee.list.map((ce,le)=>e.jsx("span",{className:"chip chip-outline",children:ce},le)),ee.more>0&&e.jsxs("span",{className:"chip chip-muted",children:["+",ee.more," more"]})]})]})]}),De.length>0&&e.jsxs("div",{className:"chips",style:{marginTop:6},children:[De.map((ce,le)=>e.jsx("span",{className:"chip chip-outline",children:ce},le)),Ne>0&&e.jsxs("span",{className:"chip chip-muted",children:["+",Ne," more"]})]})]}),e.jsxs("div",{className:"program-actions",style:{marginTop:8},children:[R.status==="active"?e.jsx("button",{className:"action-btn secondary",onClick:()=>_e(R.id),children:"Pause"}):e.jsx("button",{className:"action-btn secondary",onClick:()=>F(R.id),children:"Resume"}),e.jsx("button",{className:"action-btn secondary",onClick:()=>{se(R),q(!0)},children:"Edit"}),e.jsx("button",{className:"action-btn secondary",onClick:()=>de(R.id),children:"Delete"})]})]},R.id)})})]},K)})})]}),U&&e.jsx(Tx,{programs:n,editingTest:Q,onSaveEdit:K=>P(ye=>ye.map(oe=>oe.id===K.id?K:oe)),onCreateTest:K=>P(ye=>[...ye,K]),onClose:()=>{q(!1),se(null)}})]}),we=()=>e.jsxs("div",{className:"performance-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h2",{children:"Performance Analytics"}),e.jsxs("div",{className:"header-buttons",children:[e.jsx("button",{className:"btn secondary",children:"Export Data"}),e.jsx("button",{className:"btn primary",children:"Generate Report"})]})]}),e.jsx("div",{className:"tab-subtitle",children:e.jsx("p",{children:"Track and analyze the performance of your reward programs"})}),e.jsxs("div",{className:"performance-overview",children:[e.jsxs("div",{className:"overview-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"5,790"}),e.jsx("p",{children:"Active Users"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"21,390"}),e.jsx("p",{children:"Total Redemptions"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"7.7%"}),e.jsx("p",{children:"Avg. Conversion Rate"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"712,000"}),e.jsx("p",{children:"Total Revenue Generated"})]})]})]}),e.jsxs("div",{className:"top-performers",children:[e.jsx("h3",{children:"Top Performing Programs"}),e.jsx("div",{className:"performers-grid",children:n.map(K=>e.jsxs("div",{className:"performer-card",children:[e.jsxs("div",{className:"performer-header",children:[e.jsx("h4",{children:K.name}),b(K.status)]}),e.jsxs("div",{className:"performer-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Redemptions"}),e.jsx("span",{className:"metric-value",children:K.performance.totalRedemptions.toLocaleString()})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Conversion"}),e.jsx("span",{className:"metric-value",children:K.performance.conversionRate})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Revenue"}),e.jsx("span",{className:"metric-value",children:K.performance.revenueGenerated})]})]})]},K.id))})]})]})]});return e.jsxs("div",{className:"reward-orchestrator-page",children:[e.jsx("div",{className:"page-header",children:e.jsx("div",{className:"header-content",children:e.jsx("h1",{children:"Reward Orchestrator"})})}),e.jsx("div",{className:"page-subtitle",children:e.jsx("p",{children:"Define, manage, test, and track your reward offerings to maximize customer engagement and retention"})}),e.jsxs("div",{className:"tab-navigation",children:[e.jsxs("button",{className:`tab-btn ${i==="manage"?"active":""}`,onClick:()=>t("manage"),children:[e.jsx("span",{className:"tab-icon",children:""}),e.jsx("span",{className:"tab-text",children:"Manage"})]}),e.jsxs("button",{className:`tab-btn ${i==="test"?"active":""}`,onClick:()=>t("test"),children:[e.jsx("span",{className:"tab-icon",children:""}),e.jsx("span",{className:"tab-text",children:"Test"})]}),e.jsxs("button",{className:`tab-btn ${i==="performance"?"active":""}`,onClick:()=>t("performance"),children:[e.jsx("span",{className:"tab-icon",children:""}),e.jsx("span",{className:"tab-text",children:"Performance"})]})]}),e.jsxs("div",{className:"tab-content",children:[i==="manage"&&fe(),i==="test"&&me(),i==="performance"&&we()]}),e.jsx(i1,{isOpen:m,onClose:()=>{f(!1),H(null),O(null)},initialData:A||void 0,saveButtonText:D?"Save Changes":"Save Draft",onSave:K=>{const ye={...K,id:D||`rp-${Date.now()}`,status:(K.status||"draft").toLowerCase(),performance:{totalRedemptions:0,activeUsers:0,revenueGenerated:"0",conversionRate:"0%"}};l(D?oe=>oe.map(R=>R.id===D?{...R,name:ye.programName,description:ye.description,targetPersonas:ye.targetPersonas||[],linkedProducts:ye.targetProducts||[],status:ye.status,startDate:ye.startDate||"",endDate:ye.endDate||"",benefits:ye.benefits||[]}:R):oe=>[...oe,{id:ye.id,name:ye.programName,description:ye.description,targetPersonas:ye.targetPersonas||[],linkedProducts:ye.targetProducts||[],status:(ye.status||"draft").toLowerCase(),startDate:ye.startDate||"",endDate:ye.endDate||"",benefits:ye.benefits||[],performance:ye.performance}]),H(null),O(null),f(!1)}}),J(),U&&e.jsx(Tx,{programs:n,editingTest:Q,onSaveEdit:K=>P(ye=>ye.map(oe=>oe.id===K.id?K:oe)),onCreateTest:K=>P(ye=>[...ye,K]),onClose:()=>{q(!1),se(null)}})]})}function l1(){const[i,t]=I.useState("all"),[n,l]=I.useState(""),c=[{id:"all",name:"All"},{id:"crm",name:"CRM"},{id:"marketing",name:"Marketing & Comms"},{id:"messaging",name:"Messaging"},{id:"database",name:"Database"},{id:"payment",name:"Payment"},{id:"analytics",name:"Analytics"},{id:"productivity",name:"Productivity"},{id:"collaboration",name:"Collaboration"},{id:"ai",name:"AI & Machine Learning"},{id:"operations",name:"Operations"},{id:"security",name:"Security"}],m=[{id:"hubspot",company:"HubSpot",product:"CRM",description:"All-in-one CRM platform for marketing, sales, and customer service",category:"crm",logo:"",status:"available"},{id:"salesforce",company:"Salesforce",product:"CRM",description:"Leading customer relationship management platform",category:"crm",logo:"",status:"available"},{id:"pipedrive",company:"Pipedrive",product:"CRM",description:"Sales-focused CRM designed for growing teams",category:"crm",logo:"",status:"available"},{id:"zoho",company:"Zoho",product:"CRM",description:"Comprehensive CRM suite for businesses of all sizes",category:"crm",logo:"",status:"available"},{id:"freshworks",company:"Freshworks",product:"CRM",description:"Modern CRM platform with AI-powered insights",category:"crm",logo:"",status:"available"},{id:"twilio",company:"Twilio",product:"Communications API",description:"Cloud communications platform for SMS, voice, and video",category:"marketing",logo:"",status:"available"},{id:"messagebird",company:"MessageBird",product:"Omnichannel Platform",description:"Global messaging platform for SMS, WhatsApp, and more",category:"marketing",logo:"",status:"available"},{id:"mailchimp",company:"Mailchimp",product:"Email Marketing",description:"All-in-one marketing platform for email campaigns",category:"marketing",logo:"",status:"available"},{id:"sendgrid",company:"SendGrid",product:"Email API",description:"Email delivery service for transactional and marketing emails",category:"marketing",logo:"",status:"available"},{id:"klaviyo",company:"Klaviyo",product:"Email Marketing",description:"E-commerce focused email marketing and SMS platform",category:"marketing",logo:"",status:"available"},{id:"intercom",company:"Intercom",product:"Customer Messaging",description:"Customer messaging platform for support and engagement",category:"marketing",logo:"",status:"available"},{id:"drift",company:"Drift",product:"Conversational Marketing",description:"Conversational marketing and sales platform",category:"marketing",logo:"",status:"available"},{id:"slack",company:"Slack",product:"Team Collaboration",description:"Team communication platform for modern workplaces",category:"messaging",logo:"",status:"available"},{id:"microsoft-teams",company:"Microsoft",product:"Teams",description:"Collaboration platform for chat, meetings, and file sharing",category:"messaging",logo:"",status:"available"},{id:"discord",company:"Discord",product:"Communication",description:"Voice, video, and text communication platform",category:"messaging",logo:"",status:"available"},{id:"telegram",company:"Telegram",product:"Messaging",description:"Secure messaging app with bot API capabilities",category:"messaging",logo:"",status:"available"},{id:"whatsapp-business",company:"WhatsApp",product:"Business API",description:"Business messaging platform for customer engagement",category:"messaging",logo:"",status:"available"},{id:"mongodb",company:"MongoDB",product:"Database",description:"NoSQL document database for modern applications",category:"database",logo:"",status:"available"},{id:"postgresql",company:"PostgreSQL",product:"Database",description:"Advanced open-source relational database",category:"database",logo:"",status:"available"},{id:"mysql",company:"MySQL",product:"Database",description:"Popular open-source relational database management system",category:"database",logo:"",status:"available"},{id:"redis",company:"Redis",product:"Cache & Database",description:"In-memory data structure store for caching and messaging",category:"database",logo:"",status:"available"},{id:"firebase",company:"Firebase",product:"Database",description:"Google's mobile and web app development platform",category:"database",logo:"",status:"available"},{id:"supabase",company:"Supabase",product:"Database",description:"Open source Firebase alternative with PostgreSQL",category:"database",logo:"",status:"available"},{id:"stripe",company:"Stripe",product:"Payment Processing",description:"Online payment processing platform for businesses",category:"payment",logo:"",status:"available"},{id:"paypal",company:"PayPal",product:"Payment Gateway",description:"Global payment platform for online transactions",category:"payment",logo:"",status:"available"},{id:"square",company:"Square",product:"Payment Solutions",description:"Payment and point-of-sale solutions for businesses",category:"payment",logo:"",status:"available"},{id:"adyen",company:"Adyen",product:"Payment Platform",description:"Global payment platform for enterprise businesses",category:"payment",logo:"",status:"available"},{id:"braintree",company:"Braintree",product:"Payment Gateway",description:"Payment gateway for mobile and web applications",category:"payment",logo:"",status:"available"},{id:"worldpay",company:"Worldpay",product:"Payment Processing",description:"Global payment technology and processing solutions",category:"payment",logo:"",status:"available"},{id:"google-analytics",company:"Google",product:"Analytics",description:"Web analytics service for tracking website traffic",category:"analytics",logo:"",status:"available"},{id:"mixpanel",company:"Mixpanel",product:"Product Analytics",description:"Product analytics platform for user behavior tracking",category:"analytics",logo:"",status:"available"},{id:"amplitude",company:"Amplitude",product:"Product Analytics",description:"Product analytics platform for digital products",category:"analytics",logo:"",status:"available"},{id:"tableau",company:"Tableau",product:"Data Visualization",description:"Business intelligence and data visualization platform",category:"analytics",logo:"",status:"available"},{id:"looker",company:"Looker",product:"Business Intelligence",description:"Data platform for business intelligence and analytics",category:"analytics",logo:"",status:"available"},{id:"segment",company:"Segment",product:"Customer Data Platform",description:"Customer data platform for collecting and routing data",category:"analytics",logo:"",status:"available"},{id:"hotjar",company:"Hotjar",product:"User Behavior Analytics",description:"Website heatmaps and user behavior analytics",category:"analytics",logo:"",status:"available"},{id:"fullstory",company:"FullStory",product:"Digital Experience Intelligence",description:"Digital experience intelligence platform for user insights",category:"analytics",logo:"",status:"available"},{id:"notion",company:"Notion",product:"Workspace",description:"All-in-one workspace for notes, docs, and collaboration",category:"productivity",logo:"",status:"available"},{id:"asana",company:"Asana",product:"Project Management",description:"Work management platform for teams",category:"productivity",logo:"",status:"available"},{id:"trello",company:"Trello",product:"Task Management",description:"Visual collaboration tool for organizing projects",category:"productivity",logo:"",status:"available"},{id:"monday",company:"Monday.com",product:"Work OS",description:"Work operating system for teams and organizations",category:"productivity",logo:"",status:"available"},{id:"openai",company:"OpenAI",product:"AI Platform",description:"Advanced AI models and APIs for developers",category:"ai",logo:"",status:"available"},{id:"anthropic",company:"Anthropic",product:"Claude AI",description:"AI assistant for complex reasoning and analysis",category:"ai",logo:"",status:"available"},{id:"google-ai",company:"Google",product:"Gemini AI",description:"Multimodal AI model for text and image understanding",category:"ai",logo:"",status:"available"}].filter(y=>{const g=i==="all"||y.category===i,j=y.company.toLowerCase().includes(n.toLowerCase())||y.product.toLowerCase().includes(n.toLowerCase())||y.description.toLowerCase().includes(n.toLowerCase());return g&&j}),f=y=>{console.log(`Adding integration: ${y.company} ${y.product}`),alert(`${y.company} ${y.product} integration setup initiated!`)};return e.jsxs("div",{className:"integrations-page",children:[e.jsxs("div",{className:"integrations-header",children:[e.jsx("h1",{className:"integrations-title",children:"Integrations"}),e.jsx("p",{className:"integrations-subtitle",children:"Connect your favorite tools and platforms to streamline your workflow"})]}),e.jsxs("div",{className:"integrations-layout",children:[e.jsxs("div",{className:"integrations-sidebar",children:[e.jsx("h3",{className:"sidebar-title",children:"CATEGORIES"}),e.jsx("div",{className:"category-list",children:c.map(y=>e.jsx("button",{className:`category-item ${i===y.id?"active":""}`,onClick:()=>t(y.id),children:y.name},y.id))})]}),e.jsxs("div",{className:"integrations-main",children:[e.jsx("div",{className:"search-section",children:e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search for any app...",value:n,onChange:y=>l(y.target.value),className:"search-input"})})}),e.jsx("div",{className:"results-summary",children:e.jsxs("span",{className:"results-count",children:[m.length," integration",m.length!==1?"s":""," found"]})}),e.jsx("div",{className:"integrations-grid",children:m.map(y=>e.jsxs("div",{className:"integration-tile",onClick:()=>f(y),children:[e.jsx("div",{className:"tile-logo",children:e.jsx("span",{className:"logo-icon",children:y.logo})}),e.jsxs("div",{className:"tile-content",children:[e.jsx("h3",{className:"tile-title",children:y.company}),e.jsx("p",{className:"tile-subtitle",children:y.product}),e.jsx("p",{className:"tile-description",children:y.description})]}),e.jsx("div",{className:"tile-action",children:e.jsx("button",{className:"add-btn",children:"Add"})})]},y.id))}),m.length===0&&e.jsxs("div",{className:"no-results",children:[e.jsx("p",{children:"No integrations found matching your criteria."}),e.jsx("button",{className:"clear-filters-btn",onClick:()=>{t("all"),l("")},children:"Clear Filters"})]})]})]})]})}function o1(){return e.jsxs("header",{className:"admin-header",children:[e.jsx("div",{className:"admin-header-left",children:e.jsxs("div",{className:"brand-logo-wrap",children:[e.jsx("span",{className:"brand-text",children:"Dragonpass"}),e.jsx("span",{className:"brand-dot"})]})}),e.jsx("div",{className:"admin-header-right",children:e.jsx("div",{className:"profile-circle",children:e.jsx("span",{className:"profile-initial",children:"N"})})})]})}function c1({isCollapsed:i,onToggle:t}){return e.jsx("nav",{className:`admin-sidebar ${i?"collapsed":""}`,children:e.jsxs("div",{className:"sidebar-content",children:[e.jsx("button",{className:"sidebar-toggle",onClick:t,type:"button",children:e.jsx("span",{className:"toggle-icon",children:i?"":""})}),e.jsxs(Fs,{to:"/admin/dashboard",end:!0,className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Dashboard",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Dashboard"})]}),e.jsxs(Fs,{to:"/admin/book",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Book",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Book"})]}),e.jsxs(Fs,{to:"/admin/booking-management",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Booking Management",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Booking Management"})]}),e.jsxs(Fs,{to:"/admin/revenue-optimizer",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Revenue Optimizer",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Revenue Optimizer"})]}),e.jsxs(Fs,{to:"/admin/rewards",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Reward Orchestrator",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Reward Orchestrator"})]}),e.jsxs(Fs,{to:"/admin/entitlement-management",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Entitlement Package",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Entitlement Package"})]}),e.jsxs(Fs,{to:"/admin/persona-builder",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Persona Builder",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Persona Builder"})]}),e.jsxs(Fs,{to:"/admin/analytics",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Analytics",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Analytics"})]}),e.jsxs(Fs,{to:"/admin/integrations",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Integrations",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Integrations"})]}),e.jsxs(Fs,{to:"/admin/corporate",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Corporate Travel",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Corporate Travel"})]}),e.jsxs(Fs,{to:"/admin/settings",className:({isActive:n})=>n?"sidebar-link active":"sidebar-link","data-title":"Settings",children:[e.jsx("span",{className:"link-icon",children:""}),e.jsx("span",{className:"link-text",children:"Settings"})]})]})})}function d1(){const[i,t]=I.useState([]),[n,l]=I.useState(null),[c,d]=I.useState({name:"",description:"",demographics:"",behaviors:"",goals:"",painPoints:"",dataSources:{yourData:!0,ourData:!0,industryData:!0}}),[m,f]=I.useState(null),[y,g]=I.useState({bookings:{},functions:{},rewards:{}}),j=I.useMemo(()=>i.find(Q=>Q.id===n)||null,[i,n]);function S(){d({name:"",description:"",demographics:"",behaviors:"",goals:"",painPoints:"",dataSources:{yourData:!0,ourData:!0,industryData:!0}})}function A(){if(!c.name.trim())return;const Q=new Date().toISOString();t(j?se=>se.map(z=>z.id===j.id?{...z,...c,updatedAt:Q}:z):se=>se.concat({id:crypto.randomUUID(),createdAt:Q,updatedAt:Q,...c})),S(),l(null)}function O(Q){const se=i.find(z=>z.id===Q);se&&(l(Q),d({name:se.name,description:se.description,demographics:se.demographics,behaviors:se.behaviors,goals:se.goals,painPoints:se.painPoints,dataSources:se.dataSources||{yourData:!0,ourData:!0,industryData:!0}}))}function D(Q){t(se=>se.filter(z=>z.id!==Q)),n===Q&&(S(),l(null))}function H(Q){try{const se=JSON.parse(Q),M=(Array.isArray(se)?se:[se]).map(w=>({id:w.id||crypto.randomUUID(),name:w.name||"Untitled Persona",description:w.description||"",demographics:w.demographics||"",behaviors:w.behaviors||"",goals:w.goals||"",painPoints:w.painPoints||"",dataSources:w.dataSources||{yourData:!0,ourData:!0,industryData:!0},createdAt:w.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}));f(M)}catch{alert("Invalid JSON file")}}function U(){Array.isArray(m)&&m.length&&(t(Q=>{const se=new Map(Q.map(M=>[M.name,M])),z=[...Q];return m.forEach(M=>{const w=se.get(M.name);if(w){const b={...w,...M,id:w.id,updatedAt:new Date().toISOString()},E=z.findIndex(k=>k.id===w.id);z[E]=b}else z.push(M)}),z}),f(null))}function q(Q){const se=Q.target.files?.[0];if(!se)return;const z=new FileReader;z.onload=()=>H(String(z.result||"")),z.readAsText(se)}function Y(Q){const se=["Consider narrowing demographics to top-performing age groups.","Incorporate loyalty tier as a key behavioral segment.","Add industry trend: increased interest in wellness lounges."];alert(`AI Suggestions for ${Q.name}:

- ${se.join(`
- `)}`)}function P(Q){const se=["Increase assignment to Upsell Function A for premium travelers.","Test cross-sell Function C for bookings with long layovers.","Bundle Reward Package Silver+ for mid-tier spenders."];alert(`AI Assignment Ideas for ${Q.name}:

- ${se.join(`
- `)}`)}return e.jsxs("div",{className:"persona-builder-page",children:[e.jsx("div",{className:"page-header",children:e.jsx("div",{className:"header-content",children:e.jsx("h1",{children:"Persona Builder"})})}),e.jsx("div",{className:"page-subtitle",children:e.jsx("p",{children:"Build and manage personas using your data, our data, and industry data."})}),e.jsxs("section",{className:"analytics-section",children:[e.jsx("h2",{className:"section-title",children:"Create / Edit Persona"}),e.jsxs("div",{className:"form-grid persona-form-grid",children:[e.jsxs("label",{children:[e.jsx("span",{children:"Name"}),e.jsx("input",{className:"form-input",value:c.name,onChange:Q=>d({...c,name:Q.target.value}),placeholder:"e.g., Frequent Business Traveler"})]}),e.jsxs("label",{children:[e.jsx("span",{children:"Description"}),e.jsx("textarea",{className:"form-input",value:c.description,onChange:Q=>d({...c,description:Q.target.value}),placeholder:"Short overview of this persona"})]}),e.jsxs("label",{children:[e.jsx("span",{children:"Demographics"}),e.jsx("textarea",{className:"form-input",value:c.demographics,onChange:Q=>d({...c,demographics:Q.target.value}),placeholder:"Age, location, income, etc."})]}),e.jsxs("label",{children:[e.jsx("span",{children:"Behaviors"}),e.jsx("textarea",{className:"form-input",value:c.behaviors,onChange:Q=>d({...c,behaviors:Q.target.value}),placeholder:"Booking patterns, channel preference, loyalty, etc."})]}),e.jsxs("label",{children:[e.jsx("span",{children:"Goals"}),e.jsx("textarea",{className:"form-input",value:c.goals,onChange:Q=>d({...c,goals:Q.target.value}),placeholder:"What this persona aims to achieve"})]}),e.jsxs("label",{children:[e.jsx("span",{children:"Pain Points"}),e.jsx("textarea",{className:"form-input",value:c.painPoints,onChange:Q=>d({...c,painPoints:Q.target.value}),placeholder:"Friction, objections, unmet needs"})]}),e.jsxs("fieldset",{className:"inline-options persona-inline-options",children:[e.jsx("legend",{children:"Data Sources"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:c.dataSources.yourData,onChange:Q=>d({...c,dataSources:{...c.dataSources,yourData:Q.target.checked}})})," Your Data"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:c.dataSources.ourData,onChange:Q=>d({...c,dataSources:{...c.dataSources,ourData:Q.target.checked}})})," Our Data"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:c.dataSources.industryData,onChange:Q=>d({...c,dataSources:{...c.dataSources,industryData:Q.target.checked}})})," Industry Data"]})]})]}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{onClick:A,className:"btn primary",children:j?"Save Changes":"Create Persona"}),j&&e.jsx("button",{onClick:()=>{S(),l(null)},className:"btn secondary",children:"Cancel Edit"})]})]}),e.jsxs("section",{className:"analytics-section",children:[e.jsx("h2",{className:"section-title",children:"Existing Personas"}),i.length===0&&e.jsx("p",{className:"page-subtitle",style:{margin:0},children:"No personas yet. Create one above or import."}),e.jsx("div",{className:"programs-grid",children:i.map(Q=>e.jsxs("div",{className:"program-card",children:[e.jsxs("div",{className:"program-header",children:[e.jsxs("div",{className:"program-info",children:[e.jsx("h4",{children:Q.name}),e.jsx("p",{children:Q.description||""})]}),e.jsx("div",{className:"program-meta",children:e.jsxs("span",{className:"chip chip-outline",children:["Updated ",new Date(Q.updatedAt).toLocaleString()]})})]}),e.jsxs("div",{className:"program-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Demographics:"}),e.jsx("span",{className:"detail-value",children:Q.demographics||""})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Behaviors:"}),e.jsx("span",{className:"detail-value",children:Q.behaviors||""})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Goals:"}),e.jsx("span",{className:"detail-value",children:Q.goals||""})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Pain Points:"}),e.jsx("span",{className:"detail-value",children:Q.painPoints||""})]})]}),e.jsxs("div",{className:"program-actions",children:[e.jsx("button",{onClick:()=>O(Q.id),className:"action-btn secondary",children:"Edit"}),e.jsx("button",{onClick:()=>Y(Q),className:"action-btn secondary",children:"AI Improve"}),e.jsx("button",{onClick:()=>P(Q),className:"action-btn secondary",children:"AI Assignments"}),e.jsx("button",{onClick:()=>D(Q.id),className:"action-btn secondary",children:"Delete"})]})]},Q.id))})]}),e.jsxs("section",{className:"analytics-section",children:[e.jsx("h2",{className:"section-title",children:"Import Personas"}),e.jsx("p",{className:"page-subtitle",style:{margin:"0 0 12px 0"},children:"Upload a JSON file containing a persona or an array of personas."}),e.jsx("input",{className:"form-input",type:"file",accept:"application/json",onChange:q}),Array.isArray(m)&&m.length>0&&e.jsxs("div",{className:"preview-box",style:{marginTop:16},children:[e.jsx("div",{className:"preview-title",children:"Preview"}),e.jsx("div",{className:"preview-content",children:e.jsx("div",{className:"programs-grid",children:m.map(Q=>e.jsx("div",{className:"program-card",children:e.jsxs("div",{className:"program-header",children:[e.jsxs("div",{className:"program-info",children:[e.jsx("h4",{children:Q.name}),e.jsx("p",{children:Q.description||""})]}),e.jsx("div",{className:"program-meta",children:e.jsxs("span",{className:"chip chip-outline",children:["Sources: ",Object.entries(Q.dataSources||{}).filter(([,se])=>!!se).map(([se])=>se).join(", ")||"None"]})})]})},Q.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:0,borderTop:"none",marginTop:12},children:[e.jsx("button",{onClick:U,className:"btn primary",children:"Import"}),e.jsx("button",{onClick:()=>f(null),className:"btn secondary",children:"Cancel"})]})]})]}),e.jsxs("section",{className:"analytics-section",children:[e.jsx("h2",{className:"section-title",children:"Assignment Tracking"}),e.jsx("p",{className:"page-subtitle",style:{margin:"0 0 12px 0"},children:"Track where personas are assigned across Bookings, Upsell/Cross-sell functions, and Reward packages."}),e.jsxs("div",{className:"metrics-grid",style:{gridTemplateColumns:"repeat(3, 1fr)"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Bookings"}),e.jsx("p",{className:"page-subtitle",style:{margin:0},children:"Coming soon: View bookings tagged with personas."})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"Upsell / Cross-sell Functions"}),e.jsx("p",{className:"page-subtitle",style:{margin:0},children:"Coming soon: See which functions target each persona."})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"Reward Packages"}),e.jsx("p",{className:"page-subtitle",style:{margin:0},children:"Coming soon: See reward packages linked to personas."})]})]})]})]})}function u1(){const[i,t]=I.useState("products"),[n,l]=I.useState({mobileApp:{enabled:!0,name:"Mobile App (WL)"},website:{enabled:!0,name:"Website (WL)"},api:{enabled:!1,name:"API"},digitalConcierge:{enabled:!0,name:"Digital Concierge Chat"}}),[c,d]=I.useState({marketing:{enabled:!0,name:"Marketing Package"},revenueOptimizer:{enabled:!0,name:"Revenue Optimizer Package"},communications:{enabled:!0,name:"Communications Package"},analytics:{enabled:!0,name:"Analytics Package"},corporateTravel:{enabled:!0,name:"Corporate Travel Package"},dutyOfCare:{enabled:!0,name:"Duty of Care Package"}}),[m,f]=I.useState({flights:!0,hotels:!0,tickets:!0,esims:!0,airportLounge:!0,airportTransfer:!0,airportDining:!0,airportFastTrack:!0,healthWellness:!0}),[y,g]=I.useState(!1),[j,S]=I.useState(!1),[A,O]=I.useState(null),D={flights:"Flights",hotels:"Hotels",tickets:"Tickets",esims:"eSIMs",airportLounge:"Airport Lounge",airportTransfer:"Airport Transfer",airportDining:"Airport Dining",airportFastTrack:"Airport Fast Track",healthWellness:"Health & Wellness"},H=b=>{O({type:"product",key:b,value:!n[b].enabled,name:n[b].name}),g(!0)},U=b=>{c[b].enabled?(O({type:"middleware",key:b,value:!1,name:c[b].name}),S(!0)):d(E=>({...E,[b]:{...E[b],enabled:!0}}))},q=b=>{f(E=>({...E,[b]:!E[b]})),O({type:"category",key:b,value:!m[b],name:D[b],scope:"global"}),g(!0)},Y=()=>{A.type==="product"?l(b=>({...b,[A.key]:{...b[A.key],enabled:A.value}})):A.type==="middleware"&&d(b=>({...b,[A.key]:{...b[A.key],enabled:A.value}})),g(!1),S(!1),O(null)},P=()=>{g(!1),S(!1),O(null)},Q=[{id:"products",label:"Products",icon:"",description:"Manage your live products"},{id:"middleware",label:"Components",icon:"",description:"System middleware packages"},{id:"categories",label:"Categories",icon:"",description:"Travel & lifestyle offerings"},{id:"general",label:"General",icon:"",description:"Branding & customization"}],se={mobileApp:{icon:"",name:"Mobile App (WL)",description:"White-label mobile application for iOS and Android platforms",features:["Native iOS & Android apps","Push notifications","Offline functionality","Biometric authentication"]},website:{icon:"",name:"Website (WL)",description:"White-label responsive web platform",features:["Responsive design","SEO optimized","Progressive Web App","Multi-language support"]},api:{icon:"",name:"API",description:"RESTful API for third-party integrations",features:["REST & GraphQL endpoints","Rate limiting","Authentication","Real-time webhooks"]},digitalConcierge:{icon:"",name:"Digital Concierge Chat",description:"AI-powered customer service and booking assistance",features:["24/7 AI chat support","Booking assistance","Multi-language","Human handoff"]}},z={marketing:{icon:"",name:"Marketing Package",description:"Campaign management, email marketing, and promotional tools",features:["Email campaigns","Push notifications","A/B testing","Customer segmentation"]},revenueOptimizer:{icon:"",name:"Revenue Optimizer Package",description:"Dynamic pricing, upselling, and revenue enhancement tools",features:["Dynamic pricing","Upsell recommendations","Revenue analytics","Profit optimization"]},communications:{icon:"",name:"Communications Package",description:"Multi-channel communication and notification system",features:["SMS notifications","Email templates","WhatsApp integration","Communication logs"]},analytics:{icon:"",name:"Analytics Package",description:"Advanced reporting, insights, and business intelligence",features:["Real-time dashboards","Custom reports","Data export","Predictive analytics"]},corporateTravel:{icon:"",name:"Corporate Travel Package",description:"Business travel management and expense tracking",features:["Expense tracking","Corporate policies","Approval workflows","Travel reporting"]},dutyOfCare:{icon:"",name:"Duty of Care Package",description:"Traveler safety, tracking, and emergency assistance",features:["Real-time tracking","Emergency alerts","Safety notifications","Crisis management"]}},M={flights:{icon:"",name:"Flights",description:"Flight bookings and upgrades"},hotels:{icon:"",name:"Hotels",description:"Hotel reservations and room upgrades"},tickets:{icon:"",name:"Tickets",description:"Event and entertainment tickets"},esims:{icon:"",name:"eSIMs",description:"International mobile connectivity"},airportLounge:{icon:"",name:"Airport Lounge",description:"Premium airport lounge access"},airportTransfer:{icon:"",name:"Airport Transfer",description:"Ground transportation services"},airportDining:{icon:"",name:"Airport Dining",description:"Airport restaurant reservations"},airportFastTrack:{icon:"",name:"Airport Fast Track",description:"Priority security and immigration"},healthWellness:{icon:"",name:"Health & Wellness",description:"Spa and wellness services"}},w=()=>{switch(i){case"products":return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h2",{children:" Product Management"}),e.jsx("p",{children:"Control which products are live in your system. Changes require account manager approval."})]}),e.jsx("div",{className:"enhanced-product-grid",children:Object.entries(n).map(([b,E])=>{const k=se[b];return e.jsxs("div",{className:"enhanced-product-card",children:[e.jsxs("div",{className:"product-card-header",children:[e.jsx("div",{className:"product-icon",children:k.icon}),e.jsxs("div",{className:"product-title-area",children:[e.jsx("h3",{children:k.name}),e.jsx("span",{className:`status-badge ${E.enabled?"enabled":"disabled"}`,children:E.enabled?"Live":"Inactive"})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:E.enabled,onChange:()=>H(b)}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsx("p",{className:"product-description",children:k.description}),e.jsxs("div",{className:"product-features",children:[e.jsx("h4",{children:"Key Features:"}),e.jsx("ul",{children:k.features.map((V,T)=>e.jsx("li",{children:V},T))})]})]},b)})})]});case"middleware":return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h2",{children:" Middleware Components"}),e.jsx("p",{children:"Manage optional system components. All components are enabled by default but can be disabled if not needed."})]}),e.jsx("div",{className:"enhanced-middleware-grid",children:Object.entries(c).map(([b,E])=>{const k=z[b];return e.jsxs("div",{className:"enhanced-middleware-card",children:[e.jsxs("div",{className:"middleware-card-header",children:[e.jsx("div",{className:"middleware-icon",children:k.icon}),e.jsxs("div",{className:"middleware-title-area",children:[e.jsx("h3",{children:k.name}),e.jsx("span",{className:`status-badge ${E.enabled?"enabled":"disabled"}`,children:E.enabled?"Active":"Inactive"})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:E.enabled,onChange:()=>U(b)}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsx("p",{className:"middleware-description",children:k.description}),e.jsxs("div",{className:"middleware-features",children:[e.jsx("h4",{children:"Includes:"}),e.jsx("ul",{children:k.features.map((V,T)=>e.jsx("li",{children:V},T))})]})]},b)})})]});case"categories":return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h2",{children:" Category Management"}),e.jsx("p",{children:"Configure which travel and lifestyle categories to offer across your products."})]}),e.jsxs("div",{className:"categories-section",children:[e.jsx("h3",{children:"Available Categories"}),e.jsx("div",{className:"enhanced-categories-grid",children:Object.entries(m).map(([b,E])=>{const k=M[b];return e.jsxs("label",{className:"enhanced-category-item",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:()=>q(b)}),e.jsxs("div",{className:"category-content",children:[e.jsx("div",{className:"category-icon",children:k.icon}),e.jsxs("div",{className:"category-info",children:[e.jsx("span",{className:"category-name",children:k.name}),e.jsx("span",{className:"category-desc",children:k.description})]})]})]},b)})})]})]});case"general":return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h2",{children:" General Settings"}),e.jsx("p",{children:"Customize your branding, appearance, and system preferences."})]}),e.jsxs("div",{className:"enhanced-settings-grid",children:[e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("div",{className:"settings-icon",children:""}),e.jsx("h3",{children:"Brand Identity"})]}),e.jsxs("div",{className:"settings-card-content",children:[e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"logo-upload",className:"setting-label",children:"Company Logo"}),e.jsx("p",{className:"setting-description",children:"Upload your company logo (recommended: PNG, 200x60px)"}),e.jsxs("div",{className:"enhanced-file-upload-area",children:[e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*"}),e.jsxs("div",{className:"upload-placeholder",children:[e.jsx("div",{className:"upload-icon",children:""}),e.jsxs("p",{children:[e.jsx("strong",{children:"Click to upload"})," or drag and drop"]}),e.jsx("span",{children:"PNG, JPG up to 5MB"})]})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{className:"setting-label",children:"Color Palette"}),e.jsx("p",{className:"setting-description",children:"Customize your brand colors to match your identity"}),e.jsxs("div",{className:"enhanced-color-palette",children:[e.jsxs("div",{className:"color-section",children:[e.jsx("h4",{children:"Primary Colors"}),e.jsxs("div",{className:"color-options",children:[e.jsxs("div",{className:"color-option active",children:[e.jsx("div",{className:"color-preview",style:{background:"var(--brand-primary)"}}),e.jsx("span",{children:"Navy Blue"}),e.jsx("button",{className:"color-edit-btn",children:""})]}),e.jsxs("div",{className:"color-option active",children:[e.jsx("div",{className:"color-preview",style:{background:"var(--brand-accent)"}}),e.jsx("span",{children:"Accent Red"}),e.jsx("button",{className:"color-edit-btn",children:""})]})]})]}),e.jsxs("button",{className:"customize-colors-btn enhanced",children:[e.jsx("span",{children:""}),"Advanced Color Customization"]})]})]})]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("div",{className:"settings-icon",children:""}),e.jsx("h3",{children:"Localization"})]}),e.jsxs("div",{className:"settings-card-content",children:[e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{className:"setting-label",children:"Default Language"}),e.jsxs("select",{className:"form-select",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{className:"setting-label",children:"Default Currency"}),e.jsxs("select",{className:"form-select",children:[e.jsx("option",{value:"GBP",children:"British Pound ()"}),e.jsx("option",{value:"USD",children:"US Dollar ($)"}),e.jsx("option",{value:"EUR",children:"Euro ()"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{className:"setting-label",children:"Time Zone"}),e.jsxs("select",{className:"form-select",children:[e.jsx("option",{value:"GMT",children:"GMT (London)"}),e.jsx("option",{value:"EST",children:"EST (New York)"}),e.jsx("option",{value:"PST",children:"PST (Los Angeles)"})]})]})]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("div",{className:"settings-icon",children:""}),e.jsx("h3",{children:"Security & Privacy"})]}),e.jsxs("div",{className:"settings-card-content",children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{className:"checkbox-container",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{className:"checkbox-label",children:"Two-factor authentication"})]}),e.jsx("p",{className:"setting-description",children:"Require 2FA for admin access"})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{className:"checkbox-container",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{className:"checkbox-label",children:"Data encryption"})]}),e.jsx("p",{className:"setting-description",children:"Encrypt sensitive customer data"})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{className:"checkbox-container",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{className:"checkbox-label",children:"Marketing emails"})]}),e.jsx("p",{className:"setting-description",children:"Send product updates and news"})]})]})]})]})]});default:return null}};return e.jsxs("div",{className:"dashboard-container",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h1",{children:"Settings"}),e.jsx("p",{className:"dashboard-subtitle",children:"Manage your system configuration and preferences"})]}),e.jsx("div",{className:"settings-tabs",children:Q.map(b=>e.jsxs("button",{className:`tab-button ${i===b.id?"active":""}`,onClick:()=>t(b.id),children:[e.jsx("span",{className:"tab-icon",children:b.icon}),e.jsxs("div",{className:"tab-text",children:[e.jsx("span",{className:"tab-label",children:b.label}),e.jsx("span",{className:"tab-description",children:b.description})]})]},b.id))}),w(),y&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h3",{children:"Change Request Review"}),e.jsxs("p",{children:["You have requested to ",A?.value?"enable":"disable"," ",e.jsx("strong",{children:A?.name}),A?.scope&&A?.scope!=="global"?` for ${n[A.scope]?.name}`:"","."]}),e.jsx("p",{className:"review-notice",children:e.jsx("strong",{children:"Your account manager will reach out to you directly to manage this change implementation."})}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:P,children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:Y,children:"Confirm Request"})]})]})}),j&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h3",{children:"Are you sure?"}),e.jsxs("p",{children:["You are about to disable ",e.jsx("strong",{children:A?.name}),". This will remove this functionality from your system."]}),e.jsx("p",{className:"confirm-notice",children:"Your account manager will be notified of this change."}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:P,children:"Cancel"}),e.jsx("button",{className:"btn-danger",onClick:Y,children:"Disable Component"})]})]})})]})}function h1(){const[i,t]=I.useState({from:"LAX",to:"JFK",departDate:"2024-02-15",returnDate:"2024-02-22",passengers:1,class:"economy"}),[n,l]=I.useState([{id:1,airline:"United Airlines",flight:"UA 123",departure:"08:30",arrival:"16:45",duration:"5h 15m",stops:"Non-stop",price:485,originalPrice:650,pointsEarned:2425,benefits:{seatSelection:{included:!0,value:35,description:"Free seat selection"},baggage:{included:!0,value:60,description:"Free checked bag (50lbs)"},lounge:{included:!0,value:45,description:"United Club access"},cancellation:{included:!0,value:0,description:"Free cancellation up to 24h"},pointsMultiplier:5}},{id:2,airline:"Delta Air Lines",flight:"DL 456",departure:"10:15",arrival:"18:30",duration:"5h 15m",stops:"Non-stop",price:520,originalPrice:580,pointsEarned:1560,benefits:{seatSelection:{included:!1,value:35,description:"Seat selection fee applies"},baggage:{included:!0,value:60,description:"Free checked bag (50lbs)"},lounge:{included:!1,value:45,description:"SkyClub access not included"},cancellation:{included:!0,value:0,description:"Free cancellation up to 24h"},pointsMultiplier:3}},{id:3,airline:"American Airlines",flight:"AA 789",departure:"14:20",arrival:"22:35",duration:"5h 15m",stops:"Non-stop",price:445,originalPrice:525,pointsEarned:1335,benefits:{seatSelection:{included:!1,value:35,description:"Seat selection fee applies"},baggage:{included:!1,value:60,description:"Baggage fees apply"},lounge:{included:!1,value:45,description:"Admirals Club access not included"},cancellation:{included:!1,value:25,description:"Cancellation fees apply"},pointsMultiplier:3}}]),c={name:"DragonPass Premium",tier:"Gold",pointsBalance:34500},d=f=>{const{name:y,value:g}=f.target;t(j=>({...j,[y]:g}))},m=f=>{let y=0;return Object.values(f).forEach(g=>{typeof g=="object"&&g.included&&g.value>0&&(y+=g.value)}),y};return e.jsxs("div",{className:"book-flights-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{className:"page-title",children:"Book Flights"}),e.jsx("p",{className:"page-subtitle",children:"Search and book flights with exclusive DragonPass member benefits"}),e.jsxs("div",{className:"reward-program-status",children:[e.jsxs("div",{className:"status-card",children:[e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:"program-icon",children:""}),e.jsxs("div",{className:"program-info",children:[e.jsx("span",{className:"program-name",children:c.name}),e.jsxs("span",{className:"program-tier",children:[c.tier," Member"]})]})]}),e.jsxs("div",{className:"points-balance",children:[e.jsx("span",{className:"points-value",children:c.pointsBalance.toLocaleString()}),e.jsx("span",{className:"points-label",children:"points available"})]})]}),e.jsxs("div",{className:"member-benefits",children:[e.jsx("div",{className:"benefit-chip active",children:"5x Points"}),e.jsx("div",{className:"benefit-chip active",children:"Free Lounge"}),e.jsx("div",{className:"benefit-chip active",children:"Free Bags"}),e.jsx("div",{className:"benefit-chip active",children:"Seat Selection"})]})]})]})}),e.jsx("div",{className:"search-container",children:e.jsxs("div",{className:"search-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"From"}),e.jsxs("select",{name:"from",value:i.from,onChange:d,className:"search-select",children:[e.jsx("option",{value:"LAX",children:"Los Angeles (LAX)"}),e.jsx("option",{value:"JFK",children:"New York (JFK)"}),e.jsx("option",{value:"LHR",children:"London (LHR)"}),e.jsx("option",{value:"NRT",children:"Tokyo (NRT)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"To"}),e.jsxs("select",{name:"to",value:i.to,onChange:d,className:"search-select",children:[e.jsx("option",{value:"JFK",children:"New York (JFK)"}),e.jsx("option",{value:"LAX",children:"Los Angeles (LAX)"}),e.jsx("option",{value:"LHR",children:"London (LHR)"}),e.jsx("option",{value:"NRT",children:"Tokyo (NRT)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Departure"}),e.jsx("input",{type:"date",name:"departDate",value:i.departDate,onChange:d,className:"search-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Return"}),e.jsx("input",{type:"date",name:"returnDate",value:i.returnDate,onChange:d,className:"search-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Passengers"}),e.jsxs("select",{name:"passengers",value:i.passengers,onChange:d,className:"search-select",children:[e.jsx("option",{value:"1",children:"1 Passenger"}),e.jsx("option",{value:"2",children:"2 Passengers"}),e.jsx("option",{value:"3",children:"3 Passengers"}),e.jsx("option",{value:"4",children:"4 Passengers"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsxs("select",{name:"class",value:i.class,onChange:d,className:"search-select",children:[e.jsx("option",{value:"economy",children:"Economy"}),e.jsx("option",{value:"premium",children:"Premium Economy"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"first",children:"First"})]})]})]}),e.jsxs("button",{className:"search-btn",children:[e.jsx("span",{className:"search-icon",children:""}),"Search Flights"]})]})}),e.jsxs("div",{className:"flights-container",children:[e.jsxs("div",{className:"results-header",children:[e.jsx("h2",{children:"Available Flights"}),e.jsxs("p",{className:"results-subtitle",children:[n.length," flights found from ",i.from," to ",i.to]})]}),e.jsx("div",{className:"flights-list",children:n.map(f=>e.jsxs("div",{className:"flight-card",children:[e.jsxs("div",{className:"flight-header",children:[e.jsxs("div",{className:"airline-info",children:[e.jsx("span",{className:"airline-logo",children:""}),e.jsxs("div",{className:"airline-details",children:[e.jsx("span",{className:"airline-name",children:f.airline}),e.jsx("span",{className:"flight-number",children:f.flight})]})]}),e.jsxs("div",{className:"flight-times",children:[e.jsxs("div",{className:"time-info",children:[e.jsx("span",{className:"time",children:f.departure}),e.jsx("span",{className:"airport",children:i.from})]}),e.jsxs("div",{className:"flight-path",children:[e.jsx("span",{className:"duration",children:f.duration}),e.jsxs("div",{className:"flight-line",children:[e.jsx("div",{className:"line"}),e.jsx("span",{className:"plane-icon",children:""})]}),e.jsx("span",{className:"stops",children:f.stops})]}),e.jsxs("div",{className:"time-info",children:[e.jsx("span",{className:"time",children:f.arrival}),e.jsx("span",{className:"airport",children:i.to})]})]}),e.jsxs("div",{className:"price-info",children:[e.jsxs("div",{className:"price-details",children:[e.jsxs("span",{className:"current-price",children:["$",f.price]}),e.jsxs("span",{className:"original-price",children:["$",f.originalPrice]}),e.jsxs("span",{className:"savings",children:["Save $",f.originalPrice-f.price]})]}),e.jsxs("div",{className:"points-earned",children:[e.jsx("span",{className:"points-icon",children:""}),e.jsxs("span",{className:"points-text",children:["Earn ",f.pointsEarned.toLocaleString()," points"]})]})]})]}),e.jsx("div",{className:"flight-benefits",children:e.jsxs("div",{className:"benefits-row",children:[e.jsxs("div",{className:"quick-benefits",children:[e.jsx("span",{className:"benefits-label",children:"Your DragonPass Benefits:"}),e.jsxs("div",{className:"benefit-tags",children:[f.benefits.seatSelection.included&&e.jsxs("span",{className:"benefit-tag included",children:[e.jsx("span",{className:"tag-icon",children:""}),"Free Seats"]}),f.benefits.baggage.included&&e.jsxs("span",{className:"benefit-tag included",children:[e.jsx("span",{className:"tag-icon",children:""}),"Free Bags"]}),f.benefits.lounge.included&&e.jsxs("span",{className:"benefit-tag included",children:[e.jsx("span",{className:"tag-icon",children:""}),"Lounge Access"]}),f.benefits.cancellation.included&&e.jsxs("span",{className:"benefit-tag included",children:[e.jsx("span",{className:"tag-icon",children:""}),"Free Cancellation"]}),e.jsxs("span",{className:"benefit-tag points",children:[e.jsx("span",{className:"tag-icon",children:""}),f.benefits.pointsMultiplier,"x Points"]})]})]}),m(f.benefits)>0&&e.jsxs("div",{className:"savings-badge",children:[e.jsx("span",{className:"savings-label",children:"You Save"}),e.jsxs("span",{className:"savings-amount",children:["$",m(f.benefits)]})]})]})}),e.jsx("div",{className:"flight-actions",children:e.jsxs("button",{className:"select-flight-btn",children:["Select Flight",e.jsx("span",{className:"btn-arrow",children:""})]})})]},f.id))})]})]})}function m1(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"admin-nav-bar",children:e.jsxs("div",{className:"admin-nav-content",children:[e.jsx("div",{}),e.jsx(Km,{to:"/admin/dashboard",className:"admin-portal-btn",children:"Admin Portal"})]})}),e.jsx("section",{className:"dp-hero",children:e.jsxs("div",{className:"dp-hero-content",children:[e.jsxs("h1",{children:["Your pass to more",e.jsx("br",{}),"travel & lifestyle experiences"]}),e.jsx("p",{className:"dp-hero-sub",children:"Explore our services"}),e.jsx("a",{href:"#benefits",className:"dp-cta",children:"Explore Benefits"})]})}),e.jsx("section",{className:"dp-benefits",children:e.jsxs("div",{className:"section-content",children:[e.jsx("h2",{children:"Dragonpass is your all-in-one pass to amazing travel and lifestyle benefits"}),e.jsxs("div",{className:"dp-benefits-grid",children:[e.jsxs("div",{className:"dp-benefit-card",children:[e.jsx("h3",{children:"2,500+ Experiences"}),e.jsx("p",{children:"Elevate your journey with access to airport lounges, dining, fitness, and more."})]}),e.jsxs("div",{className:"dp-benefit-card",children:[e.jsx("h3",{children:"More Choice, More Access"}),e.jsx("p",{children:"Unlock premium global benefits and rewarding experiences across travel and lifestyle."})]}),e.jsxs("div",{className:"dp-benefit-card",children:[e.jsx("h3",{children:"For Travellers & Businesses"}),e.jsx("p",{children:"Enhance your offering or enjoy perks as a member, business, or supplier."})]})]})]})}),e.jsx("section",{className:"dp-app-download",children:e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"dp-app-content",children:[e.jsx("div",{className:"dp-qr-placeholder",children:"[QR Code]"}),e.jsxs("div",{children:[e.jsx("h3",{children:"Download the app"}),e.jsx("p",{children:"Scan the QR code with your phone camera to download the app."}),e.jsxs("div",{className:"dp-app-links",children:[e.jsx("a",{href:"#",className:"dp-app-link",children:"App Store"}),e.jsx("a",{href:"#",className:"dp-app-link",children:"Google Play"})]})]})]})})}),e.jsx("section",{className:"dp-business-partners",children:e.jsxs("div",{className:"section-content dp-business-partners-inner",children:[e.jsxs("div",{className:"dp-business-card",children:[e.jsx("h3",{children:"Grow your business with our flexible solutions"}),e.jsx("p",{children:"Your pass to providing the best in customer rewards. Offer travel and lifestyle experiences to your customers and reward loyalty."}),e.jsx("a",{href:"#",className:"dp-cta-secondary",children:"Discover More"})]}),e.jsxs("div",{className:"dp-business-card",children:[e.jsx("h3",{children:"Your pass to reaching millions of new customers"}),e.jsx("p",{children:"Boost your business by tapping into millions of members across our global community as a Dragonpass supplier."}),e.jsx("a",{href:"#",className:"dp-cta-secondary",children:"Partner with Us"})]})]})}),e.jsx("footer",{className:"dp-footer",children:e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"dp-footer-links",children:[e.jsx("a",{href:"#",children:"Home"}),e.jsx("a",{href:"#",children:"About"}),e.jsx("a",{href:"#",children:"Explore Benefits"}),e.jsx("a",{href:"#",children:"Contact"})]}),e.jsxs("div",{className:"dp-footer-social",children:[e.jsx("span",{children:"[LinkedIn]"}),e.jsx("span",{children:"[Instagram]"}),e.jsx("span",{children:"[Facebook]"}),e.jsx("span",{children:"[TikTok]"})]}),e.jsx("div",{className:"dp-footer-copy",children:" 2024 Your Company. All rights reserved."})]})})]})}function p1(){const[i,t]=I.useState(!1),n=()=>{t(!i)};return e.jsxs("div",{className:"admin-portal-layout",children:[e.jsx(o1,{}),e.jsxs("div",{className:"admin-main-area",children:[e.jsx(c1,{isCollapsed:i,onToggle:n}),e.jsx("main",{className:`admin-content ${i?"sidebar-collapsed":""}`,children:e.jsx(tT,{})})]})]})}function f1(){const i=window.location.hostname==="nickdragonpass.github.io"?"/travel-craft-hub":"";return e.jsx(AT,{basename:i,children:e.jsxs(aT,{children:[e.jsx(zs,{path:"/",element:e.jsx(m1,{})}),e.jsxs(zs,{path:"/admin",element:e.jsx(p1,{}),children:[e.jsx(zs,{path:"/admin/dashboard",element:e.jsx(OT,{})}),e.jsx(zs,{path:"/admin/book",element:e.jsx(h1,{})}),e.jsx(zs,{path:"/admin/analytics",element:e.jsx(VT,{})}),e.jsx(zs,{path:"/admin/booking-management",element:e.jsx(zT,{})}),e.jsx(zs,{path:"/admin/revenue-optimizer",element:e.jsx(e1,{})}),e.jsx(zs,{path:"/admin/rewards",element:e.jsx(r1,{})}),e.jsx(zs,{path:"/admin/integrations",element:e.jsx(l1,{})}),e.jsx(zs,{path:"/admin/persona-builder",element:e.jsx(d1,{})}),e.jsx(zs,{path:"/admin/settings",element:e.jsx(u1,{})})]})]})})}d0.createRoot(document.getElementById("root")).render(e.jsx(I.StrictMode,{children:e.jsx(f1,{})}));
